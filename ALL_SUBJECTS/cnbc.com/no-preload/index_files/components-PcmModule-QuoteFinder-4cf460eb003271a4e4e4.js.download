"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6961],{59276:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var r=n(15671),a=n(43144),o=n(97326),c=n(60136),s=n(82963),l=n(61120),u=n(4942),i=n(67294),m=n(45697),h=n.n(m),d=n(67464),f=n(13034),p=n(73438),S=n(97173),y=n(15861),g=n(29439),v=n(64687),R=n.n(v),b=n(86388),E=n.n(b),Z=n(35640),k=n(50533),Q=n(31476),T=n(90039),N=n(3704);const C={electricblue:"#1ff1c8",orange:"#f87121",resultContainer:"QuoteResult-resultContainer",symbol:"QuoteResult-symbol",container:"QuoteResult-container QuoteResult-resultContainer",leftSide:"QuoteResult-leftSide",leftSideNotSearchResult:"QuoteResult-leftSideNotSearchResult",rightSide:"QuoteResult-rightSide",name:"QuoteResult-name",watchlistButton:"QuoteResult-watchlistButton",unchanged:"QuoteResult-unchanged",value:"QuoteResult-value",negValue:"QuoteResult-negValue QuoteResult-value",price:"QuoteResult-price"};function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var A=function(e){(0,c.Z)(n,e);var t=q(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return e=t.call.apply(t,[this].concat(c)),(0,u.Z)((0,o.Z)(e),"startPolling",(function(){var t=e.props,n=t.dispatch,r=t.symbol;e.timeout=setTimeout((function(){n((0,Q.Sf)(r)),n((0,Q.hm)(r,"quick",!1))}),e.props.pollRate)})),e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.symbol;t((0,Q.hm)(n,"quick",!1))}},{key:"componentWillReceiveProps",value:function(e){this.props.marketData!==e.marketData&&(clearTimeout(this.timeout),e.isFetching||this.startPolling())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e,t=this.props,n=t.marketData,r=t.symbol,a=t.name,o=t.isSearchResult,c=t.link,s=t.onSelect,l=Array.isArray(n)?n[0]:n,m=(0,p.ML)(l.last),h="UNCH"===l.change?(0,p.ML)("0"):(0,p.ML)(l.change),f="UNCH"===l.change_pct?(0,p.ML)("0"):(0,p.ML)(l.change_pct),S=i.createElement("div",{className:C.rightSide},0===h&&0===f?i.createElement("div",{className:C.unchanged},"UNCH"):i.createElement("div",{className:C.data},i.createElement("div",{className:C.price},(0,T.vw)(m,2)),i.createElement("div",{className:h<0?C.negValue:C.value},h>0&&"+",(0,T.vw)(h,2)," (".concat((0,T.vw)(f,2),"%)")))),y=(0,d.Z)((e={},(0,u.Z)(e,C.leftSide,!0),(0,u.Z)(e,C.leftSideNotSearchResult,!o),e));return i.createElement("div",{className:o?C.resultContainer:C.container},i.createElement("div",{className:y},i.createElement(N.Z,{to:c,onClick:function(){s({symbol:r})}},i.createElement("div",{className:C.symbol},r),a&&i.createElement("div",{className:C.name},a))),l&&l.change&&l.change_pct&&S)}}]),n}(i.Component);A.defaultProps={pollRate:1e4,name:null,isSearchResult:!1,marketData:{},isFetching:!1,link:"",onSelect:function(){}},A.propTypes={symbol:h().string.isRequired,link:h().string,name:h().string,marketData:h().object,isFetching:h().bool,dispatch:h().func.isRequired,pollRate:h().number,isSearchResult:h().bool,onSelect:h().func};const F=(0,k.$j)((function(e,t){var n=e.dataByQuote[t.symbol]||{isFetching:!0,marketData:{}},r=n.isFetching;return{marketData:n.marketData,isFetching:r}}))(A),D="AutoSuggestList-container",w="AutoSuggestList-viewResults";var L=Z.Z.getProperties().SYMLOOKUP_URI||"https://symlookup.cnbc.com/symlookup.do",P=function(e){var t=e.searchTerm,n=e.handleSearch,r=e.propFetch,a=e.onSelectQuote,o=e.template,c=e.module,s=e.onResultsReturned,l=(0,i.useState)({fetchedSearchTerm:"",matches:[]}),u=(0,g.Z)(l,2),m=u[0],h=u[1],d=function(){var e=(0,y.Z)(R().mark((function e(){var n,a,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("".concat(L,"?output=json&prefix=").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).length>1&&(o=a.slice(1).map((function(e){return{symbol:e.symbolName,name:e.companyName}})),h({fetchedSearchTerm:t,matches:o}),s&&s(o));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){m.fetchedSearchTerm!==t&&d()}));var f="".concat((0,p.zW)(o),"-").concat((0,p.zW)(c),"-autoSuggestList");return i.createElement("div",{className:D,id:f},m.matches.slice(0,3).map((function(e){return i.createElement(F,{key:e.symbol,symbol:e.symbol,name:e.name,link:"/quotes/".concat(e.symbol,"?qfsearchterm=").concat(t),isSearchResult:!0,onSelect:a})})),i.createElement("button",{className:w,onClick:n},"VIEW QUOTE RESULTS FOR ",'"'.concat(t.toUpperCase(),'"')," ",i.createElement("span",{className:"icon-short-arrow-right"})))};P.defaultProps={propFetch:E(),onSelectQuote:function(){},template:"",module:"",onResultsReturned:null},P.propTypes={propFetch:h().func.isRequired,searchTerm:h().string.isRequired,handleSearch:h().func.isRequired,onSelectQuote:h().func,template:h().string,module:h().string,onResultsReturned:h().func};const O=P,_={electricblue:"#1ff1c8",orange:"#f87121",title:"QuoteList-title"};var U=function(e){var t=e.symbols,n=e.title,r=e.template,a=e.module,o=e.searchTerm,c=(0,d.Z)(_.container),s="".concat((0,p.zW)(r),"-").concat((0,p.zW)(a),"-").concat((0,p.zW)(n));return i.createElement("div",{className:c,id:s},i.createElement("h3",{className:_.title},n),t.map((function(e){return i.createElement(F,{link:"/quotes/".concat(e,"?qfsearchterm=").concat(o),key:e,symbol:e})})))};U.defaultProps={template:"",module:"",searchTerm:""},U.propTypes={symbols:h().array.isRequired,title:h().string.isRequired,template:h().string,module:h().string,searchTerm:h().string};const B=U;var I=n(98858),M=n(56641),W=function(e){var t=e.data,n=t.loading,r=t.error,a=t.mostPopularQuotes,o=void 0===a?{}:a,c=e.template,s=e.module,l=e.searchTerm;if(n)return null;if(!o)return null;var u=o.assets||[];if(r||0===u.length)return null;var m=u.map((function(e){return e.symbol}));return i.createElement(B,{symbols:m,title:"POPULAR QUOTES",template:c,module:s,searchTerm:l})};W.defaultProps={template:"",module:"",searchTerm:""},W.propTypes={data:h().object.isRequired,template:h().string,module:h().string,searchTerm:h().string};const j=(0,I.B)(M.Z,{options:function(){return{variables:{count:3}}}})(W);var z=n(32320),H="recentSearches",x={getCookie:z.ej,createCookie:z.pC},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=e.getCookie(H)||"",n=t.split(",");return n.filter((function(e){return""!==e})).slice(0,4).map((function(e){return e.toUpperCase()}))};const V={electricblue:"#1ff1c8",orange:"#f87121",container:"QuoteFinder-container",title:"QuoteFinder-title",form:"QuoteFinder-form",searchInput:"QuoteFinder-searchInput",submitBtn:"QuoteFinder-submitBtn",hideOnMobile:"QuoteFinder-hideOnMobile"};function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var $=function(e){(0,c.Z)(n,e);var t=Y(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"handleInputChange",(function(e){a.setState({searchTerm:e.target.value})})),(0,u.Z)((0,o.Z)(a),"handleInputKeyDown",(function(e){"Enter"===e.key&&a.handleSearch(e)})),(0,u.Z)((0,o.Z)(a),"handleAutoSuggestReturned",(function(e){if(e&&(!Array.isArray(e)||0!==e.length)){var t=e[0].symbol;a.setState({firstAutoSuggestSymbol:t})}})),(0,u.Z)((0,o.Z)(a),"handleSelectQuote",(function(e){var t=e.symbol,n=a.props,r=n.addRecentSearchSymbol,o=n.getRecentSearchSymbols;r(t),a.setState({recentSearchSymbols:o()})})),(0,u.Z)((0,o.Z)(a),"handleSearch",(function(e){e.preventDefault();var t,n=a.state,r=n.searchTerm,o=n.firstAutoSuggestSymbol;if(o)return(0,a.props.addRecentSearchSymbol)(o),t=(0,f.Sr)({url:"/quotes/".concat(o),params:{qfsearchterm:r}}),void(window.location=t);t=(0,f.Sr)({url:"/search/",params:{query:r,qfsearchterm:r}}),window.location=t})),a.state={searchTerm:"",recentSearchSymbols:null,firstAutoSuggestSymbol:null},a.handleSelectQuote=a.handleSelectQuote.bind((0,o.Z)(a)),a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.getRecentSearchSymbols;this.setState({recentSearchSymbols:e()})}},{key:"render",value:function(){var e=this.state,t=e.searchTerm,n=e.recentSearchSymbols,r=this.props,a=r.template,o=r.module,c=void 0===o?{}:o,s=r.dataAnalytics,l=r.dataTest,u="".concat((0,p.zW)(a),"-").concat((0,p.zW)(c.name||"quoteFinder"),"-form");return i.createElement("div",{className:(0,d.Z)({keyValuePairs:[[V.container,!0],[V.hideOnMobile,"Home Page International"===a||"homepage"===a]]}),"data-test":l,"data-analytics":s},i.createElement("h2",{className:V.title},"QUOTE FINDER"),i.createElement("div",{className:V.searchContainer},i.createElement("form",{id:u,className:V.form},i.createElement("input",{id:V.searchInput,className:V.searchInput,onChange:this.handleInputChange,type:"search",placeholder:"Search",autoComplete:"off",onKeyDown:this.handleInputKeyDown}),i.createElement("button",{type:"submit",className:[V.submitBtn,"icon-search"].join(" "),form:V.form,onClick:this.handleSearch,"data-analytic-id":"Quote Finder Search"},"Search"),t.length>1&&i.createElement(O,{searchTerm:t,handleSearch:this.handleSearch,onSelectQuote:this.handleSelectQuote,onResultsReturned:this.handleAutoSuggestReturned,template:a,module:c.name||"quoteFinder"}))),n?i.createElement("div",null,n.length>0?i.createElement(B,{symbols:n,title:"RECENT SEARCHES",template:a,module:c.name||"quoteFinder",searchTerm:t}):i.createElement(j,{template:a,module:c.name||"quoteFinder",searchTerm:t})):i.createElement(S.Z,{showSpinner:!0}))}}]),n}(i.Component);$.defaultProps={getRecentSearchSymbols:K,addRecentSearchSymbol:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=K(t).slice(0,4).filter((function(t){return t!==e}));n.includes(e)||(n.unshift(e),t.createCookie(H,n.join(",")))},template:"",dataTest:"",dataAnalytics:""},$.propTypes={getRecentSearchSymbols:h().func,addRecentSearchSymbol:h().func,template:h().string,module:h().object.isRequired,dataAnalytics:h().string.isRequired,dataTest:h().string.isRequired};const G=$}}]);
//# sourceMappingURL=source-maps/components-PcmModule-QuoteFinder-4cf460eb003271a4e4e4.js.map