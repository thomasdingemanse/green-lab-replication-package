(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-n-tracking"],{d2988f39:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"SPOOR_API_INGEST_URL",(function(){return yt})),n.d(e,"broadcast",(function(){return f})),n.d(e,"init",(function(){return bt})),n.d(e,"trackers",(function(){return vt}));var o=n("6d73a2e3"),i=n("a4a69ef7"),r=n.n(i),a=n("939738f6"),s=n.n(a),c=n("b4722769");function u(t){const e=new RegExp(`(?:^| )${t}=([^;]+)`),n=document.cookie&&document.cookie.match(e);return n?n[1]:null}function l(){const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{layout:r.a.getCurrentLayout(),orientation:s.a.getOrientation(),connectionType:t?t.type:void 0,ft_session_publib:u("FTSession_PubLib")}}const d={appName:"app",contentId:"rootContentId",contentType:"rootContentType",conceptId:"rootConceptId",conceptType:"rootConceptType",segmentid:"marketing_segment_id",cpccampaign:"cpc_campaign",abTestState:"active_ammit_flags"};function h(t){const e={};return Object.keys(t).forEach(n=>{let o=t[n];"abTestState"===n&&(o=function(t){const e={};return t.split(",").map(t=>{const[n,o]=t.split(":");n&&o&&(e[n]=o)}),e}(o)),"contentId"===n&&(e.content={...e.content,uuid:o}),"contentType"===n&&(e.content={...e.content,asset_type:o}),e[d[n]||n]=o}),e}function f(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=Element.prototype.isPrototypeOf(this)?this:document.body,i=new CustomEvent(t,{bubbles:n,cancelable:!0,detail:e});o.dispatchEvent(i)}var p={t:!1,i:!1,o:3e4},m=window,g=m.console,v=document,y=m.navigator,b=m.performance,w=function(){return y.deviceMemory},T=function(){return y.hardwareConcurrency},E=function(){return b&&!!b.getEntriesByType&&!!b.now&&!!b.mark},A="4g",k=!1,C=function(){return!!(T()&&T()<=4)||!!(w()&&w()<=4)},S=function(t,e){switch(t){case"slow-2g":case"2g":case"3g":return!0;default:return C()||e}},x={u:!1},I=function(t){v.hidden&&(t(),x.u=v.hidden)},M=function(t){return parseFloat(t.toFixed(4))},_=function(t){return"number"!=typeof t?null:M(t/Math.pow(1024,2))},L=[2e3,4e3],P=[2500,4e3],O=[.1,.25],B={ttfb:[200,500],fp:L,fcp:L,lcp:P,lcpFinal:P,fid:[100,300],cls:O,clsFinal:O,tbt:[300,600],ntbt:[400,600]},R=function(t,e){return B[t]?e<=B[t][0]?"good":e<=B[t][1]?"needsImprovement":"poor":null},D=function(t,e,n){var o;o=function(){x.u&&t.indexOf("Final")<0||!p.analyticsTracker||p.analyticsTracker({metricName:t,data:e,eventProperties:n||{},navigatorInformation:y?{deviceMemory:w()||0,hardwareConcurrency:T()||0,serviceWorkerStatus:"serviceWorker"in y?y.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:C(),isLowEndExperience:S(A,k)}:{},vitalsScore:R(t,e)})},"requestIdleCallback"in m?m.requestIdleCallback(o,{timeout:3e3}):o()},F=function(t,e,n){Object.keys(e).forEach((function(t){"number"==typeof e[t]&&(e[t]=M(e[t]))})),D(t,e,n)},N=function(t,e,n){var o=M(t);o<=p.o&&o>=0&&D(e,o,n)},j={},q={value:0},z={value:0},U={value:0},V={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},G={value:0},W={value:0},J=function(t){var e=t.pop();e&&!e.s&&e.value&&(q.value+=e.value)},$={},H=function(t,e){try{var n=new PerformanceObserver((function(t){e(t.getEntries())}));return n.observe({type:t,buffered:!0}),n}catch(t){g.warn("Perfume.js:",t)}return null},K=function(t){$[t]&&$[t].disconnect(),delete $[t]},Q=function(t){var e=t.pop();e&&N(e.processingStart-e.startTime,"fid",{performanceEntry:e}),K(1),N(U.value,"lcp"),$[3]&&"function"==typeof $[3].takeRecords&&$[3].takeRecords(),N(q.value,"cls"),setTimeout((function(){N(G.value,"tbt"),F("dataConsumption",V.value)}),1e4)},X=function(t){t.forEach((function(t){if(!("self"!==t.name||t.startTime<z.value)){var e=t.duration-50;e>0&&(G.value+=e,W.value+=e)}}))},Y=function(t){t.forEach((function(t){"first-paint"===t.name?N(t.startTime,"fp"):"first-contentful-paint"===t.name&&(z.value=t.startTime,N(z.value,"fcp"),$[4]=H("longtask",X),K(0))}))},Z=function(t){var e=t.pop();e&&(U.value=e.renderTime||e.loadTime)},tt=function(t){t.forEach((function(t){t.identifier&&N(t.startTime,t.identifier)}))},et=function(t){t.forEach((function(t){if(p.t&&F("resourceTiming",t),t.decodedBodySize&&t.initiatorType){var e=t.decodedBodySize/1e3;V.value[t.initiatorType]+=e,V.value.total+=e}}))},nt=function(){$[2]&&(N(U.value,"lcpFinal"),K(2)),$[3]&&("function"==typeof $[3].takeRecords&&$[3].takeRecords(),N(q.value,"clsFinal"),K(3))},ot=function(t){var e="usageDetails"in t?t.usageDetails:{};F("storageEstimate",{quota:_(t.quota),usage:_(t.usage),caches:_(e.caches),indexedDB:_(e.indexedDB),serviceWorker:_(e.serviceWorkerRegistrations)})},it=0,rt=function(){function t(t){if(void 0===t&&(t={}),this.l="6.4.0",p.analyticsTracker=t.analyticsTracker,p.t=!!t.resourceTiming,p.i=!!t.elementTiming,p.o=t.maxMeasureTime||p.o,E()){"PerformanceObserver"in m&&($[0]=H("paint",Y),$[1]=H("first-input",Q),$[2]=H("largest-contentful-paint",Z),p.t&&H("resource",et),$[3]=H("layout-shift",J),p.i&&H("element",tt)),void 0!==v.hidden&&v.addEventListener("visibilitychange",I.bind(this,nt));var e=function(){if(!E())return{};var t=b.getEntriesByType("navigation")[0];if(!t)return{};var e=t.responseStart,n=t.responseEnd;return{fetchTime:n-t.fetchStart,workerTime:t.workerStart>0?n-t.workerStart:0,totalTime:n-t.requestStart,downloadTime:n-e,timeToFirstByte:e-t.requestStart,headerSize:t.transferSize-t.encodedBodySize||0,dnsLookupTime:t.domainLookupEnd-t.domainLookupStart,redirectTime:t.redirectEnd-t.redirectStart}}();F("navigationTiming",e),e.timeToFirstByte&&N(e.timeToFirstByte,"ttfb"),F("networkInformation",function(){if("connection"in y){var t=y.connection;return"object"!=typeof t?{}:(A=t.effectiveType,k=!!t.saveData,{downlink:t.downlink,effectiveType:t.effectiveType,rtt:t.rtt,saveData:!!t.saveData})}return{}}()),y&&y.storage&&"function"==typeof y.storage.estimate&&y.storage.estimate().then(ot)}}return t.prototype.start=function(t){E()&&!j[t]&&(j[t]=!0,b.mark("mark_"+t+"_start"),x.u=!1)},t.prototype.end=function(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n=!0),E()&&j[t]){b.mark("mark_"+t+"_end"),delete j[t];var o=function(t){b.measure(t,"mark_"+t+"_start","mark_"+t+"_end");var e=b.getEntriesByName(t).pop();return e&&"measure"===e.entryType?e.duration:-1}(t);n&&F(t,M(o),e)}},t.prototype.endPaint=function(t,e){var n=this;setTimeout((function(){n.end(t,e)}))},t.prototype.clear=function(t){delete j[t],b.clearMarks&&(b.clearMarks("mark_"+t+"_start"),b.clearMarks("mark_"+t+"_end"))},t.prototype.markNTBT=function(){var t=this;this.start("ntbt"),W.value=0,clearTimeout(it),it=setTimeout((function(){t.end("ntbt",{},!1),N(W.value,"ntbt"),W.value=0}),2e3)},t}(),at="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var st=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var e=[],n=void 0===at?window:at,o=Math.pow(256,6),i=Math.pow(2,52),r=2*i,a=Math.random;function s(t){var e,n=t.length,o=this,i=0,r=o.i=o.j=0,a=o.S=[];for(n||(t=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[r=255&r+t[i%n]+(e=a[i])],a[r]=e;(o.g=function(t){for(var e,n=0,i=o.i,r=o.j,a=o.S;t--;)e=a[i=255&i+1],n=256*n+a[255&(a[i]=a[r=255&r+e])+(a[r]=e)];return o.i=i,o.j=r,n})(256)}function c(t,e){var n,o=[],i=(typeof t)[0];if(e&&"o"==i)for(n in t)try{o.push(c(t[n],e-1))}catch(t){}return o.length?o:"s"==i?t:t+"\0"}function u(t,e){for(var n,o=t+"",i=0;i<o.length;)e[255&i]=255&(n^=19*e[255&i])+o.charCodeAt(i++);return d(e)}function l(t){try{return n.crypto.getRandomValues(t=new Uint8Array(256)),d(t)}catch(t){return[+new Date,n,n.navigator&&n.navigator.plugins,n.screen,d(e)]}}function d(t){return String.fromCharCode.apply(0,t)}t.exports=function(n,a){if(a&&!0===a.global)return a.global=!1,Math.random=t.exports(n,a),a.global=!0,Math.random;var h=a&&a.entropy||!1,f=[],p=(u(c(h?[n,d(e)]:0 in arguments?n:l(),3),f),new s(f));return u(d(p.S),e),function(){for(var t=p.g(6),e=o,n=0;t<i;)t=256*(t+n),e*=256,n=p.g(1);for(;t>=r;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=a},u(Math.random(),e)}));st.resetGlobal;const ct=["domInteractive","domComplete","timeToFirstByte","firstPaint","largestContentfulPaint","firstInputDelay","cumulativeLayoutShift","firstContentfulPaint","totalBlockingTime"],ut=[25,50,75,100],lt={onScroll:()=>{},target:"body",debug:!1};class dt{constructor(t){this.options={...lt,...t},this.init()}init(){const t=document.querySelector(this.options.target);t&&"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(this.handleIntersection.bind(this)),t.style.position="relative",ut.forEach(e=>{const n=document.createElement("div");n.className="n-tracking-scroll-depth-marker",n.style.position="absolute",n.style.top=e+"%",n.style.bottom="0",n.style.width="100%",n.style.zIndex="-1",n.setAttribute("data-scroll-depth",e),t.appendChild(n),this.observer.observe(n)}))}handleIntersection(t){t.forEach(t=>{if(t.isIntersecting||t.intersectionRatio>0){const e=t.target,n=e.getAttribute("data-scroll-depth");this.options.onScroll(n),this.options.debug&&console.log("ScrollDepth",{marker:n}),e.parentNode&&e.parentNode.removeChild(e),this.observer.unobserve(e)}})}}const ht=["load","click","focus","scroll","mousemove","touchstart","touchend","touchcancel","touchleave"],ft=["blur"],pt=["beforeunload","unload","pagehide"],mt={onExit:()=>{},debug:!1};class gt{constructor(t){this.options={...mt,...t},this.totalAttentionTime=0,this.hasExited=!1,this.init()}init(){ht.forEach(t=>{window.addEventListener(t,this.startAttention.bind(this))}),ft.forEach(t=>{window.addEventListener(t,this.endAttention.bind(this))}),pt.forEach(t=>{window.addEventListener(t,this.handleExit.bind(this))}),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this));document.querySelectorAll("video").forEach(t=>{t.addEventListener("playing",this.startConstantAttention.bind(this)),t.addEventListener("pause",this.endConstantAttention.bind(this)),t.addEventListener("ended",this.endConstantAttention.bind(this))})}startAttention(t){clearTimeout(this.attentionTimeout),this.startAttentionTime||(this.startAttentionTime=Date.now()),this.attentionTimeout=setTimeout(this.endAttention.bind(this,{type:"timeout"}),15e3),this.options.debug&&console.log("AttentionTime start",{event:t.type})}endAttention(t){this.startAttentionTime&&(clearTimeout(this.attentionTimeout),this.totalAttentionTime=this.getAttentionTime(),this.startAttentionTime=null),this.options.debug&&console.log("AttentionTime end",{event:t.type,time:this.totalAttentionTime})}startConstantAttention(){this.constantAttentionInterval=setInterval(this.startAttention.bind(this),15e3)}endConstantAttention(t){this.endAttention(t),clearInterval(this.constantAttentionInterval)}getAttentionTime(){let t=0;return this.startAttentionTime&&(t=Math.round((Date.now()-this.startAttentionTime)/1e3)),this.totalAttentionTime+t}handleVisibilityChange(t){"hidden"===document.visibilityState?this.endAttention(t):this.startAttention(t)}handleExit(t){this.hasExited||(this.endAttention(t),this.options.debug&&console.log("AttentionTime",{event:t.type,time:this.totalAttentionTime}),this.options.onExit(this.totalAttentionTime),this.hasExited=!0)}}var vt=Object.freeze({__proto__:null,realUserMonitoringForPerformance:()=>{if(!1 in window)return;if(!function(t,e){const n=st(t)();return Math.round(100*n)<=e}(u("spoor-id"),10))return;const t=performance.getEntriesByType("navigation")&&performance.getEntriesByType("navigation")[0];if(!t||"navigate"!==t.type)return;const e={};c.default.complete.then(()=>{e.domInteractive=Math.round(t.domInteractive),e.domComplete=Math.round(t.domComplete)});let n=!1;new rt({analyticsTracker:t=>{let{metricName:o,data:i}=t;n||("fid"===o?e.firstInputDelay=Math.round(i):"lcp"===o?e.largestContentfulPaint=Math.round(i):"ttfb"===o?e.timeToFirstByte=Math.round(i):"fp"===o?e.firstPaint=Math.round(i):"fcp"===o?e.firstContentfulPaint=Math.round(i):"cls"===o?e.cumulativeLayoutShift=i:"tbt"===o&&(e.totalBlockingTime=Math.round(i)),e.url=window.document.location.href||null,(t=>ct.every(e=>"number"==typeof t[e]))(e)&&(console.log({performanceMetrics:e}),f("oTracking.event",{action:"performance",category:"page",...e}),n=!0))},logging:!1})},pageAttention:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t=>{f("oTracking.event",{category:"page",action:"interaction",context:{attention:{total:t}}})},n=new gt({...t,onExit:e}),o=t=>{f("oTracking.event",{category:"page",action:"scrolldepth",meta:{percentagesViewed:t,attention:n.getAttentionTime()}})};new dt({...t,onScroll:o})},textCopying:()=>{document.addEventListener("copy",t=>{const e={nodeName:t.target.nodeName.toLowerCase()};if(window.getSelection){const t=window.getSelection().toString().trim();e.characters=t.length,e.words=t.split(/\s+/).length,e.selection=(t=>{if(t.length>100){const e=100-" … ".length,n=Math.floor(e/2),o=Math.ceil(e/2);return t.substr(0,n)+" … "+t.substr(-1*o)}return t})(t)}f("oTracking.event",{action:"copy",category:"text",context:e})})}});const yt="https://spoor-api.ft.com/ingest";function bt(t){let{appContext:e,extraContext:n,pageViewContext:i}=t;const r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;const e={},n=["segmentid","cpccampaign"],o=new URLSearchParams(t);return n.forEach(t=>{const n=o.get(t);n&&(e[t]=n)}),e}(),a={server:yt,context:h({...r,...e,...n}),user:l(),useSendBeacon:!0};if(o.default.init(a),window===window.top||"errors-next.ft.com"===window.location.hostname){const t=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;const e=new URLSearchParams(t),n=e.get("nextErrorStatus"),o=e.get("nextErrorReason");if(n||o)return{errorStatus:n,errorReason:o,url:window.parent.location.toString(),referrer:window.parent.document.referrer}}();o.default.page({...t,...i})}return o.default.click.init("cta"),o.default}}.call(this,n("fcdffa92"))},d2988f39:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"SPOOR_API_INGEST_URL",(function(){return _})),n.d(e,"broadcast",(function(){return p})),n.d(e,"init",(function(){return L})),n.d(e,"trackers",(function(){return M}));var o=n("6d73a2e3"),i=n("a4a69ef7"),r=n.n(i),a=n("939738f6"),s=n.n(a),c=n("d70d095f"),u=n("b4722769");function l(t){const e=new RegExp(`(?:^| )${t}=([^;]+)`),n=document.cookie&&document.cookie.match(e);return n?n[1]:null}function d(){const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{layout:r.a.getCurrentLayout(),orientation:s.a.getOrientation(),connectionType:t?t.type:void 0,ft_session_publib:l("FTSession_PubLib")}}const h={appName:"app",contentId:"rootContentId",contentType:"rootContentType",conceptId:"rootConceptId",conceptType:"rootConceptType",segmentid:"marketing_segment_id",cpccampaign:"cpc_campaign",abTestState:"active_ammit_flags"};function f(t){const e={};return Object.keys(t).forEach(n=>{let o=t[n];"abTestState"===n&&(o=function(t){const e={};return t.split(",").map(t=>{const[n,o]=t.split(":");n&&o&&(e[n]=o)}),e}(o)),"contentId"===n&&(e.content={...e.content,uuid:o}),"contentType"===n&&(e.content={...e.content,asset_type:o}),e[h[n]||n]=o}),e}function p(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=Element.prototype.isPrototypeOf(this)?this:document.body,i=new CustomEvent(t,{bubbles:n,cancelable:!0,detail:e});o.dispatchEvent(i)}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var g=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var e=[],n=void 0===m?window:m,o=Math.pow(256,6),i=Math.pow(2,52),r=2*i,a=Math.random;function s(t){var e,n=t.length,o=this,i=0,r=o.i=o.j=0,a=o.S=[];for(n||(t=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[r=255&r+t[i%n]+(e=a[i])],a[r]=e;(o.g=function(t){for(var e,n=0,i=o.i,r=o.j,a=o.S;t--;)e=a[i=255&i+1],n=256*n+a[255&(a[i]=a[r=255&r+e])+(a[r]=e)];return o.i=i,o.j=r,n})(256)}function c(t,e){var n,o=[],i=(typeof t)[0];if(e&&"o"==i)for(n in t)try{o.push(c(t[n],e-1))}catch(t){}return o.length?o:"s"==i?t:t+"\0"}function u(t,e){for(var n,o=t+"",i=0;i<o.length;)e[255&i]=255&(n^=19*e[255&i])+o.charCodeAt(i++);return d(e)}function l(t){try{return n.crypto.getRandomValues(t=new Uint8Array(256)),d(t)}catch(t){return[+new Date,n,n.navigator&&n.navigator.plugins,n.screen,d(e)]}}function d(t){return String.fromCharCode.apply(0,t)}t.exports=function(n,a){if(a&&!0===a.global)return a.global=!1,Math.random=t.exports(n,a),a.global=!0,Math.random;var h=a&&a.entropy||!1,f=[],p=(u(c(h?[n,d(e)]:0 in arguments?n:l(),3),f),new s(f));return u(d(p.S),e),function(){for(var t=p.g(6),e=o,n=0;t<i;)t=256*(t+n),e*=256,n=p.g(1);for(;t>=r;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=a},u(Math.random(),e)}));g.resetGlobal;function v(t,e){const n=g(t)();return Math.round(100*n)<=e}const y=()=>l("spoor-id"),b=["domInteractive","domComplete","timeToFirstByte","largestContentfulPaint","firstInputDelay","cumulativeLayoutShift","firstContentfulPaint"],w=t=>b.every(e=>"number"==typeof t[e]),T=[25,50,75,100],E={onScroll:()=>{},target:"body",debug:!1};class A{constructor(t){this.options={...E,...t},this.init()}init(){const t=document.querySelector(this.options.target);t&&"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(this.handleIntersection.bind(this)),t.style.position="relative",T.forEach(e=>{const n=document.createElement("div");n.className="n-tracking-scroll-depth-marker",n.style.position="absolute",n.style.top=e+"%",n.style.bottom="0",n.style.width="100%",n.style.zIndex="-1",n.setAttribute("data-scroll-depth",e),t.appendChild(n),this.observer.observe(n)}))}handleIntersection(t){t.forEach(t=>{if(t.isIntersecting||t.intersectionRatio>0){const e=t.target,n=e.getAttribute("data-scroll-depth");this.options.onScroll(n),this.options.debug&&console.log("ScrollDepth",{marker:n}),e.parentNode&&e.parentNode.removeChild(e),this.observer.unobserve(e)}})}}const k=["load","click","focus","scroll","mousemove","touchstart","touchend","touchcancel","touchleave"],C=["blur"],S=["beforeunload","unload","pagehide"],x={onExit:()=>{},debug:!1};class I{constructor(t){this.options={...x,...t},this.totalAttentionTime=0,this.hasExited=!1,this.init()}init(){k.forEach(t=>{window.addEventListener(t,this.startAttention.bind(this))}),C.forEach(t=>{window.addEventListener(t,this.endAttention.bind(this))}),S.forEach(t=>{window.addEventListener(t,this.handleExit.bind(this))}),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this));document.querySelectorAll("video").forEach(t=>{t.addEventListener("playing",this.startConstantAttention.bind(this)),t.addEventListener("pause",this.endConstantAttention.bind(this)),t.addEventListener("ended",this.endConstantAttention.bind(this))})}startAttention(t){clearTimeout(this.attentionTimeout),this.startAttentionTime||(this.startAttentionTime=Date.now()),this.attentionTimeout=setTimeout(this.endAttention.bind(this,{type:"timeout"}),15e3),this.options.debug&&console.log("AttentionTime start",{event:t.type})}endAttention(t){this.startAttentionTime&&(clearTimeout(this.attentionTimeout),this.totalAttentionTime=this.getAttentionTime(),this.startAttentionTime=null),this.options.debug&&console.log("AttentionTime end",{event:t.type,time:this.totalAttentionTime})}startConstantAttention(){this.constantAttentionInterval=setInterval(this.startAttention.bind(this),15e3)}endConstantAttention(t){this.endAttention(t),clearInterval(this.constantAttentionInterval)}getAttentionTime(){let t=0;return this.startAttentionTime&&(t=Math.round((Date.now()-this.startAttentionTime)/1e3)),this.totalAttentionTime+t}handleVisibilityChange(t){"hidden"===document.visibilityState?this.endAttention(t):this.startAttention(t)}handleExit(t){this.hasExited||(this.endAttention(t),this.options.debug&&console.log("AttentionTime",{event:t.type,time:this.totalAttentionTime}),this.options.onExit(this.totalAttentionTime),this.hasExited=!0)}}var M=Object.freeze({__proto__:null,realUserMonitoringForPerformance:function(){let{sampleRate:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1 in window)return;const e=y();if(t=Number.isFinite(t)&&t<=100&&t>=0?t:10,!v(e,t))return;const n=performance.getEntriesByType("navigation")&&performance.getEntriesByType("navigation")[0];if(!n||"navigate"!==n.type)return;const o={};u.default.complete.then(()=>{o.domInteractive=Math.round(n.domInteractive),o.domComplete=Math.round(n.domComplete)});let i=!1;const r=t=>{if(i)return;const e=t.name.toLowerCase(),n=t.value;"fid"===e?o.firstInputDelay=Math.round(n):"lcp"===e?o.largestContentfulPaint=Math.round(n):"ttfb"===e?o.timeToFirstByte=Math.round(n):"fcp"===e?o.firstContentfulPaint=Math.round(n):"cls"===e&&(o.cumulativeLayoutShift=Number(n.toFixed(4))),o.url=window.document.location.href||null,w(o)&&(console.log({performanceMetrics:o}),p("oTracking.event",{action:"performance",category:"page",...o}),i=!0)};Object(c.a)(r,{reportAllChanges:!0}),Object(c.b)(r),Object(c.c)(r),Object(c.d)(r),Object(c.e)(r)},pageAttention:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t=>{p("oTracking.event",{category:"page",action:"interaction",context:{attention:{total:t}}})},n=new I({...t,onExit:e}),o=t=>{p("oTracking.event",{category:"page",action:"scrolldepth",meta:{percentagesViewed:t,attention:n.getAttentionTime()}})};new A({...t,onScroll:o})},textCopying:()=>{document.addEventListener("copy",t=>{const e={nodeName:t.target.nodeName.toLowerCase()};if(window.getSelection){const t=window.getSelection().toString().trim();e.characters=t.length,e.words=t.split(/\s+/).length,e.selection=(t=>{if(t.length>100){const e=100-" … ".length,n=Math.floor(e/2),o=Math.ceil(e/2);return t.substr(0,n)+" … "+t.substr(-1*o)}return t})(t)}p("oTracking.event",{action:"copy",category:"text",context:e})})}});const _="https://spoor-api.ft.com/ingest";function L(t){let{appContext:e,extraContext:n,pageViewContext:i}=t;const r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;const e={},n=["segmentid","cpccampaign"],o=new URLSearchParams(t);return n.forEach(t=>{const n=o.get(t);n&&(e[t]=n)}),e}(),a={server:_,context:f({...r,...e,...n}),user:d(),useSendBeacon:!0};if(o.default.init(a),window===window.top||"errors-next.ft.com"===window.location.hostname){const t=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;const e=new URLSearchParams(t),n=e.get("nextErrorStatus"),o=e.get("nextErrorReason");if(n||o)return{errorStatus:n,errorReason:o,url:window.parent.location.toString(),referrer:window.parent.document.referrer}}();o.default.page({...t,...i})}return o.default.click.init("cta"),o.default}}.call(this,n("fcdffa92"))}}]);
//# sourceMappingURL=financial-times-n-tracking.a8a441da93ff.bundle.js.map