(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-n-exponea"],{f3e2bc6f:function(e,t,n){"use strict";n.r(t),n.d(t,"canShowExponea",(function(){return l})),n.d(t,"init",(function(){return v}));var o=n("6d73a2e3"),r=function(e){let{credentials:t="omit"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://session-next.ft.com"+e,{credentials:t,useCorsProxy:!0}).then(e=>e.ok?e.json():e.text().then(t=>{throw new Error(`Next session responded with "${t}" (${e.status})`)})).catch(e=>{document.body.dispatchEvent(new CustomEvent("oErrors.log",{bubbles:!0,detail:{error:e,info:{component:"next-session-client"}}}))})};let i={};const s=(e,t)=>{if("object"!=typeof e){if("string"!=typeof e||"string"!=typeof t){if("string"==typeof e&&void 0===t)return i[e]||null;if(void 0===e&&void 0===t)return i;throw new Error("Invalid arguments")}i[e]=t}else i=e};s.clear=()=>{i={}};const c={},u=()=>{const[,e]=/FTSession_s=([^;]+)/.exec(document.cookie)||[];return e},a=()=>{const e=s("uuid");if(e)return Promise.resolve({uuid:e});const t=u();return t?(c.uuid||(c.uuid=r("/sessions/s/"+t).then((function(){let{uuid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return delete c.uuid,e&&s("uuid",e),{uuid:e}}))),c.uuid):Promise.resolve({uuid:void 0})};var d=a;
/*! js-cookie v3.0.1 | MIT */function p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var f=function e(t,n){function o(e,o,r){if("undefined"!=typeof document){"number"==typeof(r=p({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in r)r[s]&&(i+="; "+s,!0!==r[s]&&(i+="="+r[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},r=0;r<n.length;r++){var i=n[r].split("="),s=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(o[c]=t.read(s,c),e===c)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){o(e,"",p({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,p({},this.attributes,t))},withConverter:function(t){return e(p({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const l=e=>e.get("exponeaOnsiteMessaging")&&"true"===f.get("FTCookieConsentGDPR");async function v(){if("exponea"in window){const{exponea:e}=window;let t;e.start({ping:{enabled:!1,activity:!1},track:{google_analytics:!1},cookies:{expires:15724800}});try{t=(await d()).uuid}catch(e){console.error("Error getting UUID for Exponea",e)}const n=f.get("spoor-id");e.identify({user_id:t,device_spoor_id:n});try{window._exponeaRootEventID=o.default.getRootID()}catch(e){console.error("Error getting Root Event ID for Exponea",e)}}}}}]);
//# sourceMappingURL=financial-times-n-exponea.d52efe30b482.bundle.js.map