(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-o-toggle"],{21867433:function(t,e,o){"use strict";o.r(e);var l=class{constructor(t){this.targetEl=t.targetEl,this.toggles=[]}addToggle(t){this.toggles.push(t)}removeToggle(t){const e=this.toggles.indexOf(t);this.toggles=this.toggles.slice(0,e).concat(this.toggles.slice(e+1)),0===this.toggles.length&&this.open()}open(){this.targetEl.setAttribute("aria-hidden","false"),this.targetEl.classList.add("o-toggle--active"),this.toggles.forEach(t=>{t.open()})}close(){this.targetEl.setAttribute("aria-hidden","true"),this.targetEl.classList.remove("o-toggle--active"),this.toggles.forEach(t=>{t.close()})}toggle(){this.isOpen()?this.close():this.open()}isOpen(){return this.targetEl.classList.contains("o-toggle--active")}};function s(t){32===t.keyCode&&this.toggle(t)}class a{constructor(t,e){if(a._targets||(a._targets=new Map),t&&(t instanceof HTMLElement||(t=document.querySelector(t)),!t.hasAttribute("data-o-toggle--js"))){if(e||(e={},Array.prototype.forEach.call(t.attributes,t=>{if(0===t.name.indexOf("data-o-toggle")){const o=t.name.replace("data-o-toggle-","");try{e[o]=JSON.parse(t.value.replace(/\'/g,'"'))}catch(l){e[o]=t.value}}})),e.callback&&"string"==typeof e.callback){if("function"!=typeof window[e.callback])throw new Error(`Could not find o-toggle callback "${e.callback}".`);this.callback=window[e.callback]}if(e.callback&&"function"==typeof e.callback&&(this.callback=e.callback),e.callback&&!this.callback)throw new Error("The o-toggle callback must be a string or function.");this.toggleEl=t,"A"===this.toggleEl.nodeName&&(this.toggleEl.setAttribute("role","button"),this.toggleEl.addEventListener("keydown",s.bind(this)),this.toggleEl.setAttribute("draggable","false")),this.toggle=this.toggle.bind(this),this.toggleEl.addEventListener("click",this.toggle),this.toggleEl.setAttribute("data-o-toggle--js","true"),this.targetEl=e.target,this.targetEl instanceof HTMLElement||(this.targetEl=document.querySelector(this.targetEl)),void 0===a._targets.get(this.targetEl)?(this.target=new a.Target(this),a._targets.set(this.targetEl,this.target)):this.target=a._targets.get(this.targetEl),this.target.addToggle(this),this.target.close()}}open(){this.toggleEl.setAttribute("aria-expanded","true")}close(){this.toggleEl.setAttribute("aria-expanded","false")}toggle(t){if(this.target.toggle(),t&&t.preventDefault(),this.callback){const e=this.target.isOpen()?"open":"close";this.callback(e,t)}}destroy(){"A"===this.toggleEl.nodeName&&this.toggleEl.removeEventListener("keydown",s),this.toggleEl.removeEventListener("click",this.toggle),this.toggleEl.removeAttribute("aria-expanded"),this.toggleEl.removeAttribute("role"),this.toggleEl.removeAttribute("data-o-toggle--js"),this.target.removeToggle(this),this.target=void 0,this.toggleEl=void 0,this.callback=void 0}static init(t,e){t?t instanceof HTMLElement||(t=document.querySelector(t)):t=document.body;const o=t.querySelectorAll('[data-o-component="o-toggle"]'),l=[];for(const t of o)t.hasAttribute("data-o-toggle--js")||l.push(new a(t,e));return l}}a.Target=l;var i=a;const g=()=>{i.init(),document.removeEventListener("o.DOMContentLoaded",g)};document.addEventListener("o.DOMContentLoaded",g);e.default=i}}]);
//# sourceMappingURL=financial-times-o-toggle.0cf48066b7e1.bundle.js.map