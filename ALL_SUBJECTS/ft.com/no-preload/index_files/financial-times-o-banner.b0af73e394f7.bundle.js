(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-o-banner"],{"4ab62d1f":function(t,n,e){"use strict";e.r(n);const o={closed:"o-banner--closed",outer:"o-banner__outer",inner:"o-banner__inner",content:"o-banner__content",longContent:"o-banner__content--long",shortContent:"o-banner__content--short",actions:"o-banner__actions",action:"o-banner__action",secondaryAction:"o-banner__action--secondary",button:"o-banner__button",link:"o-banner__link",close:"o-banner__close"};class s{constructor(t,n){if(this.bannerElement=t,this.options=Object.assign({},{autoOpen:!0,suppressCloseButton:!1,closeExistingBanners:!0,appendTo:document.body,contentLong:"&hellip;",contentShort:null,buttonLabel:"OK",buttonUrl:"#",formAction:null,formEncoding:"application/x-www-form-urlencoded",formMethod:"post",linkLabel:null,linkUrl:"#",closeButtonLabel:"Close banner",theme:null,layout:null},n||s.getOptionsFromDom(t)),this.options.theme&&"string"!=typeof this.options.theme)throw new Error(`"${this.options.theme}" must be a string.`);const e=["small","compact"],o=this.options.layout;if(o&&!e.includes(o))throw new Error(`"${o}" is not a valid layout. Use one of ${e}.`);try{if("string"==typeof this.options.appendTo&&(this.options.appendTo=document.querySelector(this.options.appendTo)),this.options.appendTo instanceof HTMLElement!=!0)throw new Error("It is not an Node instance.")}catch(t){throw new Error("Cound not find the element to append the banner to: "+t.message,this)}this.render(),this.options.closeExistingBanners?(s._bannerInstances.forEach(t=>t.close()),s._bannerInstances=[this]):s._bannerInstances.push(this),this.options.autoOpen?this.open():this.close()}render(){this.bannerElement instanceof HTMLElement?""===this.bannerElement.innerHTML.trim()?this.bannerElement=this.buildBannerElement(this.bannerElement):this.bannerElement.querySelector("."+o.outer)||(this.options.contentLong=this.bannerElement.innerHTML,this.options.contentShort=null,this.bannerElement=this.buildBannerElement(this.bannerElement)):(this.bannerElement=this.buildBannerElement(),this.options.appendTo.appendChild(this.bannerElement)),this.innerElement=this.bannerElement.querySelector("[data-o-banner-inner]"),this.options.suppressCloseButton||(this.closeButtonElement=this.buildCloseButtonElement(),this.innerElement.appendChild(this.closeButtonElement))}open(){this.bannerElement.classList.remove(o.closed),this.bannerElement.dispatchEvent(new CustomEvent("o.bannerOpened"))}close(){this.bannerElement.classList.add(o.closed),this.bannerElement.dispatchEvent(new CustomEvent("o.bannerClosed"))}buildBannerElement(t){let n;(t=t||document.createElement("div")).innerHTML="",t.setAttribute("role","region"),t.classList.add("o-banner"),this.options.theme&&t.classList.add("o-banner--"+this.options.theme),this.options.layout&&t.classList.add("o-banner--"+this.options.layout),n=this.options.contentShort?`\n\t\t\t\t<div class="${o.content} ${o.longContent}">\n\t\t\t\t\t${this.options.contentLong}\n\t\t\t\t</div>\n\t\t\t\t<div class="${o.content} ${o.shortContent}">\n\t\t\t\t\t${this.options.contentShort}\n\t\t\t\t</div>\n\t\t\t`:`\n\t\t\t\t<div class="${o.content}">\n\t\t\t\t\t${this.options.contentLong}\n\t\t\t\t</div>\n\t\t\t`;let e="";this.options.buttonLabel&&(e=null!==this.options.formAction&&void 0!==this.options.formAction?`\n\t\t\t\t\t<form class="${o.action}" action="${this.options.formAction}" enctype="${this.options.formEncoding}" method="${this.options.formMethod}">\n\t\t\t\t\t\t<input class="${o.button}" type="submit" value="${this.options.buttonLabel}"/>\n\t\t\t\t\t</form>\n\t\t\t\t`:`\n\t\t\t\t\t<div class="${o.action}">\n\t\t\t\t\t\t<a href="${this.options.buttonUrl}" class="${o.button}">${this.options.buttonLabel}</a>\n\t\t\t\t\t</div>\n\t\t\t\t`);let s="";return this.options.linkLabel&&(s=`\n\t\t\t\t<div class="${o.action} ${o.secondaryAction}">\n\t\t\t\t\t<a href="${this.options.linkUrl}" class="${o.link}">${this.options.linkLabel}</a>\n\t\t\t\t</div>\n\t\t\t`),t.innerHTML=`\n\t\t\t<div class="${o.outer}">\n\t\t\t\t<div class="${o.inner}" data-o-banner-inner="">\n\t\t\t\t\t${n}\n\t\t\t\t\t${(e||s)&&`<div class="${o.actions}">\n\t\t\t\t\t\t${e}\n\t\t\t\t\t\t${s}\n\t\t\t\t\t</div>`}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,t}buildCloseButtonElement(){const t=document.createElement("button");return t.className=o.close,t.setAttribute("aria-label",this.options.closeButtonLabel),this.bannerElement.id&&t.setAttribute("aria-controls",this.bannerElement.id),t.addEventListener("click",t=>{this.close(),t.preventDefault()}),t}static getOptionsFromDom(t){return t instanceof HTMLElement?Object.keys(t.dataset).reduce((n,e)=>{if("oComponent"===e)return n;const o=e.replace(/^oBanner(\w)(\w+)$/,(t,n,e)=>n.toLowerCase()+e),s=t.dataset[e];try{n[o]=JSON.parse(s.replace(/\'/g,'"'))}catch(t){n[o]=s}return n},{}):{}}destroy(){this.closeButtonElement&&(this.closeButtonElement.remove(),delete this.closeButtonElement)}static init(t,n){return t||(t=document.body),t instanceof HTMLElement||(t=document.querySelector(t)),t instanceof HTMLElement&&/\bo-banner\b/.test(t.getAttribute("data-o-component"))?new s(t,n):Array.from(t.querySelectorAll('[data-o-component="o-banner"]'),t=>new s(t,n))}}s._bannerInstances=[];var i=s;"undefined"!=typeof document&&document.addEventListener("o.DOMContentLoaded",(function t(){i.init(),document.removeEventListener("o.DOMContentLoaded",t)}));n.default=i}}]);
//# sourceMappingURL=financial-times-o-banner.b0af73e394f7.bundle.js.map