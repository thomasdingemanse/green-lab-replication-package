(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-o-message"],{c0891472:function(t,e,s){"use strict";s.r(e);var n=t=>{const e=document.createElement("div");if(!t.type)throw new Error("*** o-message error:\nMessages require a type. Available types are:\n- action\n- alert\n- notice\n***");if(e.classList.add("o-message","o-message--"+t.type,"o-message--closed"),t.close||e.setAttribute("data-o-message-close",!1),t.inner&&e.classList.add("o-message--inner"),!t.state)throw new Error("*** o-message error:\nMessages require a state.\n***");e.classList.add("o-message--"+t.state),t.content.detail=t.content.detail?t.content.detail:"";let s="",n="",a="";s=t.content.highlight?`\n\t\t\t\t<span class="o-message__content-highlight">${t.content.highlight}</span>\n\t\t\t\t<span class="o-message__content-detail">${t.content.detail}</span>\n\t\t\t`:t.content.detail,t.inner&&t.content.additionalInfo&&(n=`<p class="o-message__content-additional">${t.content.additionalInfo}</p>`);const o=(t,e)=>`<a href="${t.url?t.url:""}" class="o-message__actions__${e}" ${t.openInNewWindow?`target="_blank" aria-label="${t.text} (opens in new window)"`:""}>${t.text}</a>`;return t.actions&&(a=`\n\t\t\t\t<div class="o-message__actions">\n\t\t\t\t\t${t.actions.primary&&t.actions.primary.text?o(t.actions.primary,"primary"):""}\n\t\t\t\t\t${t.actions.secondary&&t.actions.secondary.text?o(t.actions.secondary,"secondary"):""}\n\t\t\t\t</div>\n\t\t\t`),e.innerHTML=`\n\t\t\t<div class="o-message__container">\n\t\t\t\t<div class="o-message__content">\n\t\t\t\t\t<p class="o-message__content-main">\n\t\t\t\t\t\t${s}\n\t\t\t\t\t</p>\n\t\t\t\t\t${n}\n\t\t\t\t\t${a}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,e},a=()=>{const t=document.createElement("button");return t.classList.add("o-message__close"),t.setAttribute("aria-label","close"),t.setAttribute("title","Close"),t};class o{constructor(t,e){this.messageElement=t;const s=e&&e.type?e.type:null,n=!(!e||!e.inner)&&e.inner,a=e&&e.state?e.state:null;this.opts=Object.assign({},{autoOpen:!0,type:s,state:a,inner:n,parentElement:null,content:{highlight:null,detail:"&hellip;",additionalInfo:!1},actions:{primary:{text:null,url:null,openInNewWindow:!1},secondary:{text:null,url:null,openInNewWindow:!1}},close:!e||!e.close||e.close},e||o.getDataAttributes(t)),this.render(),this.opts.autoOpen?this.open():this.close()}render(){if(this.opts.parentElement||!(this.messageElement instanceof HTMLElement)){this.messageElement=n(this.opts);(this.opts.parentElement?document.querySelector(this.opts.parentElement):document.body).appendChild(this.messageElement)}const t=this.messageElement.querySelector("[class*='__close']");this.opts.close&&!t&&(this.closeButton=a(),this.closeButton.addEventListener("click",t=>{t.preventDefault(),this.close()}),this.messageElement.lastElementChild.appendChild(this.closeButton))}open(){this.messageElement.classList.remove("o-message--closed"),this.messageElement.dispatchEvent(new CustomEvent("o.messageOpen"))}close(){this.messageElement.classList.add("o-message--closed"),this.messageElement.dispatchEvent(new CustomEvent("o.messageClosed"))}static getDataAttributes(t){return t instanceof HTMLElement?Object.keys(t.dataset).reduce((e,s)=>{if("oComponent"===s)return e;const n=s.replace(/^oMessage(\w)(\w+)$/,(t,e,s)=>e.toLowerCase()+s),a=t.dataset[s];try{e[n]=JSON.parse(a.replace(/\'/g,'"'))}catch(t){e[n]=a}return e},{}):{}}static init(t,e){return t||(t=document.body),t instanceof HTMLElement||(t=document.querySelector(t)),t instanceof HTMLElement&&t.matches("[data-o-component=o-message]")?new o(t,e):Array.from(t.querySelectorAll('[data-o-component="o-message"]'),t=>new o(t,e))}}var i=o;const l=()=>{i.init(),document.removeEventListener("o.DOMContentLoaded",l)};"undefined"!=typeof document&&document.addEventListener("o.DOMContentLoaded",l);e.default=i}}]);
//# sourceMappingURL=financial-times-o-message.a92efafcc920.bundle.js.map