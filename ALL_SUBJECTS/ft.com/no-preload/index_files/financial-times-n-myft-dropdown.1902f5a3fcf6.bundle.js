(window.webpackJsonp=window.webpackJsonp||[]).push([["financial-times-n-myft-dropdown"],{bb023db8:function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return p}));const o={};function a(){const e=document.createElement("button");e.classList.add("o-header__top-icon-link","o-header__top-icon-link--myft");document.querySelectorAll(".o-header--large-logo").length>0&&e.classList.add("o-header__top-icon-link--myft-large-header");const t='<span class="o-header__visually-hidden">myFT</span>\n\t\t\t\t\t\t\t<span class="o-icons-icon o-icons-icon--arrow-down"></span>';return e.innerHTML=t.trim(),e.setAttribute("data-trackable","myft-dropdown-open"),e.setAttribute("data-trackable-context-text","myFT"),e.ariaHasPopup=!0,e}function r(e,t){e.setAttribute("aria-expanded",t),e.setAttribute("data-trackable",`'myft-dropdown-${t?"close":"open"}'`);const n=e.querySelector(".o-icons-icon--arrow-down");t?n.classList.add("o-icons-icon--arrow-down--rotated"):n.classList.remove("o-icons-icon--arrow-down--rotated");const o=e.nextElementSibling.querySelectorAll("a"),a=t?0:-1;o.forEach((e,n)=>{0===n&&t&&e.focus(),e.setAttribute("tabindex",a)})}function c(e){clearTimeout(o[e.target.id])}function d(e){clearTimeout(o[e.id]),e.classList.remove("header-top-link-myft-dropdown--expanded"),r(e.previousElementSibling,!1),document.body.removeEventListener("click",i),e.removeEventListener("mouseleave",l),e.removeEventListener("touchend",l)}function i(e){const t=document.querySelectorAll(".header-top-link-myft-dropdown--expanded");Object.values(t).forEach(t=>{t.contains(e.target)||(m({action:"clickOutside"}),d(t))})}function l(){const e=document.querySelectorAll(".header-top-link-myft-dropdown--expanded");Object.values(e).forEach(e=>{o[e.id]=setTimeout((function(){m({action:"moveOut"}),d(e)}),3e3)})}function s(){const e=document.querySelectorAll('button[class*="o-header__top-icon-link--myft"]');Object.values(e).forEach(e=>{e.addEventListener("click",(function(t){t.preventDefault();const n=e.nextElementSibling;n.id=Math.floor(10*Math.random());const o=e.parentElement.querySelector(".header-top-link-myft-dropdown--expanded");m({action:o?"close":"open"}),o?d(n):(t.stopPropagation(),function(e){e.classList.add("header-top-link-myft-dropdown--expanded"),r(e.previousElementSibling,!0),document.body.addEventListener("click",i),e.addEventListener("mouseleave",l),e.addEventListener("mouseenter",c),e.addEventListener("touchend",l),e.addEventListener("touchstart",c,{passive:!0})}(n))}))})}function u(){const e=document.getElementsByClassName("o-header__top-column o-header__top-column--right"),t=a(),n=function(){const e='\n\t\t<ul class="n-myft-dropdown-menu" onclick=event.stopPropagation() role="menu">\n\t\t\t<li class="n-myft-dropdown-list" role="none"><a href="/myft/following" tabindex="-1" data-trackable="myft-dropdown-topic-feed" role="menuitem">Topic Feed</a></li>\n\t\t\t<li class="n-myft-dropdown-list" role="none"><a href="/myft/saved-articles" tabindex="-1" data-trackable="myft-dropdown-saved-articles" role="menuitem">Saved Articles</a></li>\n\t\t\t<li class="n-myft-dropdown-list" role="none"><a href="/myft/explore" tabindex="-1" data-trackable="myft-dropdown-explore-feed" role="menuitem">Explore Feed</a></li>\n\t\t\t<li class="n-myft-dropdown-list" role="none"><a href="/newsletters" tabindex="-1" data-trackable="myft-dropdown-newsletters" role="menuitem">Newsletters</a></li>\n\t\t\t<li class="n-myft-dropdown-list" role="none"><a href="/myft/alerts" tabindex="-1" data-trackable="myft-dropdown-contact-preferences" role="menuitem">Contact Preferences</a></li>\n\t\t</ul>',t=document.createElement("span");return t.innerHTML=e.trim(),t.classList.add("header-top-link-myft-dropdown"),t}();Object.values(e).forEach(e=>{e.append(t.cloneNode(!0),n.cloneNode(!0)),e.classList.add("o-header__top-column--right--myft-dropdown")})}function m(e){let{action:t,text:n}=e;document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"myFTDropdown",teamName:"customer-products-us-growth",amplitudeExploratory:!0,action:t,...n&&{text:n}},bubbles:!0}))}function p(){!function(){const e=document.querySelectorAll('[class="o-header__top-column--right--myft-dropdown"], a[class*="o-header__top-icon-link--myft"]');Object.values(e).forEach(e=>{e.remove()})}(),u(),s(),function(){const e=document.querySelectorAll(".n-myft-dropdown-list > a");Object.values(e).forEach(e=>{e.addEventListener("click",(function(){m({action:"click",text:e.text})}))})}()}}}]);
//# sourceMappingURL=financial-times-n-myft-dropdown.1902f5a3fcf6.bundle.js.map