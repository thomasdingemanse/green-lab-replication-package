/* 
 * Generates UUID v4
 */
window.uuid||(window.uuid={}),void 0===window.uuid.v4&&(window.uuid.v4=function(){var e,t,i="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(i+="-"),i+=(12==e?4:16==e?3&t|8:t).toString(16);return i}),define("fly/libs/uuid.v4",function(){}),function(){"use strict";var e=null;define("version",{version:"1.0",load:function(t,i,r,n){var a=n.config.version;if(!a)throw new Error("A version config has not been setup");if(!a[t])throw new Error("A version was not specified for module: "+t);e&&a[t],i([t+"-"+n.config.version[t]],function(e){r(e)})},normalize:function(t){var i=/\(([^)]*)\)/.exec(t);return e=null,i&&(e=i[1],t=t.substring(0,i.index)),t}})}(),define("fly/utils/string-helper-2.0",[],function(){return{capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},lowerFirst:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},toBool:function(e){return!0===e||"true"===e||"1"===e},toCleanArray:function(e,t){return t=t||",",e=(e="string"==typeof e?e.split(t).map(function(e){return e.trim()}):Array.prototype.slice.call(e)).filter(function(e){return e})},toCamelCase:function(e,t){return t=t||"-",e.replace(new RegExp("(\\"+t+"[a-z])","g"),function(e){return e.toUpperCase().replace(t,"")})},fromCamelCase:function(e,t){return t=t||"-",e.replace(/[A-Z]/g,function(e){return t+e.toLowerCase()})},toEventName:function(e){return e.replace(/^on([A-Z])/,function(e){return e.charAt(2).toLowerCase()})},isEventOption:function(e){return/^on([A-Z])/.test(e)}}}),define("fly/utils/url-helper-2.0",[],function(){return{buildUrl:function(e,t,i,r){var n=e+t;return(i=this._stringifyObject(i))&&(n+="?"+i),(r=this._stringifyObject(r))&&(n+="#"+r),n},getParam:function(e,t){var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t||window.location);return i?i[1]:null},getParamAsArray:function(e){var t=this.getParam(e);return t?t.split(","):null},getAllParams:function(e){var t=(e?this._getParsableUrl(e):window.location).search.substring(1),i=t.split("&"),r={};if(""===t)return{};for(var n=0;n<i.length;n++){var a=i[n].split("=");r[unescape(a[0])]=unescape(a[1])}return r},getHashParam:function(e,t){var i=(t||window.location.hash).substring(1),r="",n="";if(-1!=i.indexOf(e)){if(-1!=(r=i.substring(i.indexOf(e))).indexOf("&"))n=r.split("&")[0].split("=");else n=r.split("=");return n[1]}return!1},paramExists:function(e,t){return!!(t||window.location.href).match("[\\?&]"+e+"([=&#]|$)")},getOrigin:function(e){var t=e?this._getParsableUrl(e):window.location;return t.origin||t.protocol+"//"+t.host},getPath:function(e){var t=(e?this._getParsableUrl(e):window.location).pathname;return-1===[void 0,"/"].indexOf(t[0])&&(t="/"+t),t},_getParsableUrl:function(e){var t=document.createElement("a");return t.href=e,t},_stringifyObject:function(e,t,i){var r="";if(t=t||"&",i=i||"=",null==e||[]==e||{}==e);else if(Array.isArray(e))r=e.join(t);else if("object"==typeof e){for(var n in e){r+=n+i+e[n]+t}r=r.substring(0,r.length-1)}else"string"==typeof e&&(r=e);return r}}}),function(e){var t;if("function"==typeof define&&define.amd&&(define("fly/libs/js-cookie-2.2.0",e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var i=window.Cookies,r=window.Cookies=e();r.noConflict=function(){return window.Cookies=i,r}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var r in i)t[r]=i[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function i(r){function n(){}function a(t,i,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},n.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(i);/^[\{\[]/.test(o)&&(i=o)}catch(e){}i=r.write?r.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,!0!==a[l]&&(s+="="+a[l].split(";")[0]));return document.cookie=t+"="+i+s}}function o(e,i){if("undefined"!=typeof document){for(var n={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),l=s.slice(1).join("=");i||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(s[0]);if(l=(r.read||r)(l,c)||t(l),i)try{l=JSON.parse(l)}catch(e){}if(n[c]=l,e===c)break}catch(e){}}return e?n[e]:n}}return n.set=a,n.get=function(e){return o(e,!1)},n.getJSON=function(e){return o(e,!0)},n.remove=function(t,i){a(t,"",e(i,{expires:-1}))},n.defaults={},n.withConverter=i,n}(function(){})}),define("fly/managers/cookie-2.0",["fly/libs/js-cookie-2.2.0"],function(e){var t={domains:{default:null}};return{init:function(e){this.setConfig(e)},setConfig:function(e){"object"==typeof e&&null!==e&&Object.assign(t,e)},set:function(i,r,n){n=n||{},("object"==typeof r&&null!==r||Array.isArray(r))&&(r=JSON.stringify(r)),n.domain?n.domain in t.domains&&(n.domain=t.domains[n.domain]):n.domain=t.domains.default,n.domain||delete n.domain,e.set(i,r,n)},get:function(t){var i,r=e.get(t);try{i=JSON.parse(r)}catch(e){i=r}return i},remove:function(t,i){e.remove(t,i)}}}),define("fly/managers/debug-2.0",["module","version!fly/utils/string-helper","version!fly/utils/url-helper","version!fly/managers/cookie"],function(e,t,i,r){var n,a,o,s={},l={queryParam:"jsDebug",cookie:{name:"fly_js_debug",domain:"default"}},c=!1,u=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};return Object.assign(l,e.config()),(a=i.getParamAsArray(l.queryParam)||[])?r.set(l.cookie.name,a,{path:"/",domain:l.cookie.domain}):o=r.get(l.cookie.name)||[],(a.indexOf("true")>-1||a.indexOf("all")>-1)&&(r.set(l.cookie.name,!0,{path:"/",domain:l.cookie.domain}),c=!0),(n=function(e){this.name=e,this.color="hsl("+u(0,360)+","+u(35,80)+"%,"+u(20,45)+"%)",(!0===o||Array.isArray(a)&&a.indexOf(this.name)>-1||Array.isArray(o)&&o.indexOf(this.name)>-1)&&this.enable()}).prototype={constructor:n,enabled:!1,_call:function(e,t){if(window.console&&(this.enabled||c)){t.callee=t.callee.caller;var i=[].slice.call(t);-1<["error","info","log","trace","warn"].indexOf(e)&&i.unshift("%c "+this.name+" ","color:#fff;border-radius:3px;background-color:"+this.color+";"),"object"==typeof window.console&&"function"==typeof window.console[e]&&window.console[e].apply(window.console,i)}return this},disable:function(){return this.enabled=!1,this},enable:function(){return this.enabled=!0,this},error:function(){return this._call("error",arguments)},info:function(){return this._call("info",arguments)},log:function(){return this._call("log",arguments)},profile:function(){return this._call("profile",arguments)},profileEnd:function(){return this._call("profileEnd",arguments)},timeStamp:function(){return this._call("timeStamp",arguments)},trace:function(){return this._call("trace",arguments)},warn:function(){return this._call("warn",arguments)}},{init:function(e){var t=new n(e);return s[e]=t,t},get:function(e){return s[e]||this.init(e)}}}),define("libs/hls-video",["version!fly/managers/debug"],function(e){return function(t){var i=e.init("hls-wrapper");i.log("Prepare to initialize");var r,n,a,o=null,s=function(e,t,r){return i.log("togglePlayback",t?"pause":"play",r),t&&e.paused?void i.log("Video is already paused",r):t?(i.log("PAUSE video",r),e.pause(),o&&o.stopLoad(),!0):e.paused?(i.log("PLAY video",r),e.play(),o&&o.startLoad(-1),!0):void i.log("Video IS not paused",r)},l=function(e,t,r,n){if(void 0!==document.hidden||void 0!==document.webkitHidden){document.addEventListener(r,function(){i.log("onPageVisibilityChange","Page is",document[n]?"hidden":"visible"),s(e,document[n],t,o)},!1)}},c=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return i&&r},u=function(e){return e.defaultPrevented||"VIDEO"!=e.nodeName||!e.hasAttribute("data-hls-wrapper")}(t)?null:function(e){var t=e;return t.muted=t.hasAttribute("muted"),t.autoplay=t.hasAttribute("autoplay"),t.disableRemotePlayback=!0,t.onerror=function(e){i.error("Error "+t.error.code+"; details: "+t.error.message),t.getAttribute("data-poster")&&t.setAttribute("poster",t.getAttribute("data-poster"))},t}(t),d=u?function(e){var t=e.getAttribute("src"),r=e.getAttribute("data-src"),n=e.querySelector("source"),a=n&&n.getAttribute("data-src");return t=t||r||(n&&n.src?n.src:a||null),i.log("Found video source",t),t}(u):null;return function(e){if(!e)return i.error("No video source available"),!0}(d)?null:(r=function(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange",pageVisibilitySupported=!0),[e,t]}(),n=r[0],a=r[1],l(u,d,a,n),u.hasAttribute("data-hls-wrapper-no-observer")?i.log("IntersectionObserver is disabled on this video"):function(e,t){try{new IntersectionObserver(function(r){i.log("intersectionObserver",r[0].intersectionRatio,e),setTimeout(s,10,e,0==r[0].intersectionRatio,t)}).observe(e)}catch(e){i.error(e)}}(u,d),void(function(e){var t=e.querySelector("source");return!(t&&e.canPlayType(t.type)||e.canPlayType("application/vnd.apple.mpegURL")||!c())||(i.log("native playback is supported or HLS.js is not supported"),!1)}(u)&&(o=function(e,t){require(["polyfill!hls.min"],function(r){return window.Hls=window.Hls||r,(o=new window.Hls({capLevelToPlayerSize:!0,enableWebVTT:!1,enableCEA708Captions:!1,autoLevelCapping:2})).attachMedia(e),o.on(r.Events.MEDIA_ATTACHED,function(){o.loadSource(t),o.on(r.Events.MANIFEST_PARSED,function(){s(e,!e.hasAttribute("autoplay"),t)})}),o.on(r.Events.ERROR,function(e,t){if(t.fatal)switch(t.type){case r.ErrorTypes.NETWORK_ERROR:i.error("fatal network error encountered, try to recover",t),o.startLoad();break;case r.ErrorTypes.MEDIA_ERROR:i.error("fatal media error encountered, try to recover",t),o.recoverMediaError();break;default:i.error("cannot recover, destroy",t),o.destroy()}}),o})}(u,d))))}}),window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.init=!1,window.lazySizesConfig.loadMode=1,window.lazySizesConfig.preloadAfterLoad=!!parseInt(CBSNEWS.features.getFeatureValue("lazysizes.preloadAfterLoad"));var userAgent=navigator.userAgent.toLowerCase(),isSafari=/^((?!chrome).)*safari/.test(userAgent);define("libs/lazysizes.plugins",["libs/hls-video"],function(e){"use strict";addEventListener("lazybeforeunveil",function(t){if(!t.defaultPrevented){if(t.target.getAttribute("data-component")){if("string"==typeof(i=t.target.getAttribute("data-component"))&&(i=[i]),i[0]&&i[0].match(/^\[/))var i=JSON.parse(i[0]);else i=i;i.forEach(function(e,i){if(!CBSNEWS.features.isFeatureDisabled("component-"+e)){var r=JSON.parse(t.target.getAttribute("data-"+e+"-options"))||{};require(["components/"+e],function(e){e(t.target,r)})}})}var r=["videoPreview"];if(c=t.target.getAttribute("data-preview-url"),"VIDEO"==t.target.nodeName&&c&&(c.indexOf("splice.amlg.io")>=0&&r.push("splice"),CBSNEWS.features.executeIfEnabled(r,function(i){t.target.setAttribute("src",i),e(t.target)},window,[c])),c=t.target.getAttribute("data-poster"),"VIDEO"==t.target.nodeName&&c&&CBSNEWS.features.executeIfDisabled(r,function(e){t.target.setAttribute("poster",c)},window,[c]),"IFRAME"==t.target.nodeName){var n=t.target,a=n.parentElement.querySelector(".embed__resizer"),o=(n.getAttribute("data-width")||"").replace("px",""),s=(n.getAttribute("data-height")||"").replace("px","");if(a&&a.hasAttribute("data-resized")||(a&&s>0&&o>0?a.setAttribute("style","padding-top:"+s/o*100+"%"):(o&&n.setAttribute("width",o),s&&n.setAttribute("height",s),a&&s&&a.setAttribute("style","padding-top:"+s+"px"))),/^\/embed\/video\//.test(n.getAttribute("src")||n.getAttribute("data-src"))&&!document.body.classList.contains("has__video-player")&&document.body.classList.add("has__video-player"),t.target.getAttribute("data-src")){t.preventDefault();var l=function(e){var t=e.getAttribute("data-src");if(t){var i=e.cloneNode();i.setAttribute("src",t),i.removeAttribute("data-src"),e.parentElement.replaceChild(i,e)}},c=t.target.getAttribute("data-src");if(/^(?:https?:)?\/\/.+?cbsnews.com/i.test(c)||/^\/[^\/]/.test(c))CBSNEWS.features.executeIfEnabled(["iframe"],l,this,[t.target,c]);else{var u=t.target.getAttribute("data-optanon-category")||"social";CBSNEWS.features.executeWithConsent(["iframe"],u,l,this,[t.target,c])}}}if(c=t.target.getAttribute("href"),"LINK"==t.target.nodeName&&c){var d=new XMLHttpRequest;d.open("GET",c,!0),d.send(),d.onload=function(){if(d.responseXML&&"image/svg+xml"===d.responseXML.contentType)document.head.insertAdjacentHTML("beforeend",d.responseText);else if("application/json"===d.getResponseHeader("Content-Type")){var e=JSON.parse(d.responseText);t.target.insertAdjacentHTML("afterend",e.html)}else t.target.insertAdjacentHTML("afterend",d.responseText)}}if((c=t.target.getAttribute("data-require"))&&window.require){var p=t.target.getAttribute("data-require-callback"),h=JSON.parse(t.target.getAttribute("data-require-arguments"));require([c],function(e,t){return function(){e&&"function"==typeof window[e]&&window[e].apply(window,t||arguments)}}(p,h))}if((c=t.target.getAttribute("data-lazy-taboola"))&&t.target.setAttribute("data-taboola",c),(c=t.target.getAttribute("data-taboola"))&&window.CBSNEWS.taboola&&window.CBSNEWS.taboola.push(t.target,!0),c=t.target.getAttribute("data-ad-unit")){var f=JSON.parse(c),y=document.querySelectorAll('[id="'+t.target.id+'"]').length;Array.isArray(f)&&y>1&&(f[1]+=document.querySelectorAll('[id^="'+f[0]+'"]').length-y+1,t.target.setAttribute("id",f.join("")),t.target.setAttribute("data-ad-unit",JSON.stringify(f)),console.log("ADS: incremental ad",f,"is clashing with another, updated id to",t.target.id)),console.log("ADS: queuing to lazyload",t.target.getAttribute("id")),window.cbsiGptDivIds=window.cbsiGptDivIds||[],cbsiGptDivIds.push(f)}}},!1)}),function(e){var t=function(e,t,i){"use strict";var r,n;if(function(){var t,i={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in n=e.lazySizesConfig||e.lazysizesConfig||{},i)t in n||(n[t]=i[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:n,noSupport:!0};var a=t.documentElement,o=e.HTMLPictureElement,s="addEventListener",l="getAttribute",c=e[s].bind(e),u=e.setTimeout,d=e.requestAnimationFrame||u,p=e.requestIdleCallback,h=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],y={},v=Array.prototype.forEach,m=function(e,t){return y[t]||(y[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),y[t].test(e[l]("class")||"")&&y[t]},g=function(e,t){m(e,t)||e.setAttribute("class",(e[l]("class")||"").trim()+" "+t)},A=function(e,t){var i;(i=m(e,t))&&e.setAttribute("class",(e[l]("class")||"").replace(i," "))},E=function(e,t,i){var r=i?s:"removeEventListener";i&&E(e,t),f.forEach(function(i){e[r](i,t)})},T=function(e,i,n,a,o){var s=t.createEvent("Event");return n||(n={}),n.instance=r,s.initEvent(i,!a,!o),s.detail=n,e.dispatchEvent(s),s},b=function(t,i){var r;!o&&(r=e.picturefill||n.pf)?(i&&i.src&&!t[l]("srcset")&&t.setAttribute("srcset",i.src),r({reevaluate:!0,elements:[t]})):i&&i.src&&(t.src=i.src)},S=function(e,t){return(getComputedStyle(e,null)||{})[t]},C=function(e,t,i){for(i=i||e.offsetWidth;i<n.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},_=function(){var e,i,r=[],n=[],a=r,o=function(){var t=a;for(a=r.length?n:r,e=!0,i=!1;t.length;)t.shift()();e=!1},s=function(r,n){e&&!n?r.apply(this,arguments):(a.push(r),i||(i=!0,(t.hidden?u:d)(o)))};return s._lsFlush=o,s}(),P=function(e,t){return t?function(){_(e)}:function(){var t=this,i=arguments;_(function(){e.apply(t,i)})}},I=function(e){var t,r=0,a=n.throttleDelay,o=n.ricTimeout,s=function(){t=!1,r=i.now(),e()},l=p&&o>49?function(){p(s,{timeout:o}),o!==n.ricTimeout&&(o=n.ricTimeout)}:P(function(){u(s)},!0);return function(e){var n;(e=!0===e)&&(o=33),t||(t=!0,(n=a-(i.now()-r))<0&&(n=0),e||n<9?l():u(l,n))}},R=function(e){var t,r,n=function(){t=null,e()},a=function(){var e=i.now()-r;e<99?u(a,99-e):(p||n)(n)};return function(){r=i.now(),t||(t=u(a,99))}},k=function(){var o,p,f,y,C,k,O,L,D,M,w,x,U=/^img$/i,B=/^iframe$/i,V="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),F=0,H=0,K=-1,G=function(e){H--,(!e||H<0||!e.target)&&(H=0)},j=function(e){return null==x&&(x="hidden"==S(t.body,"visibility")),x||!("hidden"==S(e.parentNode,"visibility")&&"hidden"==S(e,"visibility"))},W=function(e,i){var r,n=e,o=j(e);for(L-=i,w+=i,D-=i,M+=i;o&&(n=n.offsetParent)&&n!=t.body&&n!=a;)(o=(S(n,"opacity")||1)>0)&&"visible"!=S(n,"overflow")&&(r=n.getBoundingClientRect(),o=M>r.left&&D<r.right&&w>r.top-1&&L<r.bottom+1);return o},Y=function(){var e,i,s,c,u,d,h,f,v,m,g,A,E=r.elements;if((y=n.loadMode)&&H<8&&(e=E.length)){for(i=0,K++;i<e;i++)if(E[i]&&!E[i]._lazyRace)if(!V||r.prematureUnveil&&r.prematureUnveil(E[i]))Z(E[i]);else if((f=E[i][l]("data-expand"))&&(d=1*f)||(d=F),m||(m=!n.expand||n.expand<1?a.clientHeight>500&&a.clientWidth>500?500:370:n.expand,r._defEx=m,g=m*n.expFactor,A=n.hFac,x=null,F<g&&H<1&&K>2&&y>2&&!t.hidden?(F=g,K=0):F=y>1&&K>1&&H<6?m:0),v!==d&&(k=innerWidth+d*A,O=innerHeight+d,h=-1*d,v=d),s=E[i].getBoundingClientRect(),(w=s.bottom)>=h&&(L=s.top)<=O&&(M=s.right)>=h*A&&(D=s.left)<=k&&(w||M||D||L)&&(n.loadHidden||j(E[i]))&&(p&&H<3&&!f&&(y<3||K<4)||W(E[i],d))){if(Z(E[i]),u=!0,H>9)break}else!u&&p&&!c&&H<4&&K<4&&y>2&&(o[0]||n.preloadAfterLoad)&&(o[0]||!f&&(w||M||D||L||"auto"!=E[i][l](n.sizesAttr)))&&(c=o[0]||E[i]);c&&!u&&Z(c)}},z=I(Y),$=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(G(e),g(t,n.loadedClass),A(t,n.loadingClass),E(t,Q),T(t,"lazyloaded"))},q=P($),Q=function(e){q({target:e.target})},X=function(e){var t,i=e[l](n.srcsetAttr);(t=n.customMedia[e[l]("data-media")||e[l]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i)},J=P(function(e,t,i,r,a){var o,s,c,d,p,y;(p=T(e,"lazybeforeunveil",t)).defaultPrevented||(r&&(i?g(e,n.autosizesClass):e.setAttribute("sizes",r)),s=e[l](n.srcsetAttr),o=e[l](n.srcAttr),a&&(d=(c=e.parentNode)&&h.test(c.nodeName||"")),y=t.firesLoad||"src"in e&&(s||o||d),p={target:e},g(e,n.loadingClass),y&&(clearTimeout(f),f=u(G,2500),E(e,Q,!0)),d&&v.call(c.getElementsByTagName("source"),X),s?e.setAttribute("srcset",s):o&&!d&&(B.test(e.nodeName)?function(e,t){var i=e.getAttribute("data-load-mode")||n.iframeLoadMode;0==i?e.contentWindow.location.replace(t):1==i&&(e.src=t)}(e,o):e.src=o),a&&(s||d)&&b(e,{src:o})),e._lazyRace&&delete e._lazyRace,A(e,n.lazyClass),_(function(){var t=e.complete&&e.naturalWidth>1;y&&!t||(t&&g(e,n.fastLoadedClass),$(p),e._lazyCache=!0,u(function(){"_lazyCache"in e&&delete e._lazyCache},9)),"lazy"==e.loading&&H--},!0)}),Z=function(e){if(!e._lazyRace){var t,i=U.test(e.nodeName),r=i&&(e[l](n.sizesAttr)||e[l]("sizes")),a="auto"==r;(!a&&p||!i||!e[l]("src")&&!e.srcset||e.complete||m(e,n.errorClass)||!m(e,n.lazyClass))&&(t=T(e,"lazyunveilread").detail,a&&N.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,H++,J(e,t,a,r,i))}},ee=R(function(){n.loadMode=3,z()}),te=function(){3==n.loadMode&&(n.loadMode=2),ee()},ie=function(){p||(i.now()-C<999?u(ie,999):(p=!0,n.loadMode=3,z(),c("scroll",te,!0)))};return{_:function(){C=i.now(),r.elements=t.getElementsByClassName(n.lazyClass),o=t.getElementsByClassName(n.lazyClass+" "+n.preloadClass),c("scroll",z,!0),c("resize",z,!0),c("pageshow",function(e){if(e.persisted){var i=t.querySelectorAll("."+n.loadingClass);i.length&&i.forEach&&d(function(){i.forEach(function(e){e.complete&&Z(e)})})}}),e.MutationObserver?new MutationObserver(z).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a[s]("DOMNodeInserted",z,!0),a[s]("DOMAttrModified",z,!0),setInterval(z,999)),c("hashchange",z,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){t[s](e,z,!0)}),/d$|^c/.test(t.readyState)?ie():(c("load",ie),t[s]("DOMContentLoaded",z),u(ie,2e4)),r.elements.length?(Y(),_._lsFlush()):z()},checkElems:z,unveil:Z,_aLSL:te}}(),N=function(){var e,i=P(function(e,t,i,r){var n,a,o;if(e._lazysizesWidth=r,r+="px",e.setAttribute("sizes",r),h.test(t.nodeName||""))for(a=0,o=(n=t.getElementsByTagName("source")).length;a<o;a++)n[a].setAttribute("sizes",r);i.detail.dataAttr||b(e,i.detail)}),r=function(e,t,r){var n,a=e.parentNode;a&&(r=C(e,a,r),(n=T(e,"lazybeforesizes",{width:r,dataAttr:!!t})).defaultPrevented||(r=n.detail.width)&&r!==e._lazysizesWidth&&i(e,a,n,r))},a=R(function(){var t,i=e.length;if(i)for(t=0;t<i;t++)r(e[t])});return{_:function(){e=t.getElementsByClassName(n.autosizesClass),c("resize",a)},checkElems:a,updateElem:r}}(),O=function(){!O.i&&t.getElementsByClassName&&(O.i=!0,N._(),k._())};return u(function(){n.init&&O()}),r={cfg:n,autoSizer:N,loader:k,init:O,uP:b,aC:g,rC:A,hC:m,fire:T,gW:C,rAF:_}}(e,e.document,Date);"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("lazysizes/lazysizes-umd.min",t):e.lazySizes=t}(window),require(["libs/lazysizes.plugins","lazysizes/lazysizes-umd.min"],function(e,t){t.init()}),define("common/lazysizes",function(){}),function(){"use strict";var e={"element.closest":function(){return!!Element.prototype.closest},fetch:function(){return!!window.fetch},"function.prototype.bind":function(){return!!Function.prototype.bind},"intersection-observer":function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype},"hls.min":function(){return!!window.Hls||document.createElement("video").canPlayType("application/vnd.apple.mpegURL")},lineclamp:function(){return void 0!==document.documentElement.style.webkitLineClamp},"object.assign":function(){return"function"==typeof Object.assign},objectfit:function(){return void 0===document.documentElement.style.msTouchAction},Promise:function(){return!!("Promise"in window)},sendBeacon:function(){return"function"==typeof window.navigator.sendBeacon},"window.CustomEvent":function(){return!(!window.CustomEvent||"object"==typeof window.CustomEvent)}};define("polyfill",{version:"1.0",load:function(t,i,r,n){if(!e)throw new Error("A polyfill config has not been setup");if(!e[t])throw new Error("A polyfill for "+t+" was not specified");n.isBuild||!0===e[t]()?r():i(["polyfills/"+t],function(e){r(e)})}})}(),define("third-party/ima",[],function(){CBSNEWS.features.adsIMAloaded=null,CBSNEWS.features.executeIfEnabled(["ads","adsIMA"],function(){CBSNEWS.features.adsIMAloaded=!1,require(["https://imasdk.googleapis.com/js/sdkloader/ima3.js#"],function(){CBSNEWS.features.adsIMAloaded=!0})},this)}),define("third-party/dai",[],function(){CBSNEWS.features.adsDAIloaded=null,CBSNEWS.features.executeIfEnabled(["ads","adsDAI"],function(){CBSNEWS.features.adsDAIloaded=!1,require(["https://imasdk.googleapis.com/js/sdkloader/ima3_dai.js#"],function(){CBSNEWS.features.adsDAIloaded=!0})},this)});
/*! intercom.js | https://github.com/diy/intercom.js | Apache License (v2) */
var Intercom=function(){var e=function(){};e.createInterface=function(e){var t={on:function(t,i){void 0===this[e]&&(this[e]={}),this[e].hasOwnProperty(t)||(this[e][t]=[]),this[e][t].push(i)},off:function(t,i){void 0!==this[e]&&this[e].hasOwnProperty(t)&&a.removeItem(i,this[e][t])},trigger:function(t){if(void 0!==this[e]&&this[e].hasOwnProperty(t))for(var i=Array.prototype.slice.call(arguments,1),r=0;r<this[e][t].length;r++)this[e][t][r].apply(this[e][t][r],i)}};return t};var t=e.createInterface("_handlers");e.prototype._on=t.on,e.prototype._off=t.off,e.prototype._trigger=t.trigger;var i,r=e.createInterface("handlers");e.prototype.on=function(){r.on.apply(this,arguments),Array.prototype.unshift.call(arguments,"on"),this._trigger.apply(this,arguments)},e.prototype.off=r.off,e.prototype.trigger=r.trigger;try{i=window.localStorage}catch(e){}void 0===i&&(i={getItem:function(){},setItem:function(){},removeItem:function(){}});var n,a={};a.guid=(n=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}),a.throttle=function(e,t){var i=0;return function(){var r=(new Date).getTime();r-i>e&&(i=r,t.apply(this,arguments))}},a.extend=function(e,t){if(void 0!==e&&e||(e={}),"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},a.removeItem=function(e,t){for(var i=t.length-1;i>=0;i--)t[i]===e&&t.splice(i,1);return t};var o=function(){var e=this,t=(new Date).getTime();this.origin=a.guid(),this.lastMessage=t,this.bindings=[],this.receivedIDs={},this.previousValues={};var i=function(){e._onStorageEvent.apply(e,arguments)};window.attachEvent?document.attachEvent("onstorage",i):window.addEventListener("storage",i,!1)};o.prototype._transaction=function(e){var t=this,r=!1,n=!1,a=null,o=function(){if(!r){var l=(new Date).getTime(),c=parseInt(i.getItem(u)||0);if(c&&l-c<1e3)return n||(t._on("storage",o),n=!0),void(a=window.setTimeout(o,20));r=!0,i.setItem(u,l),e(),s()}},s=function(){n&&t._off("storage",o),a&&window.clearTimeout(a),i.removeItem(u)};o()},o.prototype._cleanup_emit=a.throttle(100,function(){this._transaction(function(){for(var e=(new Date).getTime()-d,t=0,r=JSON.parse(i.getItem(l)||"[]"),n=r.length-1;n>=0;n--)r[n].timestamp<e&&(r.splice(n,1),t++);t>0&&i.setItem(l,JSON.stringify(r))})}),o.prototype._cleanup_once=a.throttle(100,function(){var e=this;this._transaction(function(){var t,r=JSON.parse(i.getItem(c)||"{}"),n=((new Date).getTime(),0);for(t in r)e._once_expired(t,r)&&(delete r[t],n++);n>0&&i.setItem(c,JSON.stringify(r))})}),o.prototype._once_expired=function(e,t){if(!t)return!0;if(!t.hasOwnProperty(e))return!0;if("object"!=typeof t[e])return!0;var i=t[e].ttl||p,r=(new Date).getTime();return t[e].timestamp<r-i},o.prototype._localStorageChanged=function(e,t){if(e&&e.key)return e.key===t;var r=i.getItem(t);return r!==this.previousValues[t]&&(this.previousValues[t]=r,!0)},o.prototype._onStorageEvent=function(e){e=e||window.event;var t=this;this._localStorageChanged(e,l)&&this._transaction(function(){for(var e=(new Date).getTime(),r=i.getItem(l),n=JSON.parse(r||"[]"),a=0;a<n.length;a++)if(n[a].origin!==t.origin&&!(n[a].timestamp<t.lastMessage)){if(n[a].id){if(t.receivedIDs.hasOwnProperty(n[a].id))continue;t.receivedIDs[n[a].id]=!0}t.trigger(n[a].name,n[a].payload)}t.lastMessage=e}),this._trigger("storage",e)},o.prototype._emit=function(e,t,r){if((r="string"==typeof r||"number"==typeof r?String(r):null)&&r.length){if(this.receivedIDs.hasOwnProperty(r))return;this.receivedIDs[r]=!0}var n={id:r,name:e,origin:this.origin,timestamp:(new Date).getTime(),payload:t},a=this;this._transaction(function(){var r=i.getItem(l)||"[]",o="[]"===r?"":",";r=[r.substring(0,r.length-1),o,JSON.stringify(n),"]"].join(""),i.setItem(l,r),a.trigger(e,t),window.setTimeout(function(){a._cleanup_emit()},50)})},o.prototype.bind=function(e,t){for(var i=0;i<o.bindings.length;i++){var r=o.bindings[i].factory(e,t||null,this);r&&this.bindings.push(r)}},o.prototype.emit=function(e,t){this._emit.apply(this,arguments),this._trigger("emit",e,t)},o.prototype.once=function(e,t,r){if(o.supported){var n=this;this._transaction(function(){var a=JSON.parse(i.getItem(c)||"{}");n._once_expired(e,a)&&(a[e]={},a[e].timestamp=(new Date).getTime(),"number"==typeof r&&(a[e].ttl=1e3*r),i.setItem(c,JSON.stringify(a)),t(),window.setTimeout(function(){n._cleanup_once()},50))})}},a.extend(o.prototype,e.prototype),o.bindings=[],o.supported=void 0!==i;var s,l="intercom",c="intercom_once",u="intercom_lock",d=5e4,p=36e5;o.destroy=function(){i.removeItem(u),i.removeItem(l),i.removeItem(c)},o.getInstance=(s=null,function(){return s||(s=new o),s});var h=function(e,t,i){if((t=a.extend({id:null,send:!0,receive:!0},t)).receive){var r=[],n=function(n,a){-1===r.indexOf(n)&&(r.push(n),e.on(n,function(e){var r="function"==typeof t.id?t.id(n,e):null,a="function"!=typeof t.receive||t.receive(n,e);(a||"boolean"!=typeof a)&&i._emit(n,e,r)}))};for(var o in i.handlers)for(var s=0;s<i.handlers[o].length;s++)n(o,i.handlers[o][s]);i._on("on",n)}t.send&&i._on("emit",function(i,r){var n="function"!=typeof t.send||t.send(i,r);(n||"boolean"!=typeof n)&&e.emit(i,r)})};return h.factory=function(e,t,i){return void 0!==e.socket&&new h(e,t,i)},o.bindings.push(h),o}();define("libs/intercom.min",function(){}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("video/tracking-service/v21.12.7/ts.lib.min",["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).vtg=e.vtg||{},e.vtg.ts={}))}(this,function(e){"use strict";function t(e){return function(t){t.prototype.sdkInfo=e}}var i=(r.get=function(e){var t=S.get("document");return t?(t=("; "+t.cookie).split(["; ",e,"="].join("")),e="",1<t.length&&(t=t[1].split(";"))&&(e=t.shift()||""),e):""},r.set=function(e,t,i){var r=S.get("document");r&&(r.cookie=[e+"="+t,i=i?";domain="+i:"",";expires=Tue, 19 Jan 2038 03:14:07 UTC",";path=/"].join(""))},r);function r(){}var n=(a.getTime=function(){return(new Date).getTime()},a.getElapsedSince=function(e){return a.getTime()-e},a);function a(){}var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};function s(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function l(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;0<=s;s--)(n=e[s])&&(o=(a<3?n(o):3<a?n(t,i,o):n(t,i))||o);return 3<a&&o&&Object.defineProperty(t,i,o),o}function c(e,t,i,r){return new(i=i||Promise)(function(n,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function u(e,t){var i,r,n,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},o={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,(o=n?[2&o[0],n.value]:o)[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=0<(n=a.trys).length&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var d=(p.POST=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,new Promise(function(t,i){var r=new XMLHttpRequest,n=p.makeUrl(e.url);r.open("POST",n,!0),r.setRequestHeader("Content-Type",e.type||"application/json"),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&t({xhr:r,status:r.status,text:200<=r.status&&r.status<300||304===r.status?r.responseText:r.statusText})},r.onerror=function(){i(new Error("Error: xhr POST "+e.url))},r.send(e.data)})]})})},p.GET=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,new Promise(function(t,i){var r=new XMLHttpRequest,n=p.makeUrl(-1===e.url.indexOf("?")?e.url+"?"+e.data:e.url);r.open("GET",n,!0),e.type&&r.setRequestHeader("Content-Type",e.type),r.onload=function(){t({xhr:r,status:r.status,text:r.responseText})},r.onerror=function(){i(new Error("Error: xhr GET "+e.url))},r.send()})]})})},p.IMAGE=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,new Promise(function(t,i){var r=new Image;r.onload=function(){return t(null)},r.onerror=function(){return i()},r.src=e.url})]})})},p.makeUrl=function(e){return S.getProtocol()+e},p);function p(){}var h=(f.debug=function(e,t){},f.warn=function(e){var t=console;t&&t.warn("[ts] "+e)},f);function f(){}var y=(v.prototype.on=function(e,t){this.cbs=this.add(e,t,this.cbs)},v.prototype.once=function(e,t){this.one=this.add(e,t,this.one)},v.prototype.add=function(e,t,i){return"function"!=typeof t||(i[e]||(i[e]=[]),i[e].push(t)),i},v.prototype.off=function(e){var t=this;"function"==typeof e&&Object.keys(this.cbs).forEach(function(i){t.cbs[i]=t.cbs[i].filter(function(t){return t!==e})})},v.prototype.emit=function(e,t){this.post(e,t,this.one),this.one[e]=[],this.post(e,t,this.cbs)},v.prototype.post=function(e,t,i){(i[e]||[]).forEach(function(e){e(t)})},v);function v(){this.cbs={},this.one={}}var m=(g.prototype.add=function(e){this.items.length>this.maxLength&&this.reset(),this.items.unshift(e)},g.prototype.each=function(e){if(!this.running){this.running=!0;for(var t=this.items.length;t--;){var i=this.items.pop();i&&e(i)}this.running=!1}},g.prototype.reset=function(){this.items=[]},g);function g(){this.items=[],this.running=!1,this.maxLength=100}var A=(E.prototype.start=function(e){setInterval&&(this.running||(this.id=setInterval(e,this.millisec),this.running=!0))},E.prototype.stop=function(){clearInterval&&(clearInterval(this.id),this.running=!1)},E);function E(e){this.millisec=e,this.running=!1}var T=(b.assign=function(e,t){if(t=t||{},"object"!=typeof e)return t;var i,r;for(i in e)r=e[i],e.hasOwnProperty(i)&&b.isDefined(r)&&(t[i]="object"==typeof r?b.assign(r,t[i]):r);return t},b.trim=function(e){return b.isDefined(e)?e.toString().trim():e},b.isDefined=function(e){return!(void 0===e||"undefined"===e||null===e||""===e)},b.isTruthy=function(e){return b.isDefined(e)&&("boolean"==typeof e&&!0===e||"true"===e)},b.toString=function(e){var t=S.get("JSON")||JSON;return t&&t.stringify?t.stringify(e):e.toString()},b.toObject=function(e){var t=S.get("JSON")||JSON;return t&&t.parse?t.parse(e):e},b.toMillisec=function(e){return isNaN(e)?e:Math.floor(1e3*e)},b.toQs=function(e){var t,i=[];for(t in e)i.push(t+"="+e[t]);var r=S.get("encodeURI"),n=i.join("&");return"function"==typeof r?r(n):n},b.trimFwdSlash=function(e){return e.replace(/^\/+/,"")},b);function b(){}var S=(C.get=function(e){try{return window[e]}catch(e){}},C.find=function(e,t){var i,r;return t=t||window,-1<e.indexOf(".")?(i=(r=e.split(".")).shift()||"",r=r.join("."),C.find(r,t[i])):t[e]},C.getSize=function(){var e=C.get("screen");return e&&e.width&&e.height?e.width+"x"+e.height:"n/a"},C.getProtocol=function(){return ve.ssl?"https://":"http://"},C);function C(){}var _=(P.ReplaceTokens=function(e){function t(e,t){return(t=e?e.toString().match(t):null)&&0<t.length?t[1]:""}var i={};return Object.keys(e.map).forEach(function(r){var n=(n=e.map[r])?n.toString().match(/\{\w+.\w+\}|\{\w+.+\}/g):null;i[r]=e.map[r],n&&n.forEach(function(n){var a=t(n,/{(\w+).+}/),o=t(n,/{\w+\.(.+)}/),s=e.source[a];a&&o&&s&&(o=s[o],i[r]=i[r].replace(n.toString(),o))})}),i},P.Ternary=function(e){var t={};return Object.keys(e.data).forEach(function(i){var r,n;e.data[i]&&((r=e.data[i].toString().match(/(.+)\?(.+)\s:\s(.+)/))&&3<r.length?(n=T.trim(r[1]),t[i]="false"===n||""===n||"true"!==n&&"undefined"===n?r[3]:r[2],t[i]=T.trim(t[i])):t[i]=e.data[i])}),t},P.OrCondition=function(e){var t={},i=T.trim,r=T.isDefined;return Object.keys(e.data).forEach(function(n){var a,o;e.data[n]&&(o=(a=e.data[n].toString()).match(/(.+)?\s\|\|\s(.+)?/),t[n]=a,o&&2<o.length&&(a=i(o[1]||""),o=i(o[2]||""),r(a)?t[n]=a:r(o)&&(t[n]=o)))}),t},P.DataType=function(e){var t={};return Object.keys(e.data).forEach(function(i){var r=e.data[i].toString();if(r)switch(e.types[i]){case"int":t[i]=parseInt(r);break;case"boolean":t[i]="true"===r;break;default:t[i]=r}}),t},P.DataFormat=function(e){var t=e.data,i=e.format;return Object.keys(i).forEach(function(r){var n=t[r],a=i[r];if(n&&a&&"function"==typeof a){var o=void 0;try{o=a(n,e)}catch(r){o=void 0}o&&(t[r]=o)}}),t},P);function P(){}var I=(R.prototype.addSource=function(e,t){this.source[e]=t},R.prototype.setMap=function(e){this.map=e},R.prototype.setType=function(e){this.types=e},R.prototype.setFormat=function(e){this.format=e},R.prototype.getData=function(){for(var e={},t=0,i=this.rules;t<i.length;t++)e=(0,i[t])({source:this.source,map:this.map,data:e,types:this.types,format:this.format});return e},R);function R(e){this.rules=[],this.source={},this.map={},this.types={},this.format={},this.rules=e}var k="accountInfo",N="adBreakInfo",O="adInfo",L="aviaChapterTracking",D="cdnInfo",M="chapterInfo",w="contentInfo",x="customData",U="deviceInfo",B="errorInfo",V="initInfo",F="mediaInfo",H="liveSegmentInfo",K="playerInfo",G="qosInfo",j="serverInfo",W="sessionInfo",Y="tagInfo",z=($.prototype.getNode=function(e){return this.agent.config.params[e]||null},$.prototype.map=function(e,t){return this.mapData(this.getNode(e)||{},t)},$.prototype.mapData=function(e,t){var i=this.agent,r=t||i.getData();return(t=X.getDefault().items).data=r,t.player=r[K]||{},t.config=i.config.params,e=i.observable.dataProxy.mapData({source:t,map:e,type:this.dataType,format:this.dataFormat}),this.keepUndef?e:this.removeUndef(e)},$.prototype.removeUndef=function(e){var t={};return Object.keys(e).forEach(function(i){var r=e[i];"undefined"!==r&&(t[i]=r)}),t},$.prototype.setInfo=function(e){var t=this.getNode(e);t&&(this[e]=this.map(e),this.keepUndef=T.isTruthy(t.sendUndefined))},$);function $(e){this.agent=e,this.keepUndef=!0,this.dataType=this.getNode("dataType")||{},this.dataFormat=this.getNode("dataFormat")||{},this.setInfo(j),this.setInfo(W)}var q=(Q.prototype.update=function(e){var t=this.data;Object.keys(e).forEach(function(i){var r=e[i];T.isDefined(r)&&(t[i]=r)}),this.data=t},Q.prototype.getData=function(){return this.data},Q.prototype.mapData=function(e){var t=this.engine;t.setMap(e.map),t.setType(e.type),t.setFormat(e.format);var i,r=e.source;for(i in r)t.addSource(i,r[i]);return t.getData()},Q);function Q(){this.data={},this.engine=new I([_.ReplaceTokens,_.Ternary,_.OrCondition,_.DataType,_.DataFormat])}var X=(J.getDefault=function(){return J.instance=J.instance?J.instance:new J},J);function J(){var e=this;this.items={};var t=S.get("vtg");if(!t||!t.config)return this;function i(t,i){e.items[t]=i||{}}(t=t.config.DataSource)&&t.forEach(function(e){if(-1<e.var.indexOf(".")){var t=e.var.split("."),r=S.get(t.shift()||"");if(r){for(var n=r,a=0,o=t;a<o.length;a++)n=n[o[a]];i(e.label,n)}}else i(e.label,S.get(e.var))})}var Z=(ee.get=function(e){return new Promise(function(t,r){try{var n=S.get("localStorage"),a=n?n.getItem(e):i.get(e);a?t(a):r(new Error("not found"))}catch(t){return r(t)}})},ee.set=function(e,t,r){return new Promise(function(n,a){try{var o=S.get("localStorage");o?o.setItem(e,t):i.set(e,t,r),ee.get(e).then(function(e){n(e)}).catch(function(e){a(e)})}catch(o){return a(o)}})},ee);function ee(){}var te=(ie.prototype.register=function(e){"object"==typeof e&&(this.observers.unshift(e),e.onRegister())},ie.prototype.remove=function(e){this.observers=this.observers.filter(function(t){return t===e&&e.onRemove(),t!==e})},ie.prototype.removeAll=function(){var e=this;return this.observers.forEach(function(t){e.remove(t)}),this.observers.length},ie.prototype.notify=function(e){for(var t=this.observers.length;t--;){var i=this.observers[t];i.onUpdate.call(i,e)}},ie);function ie(){this.observers=[]}var re=(ne.prototype.track=function(e){this.api.notify(e)},ne.getDefault=function(){return ne.instance=ne.instance?ne.instance:new ne},ne);function ne(){var e=S.get("vtg");if(!e||!e.config)return this;this.api=new le(e.config,"apptracker")}var ae=(oe.validate=function(e){var t=oe.deprecatedKeys;Object.keys(t).forEach(function(i){S.find(i,e)&&(i=[i,"is deprecated. Update to",t[i]].join(" "),h.debug(i))}),oe.requiredKeys.forEach(function(e){S.find(e)||(e=[e,"is required but missing from vtg.config"].join(" "),h.debug(e))})},oe.deprecatedKeys={"AdobeMedia.params.serverInfo.serverUrl":"apiServerHost","AdobeMedia.params.serverInfo.urlPath":"sessionsPath","Comscore.params.serverInfo":"sessionInfo","Conviva.params.serverInfo":"sessionInfo","Conviva.params.sessionInfo.key":"customerKey","Conviva.params.initInfo":"sessionInfo","Conviva.params.tagInfo":"customTagInfo"},oe.requiredKeys=["AdobeMedia.params.serverInfo.eventsPath"],oe);function oe(){}var se,le=(s(ce,se=te),ce.prototype.notify=function(e){e&&se.prototype.notify.call(this,e)},ce.prototype.reset=function(){this.dataProxy=new q},ce.prototype.find=function(e){return this.observers.find(function(t){return t.name===e})},ce.prototype.on=function(e,t){this.emitter.on(e,t)},ce.prototype.off=function(e){this.emitter.off(e)},ce.prototype.emit=function(e,t){this.emitter.emit(e,t)},ce.prototype.destroy=function(){return c(this,void 0,void 0,function(){var e=this;return u(this,function(t){return[2,new Promise(function(t,i){var r=e.removeAll();0===r?t(!0):i(new Error("observer count is "+r))})]})})},ce);function ce(e,t){var i=se.call(this)||this;return i.emitter=new y,i.config=e,i.dataProxy=new q,Ee.modules().forEach(function(r){var n,a;!r.NAME||(n=e[r.NAME])&&n.enabled&&t===n.type&&((a=new r(i.config,i)).name=r.NAME,a.config=n,i.register(a))}),i}var ue="stateStart",de="stateEnd",pe="fullScreen",he="timeShifted",fe=(ye.prototype.onRegister=function(){},ye.prototype.onRemove=function(){},ye.prototype.onUpdate=function(e){this.notifications.add(e),this.isSdkReady||this.checkSdk(),this.flushQueue()},ye.prototype.flushQueue=function(){var e=this;this.isSdkReady&&this.notifications.each(function(t){e.notification=t,(t=e.events[t.name])&&t.call(e)})},ye.prototype.checkSdk=function(){var e,t;this.sdkInfo&&(e=this.sdkInfo.name,(t=S.get(e))&&(this[e]=t,this.isSdkReady=!0,this.flushQueue()))},ye.prototype.getData=function(){return this.observable.dataProxy.getData()},ye.prototype.isAtLeast95=function(){var e=this.getData();return(!e||!e.isLive)&&e.playhead>=.95*e.duration},ye);function ye(e,t){this.manifest=e,this.observable=t,this.events={},this.notifications=new m,this.isSdkReady=!1}var ve=(me.load=function(e){var t,i=e.debug;for(t in e)me[t]=e[t];-1<i.toString().indexOf("utag")&&(me.debug=!!X.getDefault().items.utag.isDev)},me.ssl=!0,me.debug=!1,me);function me(){}var ge=(Ae.prototype.init=function(e,t){return"function"==typeof e?this.sdk=this.exec(e,t):h.warn("Constructor"+this.msg),this.sdk},Ae.prototype.send=function(e,t){var i;this.sdk&&("function"==typeof(i=this.sdk[e])?i.call(this.sdk,t):h.warn(e+this.msg))},Ae.prototype.exec=function(e,t){var i=this,r="function"==typeof e?new e:e;return Object.keys(t).forEach(function(e){var n,a=r[e];"function"==typeof a?"object"==typeof(n=t[e])&&0<n.length?a.apply(r,n):n&&a.call(r,n):h.warn(e+i.msg)}),r},Ae);function Ae(){this.msg=" is not a function"}var Ee=(Te.modules=function(){return[Lt,kt,Kt,$t,Xt,ri,ci,Ti,yi,Ii]},Te.version="v21.12.7 2021-12-07T17:13:28",Te.instance=[],Te);function Te(){}var be,Se=0,Ce=(te=function(){return(++Se).toString()})(),_e=te(),Pe=te(),Ie=te(),Re=te(),ke=te(),Ne=te(),Oe=te(),Le=te(),De=te(),Me=te(),we=te(),xe=te(),Ue=te(),Be=te(),Ve=te(),Fe=te(),He=te(),Ke=te(),Ge=te(),je=te(),We=te(),Ye=te(),ze=te(),$e=te(),qe=te(),Qe=te(),Xe=te(),Je=te(),Ze=te(),et=te(),tt=te(),it=te(),rt=te(),nt=te(),at=te(),ot=te(),st=te(),lt=te(),ct=te(),ut=te(),dt=te(),pt=te(),ht=te(),ft=(te=Object.freeze({__proto__:null,AdBreakEnd:Ce,AdBreakStart:_e,AdClick:Pe,AdEnd:Ie,AdError:Re,AdFirstQuartile:ke,AdMidQuartile:Ne,AdPause:Oe,AdProgress:Le,AdResume:De,AdSkip:Me,AdStalled:we,AdStart:xe,AdThirdQuartile:Ue,BeforeUnload:Be,BitrateChange:Ve,BufferEnd:Fe,BufferStart:He,CdnChange:Ke,ChapterComplete:Ge,ChapterStart:je,CloudIdReady:We,ContentEnd:Ye,ContentPause:ze,ContentProgress:$e,ContentResume:qe,ContentSegmentEnd:Qe,ContentSegmentStart:Xe,ContentStart:Je,CuePoint:Ze,DrmCreated:et,FatalError:tt,Foreground:it,Heartbeat:rt,LiveUiStopped:nt,PlayerError:at,PlayerState:ot,ResourceInterrupt:st,SeekEnd:lt,SeekStart:ct,SessionEnd:ut,SessionStart:dt,StreamMetadata:pt,TimeUpdate:ht}),s(yt,be=le),yt.prototype.save=function(e){this.id=e,Ee.instance.push(this)},yt.prototype.delete=function(){var e=this;Ee.instance=Ee.instance.filter(function(t){return t.id!==e.id})},yt.prototype.post=function(e,t){var i=this;switch(t=t||{},e){case dt:this.reset(),this.dataProxy.update({version:Ee.version,platform:ve.platform});break;case ht:if(this.notify({name:$e,body:{playhead:t.playhead}}),!this.hasProgress(t.playhead))return;t.playhead=this.playhead,this.timer.running||this.timer.start(function(){i.notify({name:rt})});break;case ze:case ct:case He:case ut:this.timer.stop()}t.playhead=-1<t.playhead?Math.floor(t.playhead):this.playhead,this.playhead=t.playhead,this.updateData(t),this.notify({name:e})},yt.prototype.updateData=function(e){e.utcSeconds=Math.round(n.getTime()/1e3),e.timestamp=n.getTime(),0<e.duration&&(e.durationMs=e.duration,e.duration=Math.floor(e.duration)),this.dataProxy.update(e)},yt.prototype.hasProgress=function(e){var t=Math.floor(e);return!isNaN(t)&&0!==e&&this.playhead!==t&&(this.playhead=t,!0)},yt);function yt(e){var t=be.call(this,e,"videotracker")||this;return t.configNodes=e,t.playhead=0,t.timer=new A(1e4),ve.load(e.Settings),ve.debug&&ae.validate(e),t}var vt,mt="chapterStart",gt="pauseStart",At="adBreakStart",Et="adStart",Tt="visitor.marketingCloudUserId",bt="analytics.aid",St="play",Ct="error",_t="d_mid",Pt=(s(It,vt=z),It.prototype.getSessionUrl=function(){var e=this.serverInfo,t=T.trimFwdSlash(e.sessionsPath||e.urlPath);return this.host=T.trimFwdSlash(e.apiServerHost||e.serverUrl),[this.host,t].join("/")},It.prototype.getEventUrl=function(e){var t=e.replace(/^\/|\/$/g,"");e=this.serverInfo,e=T.trimFwdSlash(e.eventsPath||"events");return[this.host,t,e].join("/")},It.prototype.getSessionInfo=function(){var e=this.getPayload("sessionStart"),t=this.agent.config.params,i=T.assign;e.params=i(this.map(F),this.map(k)),e.customMetadata=this.map(x),e.qoeData=this.map("qoeData"),this.agent.hasNewSegment&&(r=this.map(H),e.params=i(r,e.params));var r=e.params[Tt];return t.accountInfo[bt]&&!T.isDefined(r)&&delete e.params[Tt],e},It.prototype.getPayload=function(e){var t={eventType:e,playerTime:{playhead:this.agent.getData().playhead,ts:n.getTime()},params:{}};switch(e){case At:t.params=this.map(N);break;case Et:t.params=this.map(O);break;case mt:t.params=this.map(M),t.customMetadata=this.map(x);break;case Ct:t.qoeData=this.map(B);break;case ue:case de:t.params=this.map(K)}return t},It.prototype.isOwner=function(){return this.agent.getData().id3Info.id===this.agent.config.params[j].id3Owner},It.prototype.getId3Info=function(){var e,t=this.agent.getData().id3Info,i=t.data,r={};return i&&"string"==typeof i&&-1<i.indexOf("|")&&(e=i.split("|"),i=T.trim,1<e.length&&(r={segmentId:i(e[0]),segmentTitle:i(e[1]),segmentEdition:i(e[2]),segmentOwner:t.id})),r},It.prototype.isMaxWaitTime=function(){var e=this.agent;return n.getTime()-e.sessionInfo.playerTime.ts>e.maxWaitTime},It);function It(e){var t=vt.call(this,e)||this;return t.agent=e,t}var Rt,kt=(s(Nt,Rt=fe),Nt.prototype.onRegister=function(){Rt.prototype.onRegister.call(this),this.config=this.manifest.AdobeMedia,this.vo=new Pt(this),this.eventQueue=new m;var e=this.vo.serverInfo;this.maxWaitTime=e.maxSessionStartWaitTime||12e4,this.maxSessionTime=e.maxSessionTimeoutMinutes||30,this.fetchDemdex(),e.hasOwnProperty(L)&&(this.hasChapterTracking=T.isTruthy(e[L]))},Nt.prototype.onRemove=function(){this.timer.stop()},Nt.prototype.flush=function(){return c(this,void 0,void 0,function(){var e,t,i,r,n=this;return u(this,function(a){if(!this.hasSession)return[2];for(e=this.getData(),t=function(t){var r=i.eventQueue.items.pop();if(r.eventType===St&&e.isAd&&!e.playerInfo.isPaused)return"continue";d.POST({url:i.eventUrl,data:T.toString(r)}).then(function(e){n.observable.emit("adobeEvent",r)})},r=(i=this).eventQueue.items.length;r--;)t();return[2]})})},Nt.prototype.start=function(){var e=this;if(this.isIdReady&&!this.hasSessionRequest){if(this.hasSessionRequest=!0,this.sessionInfo||(this.sessionInfo=this.vo.getSessionInfo()),this.vo.isMaxWaitTime())return h.warn("Adobe session abandoned after "+this.maxWaitTime),void this.eventQueue.reset();d.POST({url:this.vo.getSessionUrl(),data:T.toString(this.sessionInfo)}).then(function(t){if(400===t.status)throw Ct+": server 400";if(!(t=t.xhr.getResponseHeader("location")))throw Ct+": location not found";e.hasSession=!0,e.eventUrl=e.vo.getEventUrl(t),e.flush()}).catch(function(t){h.warn(Nt.NAME+" session failed"),e.hasSessionRequest=!1})}},Nt.prototype.track=function(e){e=this.vo.getPayload(e),this.eventQueue.add(e),this.flush(),this.hasSession||this.start()},Nt.prototype.contentStart=function(){this.hasContentStart=!0,this.hasStateChange=!1,this.start(),this.track(St)},Nt.prototype.chapterStart=function(){this.vo.getNode(M)&&this.track(mt)},Nt.prototype.chapterEnd=function(){this.vo.getNode(M)&&this.track("chapterComplete")},Nt.prototype.play=function(){this.hasStateChange&&(this.hasStateChange=!1,this.timer.stop(),this.track(St)),this.hasSession||this.start()},Nt.prototype.adHb=function(){this.hasAdStart||this.events[xe](),this.ping()},Nt.prototype.ping=function(){this.track("ping")},Nt.prototype.end=function(){var e;this.timer.stop(),this.hasSession?(e=this.getData(),this.isAtLeast95()&&!e.isLive?this.track("sessionComplete"):this.track("sessionEnd"),this.hasSession=!1,this.hasSessionRequest=!1,this.hasContentStart=!1,this.sessionInfo=null):this.hasSessionRequest=!1},Nt.prototype.checkPausedTime=function(){-1!==this.pausedTime&&n.getElapsedSince(this.pausedTime)/6e4>=this.maxSessionTime&&(this.end(),this.contentStart())},Nt.prototype.startHb=function(){this.hasStateChange=!0,this.pausedTime=n.getTime(),this.timer.start(this.ping.bind(this))},Nt.prototype.stopHb=function(){this.checkPausedTime(),this.play()},Nt.prototype.fetchDemdex=function(){var e=this,t=this.manifest.AdobeData.params.serverInfo,i=Bt.getDefault();i.once(We,function(t){e.isIdReady=!0;var i=e.config.params;t.aid&&(i.accountInfo[bt]=t.aid),t.mid&&(i.mid=t.mid)}),i.request(t.demdexUrl,t.marketingCloudOrgId,t.cookieDomain)},Nt.NAME="AdobeMedia",l([function(e,t){e.observer=!0}],Nt.prototype,"events",void 0),Nt);function Nt(){var e,t=null!==Rt&&Rt.apply(this,arguments)||this;return t.isSdkReady=!0,t.hasSession=!1,t.hasSessionRequest=!1,t.hasChapterTracking=!0,t.hasContentStart=!1,t.hasStateChange=!1,t.hasNewSegment=!1,t.hasAdStart=!1,t.isIdReady=!1,t.timer=new A(1e4),t.pausedTime=-1,t.liveStreamSegmentCount=0,t.events=((e={})[_e]=function(){t.hasContentStart=!1,t.start(),t.track(At)},e[xe]=function(){t.hasAdStart=!0,t.track(Et),t.track(St)},e[Oe]=function(){t.track(gt),t.startHb()},e[ke]=t.adHb,e[Ne]=t.adHb,e[Ue]=t.adHb,e[Me]=function(){t.track("adSkip")},e[Ie]=function(){t.hasAdStart=!1,t.track("adComplete")},e[Ce]=function(){t.track("adBreakComplete"),t.hasStateChange=!0,t.hasContentStart=!0,t.hasAdStart=!1},e[ze]=function(){t.track(gt),t.startHb()},e[Ye]=function(){t.hasContentStart=!1},e[Xe]=function(){t.hasChapterTracking&&t.chapterStart()},e[Qe]=function(){t.hasChapterTracking&&t.chapterEnd()},e[He]=function(){t.hasContentStart&&(t.hasStateChange=!0,t.track("bufferStart"))},e[ct]=function(){t.hasContentStart&&(t.hasStateChange=!0)},e[Ze]=function(){var e;!t.getData().isLive&&!t.vo.isOwner()||(e=t.vo.getId3Info()).segmentId&&(t.observable.dataProxy.update(e),e=e.segmentId,t.liveSegmentId!==e&&t.vo.getNode(H)?(t.liveSegmentId=e,t.hasNewSegment=!0,t.end(),t.liveStreamSegmentCount++,t.observable.dataProxy.update({liveStreamSegmentCount:t.liveStreamSegmentCount}),t.contentStart()):t.hasNewSegment=!1)},e[at]=function(){t.track(Ct)},e[ot]=function(){var e;t.hasSession&&t.config.params[K]&&(e=t.getData().playerState,t.track(e.type))},e[je]=t.chapterStart,e[Ge]=t.chapterEnd,e[qe]=t.stopHb,e[Je]=t.contentStart,e[De]=t.stopHb,e[ht]=t.play,e[rt]=t.ping,e[ut]=t.end,e[st]=t.end,e),t}var Ot,Lt=(s(Dt,Ot=fe),Dt.prototype.onRegister=function(){this.config=this.manifest.AdobeData,this.vo=new wt(this),this.fetchDemdex()},Dt.prototype.track=function(e){this.queue.add(e),this.isReady&&this.flush()},Dt.prototype.flush=function(){var e=this;this.queue.each(function(t){e.send(t)})},Dt.prototype.send=function(e){for(var t in this.info)e[t]||(e[t]=this.info[t]);this.post(e)},Dt.prototype.post=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,d.POST({url:this.url,data:this.vo.getXml(e),type:"application/xml"})]})})},Dt.prototype.fetchDemdex=function(){var e=this,t=this.config.params.serverInfo,i=Bt.getDefault();i.once(We,function(t){e.config.params.mid=t.mid,e.info=e.vo.map(j),e.url=e.info.dataUrl,delete e.info.dataUrl,e.isReady=!0,e.flush()}),i.request(t.demdexUrl,t.marketingCloudOrgId,t.cookieDomain)},Dt.NAME="AdobeData",l([function(e,t){e.observer=!0}],Dt.prototype,"events",void 0),Dt);function Dt(){var e=null!==Ot&&Ot.apply(this,arguments)||this;return e.info={},e.queue=new m,e.isSdkReady=!0,e.isReady=!1,e.events={adobedata:function(){var t=e.notification.body;t&&e.track(t)}},e}var Mt,wt=(s(xt,Mt=z),xt.prototype.getXml=function(e){return['<?xml version="1.0" encoding="UTF-8"?>',"<request>",this.toXml(e),"</request>"].join("")},xt.prototype.toXml=function(e){var t=this,i="";return Object.keys(e).forEach(function(r){i+="<{key}>{value}</{key}>".replace(/{key}/g,r).replace(/{value}/g,"object"!=typeof e[r]?t.replace(e[r]):t.toXml(e[r]))}),i},xt.prototype.replace=function(e){if(!e)return e;function t(e){return["&",e,";"].join("")}return e.toString().replace(/&|"|'|<|>/g,function(e){var i=e.toString();switch(i){case"&":i=t("amp");break;case'"':i=t("quot");break;case"'":i=t("apos");break;case"<":i=t("lt");break;case">":i=t("gt")}return i})},xt);function xt(){return null!==Mt&&Mt.apply(this,arguments)||this}var Ut,Bt=(s(Vt,Ut=y),Vt.getDefault=function(){return Vt.instance=Vt.instance?Vt.instance:new Vt},Vt.prototype.request=function(e,t,i){this.domain=i||void 0,this.mid?this.notify({mid:this.mid}):this.fetching||(this.fetching=!0,(i=S.get("Visitor"))?this.getVisitor(i,t):this.fetchId(e,t))},Vt.prototype.getVisitor=function(e,t){var i=this,r=e.getInstance(t),n={};r&&(n.mid=r.getMarketingCloudVisitorID(),n.aid=r.getAnalyticsVisitorID(),n.mid?this.notify(n):r.getMarketingCloudVisitorID(function(e){n.mid=e,n.aid=r.getAnalyticsVisitorID(),i.notify(n)}))},Vt.prototype.fetchId=function(e,t){var i=this;Z.get(_t).then(function(e){i.notify({mid:e})}).catch(function(r){var n=i.getExperienceCloudId(t);n?i.notify({mid:n}):i.getDemdex(e,t)})},Vt.prototype.getExperienceCloudId=function(e){var t="AMCV_"+this.encode(e),r=i.get(t);e=S.get("decodeURIComponent"),t="";return r&&e&&(r=e(r).match(/MCMID\|(\d+)/))&&1<r.length&&r[1]&&(t=r[1]),t},Vt.prototype.getDemdex=function(e,t){var i=this;d.GET({url:e+t,data:null}).then(function(e){-1<e.status&&(e=T.toObject(e.text)[_t])&&(i.storeAmcvCookie(e,t),i.notify({mid:e}))}).catch(function(e){})},Vt.prototype.storeAmcvCookie=function(e,t){t="AMCV_"+this.encode(t),e=this.encode("MCMID|")+e,i.set(t,e,this.domain)},Vt.prototype.notify=function(e){var t=this;e.mid&&(Z.set(_t,e.mid,this.domain).then(function(e){t.mid=e}).catch(function(e){}),this.mid=e.mid),this.emit(We,e),this.fetching=!1},Vt.prototype.encode=function(e){return e.replace("@","%40").replace("|","%7C")},Vt);function Vt(){var e=null!==Ut&&Ut.apply(this,arguments)||this;return e.fetching=!1,e}var Ft,Ht,Kt=(s(Gt,Ft=fe),(Ht=Gt).prototype.onRegister=function(){Ft.prototype.onRegister.call(this),this.config=this.manifest.Comscore,this.vo=new Wt(this)},Gt.prototype.start=function(){var e="ReducedRequirementsStreamingAnalytics";if(!this.ns_||!this.ns_[e])return h.warn(Ht.NAME+" sdk missing"),void(this.isSdkReady=!1);this.tag=new this.ns_[e](this.vo.serverInfo||this.vo.sessionInfo)},Gt.prototype.playAd=function(){this.tag&&this.tag.playVideoAdvertisement(this.vo.map(O),this.vo.getAdType()),this.isStopped=!1},Gt.prototype.play=function(){this.tag&&this.tag.playVideoContentPart(this.vo.getContentInfo(),this.vo.getMediaType()),this.isStopped=!1},Gt.prototype.stop=function(){this.isStopped=!0,this.tag&&this.tag.stop()},Gt.NAME="Comscore",l([function(e,t){e.observer=!0}],Gt.prototype,"events",void 0),Ht=l([t({name:"ns_",type:"object"})],Gt));function Gt(){var e,t=null!==Ft&&Ft.apply(this,arguments)||this;return t.hasContentStart=!1,t.isStopped=!1,t.events=((e={})[dt]=t.start,e[xe]=t.playAd,e[Ie]=t.stop,e[Je]=t.play,e[qe]=t.play,e[Ye]=t.stop,e[ze]=t.stop,e[ct]=t.stop,e[lt]=t.play,e[ut]=t.stop,e[ht]=function(){t.hasContentStart&&t.isStopped&&(t.play(),t.isStopped=!1)},e),t}var jt,Wt=(s(Yt,jt=z),Yt.prototype.getAdType=function(){var e=this.agent.getData(),t=e.adBreakType;return t=e.isLive?"21":"preroll"===t?"11":"midroll"===t?"12":"13"},Yt.prototype.getContentInfo=function(){var e=this.map(w);return e.c2||(e.c2=this.sessionInfo.publisherId),-1<e.ns_st_cl&&(e.ns_st_cl=T.toMillisec(e.ns_st_cl)),e},Yt.prototype.getMediaType=function(){var e=this.agent.getData();return e.isLive?"13":e.duration<600?"11":"12"},Yt);function Yt(e){var t=jt.call(this,e)||this;return t.agent=e,t}var zt,$t=(s(qt,zt=fe),qt.prototype.onRegister=function(){zt.prototype.onRegister.call(this),this.sdk=new ge,this.config=this.manifest.ComscoreStreaming,this.vo=new Wt(this),this.nsevent=this.config.params.events},qt.prototype.sessionStart=function(){var e,t,i;this.ns_&&(e=this.ns_.analytics,i=(t=this.vo.sessionInfo||this.vo.getNode("publisherInfo")).platformApi||13,e.PlatformApi.setPlatformAPI(i),(i=this.sdk.exec(e.configuration,this.vo.map("appInfo"))).addClient(new i.PublisherConfiguration(t)),e.start(),this.api=e.StreamingAnalytics,this.sdk.init(this.api,this.vo.map(V)),this.sdk.send(this.nsevent.sessionStart))},qt.prototype.adStart=function(){this.sendData(this.api.AdvertisementMetadata,this.vo.map(O))},qt.prototype.contentStart=function(){this.started||(this.started=!0,this.sendData(this.api.ContentMetadata,this.vo.map(w)))},qt.prototype.chapterStart=function(){this.started||this.contentStart()},qt.prototype.sendData=function(e,t){t.setMediaType=this.getData().isAd?this.vo.getAdType():this.vo.getMediaType(),t=this.sdk.exec(e,t),this.sdk.send(this.nsevent.metadata,t),this.play()},qt.prototype.play=function(){this.sdk.send(this.nsevent.play)},qt.prototype.pause=function(){this.sdk.send(this.nsevent.pause)},qt.prototype.end=function(){this.sdk.send(this.nsevent.end),this.started=!1,this.seeking=!1},qt.prototype.bufferStart=function(){this.sdk.send(this.nsevent.bufferStart)},qt.prototype.bufferEnd=function(){this.sdk.send(this.nsevent.bufferStop)},qt.prototype.seekStart=function(){this.seeking=!0,this.sdk.send(this.nsevent.seekStart)},qt.prototype.progress=function(){this.seeking&&(this.seeking=!1,this.play())},qt.NAME="ComscoreStreaming",l([function(e,t){e.observer=!0}],qt.prototype,"events",void 0),l([t({name:"ns_",type:"object"})],qt));function qt(){var e,t=null!==zt&&zt.apply(this,arguments)||this;return t.started=!1,t.seeking=!1,t.events=((e={})[dt]=t.sessionStart,e[je]=t.chapterStart,e[Je]=t.contentStart,e[ze]=t.pause,e[$e]=t.progress,e[qe]=t.play,e[Ye]=t.end,e[xe]=t.adStart,e[Oe]=t.pause,e[Pe]=t.pause,e[De]=t.play,e[Ie]=t.end,e[Ce]=function(){t.started=!1},e[He]=t.bufferStart,e[Fe]=t.bufferEnd,e[ct]=t.seekStart,e[ut]=t.end,e[st]=t.end,e[Xe]=t.contentStart,e),t}var Qt,Xt=(s(Jt,Qt=fe),Jt.prototype.onRegister=function(){Qt.prototype.onRegister.call(this),this.config=this.manifest.Conviva,this.vo=new ei(this),this.vo.getNode(Y)&&(this.tagInfoParam=Y)},Jt.prototype.init=function(){var e,t;this.videoApi||(this.sdk=S.get("Conviva"),this.sdk&&((t=this.sdk.Analytics).init(this.vo.getKey(),{},ve.debug?this.vo.getInitInfo():{}),t.setDeviceMetadata(this.vo.map(U)),e=t.buildVideoAnalytics(),t=T.assign(this.vo.map(w),this.vo.map(this.tagInfoParam)),e&&(e.setPlayerInfo(this.vo.map(K)),e.setContentInfo(t),e.reportPlaybackRequested(t),this.videoApi=e)))},Jt.prototype.adBreakStart=function(){this.init(),this.adApi=this.sdk.Analytics.buildAdAnalytics(this.videoApi),this.adApi&&this.adApi.setAdPlayerInfo(this.vo.map("adServerInfo"));var e=this.sdk.Constants,t=e.AdType;t="ssai"===this.getData().adTechnology?t.SERVER_SIDE:t.CLIENT_SIDE;this.videoApi&&this.videoApi.reportAdBreakStarted(t,e.AdPlayer.CONTENT,this.vo.map(N)),this.hasAdBreak=!0},Jt.prototype.adBreakEnd=function(){this.videoApi&&this.videoApi.reportAdBreakEnded(),this.hasAdBreak=!1},Jt.prototype.adStart=function(){var e,t=this.adApi;t&&(e=this.vo.map(O),t.setAdInfo(e),t.reportAdStarted(e),this.adMetric("PLAYING"))},Jt.prototype.adClick=function(){this.adMetric("STOPPED")},Jt.prototype.adPause=function(){this.adMetric("PAUSED")},Jt.prototype.adProgress=function(){this.adMetric("PLAYING")},Jt.prototype.adStalled=function(){var e=this.adApi;e&&e.reportAdFailed("Ad Stalled",this.vo.map(O))},Jt.prototype.adSkipped=function(){var e=this.adApi;e&&(this.adMetric("STOPPED"),e.reportAdSkipped(),e.release())},Jt.prototype.adEnd=function(){var e=this.adApi;e&&e.reportAdEnded()},Jt.prototype.adError=function(){var e=this.adApi;e&&e.reportAdFailed("Ad Error",this.vo.map(O))},Jt.prototype.bufferStart=function(){this.getData().isAd&&this.hasAdBreak?this.adMetric("BUFFERING"):this.hasContent&&this.vidMetric("BUFFERING")},Jt.prototype.contentStart=function(){this.init();var e=T.assign(this.vo.map(w),this.vo.map(this.tagInfoParam));this.videoApi&&this.videoApi.setContentInfo(e),this.playing(),this.hasContent=!0,this.qos()},Jt.prototype.cdn=function(){this.hasContent&&this.videoApi&&this.videoApi.setContentInfo(this.vo.map(D))},Jt.prototype.qos=function(){var e,t=this;this.videoApi&&this.hasContent&&(e=this.vo.map(G),Object.keys(e).forEach(function(i){isNaN(e[i])||t.videoApi.reportPlaybackMetric(i,e[i])}))},Jt.prototype.playing=function(){this.vidMetric("PLAYING")},Jt.prototype.paused=function(){this.vidMetric("PAUSED")},Jt.prototype.progress=function(){var e=this.notification.body||{};this.videoApi&&this.videoApi.reportPlaybackMetric("PLAY_HEAD_TIME",e.playhead)},Jt.prototype.error=function(){var e=this.videoApi,t=this.vo.map(B);t&&e&&e.reportPlaybackFailed(t.errorText)},Jt.prototype.sessionEnd=function(){var e=this.videoApi;e&&(this.vidMetric("STOPPED"),e.reportPlaybackEnded(),e.release(),this.sdk.Analytics.release(),this.adApi&&this.adApi.release(),this.videoApi=null)},Jt.prototype.seek=function(e){var t=this.notification.body||{},i=this.videoApi;i&&i.reportPlaybackMetric(e,t.playhead)},Jt.prototype.seekStart=function(){this.seek("SEEK_STARTED"),this.vidMetric("BUFFERING")},Jt.prototype.seekEnd=function(){this.seek("SEEK_ENDED"),this.playing()},Jt.prototype.vidMetric=function(e){var t=this.videoApi;t&&t.reportPlaybackMetric("PLAYER_STATE",e)},Jt.prototype.adMetric=function(e){var t=this.adApi;t&&t.reportAdMetric("PLAYER_STATE",e)},Jt.NAME="Conviva",l([function(e,t){e.observer=!0}],Jt.prototype,"events",void 0),l([t({name:"Conviva",type:"object"})],Jt));function Jt(){var e,t=null!==Qt&&Qt.apply(this,arguments)||this;return t.hasAdBreak=!1,t.hasContent=!1,t.isSdkReady=!1,t.tagInfoParam="customTagInfo",t.events=((e={})[Ce]=t.adBreakEnd,e[_e]=t.adBreakStart,e[Pe]=t.adClick,e[Oe]=t.adPause,e[Le]=t.adProgress,e[Me]=t.adSkipped,e[we]=t.adStalled,e[xe]=t.adStart,e[Ie]=t.adEnd,e[Re]=t.adError,e[Be]=t.sessionEnd,e[Ve]=t.qos,e[He]=t.bufferStart,e[Fe]=t.playing,e[Ke]=t.cdn,e[Ye]=function(){t.hasContent=!1},e[ze]=t.paused,e[$e]=t.progress,e[qe]=t.playing,e[Je]=t.contentStart,e[tt]=t.error,e[lt]=t.seekEnd,e[ct]=t.seekStart,e[ut]=t.sessionEnd,e[dt]=t.init,e),t}var Zt,ei=(s(ti,Zt=z),ti.prototype.getKey=function(){var e=this.sessionInfo||this.serverInfo;return e.key||e.customerKey},ti.prototype.getInitInfo=function(){var e=this.sessionInfo||this.map(V);return e.gatewayUrl=S.getProtocol()+e.gatewayUrl,e},ti);function ti(e){var t=Zt.call(this,e)||this;return t.agent=e,t}var ii,ri=(s(ni,ii=fe),ni.prototype.onRegister=function(){ii.prototype.onRegister.call(this),this.vo=new oi(this),this.sn=this.config.params[k].sn},ni.prototype.start=function(){var e;this.SpringStreams&&(this.sdkInstance=new this.SpringStreams(this.sn),e=this.vo.getMediaInfo(),this.sensors=this.sdkInstance.track(e.cq,e,this.vo))},ni.prototype.stop=function(){this.sensors&&(this.sensors.stop(),this.sdkInstance&&this.sdkInstance.unload())},ni.NAME="KantarBARB",l([function(e,t){e.observer=!0}],ni.prototype,"events",void 0),l([t({name:"SpringStreams",type:"function"})],ni));function ni(){var e,t=null!==ii&&ii.apply(this,arguments)||this;return t.events=((e={})[dt]=t.start,e[ut]=t.stop,e[it]=t.start,e[st]=t.stop,e),t}var ai,oi=(s(si,ai=z),si.prototype.getMeta=function(){return this.map(K)},si.prototype.getDuration=function(){return this.getMediaInfo().dur},si.prototype.getPosition=function(){return this.agent.getData().playhead},si.prototype.getMediaInfo=function(){return this.map(F)},si);function si(e){var t=ai.call(this,e)||this;return t.agent=e,t}var li,ci=(s(ui,li=fe),ui.prototype.onRegister=function(){li.prototype.onRegister.call(this),this.config=this.manifest.Mux,this.vo=new pi(this),this.mux=S.get("mux")},ui.prototype.onRemove=function(){this.end(),this.emit("destroy"),this.hasInit=!1,this.hasInterrupt=!1,this.isStopped=!1},ui.prototype.init=function(){var e,t=this;this.hasInterrupt&&this.emit("videochange",this.vo.map(F)),this.hasInit||(this.playerId=this.getData().playerId,e=T.assign(this.vo.getInitInfo(),{debug:ve.debug,data:this.vo.map(F),getPlayheadTime:function(){return t.playhead||0},getStateData:function(){return t.vo.map(K)}}),this.mux&&(this.mux.init(this.playerId,e),this.emit("playerready"),this.emit("viewinit"),this.hasInit=!0))},ui.prototype.progress=function(){var e,t;this.hasInit&&(e=this.notification.body||{},t=this.getData(),this.playhead=1e3*e.playhead,this.isStopped&&(this.isStopped=!1,t.isAd?this.emit("adplaying"):this.emit("playing")),this.emit("timeupdate",this.vo.getHbInfo(this.playhead)))},ui.prototype.stop=function(){this.getData().isAd?this.emit("adpause"):this.emit("pause"),this.isStopped=!0},ui.prototype.end=function(){this.emit("ended"),this.emit("viewend")},ui.prototype.emit=function(e,t){this.hasInit&&this.mux&&this.mux.emit(this.playerId,e,t)},ui.NAME="Mux",l([function(e,t){e.observer=!0}],ui.prototype,"events",void 0),l([t({name:"mux",type:"function"})],ui));function ui(){var e,t=null!==li&&li.apply(this,arguments)||this;return t.hasInit=!1,t.hasInterrupt=!1,t.isStopped=!1,t.events=((e={})[_e]=function(){t.init(),t.emit("adbreakstart"),t.isStopped=!0},e[Je]=function(){t.init(),t.emit("play"),t.isStopped=!0,t.hasInterrupt=!1},e[ut]=function(){t.hasInterrupt||t.end()},e[xe]=function(){t.emit("adplay"),t.emit("adplaying")},e[Ie]=function(){return t.emit("adended")},e[Ce]=function(){return t.emit("adbreakend")},e[Ke]=function(){return t.emit("hb",t.vo.map(D))},e[ct]=function(){return t.emit("seeking")},e[lt]=function(){return t.emit("seeked")},e[Ve]=function(){return t.emit("renditionchange",t.vo.map(G))},e[Oe]=t.stop,e[Pe]=t.stop,e[ze]=t.stop,e[Le]=t.progress,e[$e]=t.progress,e[Be]=t.end,e[nt]=t.end,e[qe]=function(){t.emit("play"),t.emit("playing")},e[st]=function(){t.hasInterrupt=!0},e[tt]=function(){t.init(),t.emit("error",t.vo.map(B))},e[Re]=function(){t.init(),t.emit("aderror")},e),t}var di,pi=(s(hi,di=z),hi.prototype.getHbInfo=function(e){return this.map("hbInfo",{playhead:e})},hi.prototype.getInitInfo=function(){return this.getNode(V)||{}},hi);function hi(e){var t=di.call(this,e)||this;return t.agent=e,t}var fi,yi=(s(vi,fi=fe),vi.prototype.onRegister=function(){fi.prototype.onRegister.call(this),this.config=this.manifest.NielsenCloud,this.vo=new gi(this)},vi.prototype.start=function(){this.hasSession=!0,this.update()},vi.prototype.stop=function(){this.isPaused=!0,this.update()},vi.prototype.progress=function(){this.isPaused&&(this.update(),this.isPaused=!1)},vi.prototype.update=function(){this.track("playhead")},vi.prototype.track=function(e){this.hasSession&&d.IMAGE({url:this.vo.getUrl(e),data:null,type:"image/gif"}).catch(function(t){h.warn([vi.NAME,e,"failed"].join(" "))})},vi.NAME="NielsenCloud",l([function(e,t){e.observer=!0}],vi.prototype,"events",void 0),vi);function vi(){var e,t=null!==fi&&fi.apply(this,arguments)||this;return t.isPaused=!1,t.hasSession=!1,t.isSdkReady=!0,t.events=((e={})[xe]=t.start,e[Je]=t.start,e[ze]=t.stop,e[ct]=t.stop,e[at]=t.stop,e[Oe]=t.stop,e[Me]=t.stop,e[De]=t.progress,e[qe]=t.progress,e[ht]=t.progress,e[ut]=function(){t.update(),t.isAtLeast95()&&t.track("complete"),t.track("delete"),t.hasSession=!1},e[rt]=function(){t.isPaused||t.update()},e),t}var mi,gi=(s(Ai,mi=z),Ai.prototype.getUrl=function(e){var t=this.map("eventInfo"),i=this.agent.getData();return t.devInfo=this.map(U),t.metadata={},i.isAd?t.metadata.ad=this.map(O):(t.metadata.content=this.map(F),t.metadata.static=this.map("staticInfo")),t.event=e,S.getProtocol()+this.url+T.toString(t)},Ai);function Ai(e){var t=mi.call(this,e)||this;return t.agent=e,e=t.map(j),t.url=[e.serverUrl,e.urlPath,e.appId,e.sessionId,"a?b="].join("/"),t}var Ei,Ti=(s(bi,Ei=fe),bi.prototype.onRegister=function(){Ei.prototype.onRegister.call(this),this.config=this.manifest.Nielsen,this.vo=new Ci(this)},bi.prototype.start=function(){var e=this.vo.map(j),t=S.get("NOLBUNDLE");"function"==typeof t.nlsQ&&(!ve.debug&&e.nol_sdkDebug&&delete e.nol_sdkDebug,this.sdk=t.nlsQ(e.appId,"nolInstance",e),this.vo.isDcr()||this.load())},bi.prototype.load=function(){var e;this.sdk&&(e=this.getData().isAd?this.vo.map(O):this.vo.map(F),this.sdk.ggPM("loadMetadata",e))},bi.prototype.track=function(e){this.sdk&&this.sdk.ggPM(e,this.vo.getPlayhead())},bi.NAME="Nielsen",l([function(e,t){e.observer=!0}],bi.prototype,"events",void 0),l([t({name:"NOLBUNDLE",type:"object"})],bi));function bi(){var e,t=null!==Ei&&Ei.apply(this,arguments)||this;return t.isSdkReady=!1,t.hasChapter=!1,t.events=((e={})[xe]=t.load,e[Ie]=function(){t.track("stop")},e[Le]=function(){t.track("setPlayheadPosition")},e[je]=function(){t.hasChapter=!0,t.load()},e[Je]=function(){t.hasChapter||t.load()},e[Xe]=function(){t.hasChapter||t.load()},e[Ye]=function(){t.track("stop")},e[dt]=t.start,e[ut]=function(){t.track("end"),t.hasChapter=!1},e[ht]=function(){t.vo.isDcr()&&t.track("setPlayheadPosition")},e[at]=function(){t.track("end")},e[Ze]=function(){var e=t.vo.getNode,i=t.getData().id3Info;(e=e(W)||e(j))&&i&&i.id===e.id3Owner&&t.sdk.ggPM("sendID3",i.info)},e),t}var Si,Ci=(s(_i,Si=z),_i.prototype.getPlayhead=function(){var e=this.agent.getData();return e.isLive?e.utcSeconds:e.playhead},_i.prototype.isDcr=function(){var e=this.agent.getData(),t=e.streamType;return e.isDcrLive||"vod"===t.toLowerCase()},_i);function _i(e){var t=Si.call(this,e)||this;return t.agent=e,t}var Pi,Ii=(s(Ri,Pi=fe),Ri.prototype.onRegister=function(){Pi.prototype.onRegister.call(this),this.config=this.manifest.Sparrow,this.vo=new Ni(this)},Ri.NAME="Sparrow",l([function(e,t){e.observer=!0}],Ri.prototype,"events",void 0),Ri);function Ri(){var e,t=null!==Pi&&Pi.apply(this,arguments)||this;return t.isSdkReady=!0,t.events=((e={})[ht]=function(){var e=t.vo.getInfo();0<e.medtime&&t.vo.hasElapsed()&&!t.vo.isUserAnon()&&d.GET({url:t.vo.getUrl(),data:T.toQs(e)})},e),t}var ki,Ni=(s(Oi,ki=z),Oi.prototype.getUrl=function(){var e=this.serverInfo;return[e.serverUrl,e.urlPath].join("/")},Oi.prototype.getInfo=function(){var e=this.agent.getData();return e.platform=this.getPlatform(),e.timestamp=Math.floor(e.timestamp/1e3),this.map("metadataInfo")},Oi.prototype.getPlatform=function(){var e=this.agent.getData(),t=ve.platform;return"Desktop"===t&&e.isMobile?"mobile_web":t},Oi.prototype.isUserAnon=function(){var e=this.agent.getData().userType;return!(!e||"string"!=typeof e||"anon"!==e.toLowerCase())},Oi.prototype.hasElapsed=function(){var e=this.agent.getData(),t=this.serverInfo;return e.playhead%t.interval==0&&(e.isEpisode||e.isLive)},Oi);function Oi(e){var t=ki.call(this,e)||this;return t.agent=e,t}var Li=(Di.prototype.onRegister=function(e,t,i){this.api=new ft(t.config),this.api.save(e.id),this.player=e,this.service=i,this.cvpData=new Mi(e,i,this),this.haskillSignal=!1,this.notifyHandler||this.bindToEvents()},Di.prototype.onNotify=function(e){h.debug("onNotify → "+e.type,e.data),this.model=this.player.getModelSnapshot(),this.event=e;var t=this.eventMap[e.type.toLowerCase()];t&&t.call(this,e)},Di.prototype.register=function(e){var t=this;this.notifyHandler=function(e){return t.onNotify(e)},e.onUpdate=this.notifyHandler,this.onRegister(e.player,e.options,e.services)},Di.prototype.bindToEvents=function(){var e,t=this,i=this.service.avia.PlayerEvent;for(e in this.notifyHandler=function(e){return t.onNotify(e)},i)this.player.on(i[e],this.notifyHandler)},Di.prototype.sessionStart=function(){var e;this.hasSessionStart||(e=this.cvpData.getSessionInfo())&&(this.hasPlaylist=e.isPlaylist,this.post(dt,e),this.hasSessionStart=!0)},Di.prototype.sessionEnd=function(){this.post(ut),this.hasSessionStart=!1,this.hasContentStart=!1},Di.prototype.error=function(e,t){t&&t.code&&this.api.post(e,{errorName:this.cvpData.getErrorName(t.code),errorMessage:t.message,errorCode:t.code})},Di.prototype.seekStart=function(){this.isSeeking||(this.isSeeking=!0,this.post(ct),this.cvpData.isDvr()&&!this.isTimeShifted&&(this.postPlayerState(ue,he),this.isTimeShifted=!0))},Di.prototype.goLive=function(){this.seekStart(),this.isTimeShifted&&(this.postPlayerState(de,he),this.isTimeShifted=!1)},Di.prototype.post=function(e,t){t=t||{},this.isAd?t.adPlayhead=this.adPlayhead:this.haskillSignal||(t.playhead=this.cvpData.getPlayhead(),t.utcPlayhead=this.cvpData.getUtcPlayhead()),e!==ut&&(t.playerInfo=this.cvpData.getPlayerInfo()),t.isAd=this.isAd,t.elapsedTime=this.cvpData.getElapsedTime(),this.api.post(e,t)},Di.prototype.postPlayerState=function(e,t){this.playerState=t,this.post(ot,{playerState:{type:e,name:t}})},Di.prototype.destroy=function(){var e,t=this,i=this.service.avia.PlayerEvent;for(e in i)this.player.off(i[e],this.notifyHandler);this.haskillSignal=!0,this.sessionEnd(),this.service=null,this.player=null,this.model=null,this.event=null,this.playerState=null,this.api.destroy().then(function(){t.api.emit("onDestroy"),t.api.delete(),t.api=null}).catch(function(e){h.warn(e.message)})},Di);function Di(){var e=this;this.sendContenStart=!1,this.hasSessionStart=!1,this.hasContentStart=!1,this.hasAdBreakEnded=!1,this.hasAdBreakStart=!1,this.hasAdStart=!1,this.hasBufferStart=!1,this.haskillSignal=!1,this.hasPlaylist=!1,this.hasResourceEnd=!1,this.isTimeShifted=!1,this.isSeeking=!1,this.isStopped=!1,this.isAd=!1,this.adPlayhead=0,this.chapterOffset=0,this.eventMap={contentdurationavailable:function(){var t=e.event.data.contentDuration;t&&e.api.dataProxy.update({duration:t})},adbreakmetadata:function(){e.sessionStart(),e.isAd=!0,e.adPlayhead=0,e.hasAdBreakStart=!0,e.post(_e,e.cvpData.getAdBreakInfo())},adstart:function(){e.hasAdBreakStart&&(e.adPlayhead=0,e.hasAdStart=!0,e.post(xe,e.cvpData.getAdInfo()))},adpaused:function(){e.hasAdBreakStart&&(e.isStopped=!0,e.post(Oe))},adplaying:function(){e.hasAdBreakStart&&e.isStopped&&(e.post(De),e.isStopped=!1)},adfirstquartile:function(){e.hasAdBreakStart&&e.post(ke)},admidpoint:function(){e.hasAdBreakStart&&e.post(Ne)},adthirdquartile:function(){e.hasAdBreakStart&&e.post(Ue)},adprogress:function(){var t;!e.hasAdBreakStart||0<(t=Math.floor(e.event.data.currentTime))&&e.adPlayhead!==t&&(e.adPlayhead=t,e.post(Le))},adskip:function(){e.hasAdBreakStart&&(e.post(Me),e.isAd=!1)},adstalled:function(){e.hasAdBreakStart&&e.post(we)},aderror:function(){e.hasAdBreakStart&&(e.isAd=!1,e.post(Re))},adcomplete:function(){e.hasAdBreakStart&&(e.hasAdStart=!1,e.post(Ie))},adbreakcomplete:function(){e.hasAdBreakStart&&(e.hasAdBreakStart=!1,e.post(Ce),e.hasAdBreakEnded=!0,e.isAd=!1)},cdnchange:function(){var t=e.model.ContentPlaybackState;e.post(Ke,{cdn:t.cdn||""})},qualitychange:function(){e.post(Ve,{bitrate:e.cvpData.getBitrate()})},contentsegmentstart:function(){e.post(Xe,e.cvpData.getChapterInfo())},contentsegmentend:function(){e.post(Qe),e.chapterOffset++},contentstart:function(){e.sessionStart(),e.hasContentStart=!0,e.sendContenStart=!0},contentprogress:function(){e.isSeeking||e.isAd||!e.hasContentStart||e.hasBufferStart||(e.sendContenStart&&(e.post(Je,e.cvpData.getContentInfo()),e.sendContenStart=!1),e.isStopped&&(e.isStopped=!1,e.post(qe)),e.hasAdBreakEnded&&(e.hasAdBreakEnded=!1,e.post(qe)),e.post(ht))},contentpaused:function(){e.isStopped=!0,e.post(ze)},seekcomplete:function(){e.hasContentStart&&e.isSeeking&&(e.isSeeking=!1,e.hasBufferStart||e.isAd||e.post(lt))},resourcebuffering:function(){e.event.data.value?(e.hasBufferStart=!0,e.post(He)):(e.hasBufferStart=!1,e.post(Fe))},contentcomplete:function(){e.hasContentStart&&e.post(Ye)},drmkeysystemcreated:function(){e.post(et,{drmType:e.model.ContentPlaybackState.drmType})},resourcestart:function(){e.isStopped=!1,e.hasResourceEnd=!1,e.cvpData.setStartTime(n.getTime()),e.sessionStart()},resourceend:function(){e.isStopped=!0,e.hasResourceEnd=!0,e.hasPlaylist&&e.sessionEnd()},resourceinterrupted:function(){e.isStopped=!0,e.hasAdStart&&e.eventMap.adcomplete(),e.hasAdBreakStart&&e.eventMap.adbreakcomplete(),e.post(st),e.sessionEnd()},playlistcomplete:this.sessionEnd,fatalerror:function(t){e.error(tt,t),e.sessionEnd()},error:function(t){t.fatal||e.error(at,t)},metadatacuepoint:function(t){t&&t.data&&e.api.post(Ze,{id3Info:t.data})},streammetadata:function(t){var i;t&&t.data&&t.data.fragment&&(i=!(i=t.data.fragment.mimeType)&&t.data.manifest?t.data.manifest.mimeType:i)&&e.post(pt,{srcMimeType:i})},livepresentationstopped:function(t){e.post(nt)},fullscreenenter:function(t){e.postPlayerState(ue,pe)},fullscreenexit:function(t){e.postPlayerState(de,pe)},mutechange:function(t){e.postPlayerState(t.data?ue:de,"mute")},texttrackdisplaymodechange:function(t){t=t.data.enabled,e.postPlayerState(t?ue:de,"closedCaptioning")},activechange:function(t){t=t.data.value,e.postPlayerState(t&&"active"===t?ue:de,"inFocus")},metric:function(t){var i=e.service.avia;if(t.data.type===i.MetricType.API&&!e.isAd)switch(t.data.key){case i.ApiMetric.GO_LIVE:e.goLive();break;case i.ApiMetric.SEEK:e.seekStart()}}}}var Mi=(wi.prototype.getAdBreakInfo=function(){var e=(this.connector.event.data||{}).adBreakInfo,t=e.adBreakType;return t&&-1===t.indexOf("roll")&&(e.adBreakType=t.toLocaleLowerCase()+"roll"),T.assign(this.getContentInfo(),e)},wi.prototype.getAdInfo=function(){var e=(this.connector.event.data||{}).adInfo;return e.adUrl=e.adAssetUrl,e},wi.prototype.getSessionInfo=function(){var e=this.service.buildInfo,t=this.player.playlist.currentResource;if(!t)return null;var i=t.metadata,r=t.location,n=this.service.system;n=T.assign(this.getContentInfo(),{playerName:e.playerName,playerVersion:e.playerVersion,playerId:this.player.id,userCountry:i.country||"us",drmEnabled:r&&r.drm&&r.drm.enabled,drmType:this.model().ContentPlaybackState.drmType||"none",isMobile:!!n.isMobile,isPaidContent:!!i.isPaidContent,isAffiliateFeed:!!i.isAffiliateFeed,isPlaylist:!!i.isPlaylist,isDai:!!(t.ad&&t.ad.context&&-1<t.ad.context.indexOf("dai")),usesSsai:this.model().PresentationState.usesSsai,systemDevice:n&&n.device?n.device:"",screenSize:S.getSize(),initTime:this.initTime});return T.assign(i,n)},wi.prototype.getContentInfo=function(){var e=this.model().ContentPlaybackState,t=(r=this.player.playlist.currentResource).metadata,i=r.location,r=Math.abs(n.getTime()-this.startTime);return t.streamType&&(this.streamStype=e.streamType),{timeToStart:r,mediaUrl:i.mediaUrl||"",mediaId:t.videoId||"",duration:t.duration||this.connector.api.dataProxy.data.duration,bitrate:e.bitrate,framerate:e.framerate,cdn:"object"!=typeof e.cdn?e.cdn:"",isLive:this.isLive(),isDcrLive:!!t.isDcrLive,isEpisode:!!t.episodeFlag,streamType:t.streamType,streamId:this.model().PresentationState.streamId||"",hasSessionResumed:0<e.time}},wi.prototype.getChapterInfo=function(){var e=this.connector.chapterOffset;return{chapterOffset:e,chapterIndex:e+1,chapterLength:this.getPlayerInfo().srcDuration}},wi.prototype.getPlayhead=function(){var e=this.connector.event.data||{};return!this.connector.api.dataProxy.getData().isLive&&-1<e.contentTime?(this.playhead=e.contentTime,this.connector.hasResourceEnd&&(this.playhead=e.duration)):this.playhead=e.elapsedTimeMs/1e3,this.playhead},wi.prototype.getElapsedTime=function(){return(this.connector.event.data||{}).elapsedTimeMs||-1},wi.prototype.getUtcPlayhead=function(){var e=this.model().ContentPlaybackState.liveStreamInfo;return e&&e.absoluteTime?e.absoluteTime:0},wi.prototype.getBitrate=function(){return this.model().ContentPlaybackState.bitrate},wi.prototype.getPlayerInfo=function(){var e=(a=this.model()).PresentationState,t=a.ContentPlaybackState,i=t.qualityInfo?t.qualityInfo.quality:"",r={};(o=this.service.playerDomProxy)&&o.data&&(r=o.data.video||{});var n=this.connector.api.dataProxy.getData(),a=t.liveStreamInfo,o=r.duration||-1;return this.isLive()&&a&&a.relativeDuration&&(o=a.relativeDuration),{isPaused:this.connector.isStopped,isAutoplay:e.isAutoplay,hasPreload:!1,width:r.clientWidth,height:r.clientHeight,srcWidth:i&&i.width?i.width:0,srcHeight:i&&i.height?i.height:0,srcDuration:Math.floor(o),srcBitrate:t.bitrate,isFullscreen:e.isFullscreen,srcMimeType:n.srcMimeType,srcUrl:r.src,posterUrl:"",language:this.service.localization.language,playerState:this.connector.playerState}},wi.prototype.getErrorName=function(e){var t=this.connector.service.avia.ErrorCode,i="error";return Object.keys(t).forEach(function(r){t[r]===e&&(i=r)}),i},wi.prototype.isLive=function(){return"LIVE"===this.streamStype},wi.prototype.isVod=function(){return"VOD"===this.streamStype},wi.prototype.isDvr=function(){return"DVR"===this.streamStype},wi.prototype.model=function(){return this.player.getModelSnapshot()},wi.prototype.setStartTime=function(e){this.startTime=e},wi);function wi(e,t,i){this.player=e,this.service=t,this.connector=i,this.startTime=0,this.playhead=0,this.initTime=n.getTime()}function xi(e){var t=new Li;t.register(e),this._api=t.api}xi.prototype.api=function(){return this._api},z=xi,e.AviaTracking=Li,e.Connector=z,e.Cvp=Li,e.Event=te,e.Settings=ve,e.SystemInfo=Ee,e.VideoTracker=ft,e.snapshot=function(){var e=Ee.instance;return e[e.length-1].dataProxy.getData()},e.track=function(e,t){re.getDefault().track({name:e,body:t||{}})},e.version=function(){return Ee.version},Object.defineProperty(e,"__esModule",{value:!0})}),function(e){e.vtg=e.vtg||{},e.vtg.config={DataSource:[{label:"utag_data",var:"utag_data"}],Settings:{debug:utag_data.isDev,ssl:"true",platform:"Web"},AdobeData:{enabled:!0,type:"apptracker",params:{serverInfo:{reportSuiteID:"{utag_data.sitePrimaryRsid}",demdexUrl:"dpm.demdex.net/id?d_rtbd=json&d_ver=2&d_orgid=",marketingCloudOrgId:utag_data.marketingCloudOrgId,marketingCloudVisitorID:"{config.mid}",dataUrl:"saa.cbsnews.com/b/ss/{utag_data.sitePrimaryRsid}/6",cookieDomain:".cbsnews.com"}}},AdobeMedia:{enabled:!0,type:"videotracker",params:{serverInfo:{serverUrl:"{utag_data.isDev} ? cbsnews-dev.hb-api.omtrdc.net : cbsnews.hb-api.omtrdc.net",urlPath:"/api/v1/sessions",sendUndefined:"{utag_data.isDev}"},accountInfo:{"analytics.trackingServer":"saa.cbsnews.com","analytics.reportSuite":"{utag_data.sitePrimaryRsid}","analytics.enableSSL":"true","visitor.marketingCloudOrgId":"{utag_data.marketingCloudOrgId}","visitor.marketingCloudUserId":"{config.mid}"},mediaInfo:{"media.channel":"CBS News","media.contentType":"{data.streamType}","media.episode":"{data.episodeNumber}","media.genre":"{data.genre}","media.id":"{data.videoId}","media.length":"{data.isLive} ? 86400 : {data.duration}","media.name":"{data.videoTitle}","media.network":"CBSNEWS","media.playerName":"{data.playerName}","media.resume":"{data.hasSessionResumed}","media.sdkVersion":"{data.playerVersion}","media.season":"{data.seasonNumber}","media.show":"{data.seriesTitle}","media.showType":"{data.isEpisode} ? 0 : 2"},adBreakInfo:{"media.ad.podFriendlyName":"{data.adBreakType}","media.ad.podIndex":"{data.adBreakPosition}","media.ad.podSecond":"{data.playhead}"},adInfo:{"media.ad.name":"{data.adTitle}","media.ad.id":"{data.videoTitle} - {data.adTitle}","media.ad.length":"{data.adDuration}","media.ad.creativeId":"{data.adId}","media.ad.creativeURL":"{data.adUrl}","media.ad.playerName":"{data.playerName}","media.ad.podPosition":"{data.adPosition}"},customData:{AppID:"{utag_data._appVersion}",articleAuthorIds:"{utag_data._authorList}",articleId:"{utag_data.articleId}",articleTitle:"{utag_data.articleTitle}",articleType:"{utag_data.articleType}",brandPlatformId:"{utag_data.brandPlatformId}",deviceForm:"{utag_data.deviceForm}",deviceOs:"{utag_data.deviceOs}",deviceType:"{utag_data.deviceType}",mediaAutoPlay:"{player.isAutoplay}",mediaEmbed:"{utag_data.mediaEmbed}",mediaId:"{utag_data.mediaId}",mediaDistNetwork:"can",mediaPartnerId:"{utag_data.mediaPartnerId}",mediaPositionType:"{utag_data.mediaPositionType}",mediaResume:"{data.hasSessionResumed}",mediaTitle:"{utag_data.mediaTitle}",optimizelyExp:"{utag_data.optimizelyExp}",pageName:"{utag_data._pageName} || {utag_data._PageName}",pageType:"{utag_data.pageType}",pageUrl:"{utag_data.pageUrl} || {utag_data._pageUrl}",pageViewGuid:"{utag_data.pageViewGuid}",secondaryTopicIds:"{utag_data.secondaryTopicIds}",siteCode:"{utag_data.siteName}",screenName:"{utag_data.screenName}",siteEdition:"{utag_data.siteEdition}",siteHier:"{utag_data.siteHier}",siteOrigin:"{utag_data.siteOrigin}",sitePrimaryRsid:"{utag_data.sitePrimaryRsid}",siteRsids:"{utag_data.sitePrimaryRsid}",siteSection:"{utag_data.siteSection}",siteType:"{utag_data.siteType}",siteTypeDevice:"{utag_data.siteTypeDevice}",topicPrimaryId:"{utag_data.topicId}",tsVersion:"{utag_data.trackingServiceVersion}",userState:"{utag_data.userState}",userStatus:"{utag_data.userType}",userRegId:"{utag_data.userRegId}"},qoeData:{"media.qoe.timeToStart":"{data.timeToStart}"},errorInfo:{"media.qoe.errorID":"{data.errorCode}","media.qoe.errorSource":"player"},dataType:{"analytics.enableSSL":"boolean","media.length":"int","media.resume":"boolean","media.ad.podIndex":"int","media.ad.podSecond":"int","media.ad.length":"int","media.ad.podPosition":"int","media.qoe.timeToStart":"int","media.chapter.index":"int","media.chapter.offset":"int","media.chapter.length":"int"}}},ComscoreStreaming:{enabled:!0,type:"videotracker",params:{publisherInfo:{publisherId:"3005086",platformApi:"13",persistentLabels:{cs_ucfr:""}},appInfo:{setApplicationName:"CBSNewsBrowser",setApplicationVersion:"*null"},initInfo:{setImplementationId:"",setProjectId:"",setMediaPlayerName:"{data.playerName}",setMediaPlayerVersion:"{data.playerVersion}"},contentInfo:{carryTvAdvertisementLoad:"{data.isLive} ? 1 : 0",classifyAsCompleteEpisode:"{data.isEpisode} ? 1 : 0",setDictionaryClassificationC3:"{data.c3} ? {data.c3} : CBSNewsBrowser",setDictionaryClassificationC4:"{data.c4}",setDictionaryClassificationC6:"{data.c6}",setEpisodeNumber:"{data.isLive} ? *null : {data.episodeNumber}",setEpisodeSeasonNumber:"{data.isLive} ? *null : {data.seasonNumber}",setEpisodeTitle:"{data.isLive} ? *null : {data.videoTitle}",setGenreName:"{data.genre}",setLength:"{data.isLive} ? 0 : {data.duration}",setProgramTitle:"{data.isLive} ? *null : {data.seriesTitle}",setPublisherName:"{data.partner}",setStationTitle:"{data.stationTitle} ? {data.stationTitle} : *null",setUniqueId:"{data.videoId}"},adInfo:{setUniqueId:"{data.adId}",setLength:"{data.adDuration}"},events:{sessionStart:"createPlaybackSession",metadata:"setMetadata",play:"notifyPlay",pause:"notifyPause",end:"notifyEnd",bufferStart:"notifyBufferStart",bufferStop:"notifyBufferStop",seekStart:"notifySeekStart"},dataFormat:{setLength:function(e){return 1e3*e}}}},Mux:{enabled:!0,type:"videotracker",params:{initInfo:{minimumRebufferDuration:500},mediaInfo:{env_key:"{data.propertyKey}",page_type:"{data.pageType}",sub_property_id:"CBS News",player_name:"{data.playerName}",player_version:"{data.playerVersion}",player_init_time:"{data.initTime}",player_software_name:"{data.playerName}",player_software_version:"{data.playerVersion}",player_mux_plugin_name:"Mux {data.platform}",player_mux_plugin_version:"{data.version}",video_id:"{data.videoId}",video_title:"{data.videoTitle}",video_series:"{data.seriesTitle}",video_variant_name:"",video_variant_id:"",video_language_code:"",video_content_type:"",video_duration:"{data.durationMs}",video_stream_type:"{data.isLive} ? live : on-demand",video_producer:"",video_encoding_variant:"",video_cdn:"{data.cdn}"},adInfo:{ad_asset_url:"{data.adUrl}"},cdnInfo:{video_cdn:"{data.cdn}"},errorInfo:{player_error_code:"{data.errorCode}",player_error_message:"{data.errorMessage}"},requestFailedInfo:{request_error:"{data.errorName}",request_error_text:"{data.errorMessage}",request_error_code:"{data.errorCode}"},hbInfo:{player_playhead_time:"{data.playhead}"},qosInfo:{video_source_bitrate:"{data.bitrate}"},playerInfo:{player_is_paused:"{player.isPaused}",player_width:"{player.width}",player_height:"{player.height}",video_source_height:"{player.srcHeight}",video_source_width:"{player.srcWidth}",player_is_fullscreen:"{player.isFullscreen}",player_autoplay_on:"{player.isAutoplay}",player_preload_on:"{player.hasPreload}",video_source_url:"{data.mediaUrl}",video_source_mime_type:"{player.srcMimeType}",video_source_duration:"{player.srcDuration}",video_poster_url:"{player.posterUrl}",player_language_code:"{player.language}"},dataType:{player_init_time:"int",video_duration:"int",video_source_duration:"int",player_is_paused:"boolean",player_is_fullscreen:"boolean",player_autoplay_on:"boolean",player_preload_on:"boolean"}}},Nielsen:{enabled:!0,type:"videotracker",params:{serverInfo:{appId:"PFBA740F0-D181-CC24-E040-070AAD312ABB",nol_sdkDebug:"{utag_data.isDev} ? DEBUG : NONE",optout:"false"},mediaInfo:{assetid:"{data.videoId}",program:"{data.name}",title:"{data.videoTitle}",type:"content",length:"{data.isLive} ? 0 : {data.duration}",mediaURL:"{data.mediaUrl}",isfullepisode:"{data.isEpisode} ? y : n",adloadtype:"{data.isDcrLive} ? 1 : 2",airdate:"{data.airDate}"},adInfo:{assetid:"{data.adId}",type:"{data.adBreakType}"}}}}}(window),define("video/tracking-config",function(){}),require(["polyfill!hls.min"],function(e){window.Hls=e}),require(["third-party/ima","third-party/dai","libs/intercom.min"]),require(["video/tracking-service/v21.12.7/ts.lib.min","video/tracking-config"],function(e){window.vtg.ts=e,CBSNEWS.tracking.trackingServiceVersion=e.SystemInfo.version;for(let e in window.vtg.config)window.vtg.config[e].hasOwnProperty("enabled")&&(delete window.vtg.config[e].enabled,Object.defineProperty(window.vtg.config[e],"enabled",{get:()=>(CBSNEWS.features.isFeatureDisabled("consent")||!1!==CBSNEWS.consentStates.performance)&&CBSNEWS.features.isFeatureEnabled("avia-"+e)}));require(["video/tracking-service/v21.12.7/tags/comscorestreaming.js#"],function(e){window.ns_=window.ns_||{},window.ns_.analytics=e}),require(["video/tracking-service/v21.12.7/tags/mux.js#"]),require(["video/tracking-service/v21.12.7/tags/nielsen.js#"])}),define("video/common",function(){}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("video/main-embed",[],t);else{var i=t();for(var r in i)("object"==typeof exports?exports:e)[r]=i[r]}}(window,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=30)}([function(e,t,i){
/* Riot v3.13.2, @license MIT */
!function(e){"use strict";function t(e,t){return(t||document).querySelector(e)}var i,r,n=[],a={},o=["ref","data-ref"],s="http://www.w3.org/2000/svg",l=/^xlink:(\w+)/,c="undefined"==typeof window?void 0:window,u=/^on/,d=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,p={viewbox:"viewBox",preserveaspectratio:"preserveAspectRatio"},h=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,f=0|(c&&c.document||{}).documentMode;function y(e){return"svg"===e?document.createElementNS(s,e):document.createElement(e)}function v(e,t,i){var r=l.exec(t);r&&r[1]?e.setAttributeNS("http://www.w3.org/1999/xlink",r[1],i):e.setAttribute(t,i)}var m,g,A={},E=!1;c&&(m=y("style"),g=t("style[type=riot]"),v(m,"type","text/css"),g?(g.id&&(m.id=g.id),g.parentNode.replaceChild(m,g)):document.head.appendChild(m),r=(i=m).styleSheet);var T={styleNode:i,add:function(e,t){A[t]=e,E=!0},inject:function(){if(c&&E){E=!1;var e=Object.keys(A).map(function(e){return A[e]}).join("\n");r?r.cssText=e:i.innerHTML=e}},remove:function(e){delete A[e],E=!0}},b=function(){var e=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"],t=e.reduce(function(e,t){return e+t.slice(-1)},""),i=/^\/(?=[^*>\/])[^[\/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\\/]*)*?\/[gimuy]*/,r=/[$\w]/;function n(e,t){for(;--t>=0&&/\s/.test(e[t]););return t}return function(a,o){var s=/.*/g,l=s.lastIndex=o++,c=s.exec(a)[0].match(i);if(c){var u=l+c[0].length,d=a[l=n(a,l)];if(l<0||~"[{(,;:?=|&!^~>%*/".indexOf(d))return u;if("."===d)"."===a[l-1]&&(o=u);else if("+"===d||"-"===d)(a[--l]!==d||(l=n(a,l))<0||!r.test(a[l]))&&(o=u);else if(~t.indexOf(d)){for(var p=l+1;--l>=0&&r.test(a[l]););~e.indexOf(a.slice(l+1,p))&&(o=u)}}return o}}(),S=function(e){var t,i,r=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,n=r.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,a=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),o=/(?=[[\]()*+?.^$|])/g,s=r.source+"|"+/(\/)(?![*\/])/.source,l={"(":RegExp("([()])|"+s,"g"),"[":RegExp("([[\\]])|"+s,"g"),"{":RegExp("([{}])|"+s,"g")},c=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+s,"g"),"{ }",/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],u=void 0,d=[];function p(e){return e}function h(e,t){return t||(t=d),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?"g":"")}function f(e){if("{ }"===e)return c;var t=e.split(" ");if(2!==t.length||a.test(e))throw new Error('Unsupported brackets "'+e+'"');return(t=t.concat(e.replace(o,"\\").split(" ")))[4]=h(t[1].length>1?/{[\S\s]*?}/:c[4],t),t[5]=h(e.length>3?/\\({|})/g:c[5],t),t[6]=h(c[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+s,"g"),t[8]=e,t}function y(e){return e instanceof RegExp?t(e):d[e]}function v(e){(e||(e="{ }"))!==d[8]&&(d=f(e),t="{ }"===e?p:h,d[9]=t(c[9])),u=e}return y.split=function(e,t,i){i||(i=d);var r,n,a,o,s,c,u=[],p=i[6],h=[],f="";for(n=a=p.lastIndex=0;r=p.exec(e);){if(c=p.lastIndex,o=r.index,n){if(r[2]){var y=r[2],v=l[y],m=1;for(v.lastIndex=c;r=v.exec(e);)if(r[1]){if(r[1]===y)++m;else if(!--m)break}else v.lastIndex=A(r.index,v.lastIndex,r[2]);p.lastIndex=m?e.length:v.lastIndex;continue}if(!r[3]){p.lastIndex=A(o,c,r[4]);continue}}r[1]||(g(e.slice(a,o)),a=p.lastIndex,(p=i[6+(n^=1)]).lastIndex=a)}return e&&a<e.length&&g(e.slice(a)),u.qblocks=h,u;function g(e){f&&(e=f+e,f=""),t||n?u.push(e&&e.replace(i[5],"$1")):u.push(e)}function A(i,r,n){return n&&(r=b(e,i)),t&&r>i+2&&(s="⁗"+h.length+"~",h.push(e.slice(i,r)),f+=e.slice(a,i)+s,a=r),r}},y.hasExpr=function(e){return d[4].test(e)},y.loopKeys=function(e){var t=e.match(d[9]);return t?{key:t[1],pos:t[2],val:d[0]+t[3].trim()+d[1]}:{val:e.trim()}},y.array=function(e){return e?f(e):d},Object.defineProperty(y,"settings",{set:function(e){var t;t=(e=e||{}).brackets,Object.defineProperty(e,"brackets",{set:v,get:function(){return u},enumerable:!0}),i=e,v(t)},get:function(){return i}}),y.settings="undefined"!=typeof riot&&riot.settings||{},y.set=v,y.skipRegex=b,y.R_STRINGS=r,y.R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,y.S_QBLOCKS=n,y.S_QBLOCK2=s,y}(),C=function(){var e={};function t(t,a){return t?(e[t]||(e[t]=function(e){var t=function(e){var t,i=S.split(e.replace(r,'"'),1),a=i.qblocks;if(i.length>2||i[0]){var o,l,c=[];for(o=l=0;o<i.length;++o)(t=i[o])&&(t=1&o?s(t,1,a):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(c[l++]=t);t=l<2?c[0]:"["+c.join(",")+'].join("")'}else t=s(i[1],0,a);return a.length&&(t=t.replace(n,function(e,t){return a[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),t}(e);return"try{return "!==t.slice(0,11)&&(t="return "+t),new Function("E",t+";")}(t))).call(a,i.bind({data:a,tmpl:t})):t}function i(e,i){e.riotData={tagName:i&&i.__&&i.__.tagName,_riot_id:i&&i._riot_id},t.errorHandler?t.errorHandler(e):"undefined"!=typeof console&&"function"==typeof console.error&&(console.error(e.message),console.log("<%s> %s",e.riotData.tagName||"Unknown tag",this.tmpl),console.log(this.data))}t.hasExpr=S.hasExpr,t.loopKeys=S.loopKeys,t.clearCache=function(){e={}},t.errorHandler=null;var r=/\u2057/g,n=/\u2057(\d+)~/g,a=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,o={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function s(e,t,i){if(e=e.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var r,n=[],s=0;e&&(r=e.match(a))&&!r.index;){var l,c,u=/,|([[{(])|$/g;for(e=RegExp.rightContext,l=r[2]?i[r[2]].slice(1,-1).trim().replace(/\s+/g," "):r[1];c=(r=u.exec(e))[1];)p(c,u);c=e.slice(0,r.index),e=RegExp.rightContext,n[s++]=d(c,1,l)}e=s?s>1?"["+n.join(",")+'].join(" ").trim()':n[0]:d(e,t)}return e;function p(t,i){var r,n=1,a=o[t];for(a.lastIndex=i.lastIndex;r=a.exec(e);)if(r[0]===t)++n;else if(!--n)break;i.lastIndex=n?e.length:a.lastIndex}}var l='"in this?this:'+("object"!=typeof window?"global":"window")+").",c=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,u=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function d(e,t,i){var r;return e=e.replace(c,function(e,t,i,n,a){return i&&(n=r?0:n+e.length,"this"!==i&&"global"!==i&&"window"!==i?(e=t+'("'+i+l+i,n&&(r="."===(a=a[n])||"("===a||"["===a)):n&&(r=!u.test(a.slice(n)))),e}),r&&(e="try{return "+e+"}catch(e){E(e,this)}"),i?e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+i+'":""':t&&(e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}return t.version=S.version="v3.0.8",t}(),_=function(e){e=e||{};var t={},i=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(i,r){return"function"==typeof r&&(t[i]=t[i]||[]).push(r),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(i,r){if("*"!=i||r)if(r)for(var n,a=t[i],o=0;n=a&&a[o];++o)n==r&&a.splice(o--,1);else delete t[i];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,i){return e.on(t,function r(){e.off(t,r),i.apply(e,arguments)})},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){var n,a,o,s=arguments,l=arguments.length-1,c=new Array(l);for(o=0;o<l;o++)c[o]=s[o+1];for(n=i.call(t[r]||[],0),o=0;a=n[o];++o)a.apply(e,c);return t["*"]&&"*"!=r&&e.trigger.apply(e,["*",r].concat(c)),e},enumerable:!1,writable:!1,configurable:!1}}),e};function P(e,t){return Object.getOwnPropertyDescriptor(e,t)}function I(e){return void 0===e}function R(e,t){var i=P(e,t);return I(e[t])||i&&i.writable}function k(e){for(var t,i=1,r=arguments,n=r.length;i<n;i++)if(t=r[i])for(var a in t)R(e,a)&&(e[a]=t[a]);return e}function N(e){return Object.create(e)}var O=k(N(S.settings),{skipAnonymousTags:!0,keepValueAttributes:!1,autoUpdate:!0});function L(e,t){return[].slice.call((t||document).querySelectorAll(e))}function D(){return document.createTextNode("")}function M(e,t){e.style.display=t?"":"none",e.hidden=!t}function w(e,t){return e.getAttribute(t)}function x(e,t){e.removeAttribute(t)}function U(e,t,i){if(i){var r=e.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+s+'">'+t+"</svg>","application/xml").documentElement,!0);e.appendChild(r)}else e.innerHTML=t}function B(e,t){if(e)for(var i;i=d.exec(e);)t(i[1].toLowerCase(),i[2]||i[3]||i[4])}function V(){return document.createDocumentFragment()}function F(e,t,i){e.insertBefore(t,i.parentNode&&i)}function H(e){return Object.keys(e).reduce(function(t,i){return t+" "+i+": "+e[i]+";"},"")}function K(e,t,i){if(e){var r,n=t(e,i);if(!1===n)return;for(e=e.firstChild;e;)r=e.nextSibling,K(e,t,n),e=r}}var G=Object.freeze({$$:L,$:t,createDOMPlaceholder:D,mkEl:y,setAttr:v,toggleVisibility:M,getAttr:w,remAttr:x,setInnerHTML:U,walkAttrs:B,createFrag:V,safeInsert:F,styleObjectToString:H,walkNodes:K});function j(e){return I(e)||null===e}function W(e){return j(e)||""===e}function Y(e){return"function"==typeof e}function z(e){return e&&"object"==typeof e}function $(e){var t=e.ownerSVGElement;return!!t||null===t}function q(e){return Array.isArray(e)||e instanceof Array}function Q(e){return h.test(e)}function X(e){return"string"==typeof e}var J=Object.freeze({isBlank:W,isFunction:Y,isObject:z,isSvg:$,isWritable:R,isArray:q,isBoolAttr:Q,isNil:j,isString:X,isUndefined:I});function Z(e,t){return-1!==e.indexOf(t)}function ee(e,t){for(var i=e?e.length:0,r=0;r<i;r++)t(e[r],r);return e}function te(e,t){return e.slice(0,t.length)===t}var ie,re=(ie=-1,function(){return++ie});function ne(e,t,i,r){return Object.defineProperty(e,t,k({value:i,enumerable:!1,writable:!1,configurable:!0},r)),e}function ae(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function oe(e){console&&console.warn&&console.warn(e)}var se=Object.freeze({contains:Z,each:ee,getPropDescriptor:P,startsWith:te,uid:re,defineProperty:ne,objectCreate:N,extend:k,toCamel:ae,warn:oe});function le(e,t,i,r,n){var a=e[t],o=q(a),s=!I(n);if(!a||a!==i)if(!a&&r)e[t]=[i];else if(a)if(o){var l=a.indexOf(i);if(l===n)return;-1!==l&&a.splice(l,1),s?a.splice(n,0,i):a.push(i)}else e[t]=[a,i];else e[t]=i}function ce(e){return e.tagName&&a[w(e,"data-is")||w(e,"data-is")||e.tagName.toLowerCase()]}function ue(e,t){var i=ce(e),r=!t&&w(e,"data-is");return r&&!C.hasExpr(r)?r:i?i.name:e.tagName.toLowerCase()}function de(){return this.parent?k(N(this),this.parent):this}var pe=/<yield\b/i,he=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,fe=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,ye=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,ve={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},me=f&&f<10?/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;function ge(e,i,r){var n=e&&e.match(/^\s*<([-\w]+)/),a=n&&n[1].toLowerCase(),o=y(r?"svg":"div");return e=function(e,t){if(!pe.test(e))return e;var i={};return t=t&&t.replace(fe,function(e,t,r){return i[t]=i[t]||r,""}).trim(),e.replace(ye,function(e,t,r){return i[t]||r||""}).replace(he,function(e,i){return t||i||""})}(e,i),me.test(a)?o=function(e,i,r){var n="o"===r[0],a=n?"select>":"table>";if(e.innerHTML="<"+a+i.trim()+"</"+a,a=e.firstChild,n)a.selectedIndex=-1;else{var o=ve[r];o&&1===a.childElementCount&&(a=t(o,a))}return a}(o,e,a):U(o,e,r),o}var Ae=/^on/;function Ee(e){for(var t=e;t.__.isAnonymous&&t.parent;)t=t.parent;return t}function Te(e,t,i,r){var n,a=function(e,t,i){var r=this.__.parent,n=this.__.item;if(!n)for(;r&&!n;)n=r.__.item,r=r.__.parent;if(R(i,"currentTarget")&&(i.currentTarget=e),R(i,"target")&&(i.target=i.srcElement),R(i,"which")&&(i.which=i.charCode||i.keyCode),i.item=n,t.call(this,i),O.autoUpdate&&!i.preventUpdate){var a=Ee(this);a.isMounted&&a.update()}}.bind(r,i,t);i[e]=null,n=e.replace(u,""),Z(r.__.listeners,i)||r.__.listeners.push(i),i["__riot-events__"]||(i["__riot-events__"]={}),i["__riot-events__"][e]&&i.removeEventListener(n,i["__riot-events__"][e]),i["__riot-events__"][e]=a,i.addEventListener(n,a,!1)}function be(e,t,i,r){var n=et(e,t,i),a=t.tagName||ue(t.root,!0),o=Ee(r);return ne(n,"parent",o),n.__.parent=r,le(o.tags,a,n),o!==r&&le(r.tags,a,n),n}function Se(e,t,i,r){if(q(e[t])){var n=e[t].indexOf(i);-1!==n&&e[t].splice(n,1),e[t].length?1!==e[t].length||r||(e[t]=e[t][0]):delete e[t]}else e[t]===i&&delete e[t]}function Ce(e,t){var i,r,n=D(),a=D(),o=V();for(this.root.insertBefore(n,this.root.firstChild),this.root.appendChild(a),this.__.head=r=n,this.__.tail=a;r;)i=r.nextSibling,o.appendChild(r),this.__.virts.push(r),r=i;t?e.insertBefore(o,t.__.head):e.appendChild(o)}function _e(e,t){if(t.parentNode){var i=V();Ce.call(e,i),t.parentNode.replaceChild(i,t)}}function Pe(e){if(!this.root||!w(this.root,"virtualized")){var t,i=e.dom,r=function(e){return e?(e=e.replace("riot-",""),p[e]&&(e=p[e]),e):null}(e.attr),n=Z(["show","hide"],r),o=e.root&&"VIRTUAL"===e.root.tagName,s=this.__.isAnonymous,l=i&&(e.parent||i.parentNode),c=O.keepValueAttributes,u="style"===r,d="class"===r,h="value"===r;if(e._riot_id)e.__.wasCreated?e.update():(e.mount(),o&&_e(e,e.root));else{if(e.update)return e.update();var y=n&&!s?de.call(this):this,m=!W(t=C(e.expr,y)),g=z(t);if(g&&(d?t=C(JSON.stringify(t),this):u&&(t=H(t))),!e.attr||e.wasParsedOnce&&!1!==t&&(m||h&&(!h||c))||x(i,w(i,e.attr)?e.attr:r),e.bool&&(t=!!t&&r),e.isRtag)return function(e,t,i){var r,n=e.tag||e.dom._tag,o=(n?n.__:{}).head,s="VIRTUAL"===e.dom.tagName;n&&e.tagName===i?n.update():(n&&(s&&(r=D(),o.parentNode.insertBefore(r,o)),n.unmount(!0)),X(i)&&(e.impl=a[i],e.impl&&(e.tag=n=be(e.impl,{root:e.dom,parent:t,tagName:i},e.dom.innerHTML,t),ee(e.attrs,function(e){return v(n.root,e.name,e.value)}),e.tagName=i,n.mount(),s&&_e(n,r||n.root),t.__.onUnmount=function(){var e=n.opts.dataIs;Se(n.parent.tags,e,n),Se(n.__.parent.tags,e,n),n.unmount()})))}(e,this,t);if((!e.wasParsedOnce||e.value!==t)&&(e.value=t,e.wasParsedOnce=!0,!g||d||u||n)){if(m||(t=""),!r)return t+="",void(l&&(e.parent=l,"TEXTAREA"===l.tagName?(l.value=t,f||(i.nodeValue=t)):i.nodeValue=t));switch(!0){case Y(t):A=r,Ae.test(A)&&Te(r,t,i,this);break;case n:M(i,"hide"===r?!t:t);break;default:e.bool&&(i[r]=t),h&&i.value!==t?i.value=t:m&&!1!==t&&v(i,r,t),u&&i.hidden&&M(i,!1)}var A}}}}function Ie(e){ee(e,Pe.bind(this))}function Re(e,t,i,r,n){if(!e||!i){var a=e?de.call(this):t||this;ee(n,function(e){e.expr&&Pe.call(a,e.expr),r[ae(e.name).replace("riot-","")]=e.expr?e.expr.value:e.value})}}function ke(e){if(!e){var t=Object.keys(a);return t+ke(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){return e+',[data-is="'+t.trim().toLowerCase()+'"]'},"")}function Ne(e,t){var i=this.name,r=this.tmpl,n=this.css,o=this.attrs,s=this.onCreate;return a[i]||(Oe(i,r,n,o,s),a[i].class=this.constructor),tt(e,i,t,this),n&&T.inject(),this}function Oe(e,t,i,r,n){return Y(r)&&(n=r,/^[\w-]+\s?=/.test(i)?(r=i,i=""):r=""),i&&(Y(i)?n=i:T.add(i,e)),e=e.toLowerCase(),a[e]={name:e,tmpl:t,attrs:r,fn:n},e}function Le(e,t,i,r,n){return i&&T.add(i,e),a[e]={name:e,tmpl:t,attrs:r,fn:n},e}function De(e,t,i){var r,n,a=[];if(T.inject(),(z(t)||Y(t))&&(i=t,t=0),r=X(e)?(e="*"===e?n=ke():e+ke(e.split(/, */)))?L(e):[]:e,"*"===t){if(t=n||ke(),r.tagName)r=L(t,r);else{var o=[];ee(r,function(e){return o.push(L(t,e))}),r=o}t=0}return function e(r){if(r.tagName){var n,o=w(r,"data-is");t&&o!==t&&(o=t,v(r,"data-is",t)),(n=tt(r,o||r.tagName.toLowerCase(),Y(i)?i():i))&&a.push(n)}else r.length&&ee(r,e)}(r),a}var Me={},we=Me.__global_mixin={},xe=0;function Ue(e,t,i){if(z(e))Ue("__"+xe+++"__",e,!0);else{var r=i?we:Me;if(!t){if(I(r[e]))throw new Error("Unregistered mixin: "+e);return r[e]}r[e]=Y(t)?k(t.prototype,r[e]||{})&&t:k(r[e]||{},t)}}function Be(){return ee(n,function(e){return e.update()})}function Ve(e){return T.remove(e),delete a[e]}var Fe=Object.freeze({Tag:Ne,tag:Oe,tag2:Le,mount:De,mixin:Ue,update:Be,unregister:Ve,version:"v3.13.2"});function He(e,t){var i,r=this.parent;r&&(q(i=r.tags[e])?i.splice(t,0,i.splice(i.indexOf(this),1)[0]):le(r.tags,e,this))}function Ke(e,t){for(var i,r=this.__.head,n=V();r;)if(i=r.nextSibling,n.appendChild(r),(r=i)===this.__.tail){n.appendChild(r),e.insertBefore(n,t.__.head);break}}function Ge(e,t,i){var r={};return r[e.key]=t,e.pos&&(r[e.pos]=i),r}function je(e,t){e.splice(t,1),this.unmount(),Se(this.parent,this,this.__.tagName,!0)}function We(e,t,i){var r="string"!=typeof w(e,"no-reorder")||x(e,"no-reorder"),n=w(e,"key"),o=!!n&&C.hasExpr(n),s=ue(e),l=a[s],c=e.parentNode,u=D(),d=ce(e),p=w(e,"if"),h=[],f=e.innerHTML,y=!a[s],v="VIRTUAL"===e.tagName,m=[];return x(e,"each"),x(e,"key"),(i=C.loopKeys(i)).isLoop=!0,p&&x(e,"if"),c.insertBefore(u,e),c.removeChild(e),i.update=function(){i.value=C(i.val,t);var a=i.value,c=V(),g=!q(a)&&!X(a),A=u.parentNode,E=[],T=g&&!!a;if(A){g&&(a=a?Object.keys(a).map(function(e){return Ge(i,a[e],e)}):[]);var b=0;ee(a,function(u,S){var _=S-b,P=!T&&i.key?Ge(i,u,S):u;if(!p||C(p,k(N(t),P))){var I=function(e,t,i,r){return e?o?C(e,P):t[e]:t}(n,u),R=!g&&r&&"object"==typeof u||n,O=m.indexOf(I),L=-1===O,D=!L&&R?O:_,M=h[D],w=_>=m.length,x=R&&L||!R&&!M||!h[_];x?((M=et(l,{parent:t,isLoop:!0,isAnonymous:y,tagName:s,root:e.cloneNode(y),item:P,index:_},f)).mount(),w?function(e,t){t?Ce.call(this,e):e.appendChild(this.root)}.apply(M,[c||A,v]):function(e,t,i){i?Ce.apply(this,[e,t]):F(e,this.root,t.root)}.apply(M,[A,h[_],v]),w||m.splice(_,0,P),h.splice(_,0,M),d&&le(t.tags,s,M,!0)):D!==_&&R&&((n||Z(a,m[D]))&&(function(e,t,i){i?Ke.apply(this,[e,t]):F(e,this.root,t.root)}.apply(M,[A,h[_],v]),h.splice(_,0,h.splice(D,1)[0]),m.splice(_,0,m.splice(D,1)[0])),i.pos&&(M[i.pos]=_),!d&&M.tags&&function(e){var t=this;ee(Object.keys(this.tags),function(i){He.apply(t.tags[i],[i,e])})}.call(M,_)),k(M.__,{item:P,index:_,parent:t}),E[_]=I,x||M.update(P)}else b++}),function(e,t,i){for(var r=t.length,n=e.length-i;r>n;)r--,je.apply(t[r],[t,r])}(a,h,b),m=E.slice(),A.insertBefore(c,u)}},i.unmount=function(){ee(h,function(e){e.unmount()})},i}var Ye={init:function(e,t,i,r){return this.dom=e,this.attr=i,this.rawValue=r,this.parent=t,this.hasExp=C.hasExpr(r),this},update:function(){var e=this.value,t=this.parent&&Ee(this.parent),i=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?C(this.rawValue,this.parent):this.rawValue,!W(e)&&t&&Se(t.refs,e,i),!W(this.value)&&X(this.value)?(t&&le(t.refs,this.value,i,null,this.parent.__.index),this.value!==e&&v(this.dom,this.attr,this.value)):x(this.dom,this.attr),this.dom.__ref||(this.dom.__ref=i)},unmount:function(){var e=this.tag||this.dom,t=this.parent&&Ee(this.parent);!W(this.value)&&t&&Se(t.refs,this.value,e)}};function ze(e,t,i,r){return N(Ye).init(e,t,i,r)}function $e(e){ee(e,function(e){e.unmount?e.unmount(!0):e.tagName?e.tag.unmount(!0):e.unmount&&e.unmount()})}var qe={init:function(e,t,i){x(e,"if"),k(this,{tag:t,expr:i,stub:D(),pristine:e});var r=e.parentNode;return r.insertBefore(this.stub,e),r.removeChild(e),this},update:function(){this.value=C(this.expr,this.tag),this.stub.parentNode&&(this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=Xe.apply(this.tag,[this.current,!0])):!this.value&&this.current&&(this.unmount(),this.current=null,this.expressions=[]),this.value&&Ie.call(this.tag,this.expressions))},unmount:function(){this.current&&(this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current)),$e(this.expressions||[])}};function Qe(e,t,i){return N(qe).init(e,t,i)}function Xe(e,t){var i=this,r=[];return K(e,function(n){var a,o,s=n.nodeType;if((t||n!==e)&&(3===s&&"STYLE"!==n.parentNode.tagName&&C.hasExpr(n.nodeValue)&&r.push({dom:n,expr:n.nodeValue}),1===s)){var l="VIRTUAL"===n.tagName;if(a=w(n,"each"))return l&&v(n,"loopVirtual",!0),r.push(We(n,i,a)),!1;if(a=w(n,"if"))return r.push(Qe(n,i,a)),!1;if((a=w(n,"data-is"))&&C.hasExpr(a))return r.push({isRtag:!0,expr:a,dom:n,attrs:[].slice.call(n.attributes)}),!1;if(o=ce(n),l&&(w(n,"virtualized")&&n.parentElement.removeChild(n),o||w(n,"virtualized")||w(n,"loopVirtual")||(o={tmpl:n.outerHTML})),o&&(n!==e||t)){var c=w(n,"data-is");if(!l||c)return c&&l&&oe('Virtual tags shouldn\'t be used together with the "data-is" attribute - https://github.com/riot/riot/issues/2511'),r.push(be(o,{root:n,parent:i},n.innerHTML,i)),!1;v(n,"virtualized",!0);var u=et({tmpl:n.outerHTML},{root:n,parent:i},n.innerHTML);r.push(u)}Je.apply(i,[n,n.attributes,function(e,t){t&&r.push(t)}])}}),r}function Je(e,t,i){var r=this;ee(t,function(t){if(!t)return!1;var n,a=t.name,s=Q(a);Z(o,a)&&"yield"!==e.tagName.toLowerCase()?n=ze(e,r,a,t.value):C.hasExpr(t.value)&&(n={dom:e,expr:t.value,attr:a,bool:s}),i(t,n)})}function Ze(e){var t=this.__,i=t.isAnonymous,r=t.skipAnonymous;ne(this,"isMounted",e),i&&r||(e?this.trigger("mount"):(this.trigger("unmount"),this.off("*"),this.__.wasCreated=!1))}function et(e,t,i){void 0===e&&(e={}),void 0===t&&(t={});var r,a=t.context||{},o=t.opts||{},s=t.parent,l=t.isLoop,c=!!t.isAnonymous,u=O.skipAnonymousTags&&c,d=t.item,p=t.index,h=e.tmpl,f=[],y=t.root,m=t.tagName||ue(y),g="virtual"===m,A=!g&&!h;return A||l&&c?r=y:(g||(y.innerHTML=""),r=ge(h,i,$(y))),u||_(a),e.name&&y._tag&&y._tag.unmount(!0),ne(a,"__",{impl:e,root:y,skipAnonymous:u,implAttrs:[],isAnonymous:c,instAttrs:[],innerHTML:i,tagName:m,index:p,isLoop:l,isInline:A,item:d,parent:s,listeners:[],virts:[],wasCreated:!1,tail:null,head:null}),[["isMounted",!1],["_riot_id",re()],["root",y],["opts",o,{writable:!0,enumerable:!0}],["parent",s||null],["tags",{}],["refs",{}],["update",function(e){return function(e,t,i){var r=e.__,n={},a=e.isMounted&&!r.skipAnonymous;return r.isAnonymous&&r.parent&&k(e,r.parent),k(e,t),Re.apply(e,[r.isLoop,r.parent,r.isAnonymous,n,r.instAttrs]),a&&e.isMounted&&Y(e.shouldUpdate)&&!e.shouldUpdate(t,n)||(k(e.opts,n),a&&e.trigger("update",t),Ie.call(e,i),a&&e.trigger("updated")),e}(a,e,f)}],["mixin",function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];return ee(t,function(t){var i,r,n=[],a=["init","__proto__"];t=X(t)?Ue(t):t,i=Y(t)?new t:t;var o=Object.getPrototypeOf(i);do{n=n.concat(Object.getOwnPropertyNames(r||i))}while(r=Object.getPrototypeOf(r||i));ee(n,function(t){if(!Z(a,t)){var r=P(i,t)||P(o,t),n=r&&(r.get||r.set);!e.hasOwnProperty(t)&&n?Object.defineProperty(e,t,r):e[t]=Y(i[t])?i[t].bind(e):i[t]}}),i.init&&i.init.bind(e)(e.opts)}),e}.apply(void 0,[a].concat(e))}],["mount",function(){return function(e,t,i,r){var n=e.__,a=n.root;a._tag=e,Je.apply(n.parent,[a,a.attributes,function(t,i){!n.isAnonymous&&Ye.isPrototypeOf(i)&&(i.tag=e),t.expr=i,n.instAttrs.push(t)}]),B(n.impl.attrs,function(e,t){n.implAttrs.push({name:e,value:t})}),Je.apply(e,[a,n.implAttrs,function(e,t){t?i.push(t):v(a,e.name,e.value)}]),Re.apply(e,[n.isLoop,n.parent,n.isAnonymous,r,n.instAttrs]);var o=Ue("__global_mixin");if(o&&!n.skipAnonymous)for(var s in o)o.hasOwnProperty(s)&&e.mixin(o[s]);if(n.impl.fn&&n.impl.fn.call(e,r),n.skipAnonymous||e.trigger("before-mount"),ee(Xe.apply(e,[t,n.isAnonymous]),function(e){return i.push(e)}),e.update(n.item),!n.isAnonymous&&!n.isInline)for(;t.firstChild;)a.appendChild(t.firstChild);if(ne(e,"root",a),!n.skipAnonymous&&e.parent){var l=Ee(e.parent);l.one(l.isMounted?"updated":"mount",function(){Ze.call(e,!0)})}else Ze.call(e,!0);return e.__.wasCreated=!0,e}(a,r,f,o)}],["unmount",function(e){return function(e,t,i){var r=e.__,a=r.root,o=n.indexOf(e),s=a.parentNode;if(r.skipAnonymous||e.trigger("before-unmount"),B(r.impl.attrs,function(e){te(e,"riot-")&&(e=e.slice("riot-".length)),x(a,e)}),e.__.listeners.forEach(function(e){Object.keys(e["__riot-events__"]).forEach(function(t){e.removeEventListener(t,e["__riot-events__"][t])})}),-1!==o&&n.splice(o,1),r.parent&&!r.isAnonymous){var l=Ee(r.parent);r.isVirtual?Object.keys(e.tags).forEach(function(t){return Se(l.tags,t,e.tags[t])}):Se(l.tags,r.tagName,e)}return e.__.virts&&ee(e.__.virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),$e(i),ee(r.instAttrs,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()}),t?U(a,""):s&&s.removeChild(a),r.onUnmount&&r.onUnmount(),e.isMounted||Ze.call(e,!0),Ze.call(e,!1),delete a._tag,e}(a,e,f)}]].reduce(function(e,t){var i=t[0],r=t[1],n=t[2];return ne(a,i,r,n),e},k(a,d))}function tt(e,t,i,r){var o,s=a[t],l=a[t].class,c=r||(l?N(l.prototype):{}),u=e._innerHTML=e._innerHTML||e.innerHTML,d=k({root:e,opts:i,context:c},{parent:i?i.parent:null});return s&&e&&(o=et(s,d,u)),o&&o.mount&&(o.mount(!0),Z(n,o)||n.push(o)),o}var it=O,rt={tmpl:C,brackets:S,styleManager:T,vdom:n,styleNode:T.styleNode,dom:G,check:J,misc:se,tags:Object.freeze({arrayishAdd:le,getTagName:ue,inheritParentProps:de,mountTo:tt,selectTags:ke,arrayishRemove:Se,getTag:ce,initChildTag:be,moveChildTag:He,makeReplaceVirtual:_e,getImmediateCustomParentTag:Ee,makeVirtual:Ce,moveVirtual:Ke,unmountAll:$e,createIfDirective:Qe,createRefDirective:ze})},nt=Ne,at=Oe,ot=Le,st=De,lt=Ue,ct=Be,ut=Ve,dt=_,pt=k({},Fe,{observable:_,settings:it,util:rt});e.settings=it,e.util=rt,e.Tag=nt,e.tag=at,e.tag2=ot,e.mount=st,e.mixin=lt,e.update=ct,e.unregister=ut,e.version="v3.13.2",e.observable=dt,e.default=pt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,i){var r,n;r=[t,i(0)],void 0===(n=function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(i=t)&&i.__esModule?i:{default:i},window.location.hash;var r=!!CBSNEWS.features.getFeatureValue("debug")||/development/.test(window.location.hash),n=new class{constructor(){this._broker={},t.default.observable(this._broker)}on(e,t){this._broker.on(e,t)}off(e,t){this._broker.off(e,t)}one(e,t){this._broker.one(e,t)}trigger(){var e=[].slice.call(arguments);r&&window.console&&console.log('triggered: "'+e[0]+'" with payload:\n',e[1]),setTimeout(()=>{try{this._broker.trigger.apply(this._broker,e)}catch(t){window.console&&console.error(e,t)}},0)}};e.default=n}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[t,i(1)],void 0===(n=function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.BaseFeedAdapter=void 0,t=(i=t)&&i.__esModule?i:{default:i};class r{constructor(e){if(this.constructor===r)throw new TypeError('Abstract class "BaseFeedAdapter" cannot be instantiated directly.');this.event=e.event,this.lastUpdated=null,this.pendingFeeds={},this.isLocked=!0}getNewFeed(e){e?e in this.pendingFeeds?t.default.trigger("feed:debounce",{feedUrl:e}):(this.pendingFeeds[e]=1,this.isLocked||this.fetch(e)):t.default.trigger("feed:error",{feedUrl:e,error:"attempted to call a blank feed"})}fetch(e){fetch(e,{credentials:"same-origin"}).then(i=>{if(i.ok)return i;t.default.trigger("feed:error",{feedUrl:e,error:"response is not ok",response:i})}).then(e=>this.unifyFormat(e)).then(e=>this.dispatchFeed(e)).then(t=>delete this.pendingFeeds[e]).catch(e=>window.console&&console.error("err: ",e))}unifyFormat(e){return e.json()}dispatchFeed(e){return t.default.trigger(this.event,{feed:e}),e}registerCallbacks(){t.default.on("player:player:initialUrlLoad",e=>{for(var t in this.isLocked=!1,this.pendingFeeds)this.fetch(t)})}}e.BaseFeedAdapter=r}.apply(t,r))||(e.exports=n)},function(e,t,i){var r;void 0===(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCookie=function(e){var t,i,r,n=document.cookie.split(";");for(t=0;t<n.length;t++)if(i=(i=n[t].substr(0,n[t].indexOf("="))).replace(/^\s+|\s+$/g,""),r=n[t].substr(n[t].indexOf("=")+1),i==e)return unescape(r);return null}}.apply(t,[t]))||(e.exports=r)},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){var r,n;r=[t,i(1),i(2)],void 0===(n=function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.VideoFeedAdapter=void 0,t=(r=t)&&r.__esModule?r:{default:r};e.VideoFeedAdapter=class extends i.BaseFeedAdapter{constructor(){super({event:"feed:ingested:playlist"}),this.registerCallbacks()}dispatchFeed(e){return t.default.trigger(this.event,{feed:e,path:this.path}),e}registerCallbacks(){super.registerCallbacks();var e=!(-1==document.cookie.indexOf("fly_user")),i=CBSNEWS.edition.key;CBSNEWS.user.isUserSubscribed&&(e="2"),t.default.on("feed:request:playlist",t=>{t.slug&&t.slug.indexOf("fusion")>-1||!t.type||!t.api||this.getNewFeed(t.api+"?is_logged_in="+ +e+"&edition="+i)}),t.default.on("feed:request:video",t=>{if("vod"===t.type&&(t.id||t.slug)){var r="0";t.imposter&&(r="1");var n="";t.strategy&&(n="&strategy="+t.strategy);var a="";t.startPosition&&(a="&startPosition="+t.startPosition);var o=t.type;this.getNewFeed("/video/xhr/video/"+o+"/"+(t.id||t.slug)+"/?is_logged_in="+ +e+"&is_imposter="+r+n+a+"&edition="+i)}}),t.default.on("feed:request:path",t=>{if(t.path){var i="0";t.imposter&&(i="1");var r="";t.strategy&&(r="&strategy="+t.strategy);var n="";t.startPosition&&(n="&startPosition="+t.startPosition),t.type,this.path=t.path,this.getNewFeed("/video/xhr/path"+t.path+"?is_logged_in="+ +e+"&is_imposter="+i+r+n)}})}getNewFeed(e){"amp"===CBSNEWS.device&&(e=e.replace("/video/xhr","/amp/video/xhr")),super.getNewFeed(e)}}}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[t,i(1),i(7)],void 0===(n=function(e,t,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.VideoStore=void 0,t=(r=t)&&r.__esModule?r:{default:r};var n={},a={},o=1e3,s={};function l(e){var i="video:data:changed",r={_playlist_id:e.__id,playlist:e};t.default.trigger(i,r),e.id&&t.default.trigger("".concat(i,":").concat(e.id),r),e.slug&&t.default.trigger("".concat(i,":").concat(e.slug),r)}function c(e,t){return e.type+"/"+e[t]}function u(e){var t,r=c(e,"id"),p=c(e,"slug");r in a?t=a[r]:p in a?t=a[p]:(t=++o,n[t]={__id:t,__lastUpdated:null,id:null,items:[],itemIndexById:{},meta:{dateUpdated:null,hash:null}});var h=[],f=e.meta.strategy;switch(f.method){case"replace":h=function(e,t,i){var r=n[e].items;return Array.prototype.splice.apply(r,[i.startPosition,i.deleteCount||r.length].concat(t.items)),r}(t,e,f);break;case"inject":h=function(e,t,i){var r=n[e].items;return Array.prototype.splice.apply(r,[i.startPosition,0].concat(t.items)),r}(t,e,f);break;case"append":default:h=function(e,t,i){var r=n[e].items;for(var a of t.items)a.id&&a.id in n[e].itemIndexById||r.push(a);return r}(t,e)}for(var y in e)e[y]&&(n[t][y]=e[y]);n[t].id&&(a[c(n[t],"id")]=t),n[t].slug&&(a[c(n[t],"slug")]=t);for(var v=0,m={},g=0;g<h.length;g++){var A=h[g];"live"!==A.type||s[A.mpxRefId]||(s[A.mpxRefId]=new i.FusionFeedAdapter(A)),"vod"!==A.type&&"dvr"!==A.type&&"live"!==A.type||(A.playlist=n[t]),"playlist"!==A.type&&"listing"!==A.type&&"channel"!==A.type||(u(A),h[g]=d(A.id,A.slug,A.type)||A),A.id&&(m[A.id]=g),A.imposter?v--:v++}n[t].emptyPlaylist=!1,v<1&&(n[t].emptyPlaylist=!0),n[t].items=h,n[t].itemIndexById=m,n[t].__lastUpdated=Date.now(),l(n[t])}function d(e,t,i){var r;if(e?r=a[i+"/"+e]:t&&i&&(r=a[i+"/"+t]),r&&n[r])return n[r]}e.VideoStore=class{constructor(){this.registerCallbacks()}getVideoInPlaylist(e,t){var i=this.getPlaylistByIdOrSlug(t);for(var r in i.items){var n=i.items[r];if(n.id==e)return n}return null}registerCallbacks(){t.default.on("feed:ingested:playlist",e=>u(e.feed)),t.default.on("feed:ingested:video",e=>(function(e){if(e.playlist){var t=d(e.playlist.id,e.playlist.slug,e.playlist.type)||e.playlist;t.items.shift(e),u(t)}})(e.feed)),t.default.on("register:component",e=>{var i=d(e.id,e.slug,e.type);i&&l(i),i&&i.meta.itemCount===i.meta.totalCount||t.default.trigger("feed:request:playlist",e)})}}}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[t,i(1),i(2),i(3)],void 0===(n=function(e,t,i,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.FusionFeedAdapter=void 0,t=(n=t)&&n.__esModule?n:{default:n};e.FusionFeedAdapter=class extends i.BaseFeedAdapter{constructor(e){super({event:"feed:ingested:playlist"}),e.fusionRundown&&(this.liveItem={canonicalTitle:e.canonicalTitle,fulltitle:e.fulltitle,title:e.title,url:e.url,originEdition:e.originEdition},this.fusionRundown=e.fusionRundown,this.playlist={items:[]},this.liveSource=e.video,this.liveSourceNoAds=e.video2,this.liveSlug=e.slug.replace(/^live-/,""),this.daiAssetId=e.daiAssetId,this.fw=e.ad.fw,this.topic=e.topic,this.tracking=e.tracking,this.isLocked=!1,this.isFreewheelEnabled=CBSNEWS.features.isFeatureEnabled("freewheel"),this.registerCallbacks())}unifyFormat(e){return super.unifyFormat(e).then(e=>this.convertFeed(e))}convertFeed(e){for(var t=Object.values(e.navigation.rundown.counts).reduce((e,t)=>e+t),i={id:"fusion-"+this.liveSlug,slug:this.liveSlug,type:"channel",title:this.liveItem.fulltitle,items:[],url:this.liveItem.url,meta:{fusionRundown:this.fusionRundown,dateUpdated:e.navigation.dateUpdated.date,limit:null,itemCount:t,totalCount:t,loadMore:!1,custom:null,image:null,strategy:{method:"replace",startPosition:0,deleteCount:this.playlist.items.length}}},r=0;r<t;r++){var n=e.navigation.data[r];if(n){if("dvr"==n.type||"live"==n.type){var a;if(a=this.isFreewheelEnabled?{fw:"live"===n.type?{dai_with_fw:this.fw.dai_with_fw,params:this.fw.params}:{fw_link:this.fw.dvr_fw_link}}:{},"CBSN-NY"==n.edition)var o="New York";else"CBSN-PHI"==n.edition?o="Philly":"CBSN-LA"==n.edition?o="Los Angeles":"CBSN-DAL"==n.edition?o="DFW":"CBSN-SAC"==n.edition?o="Sacramento":"CBSN-MIA"==n.edition?o="Miami":"CBSN-MIN"==n.edition?o="Minnesota":"CBSN-SF"==n.edition?o="Bay Area":"CBSN-CHI"==n.edition?o="Chicago":"CBSN-BAL"==n.edition?o="Baltimore":"CBSN-PIT"==n.edition?o="Pittsburgh":"CBSN-DEN"==n.edition?o="Colorado":"CBSN-BOS"==n.edition?o="Boston":"CBSN-DET"==n.edition&&(o="Detroit");if("mixible"==n.channelSlug||"live-cbs-sports-hq"==n.channelSlug)var s=this.liveItem.canonicalTitle;else s=o?"CBS News "+o+": Local News, Weather & More":"CBS News latest headlines";i.items.push({id:n.id,mpxRefId:n.mpxRefId,originEdition:this.liveItem.originEdition,slug:n.dvr_slug,title:"live"===n.type?s:n.headlineshort,fulltitle:n.headline,canonicalTitle:"live"===n.type?this.liveItem.canonicalTitle+" Live Video":n.headlineshort,label:n.slug_label,type:n.type,duration:"live"===n.type?-1:n.duration,timestamp:n.startDate,durationLabel:n.segmentDur,url:window.location.origin+n.path,images:{sd:n.images.thumbnail_url_hd,hd:n.images.thumbnail_url_hd},video:"live"===n.type?this.liveSource:n.videoUrl.base,video2:"live"===n.type?this.liveSourceNoAds:n.videoUrl.base,daiAssetId:"live"===n.type?this.daiAssetId:null,playlist:i,previewUrl:"live"===n.type?this.liveSourceNoAds:null,topic:this.topic,suppress:"adsEnabled"in n?!n.adsEnabled:null,allAccessBlock:!1,isUserSubscribed:null,sponsor:n.sponsor,fusionRundown:this.fusionRundown,tracking:this.tracking,ad:a,geo:{countries:[],blacklist:!1}})}"live"==n.type&&(i.mpxRefId=n.mpxRefId,i.video=this.liveSource,i.video2=this.liveSourceNoAds,i.hasVideo=!0)}}return i}dispatchFeed(e){var i=this.playlist.items.find(e=>"live"===e.type),r=e.items.find(e=>"live"===e.type);return i&&r&&i.id===r.id&&this.playlist.items.length===e.items.length||(super.dispatchFeed(e),r&&(t.default.trigger("video:video:changed",{video:r}),t.default.trigger("video:video:changed:type-live",{video:r}),t.default.trigger("video:video:changed:type-live:"+r.playlist.id,{video:r}))),e}registerCallbacks(){super.registerCallbacks(),t.default.on("video:data:changed:fusion-"+this.liveSlug,e=>this.playlist=e.playlist),this.getNewFeed(this.fusionRundown),setInterval(this.getNewFeed.bind(this,this.fusionRundown),6e4)}}}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[t,i(1),i(0),i(9),i(10),i(11),i(12),i(14),i(15)],void 0===(n=function(e,t,i,r,n,a,o,s,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.beforeInitialTagMount=function(){var e={initialUrlLoad:!0},i=CBSNEWS.defaultPayload,r=!(!i.meta||!i.meta.view);function n(){document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-playing");var e=new CustomEvent("video-embed-event",{detail:{type:"CLOSE",videoShelfType:r&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(e)}catch(e){}}t.default.on("player:player:ready",i=>{if(t.default.trigger("player:player:initialUrlLoad",{initialUrlLoad:e.initialUrlLoad,shouldAutoplay:CBSNEWS.shouldAutoplay}),e.initialUrlLoad){e.initialUrlLoad=!1;var r=CBSNEWS.defaultPayload.items[0],n={video:r,type:r.playlist.type,playlist:r.playlist,initialUrlLoad:!0};t.default.trigger("url:load",n)}}),t.default.on("player:video:state",e=>{if("PLAYING"===e.playbackState){document.body.classList.add("vp--overlay-hidden"),document.body.classList.add("vp--is-playing"),document.body.classList.remove("vp--is-not-playing"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing");var t=new CustomEvent("video-embed-event",{detail:{type:"PLAYING",videoShelfType:r&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(t)}catch(e){}}else document.body.classList.remove("vp--is-playing"),document.body.classList.add("vp--is-not-playing");if("LOADING"===e.playbackState){document.body.classList.add("vp--overlay-hidden"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing");var i=new CustomEvent("video-embed-event",{detail:{type:"OPEN",videoShelfType:r&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(i)}catch(e){}}"PAUSED"===e.playbackState&&(document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--is-paused"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-playing")),"STOPPED"===e.playbackState&&(document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--is-not-playing"),document.body.classList.remove("vp--is-playing"),n())}),t.default.on("player:video:block",e=>{(e.allAccessBlock||e.embedBlock||e.geoBlock)&&document.body.classList.add("vp--overlay-hidden")}),t.default.on("player:player:closed",n),t.default.on("url:click",()=>{document.body.classList.add("vp--overlay-hidden"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing")}),t.default.on("url:change",e=>t.default.trigger("url:load",e)),window.location.pathname,t.default.on("url:load",e=>{var t=e.video.slug;document.body.setAttribute("data-slug",t)}),CBSNEWS.defaultPayload&&t.default.trigger("feed:ingested:playlist",{feed:CBSNEWS.defaultPayload,isDefaultPayload:!0}),CBSNEWS.defaultLayout&&t.default.trigger("feed:ingested:layout",{feed:CBSNEWS.defaultLayout})},t=c(t),i=c(i),window.riot=i.default,window.istablet=window.matchMedia("(min-width: 36em)").matches&&window.istouch;try{document.createEvent("TouchEvent"),window.istouch=!0,document.body.classList.add("touch")}catch(e){window.istouch=!1,document.body.classList.add("no-touch")}CBSNEWS.dispatch=t.default}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[i(1)],void 0===(n=function(e){"use strict";var t;function i(e){this._player=e}e=(t=e)&&t.__esModule?t:{default:t},i._viewStartTime=Date.now(),i._contentTypes={AD:"ad",CONTENT:"ct"},i._adPositions={PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"},i._videoStates={UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"},i.prototype.isReady=function(){return!!this._getVideoData("cmsRefGuid")},i.prototype.getTitle=function(){return this._getVideoData("videoTitle")},i.prototype.getVideoPath=function(){return this._getVideoData("cmsRefGuid")},i.prototype.getContentType=function(){return this._getPlaybackState("isAd")?i._contentTypes.AD:i._contentTypes.CONTENT},i.prototype.getAdPosition=function(){return i._adPositions.PREROLL},i.prototype.getTotalDuration=function(){var e=this._getPlaybackState("duration");return-1==e&&(e=300),1e3*e},i.prototype.getState=function(){var e=this._getPlaybackState("playbackState");return 0===e?i._videoStates.STOPPED:1===e?i._videoStates.PLAYED:2===e?i._videoStates.COMPLETED:void 0},i.prototype.getCurrentPlayTime=function(){return 1e3*this._getPlaybackState("currentTime")},i.prototype.getBitrate=function(){var e=this._getPlaybackState("facadeState");return this._getPlaybackState("isAd")?0:e.currentBitrate/1e3},i.prototype.getThumbnailPath=function(){return this._getVideoData("audioPreviewImageUrl")},i.prototype.getPlayerType=function(){return"UVPJS"},i.prototype.getViewStartTime=function(){return Date.now()-i._viewStartTime},i.prototype.getViewPlayTime=function(){return 1e3*this._getPlaybackState("absoluteStreamTime")},i.prototype.getViewAdPlayTime=function(){},i.verify=function(e){return"function"==typeof e.loadAndPlayResource},i.prototype._getPlaybackState=function(e){return this._player.getCurrentPlaybackState()[e]},i.prototype._getVideoData=function(e){return this._player.getContentVideoData()[e]},i.setPlayer=function(e){window._cbv.push(e)},window._cbv=window._cbv||[],window._cbv_strategies=window._cbv_strategies||[],window._cbv_strategies.push(i),window.UvpjsChartbeatAnalytics=i,e.default.on("player:player:ready",e=>{i.setPlayer(e.videoPlayer)}),e.default.on("url:load",e=>{i._viewStartTime=Date.now()})}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[i(1)],void 0===(n=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t};var i,r,n=window.Intercom.getInstance();e.default.on("player:ad:start",e=>{r=e.video,n.emit("vpjs-newvideoadstart",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId})}),e.default.on("player:content:start",e=>{r=e.video,n.emit("vpjs-newvideoplayback",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId})}),e.default.on("player:video:state",e=>{"PLAYING"===e.playbackState&&e.playbackState!==i&&n.emit("vpjs-newvideoplayback",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId}),i=e.playbackState}),n.on("vpjs-newvideoplayback",t=>{t.containerId&&t.containerId!==CBSNEWS.uvpContainerId&&e.default.trigger("player:video:pause",{video:r})}),n.on("vpjs-viewabilityclosed",function(t){t.containerId==CBSNEWS.uvpContainerId&&e.default.trigger("player:video:pause",{video:r})})}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[i(1),i(0)],void 0===(n=function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}e=i(e),(t=i(t)).default.util.tmpl.errorHandler=function(t){e.default.trigger("riot:tag:error",{tagName:t.riotData.tagName,message:t.message})},t.default.mixin({init:function(t){this.dispatch=e.default,this.opts.dataIs?this.opts.dataIs:this.root.nodeName.toLowerCase()}}),t.default.mixin("formatter",{init:function(e){},getRelativeTime:function(e){if(!e)return"";var t=new Date(e),i=new Date,r=Math.floor((i-t)/1e3);return r<=60?"just now":r<=3600?Math.round(r/60)+"m ago":r<=86400?Math.round(r/3600)+"h ago":this.formatDate(e)},formatDate:function(e){var t=(e=new Date(e)).getMonth(),i=e.getDate(),r=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][t]+" "+i+", "+r}})}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[i(1),i(13)],void 0===(n=function(e,t){"use strict";var i;e=(i=e)&&i.__esModule?i:{default:i};var r=window.location.pathname;e.default.on("url:load",e=>{var t=e.video,i=Object.assign({},CBSNEWS.tracking),n=t.type;window.hashParams&&window.hashParams.tracking||r!==window.location.pathname&&(r=window.location.pathname,window.isembed&&(i.mediaEmbed=!0),"playlist"===t.playlist.type&&(i.collectionId=t.playlist.id,i.collectionName=t.playlist.title),"live"===n||"dvr"===n?(i.articleId="",i.articleTitle="",i.mediaId="",i.mediaTitle="",i.mediaType="",i.pageName="/cbsn",i.pageType="live_streaming_player",i.siteSection=t.topic.slug):(i.articleId=t.id,i.articleTitle=t.fulltitle.toLowerCase(),i.mediaId=t.id,i.mediaTitle=t.fulltitle.toLowerCase(),i.mediaType="content_video",i.pageName=window.location.pathname,i.pageType="video",i.siteSection=t.topic.slug.replace(/-/gi," ")),i.hasVideo=!0,i.pageViewGuid=uuid.v4(),i.pageUrl=window.location.href,i.topicId=t.topic.id,i.topicName=t.topic.hierarchy,i.siteHier=t.topic.hierarchy,i.siteOrigin=t.originEdition,i.videoTitle=t.fulltitle,i.videoUrl=t.url,CBSNEWS.tracking.queue.push({type:"view",data:i,action:e=>{var t=new CustomEvent("tracking:view",{detail:i});window.dispatchEvent(t)}}))})}.apply(t,r))||(e.exports=n)},function(e,t,i){var r;void 0===(r=function(){"use strict";window.uuid||(window.uuid={}),void 0===window.uuid.v4&&(window.uuid.v4=function(){var e,t,i="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(i+="-"),i+=(12==e?4:16==e?3&t|8:t).toString(16);return i})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r,n;r=[i(1)],void 0===(n=function(e){"use strict";var t,i;e=(t=e)&&t.__esModule?t:{default:t};var r={};e.default.on("player:resource:start",t=>{i||e.default.trigger("register:component",{api:"/video/xhr/collection/component/live-channels/",slug:"live-channels",type:"component"})}),e.default.on("player:resource:end",t=>{if(!window.isembed&&!t.userInitiated&&"live"!=t.video.type){for(var n,a=t.video,o=a.playlist,s=o.itemIndexById[a.id]+1;s<o.items.length;){var l=o.items[s];if(["vod","live","dvr"].indexOf(l.type)>-1){n=l;break}s++}var c={userInitiated:!1};n?c.video=n:a.fusionRundown in r?c.video=r[a.fusionRundown]:c.video=i||CBSNEWS.defaultPayload.items[0],e.default.trigger("url:change",c)}}),e.default.on("video:video:changed:type-live",e=>{r[e.video.fusionRundown]=e.video;var t=CBSNEWS.edition.isDefault?"cbsnews":CBSNEWS.edition.market;e.video.playlist.id==="fusion-"+t&&(i=e.video)})}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[i(1)],void 0===(n=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t};var i,r={adHref:null,adSlug:null,pathClicked:null,slugClicked:null};function n(t){e.default.trigger("url:before-click",t);var n=t.target;if("A"!=!t.target.nodeName&&(n=t.target.closest("a")||t.target.firstChild),n&&"A"==n.nodeName&&(!window.isembed||n.hasAttribute("data-stay-inside-embed"))&&/(cbsnews\.com)/i.test(n.host)&&(n.payload||n.hasAttribute("data-payload")||n.matches('a[href*="/live/"], a[href*="/video/"]')&&!n.matches('a[href^="#"]'))){e.default.trigger("url:click",t);var a=n.payload;if(!a&&n.hasAttribute("data-payload")&&(a=JSON.parse(n.getAttribute("data-payload"))),a)if("custom"==a.type);else if("playlist"==a.type||"listing"==a.type||"channel"==a.type){t.preventDefault();var o=a.items[0];a.id.indexOf("fusion")>-1&&(o=a.items[a.items.length-1]),e.default.trigger("feed:ingested:playlist",{feed:a}),e.default.trigger("url:change",{type:a.type,playlist:a,video:o,userInitiated:!0})}else t.preventDefault(),e.default.trigger("url:change",{type:a.type,playlist:a.playlist,video:a,userInitiated:!0});else{t.preventDefault();var s=n.pathname;"/pcs/click"==s&&(s="/video/"+n.href.split(".com/video/")[1]),r.pathClicked=s,e.default.trigger("feed:request:path",{path:s,targetPathname:n.pathname}),i=setTimeout(function(){clearTimeout(i),window.location.href=n.href},1e3)}}}document.body.addEventListener("click",n,!0),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.addEventListener("click",n,!0),e.default.on("feed:ingested:playlist",t=>{if(t.feed&&"top-stories"==t.feed.slug){if(r.pathClicked&&r.pathClicked==t.path){clearTimeout(i);var n=t.feed.items[0];t={type:n.type,playlist:n.playlist,video:n,userInitiated:!0},e.default.trigger("url:change",t),r.slugClicked=null}if(r.adSlug==t.feed.items[0].slug){var a=t.feed.items[0];r.adHref.payload={type:a.type,playlist:a.playlist,video:a,userInitiated:!0,isInjectedAd:!0},r.adSlug=null}}}),window.addEventListener("ads:slotRenderEnded",t=>{var i=t.detail.adUnit.code,n=document.getElementById(i).querySelector("a");if(n){var a=function(e){if(e.indexOf("cbsnews.com")>-1){var t,i=/\/(live)\/([A-Za-z0-9\-]*)?/;return null!=(t=e.match(i))?[t[1],t[2]||""]:(i=/\/video\/([A-Za-z0-9\-]*)/,["vod",(t=e.match(i))[1]])}return!1}(n.href);r.adHref=n,r.adSlug=a[1];var o=3;CBSNEWS.defaultPayload.items[0].isImposter&&o++,e.default.trigger("feed:request:video",{type:a[0],slug:a[1],imposter:!0,strategy:"inject",startPosition:o})}})}.apply(t,r))||(e.exports=n)},function(e,t,i){var r,n;r=[i(17),i(19),i(3)],void 0===(n=function(e,t,r){"use strict";i(0).tag2("aviajs",'<div id="{containerId}" ref="container"></div><div if="{geoBlock}" class="player-overlay__container is-visible" ref="geoBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--geo-block"><svg viewbox="0 0 33 34" class="player-overlay__icon player-overlay__icon--eye" aria-hidden="true"><use xlink:href="#icon-eye"></use></svg><p class="player-overlay__message">Sorry, this content is not available in your region.</p><a class="player-overlay__button" href="/video/">More CBS News Videos</a></div></div><div if="{allAccessBlock}" class="player-overlay__container is-visible" ref="allAccessBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--all-access-block"><img class="player-overlay__icon player-overlay__icon--all-access" src="/bundles/cbsnewscore/images/video-player/pp-stacked1x.png" srcset="/bundles/cbsnewscore/images/video-player/pp-stacked1x.png 1x, /bundles/cbsnewscore/images/video-player/pp-stacked2x.png 2x"><p class="player-overlay__message">This video is available on Paramount+</p><a class="player-overlay__button" href="{video.cbsAllAccessRedirect}" target="_top">Watch Now</a><p class=" player-overlay__message player-overlay__message--sticky"><a href="{video.cbsAllAccessRedirect}" target="_top">Watch Now</a><a href="https://{CBSNEWS.host.secure}/user/login/?appId=1503&amp;redirectUrl={encodeURIComponent(inIframe() ? document.referrer : window.location)}" target="_blank" class="popup-link">LOG&nbsp;IN</a></p></div></div><div if="{embedBlock}" class="player-overlay__container is-visible" ref="embedBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--embed-block"><svg viewbox="0 0 33 34" class="player-overlay__icon player-overlay__icon--eye" aria-hidden="true"><use xlink:href="#icon-eye"></use></svg><p class="player-overlay__message">Sorry, you are not authorized to embed this stream.</p><a class="player-overlay__button" href="/video/" target="blank">More CBS News Videos</a></div></div><div class="player-overlay__container player-overlay--draggable"><div class="player-overlay"><svg class="player-overlay--icon-grid"><use xlink:href="#player-icon-drag"></use></svg><span class="player-overlay__title" if="{video}">{video.title}</span><button class="player-overlay__button player-overlay__button--close" data-target="" aria-label="Disable small player"><svg class="player-overlay__button--icon player-overlay__button--icon-close"><use xlink:href="#player-icon-close"></use></svg></button></div></div><div class="player-overlay--draggable-handle"></div>',"",'class="{opts.component}"',function(i){window.avia={buildInfo:e.buildInfo,getSystemInfo:e.getSystemInfo,getPlatformInfo:e.getPlatformInfo,Logger:e.Logger,PlayerEvent:e.PlayerEvent},CBSNEWS.uvpContainerId=this.containerId="vpjs-container-"+Date.now(),this.partner="cbsnews",this.types={live:e.StreamType.LIVE,dvr:e.StreamType.DVR,vod:e.StreamType.VOD},this.isPlayerReady=!1,this.playQueue=null,this.shouldAutoplay=CBSNEWS.shouldAutoplay&&CBSNEWS.features.isFeatureEnabled("autoplay"),this.video,this.userInitiated,this.geoBlock=null,this.allAccessBlock=null,this.embedBlock=null,this.controlsOverlay,this.geoBlockOverlay,this.allAccessBlockOverlay,this.npa=1,this.geo,this.cbsLocalComscoreC3={"newyork.cbslocal.com":"CBSLocalNY","losangeles.cbslocal.com":"CBSLocalLA","boston.cbslocal.com":"CBSLocalBoston","sacramento.cbslocal.com":"CBSLocalSacramentoCA","sanfrancisco.cbslocal.com":"CBSLocalSanFran","denver.cbslocal.com":"CBSLocalDenver","miami.cbslocal.com":"CBSLocalMiami","chicago.cbslocal.com":"CBSLocalChicago","baltimore.cbslocal.com":"CBSLocalBaltimore","detroit.cbslocal.com":"CBSLocalDetroit","minnesota.cbslocal.com":"CBSLocalMinnesota","philadelphia.cbslocal.com":"CBSLocalPhiladelphia","pittsburgh.cbslocal.com":"CBSLocalPittsburgh","dfw.cbslocal.com":"CBSLocalDallas","www.msn.com":"MSN"},this.comscoreC3="CBSNewsBrowser",window.isembed&&CBSNEWS.referrerHostname in this.cbsLocalComscoreC3&&(this.comscoreC3=this.cbsLocalComscoreC3[CBSNEWS.referrerHostname]),this.on("mount",()=>{this.geo=JSON.parse((0,r.getCookie)("fly_geo")),this.dispatch.on("player:video:error",this.handleVideoError),this.dispatch.on("player:video:pause",this.pause),this.dispatch.on("player:video:recover",this.play),this.dispatch.on("player:livestream:stop",this.exitFullscreen),this.dispatch.on("url:load",this.play),this.adRefreshNpa(),this.initPlayer()}),this.initPlayer=function(){CBSNEWS.features.executeWithConsent(["avia"],"essential",i=>{var r={container:this.refs.container,id:this.containerId,autoplay:this.shouldAutoplay?e.Autoplay.ATTEMPT_MUTED:e.Autoplay.NONE,logLevel:CBSNEWS.features.isFeatureEnabled("debug")?e.LogLevel.DEBUG:e.LogLevel.ERROR,enableOm:CBSNEWS.features.isFeatureEnabled("avia-open-measurement"),nativePlugins:[],overrides:{dependencies:{hlsjs:requirejs.s.contexts._.config.baseUrl+"polyfills/hls.min.js"+requirejs.s.contexts._.config.urlArgs(null,"")}},playsInline:!0,plugins:[{name:"AviaUiPlugin",classRef:t.AviaUiPlugin,priority:e.PluginPriority.HIGH,options:{debug:!0}},{name:"AviaTracking",classRef:window.vtg.ts.AviaTracking,priority:e.PluginPriority.HIGH,options:{config:vtg.config}}]};this.dispatch.trigger("player:options",r),(0,e.createVideoPlayer)(r).then(t=>{for(var i in this.videoPlayer=t,CBSNEWS.videoPlayer=t,e.PlayerEvent)"CONTENT_PROGRESS"!==i&&this.videoPlayer.on(e.PlayerEvent[i],this.onPlayerState);this.videoPlayer.on(e.PlayerEvent.READY,this.onVideoPlayerReady),this.videoPlayer.on(e.PlayerEvent.AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.videoPlayer.on(e.PlayerEvent.RESOURCE_START,this.onResourceStart),this.videoPlayer.on(e.PlayerEvent.RESOURCE_END,this.onResourceEnd),this.videoPlayer.on(e.PlayerEvent.RESOURCE_ERROR,this.onResourceError),this.videoPlayer.on(e.PlayerEvent.LIVE_PRESENTATION_STOPPED,this.onResourceEnd),this.videoPlayer.on(e.PlayerEvent.LIVE_PRESENTATION_STOPPED,this.onLiveStreamStop),this.videoPlayer.on(e.PlayerEvent.AD_START,this.onAdStart),this.videoPlayer.on(e.PlayerEvent.AD_PAUSED,this.onAdPaused),this.videoPlayer.on(e.PlayerEvent.AD_COMPLETE,this.onAdComplete),this.videoPlayer.on(e.PlayerEvent.CONTENT_START,this.onContentStart),this.videoPlayer.on(e.PlayerEvent.CONTENT_PLAYING,this.onContentPlaying),this.videoPlayer.on(e.PlayerEvent.CONTENT_PAUSED,this.onContentPaused),this.videoPlayer.on(e.PlayerEvent.CONTENT_COMPLETE,this.onContentComplete),this.videoPlayer.on(e.PlayerEvent.VIDEO_START_ERROR,this.onVideoStartError),this.videoPlayer.on(e.PlayerEvent.VIDEO_PLAYBACK_ERROR,this.onVideoPlaybackError),this.videoPlayer.on(e.PlayerEvent.VIDEO_ERROR,this.onVideoError),this.videoPlayer.on(e.PlayerEvent.FATAL_ERROR,this.onVideoError),this.videoPlayer.on(e.PlayerEvent.ERROR,this.onVideoError),t.isReady&&this.onVideoPlayerReady()}).catch(e=>this.onVideoManagerError(e))})}.bind(this),this.onVideoPlayerReady=function(){this.isPlayerReady=!0,this.dispatch.trigger("player:player:ready",{videoPlayer:this.videoPlayer}),this.playQueue&&this.play(this.playQueue)}.bind(this),this.play=function(e){if(!this.isPlayerReady)return this.playQueue=e,void this.dispatch.trigger("player:player:not-ready",[e,this.isPlayerReady,e.initialUrlLoad,this.shouldAutoplay]);this.videoPlayer.resource&&this.video==e.video?this.videoPlayer.play():(this.video=e.video,this.userInitiated=e.userInitiated,this.shouldShowBlocker(this.video)||(this.videoPlayer.attachResource(this.createResource(this.video)),setTimeout(e=>this.userInitiated=!1,100)))}.bind(this),this.pause=function(){this.videoPlayer&&this.videoPlayer.pause()}.bind(this),this.exitFullscreen=function(){this.videoPlayer&&this.videoPlayer.exitFullscreen()}.bind(this),this.createResource=function(t){var i=(0,e.createResourceConfig)();return this.addVideoToRco(t,i),this.addAdToRco(t,i),this.dispatch.trigger("player:player:rco",i),i}.bind(this),this.addVideoToRco=function(e,t){t.location.mediaUrl=e.video,t.location.textTrackUrl=e.captions,t.overrides.mimeType=e.format,t.metadata={airdate:new Date(e.timestamp).toISOString(),duration:parseInt(e.duration),episodeNumber:e.episode,genre:"news",hierarchyByName:e.topic.hierarchyByName.join("/"),isDcrLive:"live"===e.type,isEpisode:null!==e.episode,isLive:"live"===e.type,mediaUrl:e.video,partner:this.partner,propertyKey:e.muxPropertyKey,seasonNumber:e.season,seriesTitle:e.topic.parentTopicName,streamType:this.types[e.type],videoId:e.mpxRefId,videoTitle:e.canonicalTitle},void 0!==CBSNEWS.tracking.secondaryTopicIds&&CBSNEWS.tracking.secondaryTopicIds.length>0&&(t.metadata.secondaryTopicIds=CBSNEWS.tracking.secondaryTopicIds.join("|")),e.tracking&&e.tracking.comscore&&(t.metadata.genre=e.tracking.comscore.ns_st_ge,t.metadata.c2=e.tracking.comscore.c2,t.metadata.c3=this.comscoreC3,t.metadata.c4=e.tracking.comscore.c4,t.metadata.c6=e.tracking.comscore.c6,t.metadata.seriesTitle=e.tracking.comscore.ns_st_pr,t.metadata.stationTitle=e.tracking.comscore.ns_st_st)}.bind(this),this.addAdToRco=function(t,i){this.shouldShowAd(t)&&(this.adRefreshNpa(),i.ad.viewabilityTracking.partner=this.partner,i.ad.viewabilityTracking.pageType=CBSNEWS.tracking.pageType,i.ad.viewabilityTracking.viewGuid=CBSNEWS.tracking.pageViewGuid,"live"!==t.type&&!0===CBSNEWS.features.adsIMAloaded?(i.ad.context=e.AdContext.IMA,i.ad.csai.adCallUrl=this.adPopulateFwPlaceholdersInUrl(t.ad.fw.fw_link,t)):t.daiAssetId&&!0===CBSNEWS.features.adsDAIloaded?(i.ad.context=e.AdContext.DAI_SDK,i.ad.ssai.assetKey=t.daiAssetId,i.ad.ssai.isLive=!0,i.ad.ssai.adParameters=this.adPopulateFwPlaceholdersInParams(t.ad.fw.params,t)):(i.ad.context=e.AdContext.DAI_SSB,i.ad.dai.isLive="live"===t.type,i.ad.dai.ssbStreamUrl=t.ad.fw.dai_with_fw?this.adPopulateFwPlaceholdersInUrl(t.ad.fw.dai_with_fw,t):t.video))}.bind(this),this.adVideoPid=function(e){return e.sponsor&&e.sponsor.mpx_id?e.sponsor.mpx_id:e.mpxRefId}.bind(this),this.adPopulateFwPlaceholdersInUrl=function(e,t){var i=this.adReplaceFwPlaceholders(t);return e.replace(/{[^}]+}/gi,i)}.bind(this),this.adPopulateFwPlaceholdersInParams=function(e,t){var i=this.adReplaceFwPlaceholders(t);for(var r in e)e[r]=e[r].replace(/{[^}]+}/gi,i);var n=CBSNEWS.features.getFeatureValue("fms-params")||{};for(var a in n)e[("live"===t.type?"imafw_":"")+a]=n[a];return e}.bind(this),this.adReplaceFwPlaceholders=function(e){var t="live"===e.type?"live":"vod",i=CBSNEWS.imafw_csid[CBSNEWS.device],r=CBSNEWS.tracking.deviceOs+CBSNEWS.tracking.deviceForm||"default",n=i.partner[t]||[],a=i[r][t]||[],o={"{app_id}":encodeURIComponent(window.location.href),"{caid}":e.mpxRefId,"{device}":CBSNEWS.device,"{fms_params}":new URLSearchParams(CBSNEWS.features.getFeatureValue("fms-params")).toString(),"{is_lat}":null!==this.npa?this.npa:0,"{player_size}":encodeURIComponent("640x480"),"{ptype}":CBSNEWS.tracking.pageType,"{random_correlator}":"[RANDOM]","{random_scor}":"[RANDOM]","{topic}":CBSNEWS.tracking.allTopics.join(","),"{vcid}":"5dc7fb16c77374f0cfb4ddc60835c679","{vguid}":CBSNEWS.tracking.pageViewGuid,"{imafw_csid}":n[CBSNEWS.referrerHostname]||a[CBSNEWS.edition.key]};return e=>o[e]||""}.bind(this),this.adRefreshNpa=function(){CBSNEWS.features.isFeatureEnabled("consent")&&cbsoptanon.cmd.push(e=>cbsoptanon.ads.getNpaFlag(e=>{this.npa=e}))}.bind(this),this.adDistanceCount=3,this.adDistanceMicroseconds=48e4,this.adLastTimestamp=0,this.adRotator=0,this.shouldShowAd=function(e){var t=Date.now();"dvr"===e.type?this.adRotator=this.adRotator%this.adDistanceCount+1:this.adRotator=0;var i=!(CBSNEWS.features.isFeatureDisabled("freewheel")||"dvr"===e.type&&!0===e.suppress||"dvr"===e.type&&(null===e.sponsor||null===e.sponsor.mpx_id)&&1!==this.adRotator&&(0===this.adLastTimestamp||t-this.adLastTimestamp<this.adDistanceMicroseconds)||"vod"===e.type&&!0===e.suppress);return i&&(this.adLastTimestamp=t),this.dispatch.trigger("ad:video:"+i,{adRotator:this.adRotator,time:t-this.adLastTimestamp,type:e.type}),i}.bind(this),this.shouldShowBlocker=function(e){return this.update({geoBlock:this.shouldGeoBlock(e),allAccessBlock:!0===e.allAccessBlock,embedBlock:CBSNEWS.whitelistFailed}),this.dispatch.trigger("player:video:block",{video:e,allAccessBlock:this.allAccessBlock,embedBlock:this.embedBlock,geoBlock:this.geoBlock,geo:this.geo}),this.geoBlock||this.allAccessBlock||this.embedBlock}.bind(this),this.shouldGeoBlock=function(e){return this.geo&&e.geo.countries.length>0&&e.geo.countries.includes(this.geo.countryCode)===e.geo.blacklist}.bind(this),this.handleVideoError=function(e){console.error("handleVideoError",e)}.bind(this),this.onPlayerState=function(t){var i="player:video:state";this.video||(i="player:player:state"),this.dispatch.trigger(i,{video:this.video,aviaEventType:t.type,aviaEvent:t,rawPlaybackState:this.videoPlayer.playbackState,playbackState:t.type===e.PlayerEvent.LIVE_PRESENTATION_STOPPED?"STOPPED":Object.keys(e.PlaybackState).find(t=>e.PlaybackState[t]===this.videoPlayer.playbackState)})}.bind(this),this.onVideoManagerError=function(e){this.dispatch.trigger("player:manager:error",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAutoplayBlocked=function(e){this.dispatch.trigger("player:autoplay:blocked",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdStart=function(e){this.dispatch.trigger("player:ad:start",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdPaused=function(e){this.dispatch.trigger("player:ad:paused",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdComplete=function(e){this.dispatch.trigger("player:ad:end",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onContentStart=function(e){this.dispatch.trigger("player:content:start",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentPaused=function(e){this.dispatch.trigger("player:content:paused",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentComplete=function(e){this.dispatch.trigger("player:content:done",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onLiveStreamStop=function(e){this.dispatch.trigger("player:livestream:stop",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onResourceStart=function(e){this.dispatch.trigger("player:resource:start",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onResourceEnd=function(e){this.dispatch.trigger("player:resource:end",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onResourceError=function(e){this.dispatch.trigger("player:resource:error",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onVideoError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onVideoStartError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaError:e})}.bind(this),this.onVideoPlaybackError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaError:e})}.bind(this),this.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}}.bind(this)})}.apply(t,r))||(e.exports=n)},function(e,t,i){(function(e,i){!function(t){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function n(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var i=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var a=Object.keys(Object(n)),o=0,s=a.length;o<s;o++){var l=a[o],c=Object.getOwnPropertyDescriptor(n,l);void 0!==c&&c.enumerable&&(i[l]=n[l])}}return i}var a={exports:{}};a.exports=function(){function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,a=void 0,o=void 0,s=function(e,t){f[n]=e,f[n+1]=t,2===(n+=2)&&(o?o(y):v())},l="undefined"!=typeof window?window:void 0,c=l||{},u=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==i&&"[object process]"==={}.toString.call(i),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(y,1)}}var f=new Array(1e3);function y(){for(var e=0;e<n;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;n=0}var v=void 0;function m(e,t){var i=this,r=new this.constructor(E);void 0===r[A]&&O(r);var n=i._state;if(n){var a=arguments[n-1];s(function(){return k(n,r,a,i._result)})}else I(i,r,e,t);return r}function g(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return S(t,e),t}v=d?function(){return i.nextTick(y)}:u?function(){var e=0,t=new u(y),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}():p?function(){var e=new MessageChannel;return e.port1.onmessage=y,function(){return e.port2.postMessage(0)}}():void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(y)}:h()}catch(e){return h()}}():h();var A=Math.random().toString(36).substring(2);function E(){}var T=void 0;function b(t,i,r){i.constructor===t.constructor&&r===m&&i.constructor.resolve===g?function(e,t){1===t._state?_(e,t._result):2===t._state?P(e,t._result):I(t,void 0,function(t){return S(e,t)},function(t){return P(e,t)})}(t,i):void 0===r?_(t,i):e(r)?function(e,t,i){s(function(e){var r=!1,n=function(e,t,i,r){try{e.call(t,i,r)}catch(e){return e}}(i,t,function(i){r||(r=!0,t!==i?S(e,i):_(e,i))},function(t){r||(r=!0,P(e,t))},e._label);!r&&n&&(r=!0,P(e,n))},e)}(t,i,r):_(t,i)}function S(e,t){if(e===t)P(e,new TypeError("You cannot resolve a promise with itself"));else if(function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)){var i=void 0;try{i=t.then}catch(t){return void P(e,t)}b(e,t,i)}else _(e,t)}function C(e){e._onerror&&e._onerror(e._result),R(e)}function _(e,t){e._state===T&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(R,e))}function P(e,t){e._state===T&&(e._state=2,e._result=t,s(C,e))}function I(e,t,i,r){var n=e._subscribers,a=n.length;e._onerror=null,n[a]=t,n[a+1]=i,n[a+2]=r,0===a&&e._state&&s(R,e)}function R(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var r=void 0,n=void 0,a=e._result,o=0;o<t.length;o+=3)r=t[o],n=t[o+i],r?k(i,r,n,a):n(a);e._subscribers.length=0}}function k(t,i,r,n){var a=e(r),o=void 0,s=void 0,l=!0;if(a){try{o=r(n)}catch(t){l=!1,s=t}if(i===o)return void P(i,new TypeError("A promises callback cannot return that same promise."))}else o=n;i._state!==T||(a&&l?S(i,o):!1===l?P(i,s):1===t?_(i,o):2===t&&P(i,o))}var N=0;function O(e){e[A]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}var L=function(){function e(e,i){this._instanceConstructor=e,this.promise=new e(E),this.promise[A]||O(this.promise),t(i)?(this.length=i.length,this._remaining=i.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(i),0===this._remaining&&_(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,r=i.resolve;if(r===g){var n=void 0,a=void 0,o=!1;try{n=e.then}catch(e){o=!0,a=e}if(n===m&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof n)this._remaining--,this._result[t]=e;else if(i===D){var s=new i(E);o?P(s,a):b(s,e,n),this._willSettleAt(s,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,i){var r=this.promise;r._state===T&&(this._remaining--,2===e?P(r,i):this._result[t]=i),0===this._remaining&&_(r,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;I(e,void 0,function(e){return i._settledAt(1,t,e)},function(e){return i._settledAt(2,t,e)})},e}(),D=function(){function t(e){this[A]=N++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){S(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var i=this,r=i.constructor;return e(t)?i.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):i.then(t,t)},t}();return D.prototype.then=m,D.all=function(e){return new L(this,e).promise},D.race=function(e){var i=this;return t(e)?new i(function(t,r){for(var n=e.length,a=0;a<n;a++)i.resolve(e[a]).then(t,r)}):new i(function(e,t){return t(new TypeError("You must pass an array to race."))})},D.resolve=g,D.reject=function(e){var t=new this(E);return P(t,e),t},D._setScheduler=function(e){o=e},D._setAsap=function(e){s=e},D._asap=s,D.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=D},D.Promise=D,D}(),a.exports.polyfill();var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var l,c=function(){return(c=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function u(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}function d(e,t,i,r){return new(i||(i=Promise))(function(n,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function p(e,t){var i,r,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function h(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}t.LogLevel=void 0,(l=t.LogLevel||(t.LogLevel={})).OFF="off",l.ERROR="error",l.WARN="warn",l.INFO="info",l.DEBUG="debug";var f,y=function(){function e(){}return Object.defineProperty(e.prototype,"className",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),e}(),v=function(e,t,i){this.timeStamp=Date.now(),this.data=i,this.target=t,this.type=e},m=function(e,t){this.value=e,this.next=t},g=function(){function e(){this.head=null,this.tail=null}return Object.defineProperty(e.prototype,"empty",{get:function(){return null==this.head},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){for(var t=this.head;t;)e(t.value),t=t.next},e.prototype.add=function(e){var t=new m(e);null==this.head?this.head=t:null==this.tail?this.head.next=this.tail=t:this.tail.next=this.tail=t},e.prototype.has=function(e){for(var t=this.head;t;){if(t.value==e)return!0;t=t.next}return!1},e.prototype.delete=function(e){for(var t=null,i=this.head;i;){if(i.value==e)return t&&(t.next=i.next),i==this.head?this.head=i.next:i==this.tail&&(this.tail=t),!0;t=i,i=i.next}return!1},e.prototype.clear=function(){for(var e,t=this.head;t;)e=t.next,t.value=t.next=null,t=e;this.head=this.tail=null},e}();t.MimeType=void 0,(f=t.MimeType||(t.MimeType={})).MP4_VIDEO="video/mp4",f.MP4_AUDIO="audio/mp4",f.HLS="application/vnd.apple.mpegurl",f.HLS_ALT="application/x-mpegURL",f.DASH="application/dash+xml",f.WEBM_VIDEO="video/webm",f.WEBM_AUDIO="audio/webm",f.TS_VIDEO="video/mp2t";var A,E={VTT:"text/vtt",XML:"application/ttml+xml",M3U8:t.MimeType.HLS,MPD:t.MimeType.DASH,TS:t.MimeType.TS_VIDEO,MP4:t.MimeType.MP4_VIDEO,MPV:t.MimeType.MP4_VIDEO,MPA:t.MimeType.MP4_AUDIO,WEBM:t.MimeType.WEBM_VIDEO};t.TextTrackKind=void 0,(A=t.TextTrackKind||(t.TextTrackKind={})).CAPTIONS="captions",A.SUBTITLES="subtitles",A.DESCRIPTIONS="descriptions",A.CHAPTERS="chapters",A.METADATA="metadata";var T,b,S,C=function(){function e(){}return e.camelToDash=function(t){return t.replace(e.cdr,"-").replace(e.dre,"$1-$2").toLowerCase()},e.uid8=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()},e.isEmpty=function(t){return null==t||Array.isArray(t)&&0===t.length||e.isObject(t)&&0===Object.keys(t).length||e.isString(t)&&""===t},e.isFunction=function(e){return"function"==typeof e},e.isString=function(e){return"string"==typeof e},e.isUndefined=function(e){return void 0===e},e.isNumber=function(e){return"number"==typeof e},e.isBoolean=function(e){return"boolean"==typeof e},e.isObject=function(e){return"object"==typeof e},e.includes=function(e,t){return e.indexOf(t)>-1},e.assign=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return Object.assign.apply(Object,h([e||{}],t,!1))},e.values=function(e){return Object.keys(e).reduce(function(t,i,r){return t[r]=e[i],t},[])},e.entries=function(e){return Object.keys(e).reduce(function(t,i,r){return t[r]=[i,e[i]],t},[])},e.fromEntries=function(e){return e.reduce(function(e,t){var i=t[0],r=t[1];return e[i]=r,e},{})},e.padStart=function(t,i,r){void 0===r&&(r=" "),i|=0;var n=t.length;return n>i?t:((i-=n)>r.length&&(r+=e.repeat(r,i/r.length)),r.slice(0,i)+t)},e.repeat=function(e,t){void 0===t&&(t=0),t|=0;for(var i=0,r="";i++<t;)r+=e;return r},e.merge=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=function(t,i){return null==t?i:(null==i||Object.getOwnPropertyNames(i).forEach(function(n){var a=i[n],o=t[n],s=typeof a;"undefined"!==s&&(null==o||!e.isObject(o)||Array.isArray(a)?t[n]=a:"object"===s&&(t[n]=r(o,a)))}),t)};return t.reduce(function(e,t){return r(e,t)},{})},e.secToHms=function(t,i){if(void 0===i&&(i=61),null==t||isNaN(t))return"00:00";t|=0;var r=e.zeroFill(t%60);return t=t/60|0,r=e.zeroFill(t%60)+":"+r,(t=t/60|0)>0&&(r=e.zeroFill(t)+":"+r),i>=3600&&5===r.length&&(r="00:"+r),r},e.msToHms=function(t){return e.formatTime(new Date(t),"HH:mm:ss:sss",{offset:0})},e.zeroFill=function(t,i){return void 0===i&&(i=2),e.padStart(String(t),i,"0")},e.hmsToSec=function(e,t){if(void 0===t&&(t=30),!e)return NaN;var i=e.split(":"),r=0;if(4===i.length)r=parseInt(i.pop())/t;else if(3===i.length&&(i[2]=i[2].replace(",","."),-1!==i[2].indexOf("."))){var n=i[2].split(".");(null!=n?n.length:void 0)>1&&(i[2]=n[0],r=parseInt(n[1])/1e3)}for(var a=parseInt(i.pop());i.length>0;)a+=Math.pow(60,i.length)*parseInt(i.shift());return a+r},e.formatTime=function(t,i,r){if(void 0===i&&(i="h:mm:ss A"),void 0===r&&(r={timezone:"",offset:-(new Date).getTimezoneOffset()/60}),null!=r.offset&&0!==r.offset&&(t=new Date(t.getTime()+Math.round(60*r.offset*60*1e3))),isNaN(t.getTime()))return"";var n=t.getUTCHours(),a=t.getUTCMinutes(),o=t.getUTCSeconds(),s=t.getUTCMilliseconds(),l=n%12||12,c=n<12?"am":"pm",u={hh:e.zeroFill(l),h:l,HH:e.zeroFill(n),H:n,mm:e.zeroFill(a),m:a,sss:e.zeroFill(s,3),ss:e.zeroFill(o),s:o,a:c,A:c.toUpperCase(),z:r.timezone};for(var d in u)i=i.replace(d,u[d]);return i},e.findIndex=function(t,i){if(!e.isFunction(i))throw new TypeError("predicate must be a function");for(var r=t.length>>>0,n=0;n<r;){if(i(t[n],n,t))return n;n++}return-1},e.find=function(t,i){if(!e.isFunction(i))throw new TypeError("predicate must be a function");var r=e.findIndex(t,i);return r>-1?t[r]:void 0},e.template=function(t,i,r,n){if(void 0===r&&(r="{{"),void 0===n&&(n="}}"),!t)return t;var a=new RegExp("".concat(r,"((?:(?!(").concat(r,"|").concat(n,")).)+)").concat(n),"g");return t.replace(a,function(t,r){return e.isUndefined(null==i?void 0:i[r])?t:i[r]})},e.toArray=function(e){return Array.prototype.slice.call(e)},e.forEach=function(t,i){if(t&&t.length&&e.isFunction(i))for(var r=0,n=t.length;r<n;r++)i(t[r],r,t)},e.forEachReverse=function(t,i){if(t&&t.length&&e.isFunction(i))for(var r=t.length-1;r>-1;r--)i(t[r],r,t)},e.debounce=function(e,t){var i,r=function(){clearTimeout(i),i=null},n=function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];r(),i=setTimeout.apply(void 0,h([e,t],n,!1))};return n.cancel=r,n.flush=e,n.pending=function(){return null!=i},n},e.clampValue=function(e,t,i){return Math.max(t,Math.min(i,e))},e.inRange=function(t,i,r){return e.isNumber(t)&&t>=i&&t<=r},e.mapToRange=function(e,t,i,r,n){return void 0===r&&(r=0),void 0===n&&(n=1),(e-t)*(n-r)/(i-t)+r},e.base64DecodeUint8Array=function(e){for(var t=atob(e),i=t.length,r=new Uint8Array(new ArrayBuffer(i)),n=0;n<i;n++)r[n]=t.charCodeAt(n);return r},e.base64EncodeUint8Array=function(e){var t=String.fromCharCode.apply(null,e);return btoa(t)},e.xmlToJson=function(t){var i={};if(1===t.nodeType&&t.attributes.length>0)for(var r=0,n=t.attributes.length;r<n;r++){var a=t.attributes.item(r);i[a.nodeName]=a.nodeValue}else 3===t.nodeType&&(i=t.nodeValue);if("p"===t.nodeName&&(i.text="",t.childNodes.forEach(function(e){if("metadata"!==e.nodeName){var t=(new XMLSerializer).serializeToString(e);1===e.nodeType&&(i.text+="br"===e.tagName?"\n":t),3===e.nodeType&&(i.text+=t)}})),t.hasChildNodes())for(var o=0,s=t.childNodes.length;o<s;o++){var l=t.childNodes.item(o),c=l.nodeName;if(e.isUndefined(i[c]))i[c]=e.xmlToJson(l);else{if(e.isUndefined(i[c].push)){var u=i[c];i[c]=[],i[c].push(u)}i[c].push(e.xmlToJson(l))}}return i},e.getNumLines=function(e){return e&&(e.match(/\n/g)||[]).length+1},e.roundTo=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},e.makeUrl=function(e,t){return(e?"https:":"http:")+"//"+t},e.parseLanguageTag=function(e){void 0===e&&(e="");var t=e.match(/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/)||[];return{tag:e,language:t[1]||"",extended:t[2]||"",script:t[3]||"",region:t[4]||"",toString:function(){return this.tag}}},e.getFileExtension=function(e){return e.replace(/\?.*/,"").replace(/#.*/,"").split(".").pop()},e.getMimeType=function(t){if(!t)return"";var i=e.getFileExtension(t).toUpperCase();return E[i]},e.clearCue=function(e,t){try{var i=VTTCue||TextTrackCue;e.addCue(new i(t-.1,t+.1," "))}catch(e){}},e.eventsToPromise=function(e,t,i){return void 0===i&&(i=NaN),new Promise(function(r,n){var a,o=[],s=function(){return o.forEach(function(e){return e()})},l=function(e){return function(t){var i=t.target,r=t.events,n=i,l=n.on?"on":"addEventListener",c=n.off?"off":"removeEventListener",u=function(t,i){clearTimeout(a),s(),e(i||t)};r.forEach(function(e){n[l](e,u),o.push(function(){return n[c](e,u)})})}};e.forEach(l(r)),t.forEach(l(n)),i>-1&&(a=setTimeout(function(){s(),n(new Error("timeout"))},i))})},e.bufferToString=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},e.arrayToString=function(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)},e.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),r=0,n=e.length;r<n;r++)i[r]=e.charCodeAt(r);return i},e.getResourceMimeType=function(t){var i;return((null===(i=t.overrides)||void 0===i?void 0:i.mimeType)||"").split(";").shift()||e.getMimeType(t.location.mediaUrl)},e.normalizeQuality=function(e,t){return{index:t,bitrate:e.bitrate,height:e.height,width:e.width,codec:e.codec||e.codecs}},e.getIndexForBitrate=function(e,t,i){if(!e)return 0;var r=e.length-1;if(t>=e[r].bitrate)return r;for(;r--;){var n=e[r].bitrate;if(i){if(t>n)return r+1}else if(t>=n)return r}return 0},e.findDefaultTrack=function(t,i){var r=new RegExp(i,"i"),n=e.find(t,function(e){return r.test(e.language)});if(!n){var a=e.parseLanguageTag(i).language;a!=i&&(r=new RegExp(a,"i"),n=e.find(t,function(e){return r.test(e.language)}))}return n||e.find(t,function(e){return e.default})||t[0]},e.dedupeCues=function(t){var i={},r=[];return e.forEach(t.activeCues,function(e){try{if(!e)return;var n=e.text,a=e.startTime,o=e.endTime;if(!n)return;var s=i[n];if(s){if(s.startTime===a&&s.endTime===o)return void t.removeCue(e)}else i[n]=e;r.push(e)}catch(e){}}),r},e.isTextTrack=function(e){return e===t.TextTrackKind.CAPTIONS||e===t.TextTrackKind.SUBTITLES},e.dre=/([a-z\d])([A-Z])/g,e.cdr=/\W+/g,e}(),_=function(e){function t(t,i){var r=e.call(this)||this;r.target=i||r,r.opts=t||{},r.eventMap={};var n,a=r.opts;for(var o in a)C.isFunction(a[o])&&/^on[A-Z]/.test(o)&&(n=o.charAt(2).toLowerCase()+o.substring(3),r.on(n,a[o]),delete r.opts[o]);return r}return s(t,e),t.prototype.destroy=function(){var e;if(this.opts){for(e in this.opts)delete this.opts[e];this.opts=null}if(this.offAll(null),this.eventMap){for(e in this.eventMap)delete this.eventMap[e];this.eventMap=null}},t.prototype.on=function(e,t){if(this.eventMap&&e&&C.isFunction(t)){var i=this.eventMap[e]||(this.eventMap[e]=new g);i.has(t)||i.add(t)}},t.prototype.once=function(e,t){var i=this;if(this.eventMap&&e&&C.isFunction(t)){var r=function(n){i.off(e,r),t(n)};this.on(e,r)}},t.prototype.off=function(e,t){!t&&this.offAll(e),t&&this.remove(e,t)},t.prototype.offAll=function(e){if(this.eventMap){var t,i=this.eventMap;if(e)this.remove(e,null);else for(t in i)this.remove(t,null)}},t.prototype.hasListenerFor=function(e){return!(!this.eventMap||!this.eventMap[e]||this.eventMap[e].empty)},t.prototype.emit=function(e,t){void 0===t&&(t=null);var i=new v(e,this,t);this.dispatchEvt(i)},t.prototype.dispatchEvt=function(e){this.eventMap&&this.eventMap[e.type]&&this.eventMap[e.type].forEach(function(t){return t(e)})},t.prototype.remove=function(e,t){void 0===t&&(t=null),this.eventMap&&this.eventMap[e]&&(t?this.eventMap[e].delete(t):this.eventMap[e].clear())},t}(y),P=((T={})[t.LogLevel.OFF]=0,T[t.LogLevel.ERROR]=100,T[t.LogLevel.WARN]=200,T[t.LogLevel.INFO]=300,T[t.LogLevel.DEBUG]=400,T),I=function(e){function i(i){var r=e.call(this,i)||this;return r.useConsole=!1,r.useConsole=C.isObject(console),r.id=i.id||C.uid8(),r.tzero=Date.now(),r.logLevel=C.isEmpty(r.opts.logLevel)?t.LogLevel.OFF:r.opts.logLevel,r}return s(i,e),i.error=function(e){console&&console.error(e)},i.warn=function(e){console&&console.warn(e)},i.log=function(e){console&&console.log(e)},i.deprecated=function(e){i.deprecatedCounts[e]>=i.maxDeprecatedWarnings||(i.warn(e),i.deprecatedCounts[e]=(i.deprecatedCounts[e]||0)+1)},Object.defineProperty(i.prototype,"logLevel",{get:function(){return this.pLogLevel},set:function(e){this.pLogLevel=e},enumerable:!1,configurable:!0}),i.prototype.assert=function(e,t){e||this.error('Assertion failed! - "'.concat(t||"",'"'))},i.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,a=t.length;n<a;n++)this.emit(i.LOG_EVENT,this.assembleEvent(t[n],e));this.shouldLog(e)&&(t.unshift(this.getStamp()),console.log.apply(console,t))},i.prototype.dir=function(e,t,r){var n=r||"Unnamed Object";this.emit(i.LOG_EVENT,this.assembleEvent(t,e,n)),this.shouldLog(e)&&(console.log(this.getStamp()+" Object: ".concat(n)),console.dir(t))},i.prototype.error=function(e){this.emit(i.LOG_EVENT,this.assembleEvent(e,t.LogLevel.ERROR)),this.shouldLog(t.LogLevel.ERROR)&&console.error(this.getStamp()+e)},i.prototype.warn=function(e){this.emit(i.LOG_EVENT,this.assembleEvent(e,t.LogLevel.WARN)),this.shouldLog(t.LogLevel.WARN)&&console.warn(this.getStamp()+e)},i.prototype.assembleEvent=function(e,t,i){return void 0===i&&(i=null),{item:e,id:this.id,level:t,label:i}},i.prototype.shouldLog=function(e){return this.useConsole&&P[this.pLogLevel]>=P[e]},i.prototype.getStamp=function(){return"[".concat(this.id+"]  "+C.msToHms(Date.now()-this.tzero)," > ")},i.LOG_EVENT="logEvent",i.maxDeprecatedWarnings=1,i.deprecatedCounts={},i}(_),R=function(){function e(){}return Object.defineProperty(e,"TIMEOUT",{get:function(){return 5e3},enumerable:!1,configurable:!0}),e}(),k=function(e){function t(t){var i=e.call(this,t)||this;i.retryCount=0,i.limit=0,i.retryIntervals=null;var r=i.opts.errorRecovery;return r&&!isNaN(r.retryAttempts)&&r.retryAttempts>0&&(i.limit=r.retryAttempts),r&&r.retryIntervals&&Array.isArray(r.retryIntervals)&&(i.retryIntervals=r.retryIntervals),i}return s(t,e),t.prototype.shouldRetry=function(){return this.limit&&!this.atLimit},t.prototype.incrementAttempts=function(){this.retryCount++},Object.defineProperty(t.prototype,"retryLimit",{get:function(){return this.limit},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"atLimit",{get:function(){return this.retryCount==this.limit},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retryInterval",{get:function(){return this.retryIntervals&&this.retryIntervals[this.retryCount-1]||300*this.retryCount},enumerable:!1,configurable:!0}),t}(_),N=function(e){function t(i){var r=this,n=C.assign({timeout:R.TIMEOUT},i||{});n.timeout||(n.timeout=R.TIMEOUT),(r=e.call(this,n)||this).timeoutHandles={},r.map={};var a=r.hasListenerFor(t.event.COMPLETE);if(r.opts.url&&a)r.loadScript(r.opts.url);else{if(!r.opts.urls||!a)throw new Error("Script load error: Missing url or listener. url: ".concat(r.opts.url||r.opts.urls,", hasListener: ").concat(a));r.loadScripts(r.opts.urls)}return r}return s(t,e),t.load=function(e){return new Promise(function(i,r){e.onComplete=function(e){var t=e.data;return t.error||t.timedOut?r(t):i(t)},new t(e)})},t.prototype.destroy=function(){if(this.timeoutHandles){for(var t in this.timeoutHandles)clearTimeout(this.timeoutHandles[t]);this.timeoutHandles=null,e.prototype.destroy.call(this)}},t.prototype.loadScript=function(e,i){var r=this,n=document.createElement("script"),a="https:"===window.location.protocol?e.replace("http:","https:"):e;this.map[a]={hLoad:function(){return r.hLoadOrError(a)},hError:function(){return r.hLoadOrError(a,!0,!1)},scriptEl:n};var o=this.map[a];i&&this.on(t.event.COMPLETE,i),n.async=!0,n.addEventListener("load",o.hLoad),n.addEventListener("error",o.hError),this.timeoutHandles[a]=setTimeout(function(){return r.hLoadOrError(a,!0,!0)},this.opts.timeout),document.head.appendChild(n),n.src=a},t.prototype.loadScripts=function(e,i){i&&this.on(t.event.COMPLETE,i);for(var r=0,n=e.length;r<n;r++)this.loadScript(e[r])},t.prototype.hLoadOrError=function(e,i,r){var n=this;clearTimeout(this.timeoutHandles[e]),delete this.timeoutHandles[e];var a=this.map[e];for(var o in a.scriptEl.removeEventListener("load",a.hLoad),a.scriptEl.removeEventListener("error",a.hError),a)delete a[o];delete this.map[e],i&&this.shouldRetry()?(this.incrementAttempts(),setTimeout(function(){n.loadScript(e)},this.retryInterval)):this.emit(t.event.COMPLETE,{url:e,error:i,timedOut:!0===r})},t.event={COMPLETE:"complete"},t}(k);t.Browser=void 0,(b=t.Browser||(t.Browser={})).ANDROID="Android",b.CHROME="Chrome",b.CHROME_IOS="Chrome-iOS",b.FIREFOX="Firefox",b.FIREFOX_IOS="Firefox-iOS",b.EDGE="Edge",b.MSIE="MSIE",b.SAFARI="Safari",b.OPERA="Opera",b.OPERA_MOBILE="Opera-Mobile",b.SILK="Silk",b.PLAYSTATION_4_WEBMAF="PlayStation 4 (WebMAF)",b.PLAYSTATION_5="PlayStation 5 (Media Source API)",b.UNKNOWN="Unknown",function(e){e.ARRAY_BUFFER="arraybuffer",e.TEXT="text",e.JSON="json",e.DOCUMENT="document",e.DEFAULT=""}(S||(S={}));var O={exports:{}},L=function(e,t){return function(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return e.apply(t,i)}},D=L,M=Object.prototype.toString;function w(e){return"[object Array]"===M.call(e)}function x(e){return void 0===e}function U(e){return null!==e&&"object"==typeof e}function B(e){if("[object Object]"!==M.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function V(e){return"[object Function]"===M.call(e)}function F(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),w(e))for(var i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}var H={isArray:w,isArrayBuffer:function(e){return"[object ArrayBuffer]"===M.call(e)},isBuffer:function(e){return null!==e&&!x(e)&&null!==e.constructor&&!x(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:U,isPlainObject:B,isUndefined:x,isDate:function(e){return"[object Date]"===M.call(e)},isFile:function(e){return"[object File]"===M.call(e)},isBlob:function(e){return"[object Blob]"===M.call(e)},isFunction:V,isStream:function(e){return U(e)&&V(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:F,merge:function e(){var t={};function i(i,r){B(t[r])&&B(i)?t[r]=e(t[r],i):B(i)?t[r]=e({},i):w(i)?t[r]=i.slice():t[r]=i}for(var r=0,n=arguments.length;r<n;r++)F(arguments[r],i);return t},extend:function(e,t,i){return F(t,function(t,r){e[r]=i&&"function"==typeof t?D(t,i):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},K=H;function G(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var j=function(e,t,i){if(!t)return e;var r;if(i)r=i(t);else if(K.isURLSearchParams(t))r=t.toString();else{var n=[];K.forEach(t,function(e,t){null!=e&&(K.isArray(e)?t+="[]":e=[e],K.forEach(e,function(e){K.isDate(e)?e=e.toISOString():K.isObject(e)&&(e=JSON.stringify(e)),n.push(G(t)+"="+G(e))}))}),r=n.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},W=H;function Y(){this.handlers=[]}Y.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Y.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Y.prototype.forEach=function(e){W.forEach(this.handlers,function(t){null!==t&&e(t)})};var z=Y,$=H,q=function(e){return!(!e||!e.t)},Q=H,X=function(e,t,i,r,n){return function(e,t,i,r,n){return e.config=t,i&&(e.code=i),e.request=r,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,i,r,n)},J=X,Z=H,ee=Z.isStandardBrowserEnv()?{write:function(e,t,i,r,n,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Z.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),Z.isString(r)&&o.push("path="+r),Z.isString(n)&&o.push("domain="+n),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},te=H,ie=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],re=H,ne=re.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(e){var r=e;return t&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=r(window.location.href),function(t){var i=re.isString(t)?r(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0},ae=H,oe=ee,se=j,le=ne,ce=X,ue=H,de=function(e,t){Q.forEach(e,function(i,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[r])})},pe={"Content-Type":"application/x-www-form-urlencoded"};function he(e,t){!ue.isUndefined(e)&&ue.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var fe,ye={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==i&&"[object process]"===Object.prototype.toString.call(i))&&(fe=function(e){return new Promise(function(t,i){var r=e.data,n=e.headers;ae.isFormData(r)&&delete n["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var o=e.auth.username||"",s=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.Authorization="Basic "+btoa(o+":"+s)}var l=function(e,t){return e&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),se(l,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in a?function(e){var t,i,r,n={};return e?(te.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=te.trim(e.substr(0,r)).toLowerCase(),i=te.trim(e.substr(r+1)),t){if(n[t]&&ie.indexOf(t)>=0)return;n[t]="set-cookie"===t?(n[t]?n[t]:[]).concat([i]):n[t]?n[t]+", "+i:i}}),n):n}(a.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:r,config:e,request:a};(function(e,t,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(J("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)})(t,i,n),a=null}},a.onabort=function(){a&&(i(ce("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){i(ce("Network Error",e,null,a)),a=null},a.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(ce(t,e,"ECONNABORTED",a)),a=null},ae.isStandardBrowserEnv()){var c=(e.withCredentials||le(l))&&e.xsrfCookieName?oe.read(e.xsrfCookieName):void 0;c&&(n[e.xsrfHeaderName]=c)}if("setRequestHeader"in a&&ae.forEach(n,function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete n[t]:a.setRequestHeader(t,e)}),ae.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){a&&(a.abort(),i(e),a=null)}),r||(r=null),a.send(r)})}),fe),transformRequest:[function(e,t){return de(t,"Accept"),de(t,"Content-Type"),ue.isFormData(e)||ue.isArrayBuffer(e)||ue.isBuffer(e)||ue.isStream(e)||ue.isFile(e)||ue.isBlob(e)?e:ue.isArrayBufferView(e)?e.buffer:ue.isURLSearchParams(e)?(he(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ue.isObject(e)?(he(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ue.forEach(["delete","get","head"],function(e){ye.headers[e]={}}),ue.forEach(["post","put","patch"],function(e){ye.headers[e]=ue.merge(pe)});var ve=ye,me=H,ge=function(e,t,i){return $.forEach(i,function(i){e=i(e,t)}),e},Ae=q,Ee=ve;function Te(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var be=H,Se=function(e,t){t=t||{};var i={},r=["url","method","data"],n=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function s(e,t){return be.isPlainObject(e)&&be.isPlainObject(t)?be.merge(e,t):be.isPlainObject(t)?be.merge({},t):be.isArray(t)?t.slice():t}function l(r){be.isUndefined(t[r])?be.isUndefined(e[r])||(i[r]=s(void 0,e[r])):i[r]=s(e[r],t[r])}be.forEach(r,function(e){be.isUndefined(t[e])||(i[e]=s(void 0,t[e]))}),be.forEach(n,l),be.forEach(a,function(r){be.isUndefined(t[r])?be.isUndefined(e[r])||(i[r]=s(void 0,e[r])):i[r]=s(void 0,t[r])}),be.forEach(o,function(r){r in t?i[r]=s(e[r],t[r]):r in e&&(i[r]=s(void 0,e[r]))});var c=r.concat(n).concat(a).concat(o),u=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===c.indexOf(e)});return be.forEach(u,l),i},Ce=H,_e=j,Pe=z,Ie=function(e){return Te(e),e.headers=e.headers||{},e.data=ge(e.data,e.headers,e.transformRequest),e.headers=me.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),me.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||Ee.adapter)(e).then(function(t){return Te(e),t.data=ge(t.data,t.headers,e.transformResponse),t},function(t){return Ae(t)||(Te(e),t&&t.response&&(t.response.data=ge(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},Re=Se;function ke(e){this.defaults=e,this.interceptors={request:new Pe,response:new Pe}}ke.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Re(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Ie,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)i=i.then(t.shift(),t.shift());return i},ke.prototype.getUri=function(e){return e=Re(this.defaults,e),_e(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Ce.forEach(["delete","get","head","options"],function(e){ke.prototype[e]=function(t,i){return this.request(Re(i||{},{method:e,url:t,data:(i||{}).data}))}}),Ce.forEach(["post","put","patch"],function(e){ke.prototype[e]=function(t,i,r){return this.request(Re(r||{},{method:e,url:t,data:i}))}});var Ne=ke;function Oe(e){this.message=e}Oe.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Oe.prototype.t=!0;var Le=Oe,De=Le;function Me(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var i=this;e(function(e){i.reason||(i.reason=new De(e),t(i.reason))})}Me.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Me.source=function(){var e;return{token:new Me(function(t){e=t}),cancel:e}};var we=Me,xe=H,Ue=L,Be=Ne,Ve=Se;function Fe(e){var t=new Be(e),i=Ue(Be.prototype.request,t);return xe.extend(i,Be.prototype,t),xe.extend(i,t),i}var He=Fe(ve);He.Axios=Be,He.create=function(e){return Fe(Ve(He.defaults,e))},He.Cancel=Le,He.CancelToken=we,He.isCancel=q,He.all=function(e){return Promise.all(e)},He.spread=function(e){return function(t){return e.apply(null,t)}},He.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},O.exports=He,O.exports.default=He;var Ke=O.exports,Ge=function(){function e(){}return e.create=function(e){return{url:e.url||"",method:e.method||"get",timeout:e.timeout||R.TIMEOUT,headers:e.headers||{},data:this.getBody(e.data,e.encodeList,e.sendJson),withCredentials:!0===e.withCredentials,responseType:e.responseType||S.JSON,onComplete:e.onComplete||null,errorRecovery:e.errorRecovery||null}},e.getBody=function(e,t,i){if(void 0===i&&(i=!1),!e)return null;if("string"==typeof e)return e;if(!Object.keys(e).length)return null;var r=Array.isArray(t)&&t.length;for(var n in!r&&(t=[]),e)e[n]=this.getValue(n,e[n],t);if(i)return JSON.stringify(e);var a,o="";for(var n in e)null!==(a=e[n])&&null!=a&&""!=a&&(o+="".concat(n,"=").concat(a,"&"));return o.substr(0,o.length-1)},e.getValue=function(e,t,i){return i.indexOf(e)>=0?encodeURIComponent(t):t},e}(),je=function(e){function t(t){var i=e.call(this,Ge.create(t))||this;return i.opts.url&&i.createXhr(),i}return s(t,e),t.load=function(e){return new Promise(function(i,r){var n=e;n.onComplete=function(e){var t=e.data;t.error||t.timedOut?r(t):i(t)},new t(n)})},t.prototype.createXhr=function(){var e=this;Ke(this.opts).then(function(t){var i;(null===(i=t.headers["content-type"])||void 0===i?void 0:i.indexOf("application/smil"))>=0&&(t.data=e.processSmilResponse(t.data)),204!=t.status&&null===t.data?e.emitCompleteWithError("Unable to parse response.",t.config):setTimeout(function(){e.emitComplete(t)},1)}).catch(function(i){if(e.shouldRetry())e.incrementAttempts(),setTimeout(function(){e.createXhr()},e.retryInterval);else{var r=i.response||t.statusMessages[0];e.emitCompleteWithError(r,i.config)}})},t.prototype.emitComplete=function(e){this.emit(t.event.COMPLETE,{response:e.data,contentType:e.headers["content-type"],error:!1})},t.prototype.emitCompleteWithError=function(e,i){var r=C.isString(e)?e:null,n=r?null:e;this.emit(t.event.COMPLETE,{status:n&&n.status,error:!0,url:i&&i.url||"not available",message:r||this.getMsg(n&&n.status||0,n&&n.data||null)})},t.prototype.getMsg=function(e,i){var r=t.statusMessages[""+e];return r||(r=C.isString(i)?i:"Unspecified error"),"XhrDataRequest error: "+r},t.prototype.processSmilResponse=function(e){var t=(new DOMParser).parseFromString(e,"application/xml");return t instanceof Document?t:null},t.event={COMPLETE:"complete"},t.statusMessages={0:"Request failed; blocked or timed out",500:"Server error encountered.",404:"Resource not found.",403:"Access denied."},t}(k),We=function(){function e(){}return e.encode=function(e){return C.isEmpty(e)?"":C.entries(e).map(function(e){var t=e[0],i=e[1];return t+"="+encodeURIComponent(i)}).join("&")},e.decode=function(e){var t={};return null==e||e.replace(/^[^?]*\?/,"").replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,r,n){var a;try{a=C.isUndefined(n)?n:decodeURIComponent(n)}catch(e){a=n}t[decodeURIComponent(i)]=a}),t},e.parseValue=function(e){if(C.isUndefined(e))return!0;var t=e.toLowerCase();return"true"===t||"false"===t?"true"===t:"undefined"!==e?"null"===t?null:(t=parseFloat(e),isNaN(t)?e:t):void 0},e.parse=function(t){var i=e.decode(t);for(var r in i)i[r]=e.parseValue(i[r]);return i},e.append=function(t,i){return t+(C.includes(t,"?")?"&":"?")+e.encode(i)},e}();function Ye(e){return e.query&&(e.url=We.append(e.url,e.query)),je.load(e).then(function(e){return e.response})}var ze,$e=function(){function e(){}return e.parseCaption=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i={});var r=e.trim().split("\n"),n=/([0-9:.]+)\s*-->\s*([0-9:.]+)([^\n]*)/;try{n.test(r[0])||(t=parseInt(r.shift()));var a=r[0].match(n).slice(1),o=a[2],s=C.hmsToSec(a[0]),l=C.hmsToSec(a[1]),u=r.slice(1).join("\n");return null!=o&&o.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-%]+)/g,function(e,t,r){return i[t]=r}),c({id:t,startTime:s,endTime:l,text:u},i)}catch(e){return null}},e.parse=function(e){var t=this,i=(e=e.replace(/\r/g,"")).split("\n\n"),r=/^(WEBVTT|NOTE|STYLE)/;return i.reduce(function(e,i){if(!r.test(i)&&i){var n=t.parseCaption(i,e.length);n&&e.push(n)}return e},[])},e}(),qe=function(){function e(e,t){this.url=e,this.cues=t}return e.prototype.getCueAt=function(e){return C.find(this.cues,function(t){return t.startTime<=e&&t.endTime>=e})},e.prototype.renderCueAt=function(t,i){e.renderThumbnail(this.getCueAt(t),i)},e.create=function(t){var i=document.createElement("a");i.href=t;var r=i.protocol+"//"+i.hostname,n=r+i.pathname.split("/").slice(0,-1).join("/")+"/";return Ye({url:t,responseType:S.TEXT}).then(function(i){var a=$e.parse(i);return a.forEach(function(e){var t=e.text.split("#"),i=t[0],a=t[1],o=i;/^(https?:)?\/\//.test(o)||(o=/^\//.test(o)?r+o:n+o);var s=a.split("="),l=s[0],c=s[1].split(","),u={backgroundImage:"url(".concat(o,")")},d={url:o};C.forEach(l,function(e,t){var i=c[t];switch(e){case"w":d.width=parseInt(i),u.width="".concat(i,"px");break;case"h":d.height=parseInt(i),u.height="".concat(i,"px");break;case"x":d.x=parseInt(i),u.backgroundPositionX="-".concat(i,"px");break;case"y":d.y=parseInt(i),u.backgroundPositionY="-".concat(i,"px")}}),e.style=u,e.data=d}),new e(t,a)})},e.renderThumbnail=function(e,t){(null==e?void 0:e.style)&&(null==t?void 0:t.style)&&C.assign(t.style,e.style)},e}(),Qe=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.renderThumbnail=function(e,t){qe.renderThumbnail(e,t)},i.request=function(e){return Ye(e)},i.loadScript=function(e){return N.load(e)},i.smpteToVtt=function(e,r,n){return d(this,void 0,void 0,function(){var a,o,s,l,c,u;return p(this,function(d){switch(d.label){case 0:return[4,i.request({url:e,responseType:S.DOCUMENT})];case 1:if(a=d.sent(),!(o=a.querySelectorAll("tt body div p")).length)throw new Error("No cues found in ".concat(e));return s=n.browser===t.Browser.SAFARI?"middle":"center",l=n.browser===t.Browser.SAFARI?-1:0,c=void 0!==n.global.VTTCue,u=c?n.global.VTTCue:n.global.TextTrackCue,o.forEach(function(e,t,n){if(!i.isEmpty(e.textContent)){var a=e.textContent.replace(/(.*)<span.*tts:fontStyle="italic">(.*)<\/span>(.*)/g,"$1<i>$2</i>$3").replace(/(.*)<span.*tts:fontWeight="bold">(.*)<\/span>(.*)/g,"$1<b>$2</b>$3").replace(/(.*)<span.*tts:textDecoration="under">(.*)<\/span>(.*)/g,"$1<u>$2</u>$3"),o=i.getNumLines(a);e._lineCountPrev=e._lineCountPrev||0,e._lineCountNext=e._lineCountNext||0;for(var d=t+1,p=n[d],h=e.getAttribute("begin");(null==p?void 0:p.getAttribute("begin"))===h;)p._lineCountPrev=o+e._lineCountNext,e._lineCountNext+=i.getNumLines(p.textContent),p=n[++d];var f=new u(i.hmsToSec(h),i.hmsToSec(e.getAttribute("end")),a);if(f.align=e.getAttribute("tts:textAlign"),c){var y=e.querySelector("metadata");if(y){f.snapToLines=!0;var v=parseInt(y.getAttribute("cccol")),m=parseInt(y.getAttribute("ccrow")),g=Math.round(v/35*100);f.position=g;try{f.align=g<45?"start":g>55?"end":s}catch(e){f.align="center"}f.positionAlign=g<45?"line-left":g>55?"line-right":"center",f.line=m-17+l}}try{r.addCue(f)}catch(e){}}}),[2]}})})},i}(C);!function(e){e.ImaAd="ImaAd",e.DaiAd="DaiAd",e.System="System",e.MediaCapabilities="MediaCapabilities",e.Logging="Logging",e.Tracking="Tracking",e.TrackingService="TrackingService",e.AutoplayCapabilities="AutoplayCapabilities"}(ze||(ze={}));var Xe,Je,Ze,et,tt,it=Object.freeze({env:"prod",playerVersion:"1.14.1",playerName:"Avia JS Video Player",buildTime:"12/6/2021"});t.AccessibilityAction=void 0,(Xe=t.AccessibilityAction||(t.AccessibilityAction={})).ENTER_FULLSCREEN="enterFullScreen",Xe.INCREASE_VOLUME="increaseVolume",Xe.DECREASE_VOLUME="decreaseVolume",Xe.SEEK_BACK="seekBack",Xe.SEEK_FORWARD="seekForward",Xe.TOGGLE_PLAY="togglePlay",Xe.TOGGLE_TT="toggleTextTrack",Xe.TOGGLE_MUTE="toggleMute",Xe.PLAYLIST_NEXT="playListNext",Xe.PLAYLIST_PREV="playListPrev",Xe.STOP="stop",function(e){e.DIAGNOSTIC_PLUGIN="toggleDiagnosticPlugin",e.CONFIG_TO_CLIPBOARD="configToClipboard",e.CONFIG_TO_TEST_PAGE="configToTestPage"}(Je||(Je={})),t.NativePlugin=void 0,(Ze=t.NativePlugin||(t.NativePlugin={})).REPLAY="replay",Ze.DIAGNOSTIC="diagnostic",Ze.UI="ui",Ze.GAM="gam",function(e){e.SPACE=" ",e.ENTER="Enter",e.TAB="Tab",e.CONTROL="Control",e.SHIFT="Shift",e.ESCAPE="Escape",e.META="Meta",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown"}(et||(et={})),t.PluginPriority=void 0,(tt=t.PluginPriority||(t.PluginPriority={})).LOW="low",tt.HIGH="high";var rt,nt,at,ot,st,lt,ct=function(){function e(){}return e.blankVideoUrl="https://vidtech.cbsinteractive.com/h5/blanks/uvp_blank.mp4",e.blankDataUrl="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",e.userKeyCmdDefs=[{action:Je.DIAGNOSTIC_PLUGIN,primaryKey:"d",keyCode:68,requireCtrl:!0,requireShift:!0},{action:Je.CONFIG_TO_CLIPBOARD,primaryKey:"c",keyCode:67,requireCtrl:!0,requireShift:!0},{action:Je.CONFIG_TO_TEST_PAGE,primaryKey:"t",keyCode:84,requireCtrl:!0,requireShift:!0}],e.accessibilityKeyCmdDefs=[{action:t.AccessibilityAction.ENTER_FULLSCREEN,primaryKey:"f",keyCode:70},{action:t.AccessibilityAction.INCREASE_VOLUME,primaryKey:et.ARROW_UP,keyCode:38},{action:t.AccessibilityAction.INCREASE_VOLUME,primaryKey:null,keyCode:175},{action:t.AccessibilityAction.INCREASE_VOLUME,primaryKey:null,keyCode:183},{action:t.AccessibilityAction.DECREASE_VOLUME,primaryKey:et.ARROW_DOWN,keyCode:40},{action:t.AccessibilityAction.DECREASE_VOLUME,primaryKey:null,keyCode:174},{action:t.AccessibilityAction.DECREASE_VOLUME,primaryKey:null,keyCode:182},{action:t.AccessibilityAction.SEEK_BACK,primaryKey:et.ARROW_LEFT,keyCode:37},{action:t.AccessibilityAction.SEEK_FORWARD,primaryKey:et.ARROW_RIGHT,keyCode:39},{action:t.AccessibilityAction.TOGGLE_PLAY,primaryKey:et.SPACE,keyCode:32},{action:t.AccessibilityAction.TOGGLE_PLAY,primaryKey:null,keyCode:179},{action:t.AccessibilityAction.TOGGLE_MUTE,primaryKey:"m",keyCode:77},{action:t.AccessibilityAction.TOGGLE_MUTE,primaryKey:"-",keyCode:109},{action:t.AccessibilityAction.TOGGLE_MUTE,primaryKey:null,keyCode:173},{action:t.AccessibilityAction.TOGGLE_TT,primaryKey:"c",keyCode:67},{action:t.AccessibilityAction.STOP,primaryKey:null,keyCode:178},{action:t.AccessibilityAction.PLAYLIST_NEXT,primaryKey:null,keyCode:176},{action:t.AccessibilityAction.PLAYLIST_PREV,primaryKey:null,keyCode:177}],e.nativePluginConfig=C.values(t.NativePlugin).reduce(function(e,i){return e[i]={name:i,url:"https://vidtech.cbsinteractive.com/avia-js/".concat(it.playerVersion,"/plugins/").concat(i,"/avia.").concat(i,".min.js"),factory:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=avia[i]).create.apply(e,t)},priority:t.PluginPriority.HIGH},e},{}),e.messages={ABR_UNAVAILABLE:"Single bitrate stream detected, adaptive bitrate system is unavailable",ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS:"You have reached the lowest available quality for this presentation.",ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS:"You have reached the highest available quality for this presentation at this screen size",ABR_MIN_BITRATE_RESTRICTION_UNAVAILABLE:"Min bitrate restrictions are not offered with this streaming library",AD_STALLED:"Stalled ad detected",ADAPTER_UNAVAILABLE:"Unable to play the requested resource - mediaUrl not recognized",ADAPTER_LIB_UNAVAILABLE:"Unable to play the requested resource - External library is not loading",ADAPTER_NOT_FOUND:"Unable to find an adapater for the requested resource",CAP_LEVEL_MAXBITRATE:"Max bitrate setting will be ignored since capQualityToPlayerSize is enabled",CMS_RESOURCE_UNAVAILABLE:"Resource unavailable",CMS_UNKNOWN:"CMS not supported",CONTENT_PLAYBACK_SETTING_IGNORED:"This API is only available after the CONTENT_START event has been dispatched. This setting will be ignored.",DAI_MISSING_ASSET_URL:"Unexpected condition: valid assetUrl not found in DAI stream data",DAI_SDK_UNAVAILABLE:"A DAI SDK is required for playback, but is not found",ENVIRONMENT_NOT_SUPPORTED:'Unable to locate a global "window" object or suitable alternative',FAIRPLAY_LICENSE_ERROR:"Issue with fairplay DRM and the provided license acquisition url",FAIRPLAY_APP_CERT_ERROR:"Issue creating a fairplay keysession with the provided application certificate",FAIRPLAY_NO_CONTENT_ID:"A valid content or asset id was not detected when creating fairplay drm session",FAIRPLAY_WEBKIT_ERROR:"Issue with webkit and keysession creations while using fairplay drm.",FATAL_PLAYBACK_MEDIA_ERROR:"Fatal media error, no option for recovery",FATAL_PLAYBACK_NETWORK_ERROR:"Fatal network error, no option for recovery",IMA_SDK_MISSING:"IMA SDK not found.",INVALID_PLAYLIST_INDEX:"Index provided to Playlist is out of range",INVALID_RESOURCE:"Resource configuration appears to be invalid",MANUAL_ABR_SWITCHING_UNAVAILABLE:"Native HTML5 Video does not allow manual bitrate switching",PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED:"StreamType.LIVE is detected. Redirecting to the stop method since a DVR window is not detected.",PLUGIN_LOAD_ERROR:"Unable to load plugin from url",RESOURCE_MISSING:"Resource missing",RESOURCE_NOT_SUPPORTED:"Resource is not recognized or is currently unsupported",RETRY_PLAYBACK_MEDIA_ERROR:"Media error detected",RETRY_PLAYBACK_NETWORK_ERROR:"Network error detected",UNEXPECTED_CONDITION:"An unexpected condition was encountered",UNSPECIFIED_ERROR:"Unspecified error",VIDEO_PLAYBACK_UNAVAILABLE:"Unable to locate a video element or suitable alternative",WEBKIT_KEY_ADDED_SUCCESS:"Webkit key added successfully",WEBKIT_MEDIA_KEYS_NOT_SUPPORTED:"WebKitMediaKeys are not supported for this type of media on this user agent"},e}();function ut(e,t){return void 0===t&&(t=100),new Promise(function(i,r){var n=setInterval(function(){e()&&(clearInterval(n),i())},t)})}function dt(e,t,i,r){return void 0===i&&(i="error"),void 0===r&&(r=NaN),"number"==typeof i&&(r=i),new Promise(function(n,a){var o,s=[],l=function(){return s.forEach(function(e){return e()})},c=function(t,i){var r=e.on?"on":"addEventListener",n=e.off?"off":"removeEventListener",a=function(e,i){clearTimeout(o),l(),t(i||e)};e[r](i,a),s.push(function(){return e[n](i,a)})};c(n,t),"string"==typeof i&&c(a,i),r>-1&&(o=setTimeout(function(){l(),a(new Error("timeout"))},r))})}function pt(e,t,i){return i||(i=e instanceof HTMLVideoElement?"currentTime":"contentTime"),ut(function(){return e[i]>=t})}t.QualityMode=void 0,(rt=t.QualityMode||(t.QualityMode={})).AUTO="auto",rt.MANUAL="manual",rt.UNAVAILABLE="unavailable",function(e){e.METADATA_CUEPOINT="metadataCuepoint",e.TEXT_CUEPOINT="textCuepoint",e.TEXT_TRACK_DISPLAY_MODE_CHANGE="textTrackModeChange",e.TEXT_TRACK_ADDED="textTrackAdded",e.TEXT_TRACK_CHANGE="textTrackChange",e.TEXT_TRACK_AVAILABLE="textTrackAvailable"}(nt||(nt={})),function(e){e.SUBTITLES="subtitles",e.CAPTIONS="captions",e.METADATA="metadata",e.DESCRIPTIONS="descriptions",e.CHAPTERS="chapters"}(at||(at={})),function(e){e.ABORT="abort",e.CAN_PLAY="canplay",e.CAN_PLAY_THROUGH="canplaythrough",e.DURATION_CHANGE="durationchange",e.ENDED="ended",e.ERROR="error",e.LOADED_METADATA="loadedmetadata",e.LOAD_START="loadstart",e.PAUSE="pause",e.PLAY="play",e.PLAYING="playing",e.PROGRESS="progress",e.RATE_CHANGE="ratechange",e.SEEKED="seeked",e.SEEKING="seeking",e.STALLED="stalled",e.TIME_UPDATE="timeupdate",e.WEBKIT_NEED_KEY="webkitneedkey",e.VOLUME_CHANGE="volumechange",e.AUTOPLAY_BLOCKED="autoplayblocked"}(ot||(ot={})),t.TextTrackEvent=void 0,(st=t.TextTrackEvent||(t.TextTrackEvent={})).CUE_CHANGE="cuechange",st.ADD_TRACK="addtrack",st.CHANGE="change",t.TextTrackMode=void 0,(lt=t.TextTrackMode||(t.TextTrackMode={})).SHOWING="showing",lt.HIDDEN="hidden",lt.DISABLED="disabled";var ht,ft,yt,vt,mt,gt,At,Et,Tt,bt,St,Ct,_t,Pt,It,Rt,kt,Nt,Ot,Lt,Dt,Mt,wt=function(){function e(e,t){this.url=e,this.system=t,this.isVTTCueSupported=void 0!==this.system.global.VTTCue}return e.prototype.convert=function(){var e=this;return this.loadXml(this.url).then(function(t){var i=C.xmlToJson(t).tt.body.div.p;if((null==i?void 0:i.length)>0)return e.convertToVTTCues(i);throw new Error("No cues found in ".concat(e.url))})},e.prototype.loadXml=function(e){return Ye({url:e,responseType:S.DOCUMENT})},e.prototype.convertToVTTCues=function(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i],a=n.text;if(!C.isEmpty(a)){a=(a=(a=a.replace(/(.*)<span.*tts:fontStyle="italic">(.*)<\/span>(.*)/g,"$1<i>$2</i>$3")).replace(/(.*)<span.*tts:fontWeight="bold">(.*)<\/span>(.*)/g,"$1<b>$2</b>$3")).replace(/(.*)<span.*tts:textDecoration="under">(.*)<\/span>(.*)/g,"$1<u>$2</u>$3");var o=C.getNumLines(a);n._lineCountPrev=n._lineCountPrev||0,n._lineCountNext=n._lineCountNext||0;for(var s=i+1,l=e[s];(l&&l.begin)===n.begin;)l._lineCountPrev=o+n._lineCountNext,n._lineCountNext+=C.getNumLines(l.text),l=e[++s];var c=new(this.isVTTCueSupported?this.system.global.VTTCue:this.system.global.TextTrackCue)(C.hmsToSec(n.begin),C.hmsToSec(n.end),a);this.isVTTCueSupported&&(c=this.metadataToPosition(n,c)),t.push(c)}}return t},e.prototype.metadataToPosition=function(e,t){var i=e.metadata;if(i){t.snapToLines=!0;var r=Math.round(i.cccol/35*100);t.position=r;try{t.align=r<45?"start":r>55?"end":this.getAlignString()}catch(e){t.align="center"}t.positionAlign=r<45?"line-left":r>55?"line-right":"center",t.line=i.ccrow-17+this.getLineOffset()}return t},e.prototype.getAlignString=function(){return this.system.browser===t.Browser.SAFARI?"middle":"center"},e.prototype.getLineOffset=function(){return this.system.browser===t.Browser.SAFARI?-1:0},e}(),xt=function(e){function i(i){var r=e.call(this)||this;return r.pTextTracks=null,r.currentTextTrack=null,r.currentTextTrackMode=t.TextTrackMode.DISABLED,r.allowTextTrackCueDispatch=!0,r.existingTrack=[],r.onVideoTextTrackAdded=function(e){e.track.expired=!1,r.onTextTrackAdded(e)},r.onTextTrackAdded=function(e){var i=e.track,n=i.kind==t.TextTrackKind.SUBTITLES&&!i.language&&!i.label;i.kind==t.TextTrackKind.METADATA||n||r.addTracks()},r.onTextTrackChange=function(e){r.processTracks()},r.onCueChange=function(e){var i=e.target;switch(i.kind){case at.CAPTIONS:case at.SUBTITLES:var n=C.dedupeCues(i);r.allowTextTrackCueDispatch&&i.mode===t.TextTrackMode.HIDDEN&&r.emit(nt.TEXT_CUEPOINT,{activeCues:n})}},r.system=i.system,r.config=i,r.video=i.video,r.pTextTracks=r.video.textTracks,r.currentTextTrackMode=i.textTrackSettings.mode,r.allowTextTrackCueDispatch=!i.textTrackSettings.native,r.processTracks=C.debounce(r.processTracks.bind(r),100),r.addTracks=C.debounce(r.addTracks.bind(r),25),r.addEvents(),r.logger=i.logger,r.logger.log(t.LogLevel.INFO,"TextTrackSurface created"),r}return s(i,e),i.prototype.destroy=function(){var t=this;this.removeEvents(),C.forEach(this.pTextTracks,function(e){return t.cleanupTrack(e)}),C.forEach(this.video.querySelectorAll("track"),function(e){return t.video.removeChild(e)}),e.prototype.destroy.call(this)},i.prototype.clearCue=function(){C.clearCue(this.currentTextTrack,this.video.currentTime)},i.prototype.cleanupTrack=function(e){if(this.isTextTrack(e.kind)){C.forEachReverse(e.cues,i),C.forEachReverse(e.activeCues,i),e.expired=!0,e.textTrack1=!0,e.textTrack2=!0,e.isTTML=!0,e.isEmbedded=!1;try{e.mode=t.TextTrackMode.DISABLED}catch(e){}}function i(t){try{t&&e.removeCue(t)}catch(t){}}},Object.defineProperty(i.prototype,"timeTextSrc",{set:function(e){e.indexOf(".vtt")>=0?this.createVttTextTrack(this.video,e):this.processSmpteTimedText(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackMode",{set:function(e){this.currentTextTrack?this.setTrackMode(e):this.logger.log(t.LogLevel.WARN,"No text track detected")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{get:function(){return this.currentTextTrack},set:function(e){var i=this;this.isValidTrack(e)&&e!=this.currentTextTrack&&(this.currentTextTrack&&this.currentTextTrack.mode!==t.TextTrackMode.DISABLED&&(this.currentTextTrack.mode=t.TextTrackMode.DISABLED),this.currentTextTrack=e,this.setTrackMode(this.currentTextTrackMode).then(function(){i.logger.log(t.LogLevel.INFO,"".concat(e.language," is being set as the current text track")),i.emit(nt.TEXT_TRACK_CHANGE,e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTracks",{get:function(){var e=this;return C.toArray(this.pTextTracks).filter(function(t){return e.isValidTrack(t)})},enumerable:!1,configurable:!0}),i.prototype.setTrackMode=function(e){var i=this;return new Promise(function(r,n){var a=e!=i.currentTextTrackMode,o=function(){i.currentTextTrack.mode=e,a&&setTimeout(function(){return i.emit(nt.TEXT_TRACK_DISPLAY_MODE_CHANGE,{mode:e})},0);var n=t.TextTrackMode.DISABLED;e===t.TextTrackMode.HIDDEN&&(n="enabled for event driven external custom rendering"),e===t.TextTrackMode.SHOWING&&(n="enabled for native rendering by the user agent"),i.logger.log(t.LogLevel.INFO,"The ".concat(i.currentTextTrack.kind," track for language code ").concat(i.currentTextTrack.language," is being ").concat(n," ")),r()};i.currentTextTrackMode=e,e===t.TextTrackMode.SHOWING&&i.currentTextTrack.mode===t.TextTrackMode.DISABLED?(i.currentTextTrack.mode=t.TextTrackMode.HIDDEN,setTimeout(o,10)):o()})},i.prototype.addTrack=function(e){e.addEventListener(t.TextTrackEvent.CUE_CHANGE,this.onCueChange),this.logger.log(t.LogLevel.INFO,"A ".concat(e.kind," text track was added")),this.emit(nt.TEXT_TRACK_ADDED,e)},i.prototype.addTracks=function(){var e=this;if(C.forEach(this.pTextTracks,function(i){var r=e.isExpired(i)||e.isDuplicateTrack(i);i.mode=r?t.TextTrackMode.DISABLED:t.TextTrackMode.HIDDEN,r||e.addTrack(i)}),!this.currentTextTrack){if(this.textTrack=C.findDefaultTrack(this.textTracks,this.config.textTrackSettings.language),!this.textTrack)return;this.textTrack.mode=this.config.textTrackSettings.mode,this.emit(nt.TEXT_TRACK_AVAILABLE)}this.processTracks()},i.prototype.processTracks=function(){var e=this,i=this.config.textTrackSettings,r=i.enabled,n=i.native,a=i.enabledMode,o=this.textTracks;if(C.forEach(this.pTextTracks,function(i){e.isExpired(i)&&i.mode!=t.TextTrackMode.DISABLED&&(i.mode=t.TextTrackMode.DISABLED)}),n){var s=C.find(o,function(e){return e.mode==t.TextTrackMode.SHOWING});if(r){if(s==this.currentTextTrack)return;s?this.textTrack=s:this.textTrackMode=t.TextTrackMode.DISABLED}else{if(!s)return;s!=this.currentTextTrack&&(this.textTrack=s),this.textTrackMode=t.TextTrackMode.SHOWING}}else if(r){var l=C.find(o,function(e){return e.mode==t.TextTrackMode.SHOWING});l&&(l.mode=a)}else{var c=C.find(o,function(e){return e.mode!=t.TextTrackMode.DISABLED});c&&(c.mode=t.TextTrackMode.DISABLED)}},i.prototype.addEvents=function(){this.pTextTracks.addEventListener(t.TextTrackEvent.ADD_TRACK,this.onTextTrackAdded),this.pTextTracks.addEventListener(t.TextTrackEvent.CHANGE,this.onTextTrackChange),this.video.addEventListener(t.TextTrackEvent.ADD_TRACK,this.onVideoTextTrackAdded)},i.prototype.removeEvents=function(){var e=this;this.pTextTracks.removeEventListener(t.TextTrackEvent.ADD_TRACK,this.onTextTrackAdded),this.pTextTracks.removeEventListener(t.TextTrackEvent.CHANGE,this.onTextTrackChange),this.video.removeEventListener(t.TextTrackEvent.ADD_TRACK,this.onVideoTextTrackAdded),C.forEach(this.pTextTracks,function(i){return i.removeEventListener(t.TextTrackEvent.CUE_CHANGE,e.onCueChange)})},i.prototype.isDuplicateTrack=function(e){if(C.includes(this.existingTrack,e))return!1;var t=this.existingTrack.some(function(t){return e.language==t.language&&e.label==t.label&&e.kind==t.kind});return t||this.existingTrack.push(e),t},i.prototype.isTextTrack=function(e){return e===at.CAPTIONS||e===at.SUBTITLES},i.prototype.isExpired=function(e){return e.expired},i.prototype.isValidTrack=function(e){return!!e&&!!this.isTextTrack(e.kind)&&!this.isExpired(e)},i.prototype.createVttTextTrack=function(e,i){var r=document.createElement("track");r.kind=at.CAPTIONS,r.label="English",r.srclang="en",r.id="sidecar-vtt",r.src=i,e.appendChild(r),r.track.mode=t.TextTrackMode.DISABLED},i.prototype.processSmpteTimedText=function(e){var i=this;new wt(e,this.system).convert().then(function(e){i.createSmpteTextTrack(i.video,e),i.logger.log(t.LogLevel.INFO,"Smpte XML conversion and text track creation successful")}).catch(function(e){i.logger.log(t.LogLevel.INFO,"Smpte XML conversion and text track creation error",e.message)})},i.prototype.createSmpteTextTrack=function(e,i){try{var r=e.addTextTrack(at.CAPTIONS,"English","en");C.forEach(i,function(e){return r.addCue(e)})}catch(e){this.logger.log(t.LogLevel.INFO,e)}},i}(_),Ut=function(e){function i(i,r){void 0===r&&(r=!0);var n=e.call(this)||this;return n.timeAtLastBufferCheck=NaN,n.textTrackSurface=null,n.pBuffering=!1,n.pSeeking=NaN,n.pVideoEventHandler=function(e){return n.onVideoElementEvent(e)},n.pTextTrackEventHandler=function(e){return n.onTextTrackSurfaceEvent(e)},n.pVideo=i.video,n.logger=i.logger,r&&(n.textTrackSurface=new xt(i)),n.logger.log(t.LogLevel.INFO,"Html5VideoSurface created"),n}return s(i,e),i.prototype.destroy=function(){this.removeEvents(),this.textTrackSurface&&this.textTrackSurface.destroy(),this.textTrackSurface=null,this.pVideo=null,e.prototype.destroy.call(this)},i.prototype.load=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,dt(this,ot.LOADED_METADATA)];case 1:return t.sent(),e?[4,this.seek(e)]:[2];case 2:return t.sent(),[2]}})})},i.prototype.play=function(){return d(this,void 0,void 0,function(){var e;return p(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.pVideo.play()];case 1:return i.sent(),[3,3];case 2:return e=i.sent(),this.logger.warn("Exception caught in play() Promise: "+e.message,t.LogLevel.WARN),this.emit(ot.AUTOPLAY_BLOCKED,e),[3,3];case 3:return[2]}})})},i.prototype.pause=function(){this.pVideo&&this.pVideo.pause()},i.prototype.seek=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return this.pVideo.currentTime=e,[4,dt(this,ot.SEEKED)];case 1:return t.sent(),[2]}})})},i.prototype.addEvents=function(){for(var e in ot)this.pVideo.addEventListener(ot[e],this.pVideoEventHandler);if(this.textTrackSurface)for(var e in nt)this.textTrackSurface.on(nt[e],this.pTextTrackEventHandler)},i.prototype.clearCue=function(){var e;null===(e=this.textTrackSurface)||void 0===e||e.clearCue()},Object.defineProperty(i.prototype,"video",{get:function(){return this.pVideo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"src",{set:function(e){this.pVideo&&(this.pVideo.src=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this.pVideo?this.pVideo.volume:null},set:function(e){this.pVideo&&(this.pVideo.volume=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"muted",{get:function(){return this.pVideo?this.pVideo.muted:null},set:function(e){this.pVideo&&(this.pVideo.muted=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"paused",{get:function(){return this.pVideo?this.pVideo.paused:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return this.pVideo?this.pVideo.currentTime:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this.pVideo?this.pVideo.duration:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackMode",{set:function(e){this.textTrackSurface&&(this.textTrackSurface.textTrackMode=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{get:function(){return this.textTrackSurface.textTrack},set:function(e){this.textTrackSurface&&(this.textTrackSurface.textTrack=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackSrc",{set:function(e){this.textTrackSurface&&(this.textTrackSurface.timeTextSrc=e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTracks",{get:function(){return this.textTrackSurface.textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bufferLength",{get:function(){var e=0;return this.pVideo&&this.pVideo.buffered.length>0&&(e=this.pVideo.buffered.end(this.pVideo.buffered.length-1)-this.pVideo.currentTime),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"seeking",{get:function(){return!isNaN(this.pSeeking)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffering",{get:function(){if(!this.paused&&this.pVideo){var e=this.timeAtLastBufferCheck+.001;this.timeAtLastBufferCheck=this.pVideo.currentTime;var t=this.pVideo.currentTime<e;this.pBuffering=this.pVideo.readyState>=1&&t&&!this.seeking}return this.pBuffering},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"framerate",{get:function(){var e=this.pVideo.webkitDecodedFrameCount||this.pVideo.mozPresentedFrames||Number.NaN;return isNaN(e)?e:e/this.pVideo.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metrics",{get:function(){var e={droppedVideoFrames:Number.NaN,totalVideoFrames:Number.NaN};if(!this.pVideo)return e;var t="webkitDroppedFrameCount"in this.pVideo&&"webkitDecodedFrameCount"in this.pVideo;return"getVideoPlaybackQuality"in this.pVideo?e=this.pVideo.getVideoPlaybackQuality():t&&(e={droppedVideoFrames:this.pVideo.webkitDroppedFrameCount,totalVideoFrames:this.pVideo.webkitDroppedFrameCount+this.pVideo.webkitDecodedFrameCount}),e},enumerable:!1,configurable:!0}),i.prototype.onVideoElementEvent=function(e){switch(e.type){case ot.SEEKING:if(this.seeking)return;this.pSeeking=this.pVideo.currentTime+.001;break;case ot.SEEKED:if(!this.pVideo.paused)return;this.pSeeking=NaN;break;case ot.TIME_UPDATE:this.pSeeking<=this.pVideo.currentTime&&(this.pSeeking=NaN,this.emit(ot.SEEKED,e))}this.emit(e.type,e)},i.prototype.onTextTrackSurfaceEvent=function(e){this.emit(e.type,e.data)},i.prototype.removeEvents=function(){for(var e in ot)this.pVideo.removeEventListener(ot[e],this.pVideoEventHandler);if(this.textTrackSurface)for(var e in nt)this.textTrackSurface.on(nt[e],this.pTextTrackEventHandler)},i}(_),Bt=function(){function e(i,r){var n,a=this;this.metadataTracks=[],this.id3Map=[],this.daiId3=/^google_/,this.maxId3DedupeLength=e.MAX_ID3_DEDUPE_LENGTH,this.onTextTrackAdded=function(e){var i=e.track;a.isValidTrack(i)&&(i.mode=t.TextTrackMode.HIDDEN,i.addEventListener(t.TextTrackEvent.CUE_CHANGE,a.onCueChange))},this.onCueChange=function(e){var t=e.target,i=t&&t.activeCues;i&&i.length&&C.forEach(i,function(e){return a.processId3(e)})},this.onSeeking=function(){a.clearId3()},this.onMetadataCuepoint=r,this.video=i.video,this.id3OwnerIds=["com.cbsi.live.sg"].concat(i.resource.playback.id3OwnerIds||[]);var o=null===(n=i.playerOptions.overrides)||void 0===n?void 0:n.maxId3DedupeLength;null!=o&&(this.maxId3DedupeLength=o),this.addEvents(),this.logger=i.logger,this.logger.log(t.LogLevel.INFO,"MetadataSurface created")}return e.prototype.destroy=function(){var e=this;this.onMetadataCuepoint=null,this.id3Map=null,this.removeEvents(),C.forEach(this.metadataTracks,function(t){return e.cleanupTrack(t)})},e.prototype.addEvents=function(){this.video.textTracks.addEventListener(t.TextTrackEvent.ADD_TRACK,this.onTextTrackAdded),this.video.addEventListener(ot.SEEKING,this.onSeeking)},e.prototype.removeEvents=function(){var e=this;this.video.textTracks.removeEventListener(t.TextTrackEvent.ADD_TRACK,this.onTextTrackAdded),this.video.removeEventListener(ot.SEEKING,this.onSeeking),C.forEach(this.metadataTracks,function(i){return i.removeEventListener(t.TextTrackEvent.CUE_CHANGE,e.onCueChange)})},e.prototype.clearId3=function(){this.id3Map=[]},e.prototype.cleanupTrack=function(e){function i(t){try{t&&e.removeCue(t)}catch(t){}}C.forEachReverse(e.cues,i),C.forEachReverse(e.activeCues,i),e.expired=!0,e.mode=t.TextTrackMode.DISABLED},e.prototype.processId3=function(e){if(!C.isEmpty(e.value)){var t=e.value,i=e.startTime,r=e.endTime,n=t.key,a=t.info,o=void 0===a?"":a,s=t.data,l={key:n,info:o,data:s,startTime:i,endTime:r};if("TXXX"===n&&this.daiId3.test(s)?(C.isEmpty(o)&&(l.info=s),l.id="google_dai"):l.id=C.find(this.id3OwnerIds,function(e){return"*"===e||C.includes(o,e)}),l.id){var c;try{c=s instanceof ArrayBuffer?C.bufferToString(s):s}catch(e){c=""}"PRIV"===n&&this.id3OwnerIds[0]===o&&(l.data=c),l.text=c,this.id3Map.some(function(e){return e.info===l.info&&e.startTime==l.startTime&&e.text==l.text})||(this.id3Map.length>this.maxId3DedupeLength&&this.id3Map.pop(),this.id3Map.unshift(l),this.onMetadataCuepoint(l))}}},e.prototype.isMetadataTrack=function(e){return e===at.METADATA},e.prototype.isExpired=function(e){return e.expired},e.prototype.isValidTrack=function(e){return!!e&&!!this.isMetadataTrack(e.kind)&&!this.isExpired(e)},e.MAX_ID3_DEDUPE_LENGTH=32,e}(),Vt=function(){function e(e,i,r){void 0===i&&(i={}),void 0===r&&(r=!0),this.multiCdnHeaderPresent=!0,this.liveStreamInfo={isPlayingLive:!1,liveEdgeOffset:NaN,dvrWindowSize:NaN,safeSeekingDuration:NaN,safeSeekingTime:NaN,relativeTime:NaN,relativeDuration:NaN,absoluteStart:NaN,absoluteTime:NaN,absoluteDuration:NaN},this.lastKnownTimes={absolute:NaN,relative:NaN,end:NaN},this.textTrackInfo={track:null,tracks:[]},this.qualityInfo={quality:null,qualities:[],mode:t.QualityMode.AUTO},this.audioTrackInfo={track:null,tracks:[]},this.context=e,this.options=i,this.delegate=this.context.getDelegate(),this.logger=e.logger,this.videoSurface=this.createVideoSurface(r),this.onSurfaceEvent=this.onSurfaceEvent.bind(this),this.videoSurface.addEvents()}return e.prototype.createVideoSurface=function(e){return void 0===e&&(e=!0),new Ut(this.context,e)},e.prototype.createMetadataSurface=function(){return new Bt(this.context,this.delegate.metadataCuepoint)},e.prototype.enableSurfaceEvents=function(e){var t=this,i=e?"on":"off";Qe.values(ot).forEach(function(e){return t.videoSurface[i](e,t.onSurfaceEvent)}),Qe.values(nt).forEach(function(e){return t.videoSurface[i](e,t.onSurfaceEvent)})},e.prototype.onSurfaceEvent=function(e){switch(e.type){case ot.TIME_UPDATE:this.delegate.timeUpdate();break;case ot.PLAYING:this.delegate.playing();break;case ot.PAUSE:this.delegate.paused();break;case ot.SEEKING:this.delegate.seeking();break;case ot.SEEKED:this.delegate.seeked();break;case ot.ENDED:this.delegate.ended();break;case ot.DURATION_CHANGE:this.delegate.durationChange();break;case ot.VOLUME_CHANGE:this.delegate.volumeChange(e.data.target.volume,e.data.target.muted);break;case nt.TEXT_CUEPOINT:this.delegate.textCuepoints(e.data.activeCues);break;case nt.TEXT_TRACK_DISPLAY_MODE_CHANGE:this.delegate.textTrackDisplayModeChange(e.data.mode);break;case nt.TEXT_TRACK_ADDED:this.textTrackInfo.tracks.push(e.data);break;case nt.TEXT_TRACK_AVAILABLE:this.delegate.textTrackInfoChange(this.textTrackInfo);break;case nt.TEXT_TRACK_CHANGE:var t=e.data;this.textTrackInfo.track=t,this.delegate.textTrackChange(t)}},e.prototype.getSegmentDuration=function(){return 6},e.prototype.getSeekable=function(){var e={start:0,end:0},t=this.videoSurface.video.seekable,i=t.length-1;return i>=0&&(e.start=t.start(i),e.end=t.end(i)),e},e.prototype.getErrorMessage=function(e,t,i){return void 0===i&&(i="n/a"),"".concat(e," fatal: ").concat(t," retry: ").concat(i)},e.prototype.throwError=function(e,i,r,n){void 0===n&&(n=!0),this.logger.log(t.LogLevel.ERROR,i),this.delegate.error({code:e,message:i,data:r,fatal:n})},e.prototype.getIsLiveStream=function(){return this.getDuration()==1/0},e.prototype.setAutoQualitySwitching=function(e){throw new Error("setAutoQualitySwitching Method not implemented.")},e.prototype.setQuality=function(e){throw new Error("setQuality Method not implemented.")},e.prototype.setMinBitrate=function(e){},e.prototype.setMaxBitrate=function(e){},e.prototype.setTextTrack=function(e){this.videoSurface.textTrack=e},e.prototype.setTextTrackMode=function(e){this.videoSurface.textTrackMode=e},e.prototype.setAudioTrack=function(e){throw new Error("setAudioTrack Method not implemented.")},e.prototype.getType=function(){throw new Error("getType Method not implemented.")},e.prototype.getCurrentTime=function(){return this.videoSurface.time},e.prototype.getDuration=function(){return this.videoSurface.duration},e.prototype.getBufferLength=function(){return this.videoSurface.bufferLength},e.prototype.getLiveStreamInfo=function(){var e,t=this.liveStreamInfo,i=this.videoSurface.video,r=this.getSeekable(),n=r.start,a=r.end,o=i.currentTime,s=a-n,l=this.getSegmentDuration(),c=this.context.resource.playback.liveEdgeSyncFragmentCount,u=(null===(e=this.context.resource.overrides)||void 0===e?void 0:e.safeSeekDuration)||l;t.relativeTime=Math.max(o-n,0),t.relativeDuration=s,t.absoluteDuration=Date.now(),t.dvrWindowSize=Math.floor(s),t.liveEdgeOffset=l*c+l,t.safeSeekingTime=Math.ceil(n+u),t.safeSeekingDuration=Math.floor(a-u),t.isPlayingLive=Math.ceil(o+t.liveEdgeOffset)>=t.safeSeekingDuration,a!=this.lastKnownTimes.end&&(this.lastKnownTimes.end=a,t.absoluteStart=t.absoluteDuration-1e3*s,this.lastKnownTimes.absolute=Math.round(t.absoluteStart+1e3*t.relativeTime),this.lastKnownTimes.relative=o);var d=Math.round(1e3*(o-this.lastKnownTimes.relative));return t.absoluteTime=this.lastKnownTimes.absolute+d,t},e.prototype.destroy=function(){return d(this,void 0,void 0,function(){return p(this,function(e){return this.videoSurface.destroy(),[2]})})},e.prototype.load=function(){return d(this,void 0,void 0,function(){return p(this,function(e){return this.enableSurfaceEvents(!0),[2]})})},e.prototype.play=function(){return d(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this.videoSurface.video.play()];case 1:return e.sent(),[2]}})})},e.prototype.pause=function(){this.videoSurface.pause()},e.prototype.suspend=function(){},e.prototype.resume=function(){},e.prototype.seek=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this.videoSurface.seek(e)];case 1:return t.sent(),[2]}})})},e.prototype.resize=function(){},e.prototype.clearText=function(){this.videoSurface.clearCue()},e.prototype.getMetrics=function(){return{droppedVideoFrames:NaN,framerate:NaN,bandwidth:NaN}},e.prototype.createSidecarTextTrack=function(e){return d(this,void 0,void 0,function(){var i,r,n,a;return p(this,function(o){if(i=e.indexOf(".vtt")>=0,r=this.context.video,n="English",i)(a=document.createElement("track")).kind=at.CAPTIONS,a.label=n,a.srclang="en",a.id="sidecar-vtt",a.src=e,r.appendChild(a),a.track.mode=this.context.textTrackSettings.mode;else try{a=r.addTextTrack(at.CAPTIONS,n,"en"),Qe.smpteToVtt(e,a,this.context.system),this.logger.log(t.LogLevel.INFO,"Smpte XML conversion and text track creation successful")}catch(e){this.logger.log(t.LogLevel.INFO,"Smpte XML conversion and text track creation error",e.message)}return[2]})})},e}(),Ft=function(e,t,i){this.key=e,this.value=t,this.type=i,this.timeStamp=Date.now()},Ht=Object.freeze({__proto__:null,BaseClass:y,CoreEvent:v,Emitter:_,Logger:I,Metric:Ft,request:Ye});t.ActiveState=void 0,(ht=t.ActiveState||(t.ActiveState={})).ACTIVE="active",ht.INACTIVE="inactive",ht.IDLE="idle",t.AdapterRole=void 0,(ft=t.AdapterRole||(t.AdapterRole={})).AD="ad",ft.PLAYBACK="playback",t.AdBreakType=void 0,(yt=t.AdBreakType||(t.AdBreakType={})).PRE="PRE",yt.MID="MID",yt.POST="POST",t.AdContext=void 0,(vt=t.AdContext||(t.AdContext={})).IMA="ima",vt.IMA_AD_ONLY="ima_ad_only",vt.DAI_SDK="dai_sdk",vt.DAI_API="dai_api",vt.DAI_SSB="dai_ssb",vt.NONE="",t.AdTechnology=void 0,(mt=t.AdTechnology||(t.AdTechnology={})).SSAI="ssai",mt.CSAI="csai",t.ApiMetric=void 0,(gt=t.ApiMetric||(t.ApiMetric={})).PLAY="play",gt.PAUSE="pause",gt.SEEK="seek",gt.GO_LIVE="go_live",t.Autoplay=void 0,(At=t.Autoplay||(t.Autoplay={})).NONE="none",At.ATTEMPT_MUTED="attemptMuted",At.ATTEMPT_UNMUTED="attemptUnmuted",At.ATTEMPT_UNMUTED_THEN_MUTED="attemptUnmutedThenMuted",t.Device=void 0,(Et=t.Device||(t.Device={})).DESKTOP="Desktop",Et.ANDROID_PHONE="Android Phone",Et.WINDOWS_PHONE="Windows Phone",Et.IPHONE="iPhone",Et.IPOD="iPod",Et.IPAD="iPad",Et.KINDLE="Kindle",Et.TABLET="Tablet",Et.MOBILE="Mobile",Et.EMBEDDED="Embedded",Et.LG_SMART_TV="LG Smart Tv",Et.VIZIO_SMART_TV="Vizio Smart Tv",Et.SAMSUNG_SMART_TV="Samsung Smart Tv",Et.COMCAST_X1="Comcast X1",Et.XBOX_ONE="Xbox One",Et.CHROMECAST="Chromecast",Et.PLAYSTATION_4="PlayStation 4",Et.PLAYSTATION_5="PlayStation 5",Et.UNKNOWN="UNKNOWN",t.ErrorCode=void 0,(Tt=t.ErrorCode||(t.ErrorCode={})).INVALID_RESOURCE_FORMAT="1000",Tt.RESOURCE_UNAVAILABLE="1100",Tt.GEO_LOCATION_BLOCKED="1101",Tt.DOMAIN_BLOCKED="1102",Tt.IP_BLOCKED="1103",Tt.SATELLITE_PROVIDER_BLOCKED="1104",Tt.EXPIRED="1105",Tt.SELECTOR_CALL_ERROR="1106",Tt.IMA_SDK_MISSING="1200",Tt.DAI_SDK_MISSING="1201",Tt.DASH_SDK_MISSING="1202",Tt.HLS_SDK_MISSING="1203",Tt.SHAKA_SDK_MISSING="1204",Tt.TWITCH_SDK_MISSING="1205",Tt.HLSJS_PARSE_ERROR="2101",Tt.DASHJS_PARSE_ERROR="2102",Tt.SHAKA_PARSE_ERROR="2103",Tt.TWITCH_PARSE_ERROR="2104",Tt.WEBMAF_START_ERROR="2105",Tt.USER_GESTURE_REQUIRED="2300",Tt.HTML5_NETWORK_ERROR="3001",Tt.HLSJS_NETWORK_ERROR="3002",Tt.DASHJS_NETWORK_ERROR="3003",Tt.WEBMAF_NETWORK_ERROR="3004",Tt.SHAKA_NETWORK_ERROR="3005",Tt.TWITCH_NETWORK_ERROR="3006",Tt.MEDIA_ABORTED="3100",Tt.HTML5_SRC_NOT_SUPPORTED="3101",Tt.HLSJS_SRC_NOT_SUPPORTED="3102",Tt.DASHJS_SRC_NOT_SUPPORTED="3103",Tt.SHAKA_SRC_NOT_SUPPORTED="3105",Tt.TWITCH_SRC_NOT_SUPPORTED="3106",Tt.HTML5_MEDIA_ERROR="3200",Tt.HLSJS_MEDIA_ERROR="3201",Tt.HLSJS_MUX_ERROR="3202",Tt.DASHJS_MEDIA_ERROR="3203",Tt.SHAKA_MEDIA_ERROR="3205",Tt.TWITCH_MEDIA_ERROR="3206",Tt.FAIRPLAY_APP_CERT_ERROR="3300",Tt.FAIRPLAY_LIC_ERROR="3301",Tt.DASHJS_DRM_ERROR="3302",Tt.SHAKA_DRM_ERROR="3304",Tt.UNSPECIFIED_VIDEO_PLAYBACK_ERROR="3400",Tt.UNSPECIFIED_HLSJS_ERROR="3401",Tt.UNSPECIFIED_DASHJS_ERROR="3402",Tt.UNSPECIFIED_SHAKA_ERROR="3404",Tt.UNSPECIFIED_TWITCH_ERROR="3405",Tt.AD_STALLED="4000",Tt.IMA_INIT_FAILURE="4100",Tt.IMA_AD_ERROR="4101",Tt.DAI_DATA_ERROR="4200",Tt.DAI_NETWORK_ERROR="4201",Tt.AD_BLOCKING_DETECTED="4300",Tt.AD_ADAPTER_ERROR="4400",Tt.UNEXPECTED_CONDITION="9999",t.Header=void 0,(t.Header||(t.Header={})).MULTI_CDN="x-cdn",t.HookType=void 0,(bt=t.HookType||(t.HookType={})).EVENT="event",bt.AD_BREAK="adbreak",bt.AD="ad",t.KeyboardScope=void 0,(St=t.KeyboardScope||(t.KeyboardScope={})).NONE="none",St.DOCUMENT="document",St.PLAYER="player",t.LocalizationId=void 0,(t.LocalizationId||(t.LocalizationId={})).MEDIA_PLAYER="media-player",t.LocalizedLanguage=void 0,(Ct=t.LocalizedLanguage||(t.LocalizedLanguage={})).EN="English",Ct.ES="Español",Ct.FR="Français",Ct.PT="Português",Ct.DE="Deutsche",Ct.PL="Polski",Ct.JA="日本人",Ct.KO="한국어",Ct.ZH="简体中文",Ct.IT="Italiano",Ct.RU="Русский",t.MetricType=void 0,(_t=t.MetricType||(t.MetricType={})).API="api",_t.UI="ui",t.Os=void 0,(Pt=t.Os||(t.Os={})).OSX="OS X",Pt.WINDOWS="Windows",Pt.WINDOWS7="Windows 7",Pt.WINDOWS8="Windows 8",Pt.WINDOWS10="Windows 10",Pt.WINDOWS_VISTA="Windows Vista",Pt.WINDOWS_PHONE="Windows Phone",Pt.IOS="iOS",Pt.ANDROID="Android",Pt.CHROMIUM="Chromium",Pt.WEBOS="Web0S",Pt.SMARTCAST="SmartCast",Pt.TIZEN="Tizen",Pt.ORBIS="Orbis OS",Pt.PROSPERO="Prospero OS",Pt.UNKNOWN="Unknown",t.PerformanceMode=void 0,(It=t.PerformanceMode||(t.PerformanceMode={})).AUTO="auto",It.DESKTOP="desktop",It.MOBILE="mobile",It.TV="tv",t.Platform=void 0,(Rt=t.Platform||(t.Platform={})).MAC="Macintosh",Rt.WINDOWS="Windows",Rt.LINUX="Linux",Rt.UNKNOWN="Unknown",t.PlaybackState=void 0,(kt=t.PlaybackState||(t.PlaybackState={})).IDLE="idle",kt.STOPPED="stopped",kt.PLAYING="playing",kt.PAUSED="paused",kt.WAITING="waiting",t.PlayerEvent=void 0,(Nt=t.PlayerEvent||(t.PlayerEvent={})).HOTKEY_ACTION="hotkeyaction",Nt.READY="ready",Nt.AD_CUEPOINTS_AVAILABLE="adcuepointsavailable",Nt.AD_BREAK_START="adbreakstart",Nt.AD_BREAK_METADATA="adbreakmetadata",Nt.AD_BREAK_COMPLETE="adbreakcomplete",Nt.AD_START="adstart",Nt.AD_COMPLETE="adcomplete",Nt.AD_FIRST_QUARTILE="adfirstquartile",Nt.AD_MIDPOINT="admidpoint",Nt.AD_THIRD_QUARTILE="adthirdquartile",Nt.AD_ERROR="aderror",Nt.AD_CLICK="adclick",Nt.AD_SEGMENT_START="adsegmentstart",Nt.AD_SEGMENT_END="adsegmentend",Nt.AD_SKIPPED="adskipped",Nt.AD_PROGRESS="adprogress",Nt.AD_PAUSED="adpaused",Nt.AD_PLAYING="adplaying",Nt.AD_STALLED="adstalled",Nt.AD_BREAK_DISCARDED="adbreakdiscarded",Nt.AUDIO_TRACK_INFO_CHANGE="audiotrackinfochange",Nt.AUDIO_TRACK_CHANGE="audiotrackchange",Nt.QUALITY_CHANGE="qualitychange",Nt.QUALITY_INFO_CHANGE="qualityinfochange",Nt.CDN_CHANGE="cdnchange",Nt.CONTENT_START="contentstart",Nt.CONTENT_DURATION_AVAILABLE="contentdurationavailable",Nt.CONTENT_SEGMENT_START="contentsegmentstart",Nt.CONTENT_PLAYING="contentplaying",Nt.CONTENT_PROGRESS="contentprogress",Nt.CONTENT_PAUSED="contentpaused",Nt.CONTENT_SEGMENT_END="contentsegmentend",Nt.CONTENT_COMPLETE="contentcomplete",Nt.CONTENT_IS_PLAYING_LIVE="contentisplayinglive",Nt.STREAM_TYPE_CHANGE="streamtypechange",Nt.STREAM_METADATA="streammetadata",Nt.STREAM_ID_AVAILABLE="streamidavailable",Nt.DRM_KEYSYSTEM_CREATED="drmkeysystemcreated",Nt.FATAL_ERROR="fatalerror",Nt.ERROR="error",Nt.PLAYLIST_ADVANCED="playlistadvanced",Nt.PLAYLIST_COMPLETE="playlistcomplete",Nt.PLAYLIST_CHANGE="playlistchange",Nt.PLAYLIST_CLEARED="playlistcleared",Nt.PLAYLIST_OUT_OF_RANGE="playlistoutofrange",Nt.PLAYLIST_CURRENT_RESOURCE_CLEARED="playlistcurrentresourcecleared",Nt.POSTER_CLICK="posterclick",Nt.PLAYBACK_SUSPENDED="playbacksuspended",Nt.PLAYBACK_RESUMED="playbackresumed",Nt.RESOURCE_START="resourcestart",Nt.RESOURCE_END="resourceend",Nt.RESOURCE_INTERRUPTED="resourceinterrupted",Nt.RESOURCE_ERROR="resourceerror",Nt.RESOURCE_BUFFERING="resourcebuffering",Nt.SEEK_COMPLETE="seekcomplete",Nt.SEEK_START="seekstart",Nt.SEEK_REDIRECT_START="seekredirectstart",Nt.SEEK_REDIRECT_COMPLETE="seekredirectcomplete",Nt.METADATA_CUEPOINT="metadatacuepoint",Nt.TEXT_CUEPOINT="textcuepoint",Nt.TEXT_TRACK_CHANGE="texttrackchange",Nt.TEXT_TRACK_INFO_CHANGE="texttrackinfochange",Nt.TEXT_TRACK_DISPLAY_MODE_CHANGE="texttrackdisplaymodechange",Nt.TEXT_TRACK_AVAILABLE="texttrackavailable",Nt.THUMBNAIL_TRACK_AVAILABLE="thumbnailtrackavailable",Nt.VIDEO_START_ERROR="videostarterror",Nt.VIDEO_PLAYBACK_ERROR="videoplaybackerror",Nt.VIDEO_LOAD_COMPLETE="videoloadcomplete",Nt.BEFORE_CONTROLS_VISIBLE="beforecontrolsvisible",Nt.BEFORE_CONTROLS_HIDDEN="beforecontrolshidden",Nt.CONTROLS_VISIBLE="controlsvisible",Nt.CONTROLS_HIDDEN="controlshidden",Nt.LIVE_PRESENTATION_STOPPED="livepresentationstopped",Nt.PRESENTATION_SIZE_CHANGE="presentationsizechange",Nt.FULLSCREEN_ENTER="fullscreenenter",Nt.FULLSCREEN_EXIT="fullscreenexit",Nt.MOUSE_ENTER_PRESENTATION="mouseenterpresentation",Nt.MOUSE_LEAVE_PRESENTATION="mouseleavepresentation",Nt.USER_PAUSE="userpause",Nt.USER_SETTINGS="usersettings",Nt.LOG_EVENT="logevent",Nt.PLUGIN_EVENT="pluginevent",Nt.LANGUAGE_CHANGE="languagechange",Nt.USER_KEYBOARD_COMMAND="userkeyboardcommand",Nt.AUTOPLAY_BLOCKED="autoplayblocked",Nt.VOLUME_CHANGE="volumechange",Nt.MUTE_CHANGE="mutechange",Nt.ACTIVE_CHANGE="activechange",Nt.PLAYBACK_STATE_CHANGE="playbackstatechange",Nt.METRIC="metric",Nt.VIDEO_ELEMENT_ADDED="videoelementadded",Nt.VIDEO_ELEMENT_REMOVED="videoelementremoved",t.QualityCategory=void 0,(Ot=t.QualityCategory||(t.QualityCategory={})).SD="SD",Ot.HD="HD",Ot.UHD="UHD",Ot.UHD_4K="UHD 4K",Ot.UHD_8K="UHD 8K",t.QualityLabel=void 0,(Lt=t.QualityLabel||(t.QualityLabel={}))[Lt.DEFINITION=0]="DEFINITION",Lt[Lt.HEIGHT=1]="HEIGHT",Lt[Lt.BITRATE=2]="BITRATE",Lt[Lt.CUSTOM=3]="CUSTOM",t.StreamType=void 0,(Dt=t.StreamType||(t.StreamType={})).VOD="VOD",Dt.LIVE="LIVE",Dt.DVR="DVR",t.UiMetric=void 0,(t.UiMetric||(t.UiMetric={})).SEEK_BY="seek_by",t.VideoFormat=void 0,(Mt=t.VideoFormat||(t.VideoFormat={})).HLS="hls",Mt.DASH="dash",Mt.MP4="mp4",Mt.UNKNOWN="unknown";var Kt,Gt,jt=function(e){function t(t,i){var r=e.call(this,t)||this;return r.cause=i,r}return s(t,e),t}(Error),Wt=function(e){function t(t,i,r){var n=e.call(this,"(".concat(t,"): ").concat(i),r)||this;return n.type=t,n.name="HookError",n}return s(t,e),t}(jt),Yt=function(e){function t(t,i,r,n){void 0===n&&(n=!0);var a=e.call(this,i,r)||this;return a.code=t,a.fatal=n,a.name="PlayerError",a.data=r,a}return s(t,e),t}(jt);t.PlaybackAdapterType=void 0,(Kt=t.PlaybackAdapterType||(t.PlaybackAdapterType={})).HLSJS="hlsjs",Kt.DASHJS="dashjs",Kt.SHAKA="shaka",Kt.HTML5="html5",Kt.PLAY_STATION="playStation",Kt.UNKNOWN="unknown",Kt.TWITCH_LOW_LATENCY="twitchLowLatency",t.DrmType=void 0,(Gt=t.DrmType||(t.DrmType={})).WIDEVINE="com.widevine.alpha",Gt.PLAYREADY="com.microsoft.playready",Gt.CLEAR_KEY="org.w3.clearkey",Gt.FAIRPLAY_1_0="com.apple.fps.1_0";var zt,$t=function(e){function t(t){void 0===t&&(t=250);var i=e.call(this,{})||this;return i.timer=NaN,i.pCount=0,i.pInterval=t,i}return s(t,e),t.prototype.destroy=function(){this.stop(),e.prototype.destroy.call(this)},t.prototype.start=function(){var e=this;this.running||(this.timer=setInterval(function(){e.pCount++,e.emit(t.TIC_EVENT,{count:e.pCount})},this.pInterval))},t.prototype.stop=function(){clearInterval(this.timer),this.timer=NaN,this.pCount=0},Object.defineProperty(t.prototype,"running",{get:function(){return!isNaN(this.timer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"interval",{get:function(){return this.pInterval},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.pCount},enumerable:!1,configurable:!0}),t.TICK="tic",t.TIC_EVENT=t.TICK,t}(_),qt=Object.freeze({__proto__:null,QueryString:We,Util:Qe,get DrmType(){return t.DrmType},Timer:$t,waitUntil:ut,waitForEvent:dt,waitForTime:pt}),Qt=ct.messages,Xt=Object.freeze({__proto__:null,ErrorMessage:Qt,PlaybackAdapterBase:Vt,core:Ht,buildInfo:it,get AccessibilityAction(){return t.AccessibilityAction},get ActiveState(){return t.ActiveState},get AdapterRole(){return t.AdapterRole},get AdBreakType(){return t.AdBreakType},get AdContext(){return t.AdContext},get AdTechnology(){return t.AdTechnology},get ApiMetric(){return t.ApiMetric},get Autoplay(){return t.Autoplay},get Browser(){return t.Browser},get Device(){return t.Device},get ErrorCode(){return t.ErrorCode},FileExtensionToMimeType:E,get Header(){return t.Header},get HookType(){return t.HookType},get KeyboardScope(){return t.KeyboardScope},get LocalizationId(){return t.LocalizationId},get LocalizedLanguage(){return t.LocalizedLanguage},get LogLevel(){return t.LogLevel},get MetricType(){return t.MetricType},get NativePlugin(){return t.NativePlugin},get Os(){return t.Os},get PerformanceMode(){return t.PerformanceMode},get Platform(){return t.Platform},get PlaybackState(){return t.PlaybackState},get PlayerEvent(){return t.PlayerEvent},get PluginPriority(){return t.PluginPriority},get QualityCategory(){return t.QualityCategory},get QualityLabel(){return t.QualityLabel},get QualityMode(){return t.QualityMode},get StreamType(){return t.StreamType},get TextTrackEvent(){return t.TextTrackEvent},get TextTrackKind(){return t.TextTrackKind},get TextTrackMode(){return t.TextTrackMode},get UiMetric(){return t.UiMetric},get VideoFormat(){return t.VideoFormat},WILDCARD:"*",HookError:Wt,PlayerError:Yt,get PlaybackAdapterType(){return t.PlaybackAdapterType},util:qt,get MimeType(){return t.MimeType},BaseClass:y,CoreEvent:v,Emitter:_,Logger:I,Metric:Ft,request:Ye,QueryString:We,Util:Qe,get DrmType(){return t.DrmType},Timer:$t,waitUntil:ut,waitForEvent:dt,waitForTime:pt}),Jt=function(){},Zt=function(){function e(t){e.serviceContainerMap[t]?I.error(Jt.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","ServiceContainer")):(this.multiCoreKey=t,this.serviceMap={})}return e.getInstance=function(t){return t?(null==this.serviceContainerMap[t]&&(this.serviceContainerMap[t]=new e(t)),this.serviceContainerMap[t]):null},e.removeServiceContainer=function(e){this.serviceContainerMap[e]&&this.serviceContainerMap[e].destroy(),delete this.serviceContainerMap[e]},e.prototype.destroy=function(){for(var e in this.serviceMap)this.removeService(e);this.serviceMap=null},e.prototype.registerService=function(e){this.serviceMap[e.name]=e,e.onRegister(this.multiCoreKey)},e.prototype.retrieveService=function(e){return this.serviceMap[e]||null},e.prototype.hasService=function(e){return null!=this.serviceMap[e]},e.prototype.removeService=function(e){this.serviceMap[e]&&this.serviceMap[e].destroy(),delete this.serviceMap[e]},e.serviceContainerMap={},e}(),ei=function(){function e(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}return e.prototype.destroy=function(){this.context=null,this.notify=null},e.prototype.setNotifyMethod=function(e){this.notify=e},e.prototype.setNotifyContext=function(e){this.context=e},e.prototype.getNotifyMethod=function(){return this.notify},e.prototype.getNotifyContext=function(){return this.context},e.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},e.prototype.compareNotifyContext=function(e){return e===this.context},e}(),ti=function(){function e(t){null==e.viewMap[t]?(this.multiCoreKey=t,this.mediatorMap={},this.observerMap={},e.viewMap[this.multiCoreKey]=this,this.initializeView()):I.error(Jt.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","View"))}return e.getInstance=function(t){return t?(this.viewMap[t]||(this.viewMap[t]=new e(t)),this.viewMap[t]):null},e.removeView=function(e){this.viewMap[e]&&this.viewMap[e].destroy(),delete this.viewMap[e]},e.prototype.destroy=function(){for(var e in this.mediatorMap)this.removeMediator(this.mediatorMap[e].name);this.mediatorMap=null,this.observerMap=null},e.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},e.prototype.notifyObservers=function(e){var t,i;if(null!=this.observerMap[e.name]){var r=this.observerMap[e.name],n=[],a=void 0;for(t=0,i=r.length;t<i;t++)a=r[t],n.push(a);for(t=0,i=n.length;t<i;t++)(a=n[t]).notifyObserver(e)}},e.prototype.removeObserver=function(e,t){if(this.observerMap){for(var i=this.observerMap[e],r=i.length;r--;)if(!0===i[r].compareNotifyContext(t)){i.splice(r,1);break}0==i.length&&delete this.observerMap[e]}},e.prototype.registerMediator=function(e){var t,i,r,n,a=e.name;if(!this.mediatorMap[a]){if(e.initializeNotifier(this.multiCoreKey),this.mediatorMap[a]=e,(t=e.listNotificationInterests()).length>0)for(n=new ei(e.handleNotification,e),i=0,r=t.length;i<r;i++)this.registerObserver(t[i],n);e.onRegister()}},e.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},e.prototype.removeMediator=function(e){var t,i,r=this.mediatorMap[e];if(r){for(i=(t=r.listNotificationInterests()).length;i--;)this.removeObserver(t[i],r);delete this.mediatorMap[e],r.onRemove()}},e.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},e.prototype.initializeView=function(){},e.viewMap={},e}(),ii=function(){function e(t){e.controllerMap[t]?I.error(Jt.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Controller")):(this.multiCoreKey=t,e.controllerMap[this.multiCoreKey]=this,this.commandMap={},this.view=null,this.initializeController())}return e.getInstance=function(t){return t?(this.controllerMap[t]||(this.controllerMap[t]=new e(t)),this.controllerMap[t]):null},e.removeController=function(e){this.controllerMap[e]&&this.controllerMap[e].destroy(),delete this.controllerMap[e]},e.prototype.destroy=function(){for(var e in this.commandMap)this.removeCommand(e);this.commandMap=null,this.view=null},e.prototype.initializeController=function(){this.view=ti.getInstance(this.multiCoreKey)},e.prototype.executeCommand=function(e){var t=this.commandMap[e.name];if(t){var i=new t;i.initializeNotifier(this.multiCoreKey),i.execute(e)}},e.prototype.registerCommand=function(e,t){this.commandMap[e]||this.view.registerObserver(e,new ei(this.executeCommand,this)),this.commandMap[e]=t},e.prototype.hasCommand=function(e){return!!this.commandMap[e]},e.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},e.controllerMap={},e}(),ri=function(){function e(t){this.proxyMap=null,e.modelMap[t]?I.error(Jt.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Model")):(this.multiCoreKey=t,e.modelMap[t]=this,this.proxyMap={},this.initializeModel())}return e.getInstance=function(t){return t?(null==this.modelMap[t]&&(this.modelMap[t]=new e(t)),this.modelMap[t]):null},e.removeModel=function(e){this.modelMap[e]&&this.modelMap[e].destroy(),delete this.modelMap[e]},e.prototype.destroy=function(){for(var e in this.proxyMap)this.removeProxy(e);this.proxyMap=null},e.prototype.initializeModel=function(){},e.prototype.registerProxy=function(e){this.proxyMap[e.name]=e,e.initializeNotifier(this.multiCoreKey),e.onRegister()},e.prototype.retrieveProxy=function(e){return this.proxyMap[e]||null},e.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},e.prototype.removeProxy=function(e){var t=this.proxyMap[e];t&&(t.onRemove(),this.proxyMap[e]=null)},e.modelMap={},e}(),ni=function(){function e(e,t,i){this.pName=e,this.pBody=t,this.pType=i}return Object.defineProperty(e.prototype,"name",{get:function(){return this.pName||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this.pBody||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.pType||null},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e="\nBody: ".concat(null==this.pBody?"null":JSON.stringify(this.body)),t="\nType: ".concat(null==this.pType?"null":this.type);return"Notification Name: ".concat(this.name+e+t)},e}(),ai=function(){function e(e,t){this.model=null,this.view=null,this.controller=null,this.serviceContainer=null,this.initialized=!1,this.multiCoreKey=e,this.initializeFacade(),this.registerCommands(t)}return e.removeCore=function(e){this.facadeMap[e]&&(ri.removeModel(e),ti.removeView(e),ii.removeController(e),Zt.removeServiceContainer(e),this.facadeMap[e].destroy(),delete this.facadeMap[e])},e.hasCore=function(t){return null!=e.facadeMap[t]},e.getInstance=function(e){if(!e)throw new Error(Jt.ERROR_NO_KEY);return this.facadeMap[e]},e.createFacade=function(t,i){if(!t)throw new Error(Jt.ERROR_NO_KEY);if(this.facadeMap[t]){var r=new Error('Not creating facade - key "'.concat(t,'" already exists!'));throw r.key=t,r}return this.facadeMap[t]=new e(t,i),this.facadeMap[t]},e.prototype.destroy=function(){this.model=null,this.view=null,this.controller=null,this.serviceContainer=null},Object.defineProperty(e.prototype,"key",{get:function(){return this.multiCoreKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return this.multiCoreKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this.retrieveService(ze.Logging).logger},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},e.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},e.prototype.removeCommand=function(e){this.controller.removeCommand(e)},e.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},e.prototype.registerProxy=function(e){this.model.registerProxy(e)},e.prototype.retrieveProxy=function(e){return this.model?this.model.retrieveProxy(e):null},e.prototype.removeProxy=function(e){this.model&&this.model.removeProxy(e)},e.prototype.hasProxy=function(e){return this.model.hasProxy(e)},e.prototype.registerMediator=function(e){this.view.registerMediator(e)},e.prototype.retrieveMediator=function(e){return this.view?this.view.retrieveMediator(e):null},e.prototype.removeMediator=function(e){this.view&&this.view.removeMediator(e)},e.prototype.hasMediator=function(e){return this.view.hasMediator(e)},e.prototype.registerService=function(e){this.serviceContainer.registerService(e)},e.prototype.retrieveService=function(e){return this.serviceContainer?this.serviceContainer.retrieveService(e):null},e.prototype.removeService=function(e){this.model&&this.serviceContainer.removeService(e)},e.prototype.hasService=function(e){return this.serviceContainer.hasService(e)},e.prototype.registerGlobalServices=function(e){for(var t in e)this.registerService(e[t])},e.prototype.sendNotification=function(e,t,i){var r;r="string"==typeof t?new ni(e,{},t):new ni(e,t,i),this.notifyObservers(r)},e.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},e.prototype.registerCommands=function(e){if(e)for(var t in e)e[t]&&this.registerCommand(t,e[t])},e.prototype.initializeServiceContainer=function(){this.serviceContainer=Zt.getInstance(this.multiCoreKey)},e.prototype.initializeController=function(){this.controller=ii.getInstance(this.multiCoreKey)},e.prototype.initializeModel=function(){this.model=ri.getInstance(this.multiCoreKey)},e.prototype.initializeView=function(){this.view=ti.getInstance(this.multiCoreKey)},e.prototype.initializeFacade=function(){if(this.initialized)throw new Error("Unexpected Condition: Facade already initialized");this.initializeModel(),this.initializeController(),this.initializeView(),this.initializeServiceContainer(),this.initialized=!0},e.facadeMap={},e}();!function(e){e.AdDataProxy="AdDataProxy",e.ContentPlaybackStateProxy="ContentPlaybackStateProxy",e.PlayerDomProxy="PlayerDomProxy",e.Playlist="PlaylistProxy",e.ModelCollectionProxy="ModelCollectionProxy",e.ResourceProxy="ResourceProxy",e.TrackingConfigProxy="TrackingConfigProxy",e.PerformanceProxy="PerformanceProxy",e.TextTrackProxy="TextTrackProxy",e.LocalizationProxy="LocalizationProxy",e.ActivityProxy="ActivityProxy",e.AdapterProxy="AdapterProxy",e.HookProxy="HookProxy"}(zt||(zt={}));var oi=function(){function e(e){this.pName=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this.pName},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){},e.prototype.onRegister=function(e){this.facadeKey=e},e.prototype.getLogger=function(){return this.getService(ze.Logging).logger},e.prototype.getService=function(e){return ai.getInstance(this.facadeKey).retrieveService(e)},e.prototype.getModel=function(e){return this.getModelCollection().getModel(e)},e.prototype.getModelCollection=function(){var e;return null===(e=ai.getInstance(this.facadeKey))||void 0===e?void 0:e.retrieveProxy(zt.ModelCollectionProxy)},e}(),si=function(){function e(){}return Object.defineProperty(e,"info",{get:function(){return this.sysInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e,"global",{get:function(){return this.pGlobal},enumerable:!1,configurable:!0}),e.initialize=function(){if("object"==typeof window){e.pGlobal=window;var t=navigator.userAgent,i=this.getPlatform(t),r=this.getBrowser(t,i);this.sysInfo=C.assign({},r,i);var n=this.sysInfo.osVersion,a=n&&C.isString(n)?parseInt(n.split(".")[0]):NaN;this.sysInfo.osMajorVersion=a}else e.pGlobal=null},e.getBrowser=function(e,i){var r,n=((r={})[t.Browser.CHROME]=/Chrome\/(\S+)/,r[t.Browser.CHROME_IOS]=/CriOS\/(\S+)/,r[t.Browser.FIREFOX_IOS]=/FxiOS\/(\S+)/,r[t.Browser.EDGE]=/ Edge?\/([^\s]+)/,r[t.Browser.FIREFOX]=/Firefox\/(\S+)/,r[t.Browser.OPERA]=/Opera|OPR\/(\S+)/,r[t.Browser.SAFARI]=/Version\/(\S+).*Safari/,r[t.Browser.MSIE]=/MSIE ([^\s]+)[\)\;]\ Windows/,r[t.Browser.ANDROID]=/Android/,r[t.Browser.SILK]=/Silk\/(\S+)/,r[t.Browser.PLAYSTATION_4_WEBMAF]=/Playstation 4 (WebMAF) (\S+)/,r[t.Browser.PLAYSTATION_5]=/PlayStation 5/,r[t.Browser.UNKNOWN]=null,r),a=n[t.Browser.CHROME_IOS].test(e),o=function(e,t,i){var r=t&&t.exec(i),n={browser:e,browserVersion:"0",browserMajorVersion:0};if(r&&r.length&&r.length>1)if(n.browserVersion=r[1]||"",n.browserVersion.indexOf(".")){var a=n.browserVersion.split(".");if(Array.isArray(a)&&a.length){var o=parseInt(a[0]);!isNaN(o)&&(n.browserMajorVersion=o)}}else o=parseInt(n.browserVersion),!isNaN(o)&&(n.browserMajorVersion=o);return n};if((n[t.Browser.CHROME].test(e)||a)&&!n[t.Browser.OPERA].test(e)&&!n[t.Browser.EDGE].test(e)){var s=a?t.Browser.CHROME_IOS:t.Browser.CHROME;return o(s,n[s],e)}var l=this.getMsBrowser(n[t.Browser.EDGE],n[t.Browser.MSIE],e);if(l.browser!==t.Browser.UNKNOWN)return o(l.browser,l.re,e);for(var c in n)switch(c){case t.Browser.FIREFOX:case t.Browser.FIREFOX_IOS:case t.Browser.SILK:case t.Browser.ANDROID:if(n[c].test(e))return c===t.Browser.SILK&&(i.device=t.Device.KINDLE),o(c,n[c],e);break;case t.Browser.PLAYSTATION_4_WEBMAF:case t.Browser.PLAYSTATION_5:if(n[t.Browser.PLAYSTATION_5].test(e)||n[t.Browser.PLAYSTATION_4_WEBMAF].test(e)){var u=n[t.Browser.PLAYSTATION_5].test(e),d=u?t.Browser.PLAYSTATION_5:t.Browser.PLAYSTATION_4_WEBMAF;return i.device=u?t.Device.PLAYSTATION_5:t.Device.PLAYSTATION_4,i.platform=u?t.Device.PLAYSTATION_5:t.Device.PLAYSTATION_4,i.os=u?t.Os.PROSPERO:t.Os.ORBIS,o(d,n[d],e)}case t.Browser.SAFARI:if(this.getSafariBrowser(n[c],e,i))return o(c,n[c],e);break;case t.Browser.OPERA:var p=n[c].exec(e);if(p)return o(d=p.indexOf("Opera Mini/")>=0||p.indexOf("Opera Mobi")>=0?t.Browser.OPERA_MOBILE:t.Browser.OPERA,n[c],e);case t.Browser.UNKNOWN:}return o(t.Browser.UNKNOWN,n[t.Browser.UNKNOWN],e)},e.getMsBrowser=function(e,i,r){var n=/Trident.[^\s]+;.*rv:([^\s]+)[\)\;]/;return i.test(r)?{browser:t.Browser.MSIE,re:i}:e.test(r)?{browser:t.Browser.EDGE,re:e}:n.test(r)?{browser:t.Browser.MSIE,re:n}:{browser:t.Browser.UNKNOWN,re:null}},e.getSafariBrowser=function(e,i,r){var n=e.test(i),a=r.os===t.Os.ANDROID?t.Browser.ANDROID:t.Browser.SAFARI;return n&&"Unknown"!==r.os?a:null},e.getPlatform=function(e){var i=this,r=e.toLowerCase(),n={os:t.Os.UNKNOWN,platform:t.Platform.UNKNOWN,osVersion:"",device:t.Device.UNKNOWN};if(r.indexOf("fxios")>=0)return n.os=t.Os.IOS,n.platform=t.Platform.MAC,r.indexOf("iphone")>=0?n.device=t.Device.IPHONE:n.device=t.Device.IPAD,n;if(r.indexOf("crkey")>=0)return n.platform=t.Platform.LINUX,n.device=t.Device.CHROMECAST,n;var a=/\s(\([^)]+\))/.exec(e);if(a&&a.length&&a.length>1)for(var o=a[1].replace(/_/gi,"."),s=[function(e,t){return i.isLinux(e,t)},function(e,t){return i.isMac(e,t)},function(e,t){return i.isWin(e,t)}],l=s.length;l--&&!(0,s[l])(0===l?e:o,n););return n},e.isLinux=function(e,i){var r=new RegExp(t.Platform.LINUX,"i"),n=/Linux armv/.test(navigator.platform);if(r.test(e)||e.indexOf(t.Os.ANDROID)>=0){if(i.platform=t.Platform.LINUX,i.device=t.Device.UNKNOWN,e.indexOf(t.Os.CHROMIUM)>=0){var a=/Chromium\/([\d+\.]*)\s/.exec(e);i.os=t.Os.CHROMIUM,i.osVersion=a&&a[1]||""}else if(e.indexOf(t.Os.ANDROID)>=0){var o=/ Android ([^\s]+);/.exec(e);i.os=t.Os.ANDROID,i.osVersion=o&&o[1]||"",i.device=t.Device.ANDROID_PHONE}else if(e.indexOf(t.Os.WEBOS)>=0)i.os=t.Os.WEBOS,i.osVersion="n/a",i.device=t.Device.LG_SMART_TV;else if(e.indexOf(t.Os.SMARTCAST)>=0)i.os=t.Os.SMARTCAST,i.osVersion="n/a",i.device=t.Device.VIZIO_SMART_TV;else if(e.indexOf(t.Os.TIZEN)>=0){var s=/Tizen ([^\s]+)(;|\))/.exec(e);i.os=t.Os.TIZEN,i.osVersion=s&&s[1]||"",i.device=t.Device.SAMSUNG_SMART_TV}else"undefined"!=typeof $badger||/ Xfinity/.test(e)||/ WPE/.test(e)?(i.os=t.Platform.LINUX,i.osVersion="n/a",i.device=t.Device.COMCAST_X1):n&&(i.os=t.Platform.LINUX,i.osVersion="n/a",i.device=t.Device.EMBEDDED);return!0}return!1},e.isMac=function(e,i){if(e.indexOf(t.Platform.MAC)>=0){if(i.platform=t.Platform.MAC,i.device=t.Device.DESKTOP,e.indexOf(t.Os.OSX)>=0){var r=/Mac OS X ([\d\.]+)/.exec(e);i.os=t.Os.OSX,i.osVersion=r&&r[1]?r[1]:null}return!0}if(-1!==e.indexOf("like Mac OS X")){i.platform=t.Platform.MAC,i.os=t.Os.IOS,i.device=t.Device.UNKNOWN;var n=[/\(iPhone;/,/\(iPad;/,/\(iPod;/],a=[t.Device.IPHONE,t.Device.IPAD,t.Device.IPOD],o=n.length,s=/\sOS\s([^\s]*)\s/.exec(e);for(s&&s[1]&&(i.osVersion=s[1]);o--;)if(n[o].test(e))return i.device=a[o],!0;return!0}return!1},e.isWin=function(e,i){var r=/(Windows Phone |Windows Phone OS )([^\s]+);/.exec(e);if(r&&r[2])return i.platform=t.Platform.WINDOWS,i.os=t.Os.WINDOWS_PHONE,i.osVersion=r[2],i.device=t.Device.WINDOWS_PHONE,!0;var n=/Windows NT ([^\s]+)[;\)]/.exec(e);if(i.device=t.Device.DESKTOP,n&&n[1]){i.platform=t.Platform.WINDOWS,i.os=t.Os.WINDOWS;var a=n[1];if(/Xbox; Xbox One/.test(e)&&(i.device=t.Device.XBOX_ONE),10==parseInt(a))i.os=t.Os.WINDOWS10,i.osVersion=a;else switch(a){case"6.0":i.os=t.Os.WINDOWS_VISTA;break;case"6.1":i.os=t.Os.WINDOWS7,i.osVersion="7";break;case"6.2":i.os=t.Os.WINDOWS8,i.osVersion="8"}return!0}return!1},e.sysInfo=null,e}();si.initialize();var li,ci=function(){this.muted=!1,this.volume=NaN,this.currentTime=NaN,this.duration=NaN},ui=function(e){function i(){return e.call(this,ze.System)||this}return s(i,e),i.getInstance=function(){return this.instance||(this.instance=new i),this.instance},Object.defineProperty(i.prototype,"appNamespace",{get:function(){return this.appNs},set:function(e){this.appNs=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"info",{get:function(){return si.info},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"webMafPlayer",{get:function(){return this.isWebMaf?this.global.WM_videoPlayer:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isWebMaf",{get:function(){return!(!this.global||!this.global.WM_videoPlayer)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isWebOs",{get:function(){return this.os===t.Os.WEBOS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isChromecast",{get:function(){return this.device===t.Device.CHROMECAST},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"global",{get:function(){return si.global},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"document",{get:function(){return this.global&&(this.global.document||null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isDesktop",{get:function(){return this.info.device===t.Device.DESKTOP},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobile",{get:function(){return!this.isDesktop},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isTv",{get:function(){switch(this.device){case t.Device.LG_SMART_TV:case t.Device.VIZIO_SMART_TV:case t.Device.SAMSUNG_SMART_TV:case t.Device.COMCAST_X1:return!0;default:return!1}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isTizenSmartTv",{get:function(){return this.device===t.Device.SAMSUNG_SMART_TV},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isXboxOne",{get:function(){return this.device===t.Device.XBOX_ONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isEmbedded",{get:function(){return this.device==t.Device.EMBEDDED},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"browser",{get:function(){return this.info.browser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"os",{get:function(){return this.info.os},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"device",{get:function(){return this.info.device},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"platform",{get:function(){return this.info.platform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isIos",{get:function(){return this.info.os===t.Os.IOS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isAndroid",{get:function(){var e=this.info;return e.device===t.Device.ANDROID_PHONE||e.device===t.Os.ANDROID},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"browserVersionInfo",{get:function(){return this.parseVerStr(this.info.browserVersion)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"osVersionInfo",{get:function(){return this.parseVerStr(this.info.osVersion)},enumerable:!1,configurable:!0}),i.prototype.createSimpleVideoInterface=function(){return new ci},i.prototype.parseVerStr=function(e){var t={majorVersion:null,minorVersion:null,versionString:e||null};if(e){var i=e.split("."),r=parseInt(i[0],10),n=parseInt(i[1],10);!isNaN(r)&&(t.majorVersion=r),!isNaN(n)&&(t.minorVersion=n)}return t},i}(oi),di=function(e){function i(){var t=e.call(this,ze.AutoplayCapabilities)||this;return t.testDom=null,t.checkCompleted=!1,t.testVideoSrc=ct.blankVideoUrl,t.isMobile=null,t.sysInfo=ui.getInstance(),t.info={supportsUnmutedAutoplay:null,supportsMutedAutoplay:null},t}return s(i,e),i.getInstance=function(){return this.instance||(this.instance=new i),this.instance},Object.defineProperty(i.prototype,"autoplayInfo",{get:function(){return this.info},enumerable:!1,configurable:!0}),i.prototype.destory=function(){clearTimeout(this.timeout)},i.prototype.detectCapabilities=function(e){var t=this;return this.detecting?this.detecting:(e&&(this.testVideoSrc=e),this.detecting=new Promise(function(e){t.checkCompleted?e(t.info):(t.createTestDom(),t.internalCallback=function(){return e(t.info)},t.checkUnmutedAutoplay())}))},i.prototype.finishCheck=function(e,t){var i=this;this.setInfo(e,t),this.checkCompleted=!0,this.internalCallback(),this.timeout=setTimeout(function(){return i.cleanUp()},100)},i.prototype.setInfo=function(e,t){this.info.supportsUnmutedAutoplay=e,this.info.supportsMutedAutoplay=t},i.prototype.cleanUp=function(){this.testDom&&this.testDom.parentNode.removeChild(this.testDom),this.testDom=null},i.prototype.checkUnmutedAutoplay=function(){var e=this,t=this.createVideoElement(!1);if(t){t.load();var i=t.play();void 0===i?this.isMobile?this.detectMobileCapabilities():this.finishCheck(!0,!0):i.then(function(){e.finishCheck(!0,!0)}).catch(function(t){e.checkMutedAutoplay()})}else this.finishCheck(!0,!0)},i.prototype.checkMutedAutoplay=function(){var e=this;if(this.isEarlySafari11())this.finishCheck(!1,!1);else{var t=this.createVideoElement(!0);t.load(),t.play().then(function(){e.finishCheck(!1,!0)}).catch(function(i){if(t.error&&e.testVideoSrc!=ct.blankDataUrl)return e.testVideoSrc=ct.blankDataUrl,void e.checkUnmutedAutoplay();e.finishCheck(!1,!1)})}},i.prototype.isEarlySafari11=function(){var e=this.sysInfo,i=e.browser===t.Browser.SAFARI&&"desktop"===e.device,r=i?e.browserVersionInfo.majorVersion:null,n=i?e.browserVersionInfo.minorVersion:null,a=11===r&&0===n,o=e.browserVersionInfo.versionString,s=o?o.split("."):null;return a&&(!s[2]||parseInt(s[2])<3)},i.prototype.detectMobileCapabilities=function(){var e=this.isAutoplayEligibleAndroid()||this.isAutoplayEligibleIos();this.finishCheck(!1,e)},i.prototype.isAutoplayEligibleAndroid=function(){var e=this.sysInfo;return e.os===t.Os.ANDROID&&e.browser===t.Browser.CHROME&&this.isChromeAutoplayEligible()},i.prototype.isAutoplayEligibleIos=function(){var e=this.sysInfo,i=e.os===t.Os.IOS&&e.browserVersionInfo.majorVersion>=10,r=i&&e.browser===t.Browser.SAFARI,n=i&&!r&&(e.browser===t.Browser.CHROME_IOS||e.browser===t.Browser.CHROME)&&this.isChromeAutoplayEligible();return r||n},i.prototype.isChromeAutoplayEligible=function(){return this.sysInfo.browserVersionInfo.majorVersion>=54},i.prototype.createVideoElement=function(e){var t=this.document;if(!t)return null;var i=t.createElement("video");return e&&(i.muted=!0,i.setAttribute("muted","muted"),i.setAttribute("playsinline","playsinline")),i.volume=.005,i.style.width="100%",i.style.height="100%",i.src=this.testVideoSrc,this.testDom.appendChild(i),i},i.prototype.createTestDom=function(){var e=this.document;if(!this.document)return null;var t=e.createElement("div"),i=t.style,r="-1000px";return i.position="absolute",i.top=r,i.left=r,i.width="400px",i.height="225px",e.body.appendChild(t),this.testDom=t,t},Object.defineProperty(i.prototype,"document",{get:function(){return this.sysInfo.document||null},enumerable:!1,configurable:!0}),i}(oi),pi=[{type:"avc",config:{type:"media-source",audio:{contentType:"audio/mp4; codecs=mp4a.40.2",channels:"2",bitrate:132266,samplerate:48e3},video:{contentType:'video/mp4; codecs="avc1.4D401E"',width:1920,height:1080,bitrate:2646242,framerate:"25"}}},{type:"hevc",config:{type:"media-source",audio:{contentType:"audio/mp4; codecs=mp4a.40.2",channels:"2",bitrate:132266,samplerate:48e3},video:{contentType:'video/mp4; codecs="hev1.1.2.L93.B0"',width:1920,height:1080,bitrate:2646242,framerate:"25"}}},{type:"webm",config:{type:"media-source",audio:{contentType:"audio/webm; codecs=opus",channels:"2",bitrate:132266,samplerate:48e3},video:{contentType:'video/webm; codecs="vp09.00.10.08"',width:1920,height:1080,bitrate:2646242,framerate:"25"}}}];!function(e){e.AVC="avc1.4D401E,mp4a.40.2",e.HEVC="hev1.1.2.L93.B0",e.VP8="vp8, opus, vorbis",e.VP9="vp9, opus, vorbis",e.AV1="av1.experimental.e87fb2378f01103d5d6e477a4ef6892dc714e614"}(li||(li={}));var hi,fi,yi,vi,mi,gi,Ai=function(e){function i(){var i=e.call(this,ze.MediaCapabilities)||this;return i.types={video:{HLS:t.MimeType.HLS,AVC:t.MimeType.MP4_VIDEO+"; codecs="+li.AVC,HEVC:t.MimeType.MP4_VIDEO+"; codecs="+li.HEVC,WEBM_VP8:t.MimeType.WEBM_VIDEO+"; codecs="+li.VP8,WEBM_VP9:t.MimeType.WEBM_VIDEO+"; codecs="+li.VP9},audio:{AVC:t.MimeType.MP4_AUDIO+"; codecs="+li.AVC,HEVC:t.MimeType.MP4_AUDIO+"; codecs="+li.HEVC,WEBM_VP8:t.MimeType.WEBM_AUDIO+"; codecs="+li.VP8,WEBM_VP9:t.MimeType.WEBM_AUDIO+"; codecs="+li.VP9}},i}return s(i,e),i.getInstance=function(){return this.instance||(this.instance=new i),this.instance},Object.defineProperty(i.prototype,"capabilities",{get:function(){return this.pCapabilities},enumerable:!1,configurable:!0}),i.prototype.detectCapabilities=function(){var e=this;return new Promise(function(t,i){var r={mediaDecodeCapabilitiesResults:[],drmCapabilitiesResults:[],hasMediaSource:e.hasMediaSource,hasEncryptedMediaSource:e.hasEncryptedMediaSource,isWebKit:e.isWebKit,supportsVp8:e.supportsVp8,supportsMediaDecodeConfigurations:e.supportsMediaDecodeConfigurations,supportsNativeHls:e.isTypeSupported(e.types.video.HLS),supportsRequestMediaKeySystemAccess:e.supportsRequestMediaKeySystemAccess,supportsAvc:!1,supportsHevc:!1,supportsWebM:!1,supportsVp9:!1};e.pCapabilities=r,e.supportsMediaDecodeConfigurations?e.testMediaDecodeCapabilities(r,function(e){var i=e.mediaDecodeCapabilitiesResults;r.supportsAvc=i[0].supported,r.supportsHevc=i[1].supported,r.supportsWebM=i[2].supported,r.supportsVp9=i[2].supported,t(r)}):(r.supportsAvc=e.isTypeSupported(e.types.video.AVC),r.supportsHevc=e.isTypeSupported(e.types.video.HEVC),r.supportsWebM=e.supportsWebM,r.supportsVp9=e.supportsVp9,t(r))})},Object.defineProperty(i.prototype,"hasMediaSource",{get:function(){return!(!si.global||!si.global.MediaSource&&!this.isWebKit)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasEncryptedMediaSource",{get:function(){var e=si.global;return!(!e||!(e.MediaKeys||e.WebKitMediaKeys||e.MSMediaKeys))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isWebKit",{get:function(){return!(!si.global||!si.global.WebKitMediaSource)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supportsWebM",{get:function(){return this.supportsVp8||this.supportsVp9},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supportsVp8",{get:function(){return this.isTypeSupported(this.types.video.WEBM_VP8)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supportsVp9",{get:function(){return this.isTypeSupported(this.types.video.WEBM_VP9)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supportsRequestMediaKeySystemAccess",{get:function(){return!(!si.global||!si.global.MediaKeySystemAccess)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supportsMediaDecodeConfigurations",{get:function(){return!!navigator.mediaCapabilities},enumerable:!1,configurable:!0}),i.prototype.isTypeSupported=function(e){var t=!1;if(!si.global)return!1;if(this.isWebKit?t=si.global.WebKitMediaSource.isTypeSupported(e):this.hasMediaSource&&(t=si.global.MediaSource.isTypeSupported(e)),!t){var i=document.createElement("video");C.isObject(i)&&C.isFunction(i.canPlayType)&&("probably"!==i.canPlayType(e)&&"maybe"!==i.canPlayType(e)||(t=!0))}return t},i.prototype.testMediaDecodeCapabilities=function(e,t){navigator||t(e);var i=0,r=function(r){e.mediaDecodeCapabilitiesResults.push(r),e.mediaDecodeCapabilitiesResults.length===pi.length?t(e):(n(pi[i]),i++)},n=function(e){var t={type:e.type},i=navigator.mediaCapabilities.decodingInfo;i?i(e.config).then(function(e){t.supported=e.supported,t.smooth=e.smooth,t.powerEfficient=e.powerEfficient,r(t)}).catch(function(){r(t)}):r(t)};n(pi[i]),i++},i}(oi),Ei=function(e){void 0===e&&(e={}),this.ad={enabled:!1,adapter:null,context:null,showPrerollOnNonZeroStart:!1,suppressAdUi:!1,viewabilityTracking:{partner:null,viewGuid:null,pageType:null},adTagParameters:{description_url:null,sz:"640x480",url:null,iu:null,ad_rule:null,ciu_szs:null,pp:null,cmsid:"2289",vid:null,hl:null,msid:null,an:null,nofb:null,ppid:null,tfcd:null,npa:null,cust_params:null},csai:{adCallUrl:null,loadVideoTimeoutMs:4e3,enableAdPreloading:!1,enableStalledAdCheck:!0,stalledAdThreshold:5,preloadContentAtEndOfPreRoll:!1,ignoreAnomalousConditionOnSeek:!1,fw:null},ssai:{apiKey:null,authToken:null,adParameters:null,contentSourceId:null,videoId:null,assetKey:null,useApi:!1,format:t.VideoFormat.HLS,isLive:!1,filterOutPremiumAudioCodecs:!1},ima:{adCallUrl:null,loadVideoTimeoutMs:4e3,enableAdPreloading:!1,enableStalledAdCheck:!0,stalledAdThreshold:5,preloadContentAtEndOfPreRoll:!1,ignoreAnomalousConditionOnSeek:!1},dai:{contentSourceId:null,daiVideoId:null,assetKey:null,apiKey:null,ssbStreamUrl:null,isLive:!1,format:null,streamActivityMonitorId:null}},this.location={cms:null,tokenMap:null,cmsUri:null,mediaUrl:null,textTrackUrl:null,thumbnailTrackUrl:null,posterImageUrl:null,drm:{enabled:!1,sessionId:null,ticket:null,playready:{url:null,header:null},widevine:{url:null,header:null},fairplay:{appCertUrl:null,licenseUrl:null,header:null},aes:{header:null,provider:null}}},this.playback={id3OwnerIds:null,startTime:NaN,preloadContent:!1,enableAdvancedCodecs:!1,liveEdgeSyncFragmentCount:3,abr:{maxBitrate:NaN,minBitrate:NaN,startBitrate:NaN,capQualityToScreenSize:!0}},this.metadata={},this.tracking={},this.overrides={},C.merge(this,e)};!function(e){e.APPLICATION="AppMediator",e.UI="UiMediator",e.FULLSCREEN="FullscreenMediator",e.TRACKING_MEDIATOR="TrackingMediator",e.TIMER_MEDIATOR="TimerMediator",e.PRESENTATION_MEDIATOR="PresentationMediator",e.PLUGIN_MEDIATOR="pluginMediator",e.KEY_COMMAND="keyCommandMediator",e.ACC_KEY_CMD_MEDIATOR="accessibilityKeyCommandMediator"}(hi||(hi={})),function(e){e.MAIN_CONTAINER="main",e.VIDEO_EL="video",e.VIDEO_CONTAINER="videoContainer",e.CC_CONTAINER="ccContainer",e.AD_CONTAINER="adContainer",e.PANEL_CONTAINER="panelContainer",e.AD_CLICK_EL="adClickEl"}(fi||(fi={})),function(e){e.AdBreakInfo="AdBreakInfo",e.AdItem="AdItem",e.ContentPlaybackState="ContentPlaybackState",e.PlayerDom="PlayerDom",e.PlayerOptions="PlayerOptions",e.PresentationState="PresentationState"}(yi||(yi={})),function(e){e.DEFAULT="default",e.BOOT_APP="bootApp",e.PREP_TRACKING="prepTracking",e.PREP_SERVICE="prepService",e.TIMER_TIC="timerTic",e.APP_EVENT="appEvent",e.APP_ERROR_EVENT="appErrorEvent",e.READY="ready",e.METRIC="metric",e.RESOURCE_ERROR="resourceError",e.VIDEO_START_ERROR="videoStartError",e.VIDEO_PLAYBACK_ERROR="videoPlaybackError",e.PREP_RESOURCE_COLLECTION="prepResourceCollection",e.RETRIEVE_RESOURCE="retrieveResource",e.TRANSFORM_RESOURCE="transformResourceData",e.REGISTER_RESOURCE="registerResource",e.PLAY_RESOURCE="playResource",e.PREP_PLUGINS="prepPlugins",e.LOAD_PLUGINS="loadPlugins",e.REMOVE_PLUGIN="removePlugin",e.START_PRESENTATION="startPresentation",e.RESOURCE_START="resourceStart",e.RESOURCE_END="resourceEnd",e.RESOURCE_PLAYING="resourcePlaying",e.RESOURCE_PAUSED="resourcePaused",e.RESOURCE_COMPLETE="resourceComplete",e.ADVANCE_PLAYLIST="advancePlaylist",e.PLAYLIST_CHANGE="playlistChanged",e.PLAYLIST_ADVANCED="playlistAdvanced",e.PLAYLIST_COMPLETE="playlistComplete",e.PLAYLIST_CLEARED="playlistCleared",e.PLAYLIST_CURRENT_RESOURCE_CLEARED="playlistCurrentResourceCleared",e.PLAYLIST_OUT_OF_RANGE="playlistOutOfRange",e.RESOURCE_INTERRUPTED="resourceInterrupted",e.CONTENT_COMPLETE="contentComplete",e.LIVE_PRESENTATION_STOPPED="livePresentationStopped",e.KILL_RESOURCE_PRESENTATION="killResourcePresentation",e.POSTER_CLICK="posterClick",e.SUSPEND_PLAYBACK="suspendPlayback",e.RESUME_PLAYBACK="resumePlayback",e.PLAYBACK_SUSPENDED="playbackSuspended",e.PLAYBACK_RESUMED="playbackResumed",e.FULLSCREEN_ENTER="fullscreenEnter",e.FULLSCREEN_EXIT="fullscreenExit",e.PRESENTATION_SIZE_CHANGE="presentationSizeChange",e.MOUSE_ENTER_PRESENTATION="mouseEnterPresentation",e.MOUSE_LEAVE_PRESENTATION="mouseLeavePresentation",e.USER_PAUSE="userPause",e.METADATA_CUEPOINT="metadataCuepoint",e.TEXT_CUEPOINT="textCuepoint",e.TEXT_TRACK_CHANGE="textTrackChange",e.TEXT_TRACK_DISPLAY_MODE_CHANGE="textTrackDisplayModeChange",e.TEXT_TRACK_AVAILABLE="textTrackAvailable",e.TEXT_TRACK_INFO_CHANGE="textTrackInfoChange",e.AUDIO_TRACK_CHANGE="audioTrackSwitched",e.AUDIO_TRACK_INFO_CHANGE="audioTrackInfoChange",e.QUALITY_INFO_CHANGE="qualityInfoChange",e.THUMBNAIL_TRACK_AVAILABLE="thumbnailTrackAvailable",e.PLAYBACK_STATE_CHANGE="playbackStateChange",e.AUTO_QUALITY_SWITCHING="autoQualitySwitching",e.MIN_BITRATE="minBitrate",e.MAX_BITRATE="maxBitrate",e.PLAY_ON_USER_GESTURE="playOnUSerGesture",e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e.SEEK="seek",e.SEEK_FORWARD="seekForward",e.SEEK_BACK="seekBack",e.SEEK_TO_LIVE="seekToLive",e.SWITCH_BITRATE="switchBitrate",e.SWITCH_QUALITY_CATEGORY="switchQualityCategory",e.SWITCH_AUDIO_TRACK="switchAudioTrack",e.SWITCH_TEXT_TRACK="switchTextTrack",e.SWITCH_TEXT_MODE="switchTextMode",e.CONTENT_START="contentStart",e.CONTENT_DURATION_AVAILABLE="contentDurationAvailable",e.CONTENT_SEGMENT_START="contentSegmentStart",e.CONTENT_SEEKING="contentSeeking",e.CONTENT_SEEKED="contentSeeked",e.SEEK_REDIRECT_START="seekRedirectStart",e.SEEK_REDIRECT_COMPLETE="seekRedirectComplete",e.CONTENT_BUFFERING="contentBuffering",e.CONTENT_PLAYING="contentPlaying",e.CONTENT_PAUSED="contentPaused",e.QUALITY_CHANGE="contentQualityChange",e.CDN_CHANGE="contentCdnChange",e.DRM_KEYSYSTEM_CREATED="drmKeySystemCreated",e.CONTENT_SEGMENT_END="contentSegmentEnd",e.CONTENT_TIME_UPDATE="contentTimeupdate",e.CONTENT_IS_LIVE_CHANGED="contentIsLiveChanged",e.STREAM_TYPE_CHANGE="streamTypeChange",e.STREAM_METADATA="streamMetadata",e.STREAM_ID_AVAILABLE="streamIdAvailable",e.VIDEO_PROGRESS="contentVideoProgress",e.VIDEO_LOAD_START="videoLoadStart",e.VIDEO_LOAD_COMPLETE="videoLoadComplete",e.VIDEO_LOADED_METADATA="videoLoadedMetadata",e.AUTOPLAY_BLOCKED="autoplayBlocked",e.AD_SEGMENT_START="adsegmentstart",e.AD_SEGMENT_END="adsegmentend",e.AD_BUFFERING="adBuffering",e.AD_CUEPOINTS_AVAILABLE="adCuepointsAvailable",e.AD_BREAK_START="adBreakStart",e.AD_BREAK_METADATA="adBreakMetadata",e.AD_START="adStart",e.AD_TIME_UPDATE="adProgress",e.AD_FIRST_QUARTILE="adFirstQuartile",e.AD_MIDPOINT="adMidpoint",e.AD_THIRD_QUARTILE="adThirdQuartile",e.AD_COMPLETE="adComplete",e.AD_BREAK_COMPLETE="adBreakEnd",e.AD_PAUSED="adPaused",e.AD_PLAYING="adPlaying",e.AD_ERROR="adError",e.AD_STALLED="adStalled",e.AD_BREAK_DISCARDED="adBreakDiscarded",e.AD_CLICK="adClick",e.AD_SKIPPED="adSkipped",e.ENABLE_UI="enableUi",e.DISABLE_UI="disableUi",e.FULLSCREEN_AVAILABLE="fullscreenAvailable",e.FULLSCREEN_CHANGE="fullscreenChange",e.ENTER_FULLSCREEN_REQUEST="enterFullscreenRequest",e.EXIT_FULLSCREEN_REQUEST="exitFullscreenRequest",e.BEFORE_CONTROLS_VISIBLE="beforeControlsVisible",e.CONTROLS_VISIBLE="controlsVisible",e.BEFORE_CONTROLS_HIDDEN="beforeControlsHidden",e.CONTROLS_HIDDEN="controlsHidden",e.MUTE="mute",e.UNMUTE="unmute",e.VOLUME_CHANGE="volumeChange",e.USER_KEY_COMMAND="userKeyCommand",e.USER_KEYBOARD_COMMAND="userKeyboardCommand",e.HOTKEY_ACTION="hotkeyAction",e.TT_OFFSET_REQUEST="ttOffsetRequest",e.USER_SETTINGS_REQUEST="userSettingsRequest",e.CHANGE_LANGUAGE="changeLanguage",e.LANGUAGE_CHANGE="languageChange"}(vi||(vi={})),function(e){e.EXTERNAL="external",e.INTERNAL="internal",e.UI="ui"}(mi||(mi={})),function(e){e[e.AD=0]="AD",e[e.CONTENT=1]="CONTENT",e[e.IDLE=2]="IDLE"}(gi||(gi={}));var Ti,bi=function(){function e(){this.multiCoreKey=null}return e.prototype.destroy=function(){},e.prototype.onRemove=function(){this.multiCoreKey=null},Object.defineProperty(e.prototype,"facade",{get:function(){return ai.getInstance(this.multiCoreKey)},enumerable:!1,configurable:!0}),e.prototype.sendNotification=function(e,t,i){var r=this.facade;r&&r.sendNotification(e,t,i)},e.prototype.initializeNotifier=function(e){this.multiCoreKey=e},e}(),Si=function(e){function t(t,i){return e.call(this,t,i)||this}return s(t,e),Object.defineProperty(t.prototype,"logger",{get:function(){return this.facade.logger},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},t}(function(e){function t(t,i){var r=e.call(this)||this;return r.pViewControl=null,r.mediatorName=t,i&&(r.viewControl=i),r}return s(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.mediatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewControl",{get:function(){return this.pViewControl},set:function(e){this.pViewControl=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"systemService",{get:function(){return this.facade.retrieveService(ze.System)},enumerable:!1,configurable:!0}),t.prototype.getService=function(e){return this.facade?this.facade.retrieveService(e):null},t.prototype.getModel=function(e){return this.getModelCollection().getModel(e)},t.prototype.getProxy=function(e){return this.facade?this.facade.retrieveProxy(e):null},t.prototype.getModelCollection=function(){return this.facade?this.facade.retrieveProxy(zt.ModelCollectionProxy):null},t.prototype.listNotificationInterests=function(){return[]},t.prototype.onRegister=function(){},t.prototype.onRemove=function(){this.pViewControl=null,e.prototype.onRemove.call(this)},t}(bi)),Ci=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.seekRedirectPending=!1,r.ccEnabled=!1,r.ccAvail=!1,r.fullScreenAccessRestricted=!1,r.increment=10,r.isPlayingLive=!1,r.controlsVisible=!1,r.adErrorOccurred=!1,r}return s(i,e),i.prototype.onRegister=function(){var e=this,t=this.facade.retrieveProxy(zt.LocalizationProxy);this.ui.setLocalizationService(t),this.ui.setThumbnailService({getThumbnail:function(t){return e.facade.retrieveProxy(zt.ContentPlaybackStateProxy).getThumbnail(t)}})},i.prototype.onRemove=function(){clearTimeout(this.timeout),this.viewControl&&this.viewControl.destroy(),this.viewControl=null,this.enums=null,this.fsm=null,e.prototype.onRemove.call(this)},Object.defineProperty(i.prototype,"viewController",{get:function(){return this.ui},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"controlNames",{get:function(){return this.enums.ControlName},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adViewSuppressed",{get:function(){return this.suppressAdView},set:function(e){this.suppressAdView=e},enumerable:!1,configurable:!0}),i.prototype.uiIsStandardView=function(){return this.ui.isStandardView()},i.prototype.setSeekNotice=function(e,t){this.ui.setSeekNotice(e,t)},i.prototype.setFullScreenAccessRestricted=function(e){this.fullScreenAccessRestricted=e},i.prototype.killUi=function(){this.viewControl&&this.viewControl.destroy(),this.viewControl=null},i.prototype.initialize=function(e){this.enums=e,this.init()},i.prototype.enableControl=function(e){this.ui.enableControl(e)},i.prototype.disableControl=function(e){this.ui.disableControl(e)},i.prototype.enableFullscreen=function(){!this.fullScreenAccessRestricted&&this.isFullScreenAvailable()&&this.enableControl(this.controlNames.FULLSCREEN_TOGGLE)},i.prototype.disableFullscreen=function(){this.disableControl(this.controlNames.FULLSCREEN_TOGGLE)},i.prototype.setMuteState=function(e){this.ui.setMuteState(e)},i.prototype.forceControlsVisible=function(e){this.ui.forceControlsVisible(e)},i.prototype.setSeekable=function(e){this.ui.setSeekable(e)},i.prototype.engageSeek=function(){this.ui.forceControlsVisible(!0),this.ui.beginSeekMove()},i.prototype.disengageSeek=function(){var e=this;this.ui.endSeekMove(),this.timeout=setTimeout(function(){return e.ui.forceControlsVisible(!1)},500)},i.prototype.moveSeekBy=function(e){this.ui.moveSeekBy(e)},i.prototype.setVolume=function(e){!isNaN(e)&&e>=0&&e<=1&&this.ui.setVolume(e)},i.prototype.setTransportType=function(e){var i=e==t.StreamType.LIVE?1:e==t.StreamType.DVR?2:0;this.ui.setTransportType(i)},i.prototype.setIsPlayingLive=function(e){this.isPlayingLive=e,this.ui.setIsPlayingLive(e)},i.prototype.setClosedCaptionState=function(e){this.ui.setClosedCaptionState(e)},i.prototype.updateProgress=function(e){var t=e.playheadTime,i=e.duration;this.ui.updateProgress({currentTime:t,duration:i});var r=this.controlNames;this.isPlayingLive||t+this.increment>=i?this.ui.disableControl(r.SEEK_FORWARD_BUTTON):this.ui.enableControl(r.SEEK_FORWARD_BUTTON),t<=this.increment?this.ui.disableControl(r.SEEK_BACK_BUTTON):this.ui.enableControl(r.SEEK_BACK_BUTTON)},i.prototype.setClickCatcherState=function(e){var i=e===t.PlaybackState.PLAYING?this.enums.PlayState.PLAYING:this.enums.PlayState.PAUSED;this.ui.setClickCatcherState(i)},i.prototype.hideClickCatcher=function(e){this.ui.hideClickCatcher(e)},i.prototype.displayPoster=function(e){this.ui.showDecorator(this.enums.DecoratorName.POSTER,e)},i.prototype.activatePoster=function(){this.ui.activatePoster()},i.prototype.showUnmutePrompt=function(){this.ui.showDecorator(this.enums.DecoratorName.UNMUTE_PROMPT,!0)},i.prototype.displaySpinner=function(e){this.ui.showDecorator(this.enums.DecoratorName.SPINNER,e)},i.prototype.setAccVolumeLevelIndicator=function(e){this.ui.setAccVolumeLevelIndicator(e)},i.prototype.setVideoMode=function(e){e==gi.AD&&this.adViewSuppressed?this.ui.setVideoMode(gi.CONTENT):this.ui.setVideoMode(e)},i.prototype.resetUi=function(){this.hideClickCatcher(!0),this.displayPoster(!1),this.ui.setChapterMarkers([]),this.ui.setVideoMode(gi.IDLE)},i.prototype.handleNotification=function(e){var i=e.name,r=e.body;if(this.ui)switch(i){case vi.ENABLE_UI:this.enableFullscreen(),this.ui.activateControls();break;case vi.DISABLE_UI:this.ui.setVideoMode(gi.IDLE),this.ui.inactivateControls();break;case vi.VIDEO_LOAD_START:this.displaySpinner(!0);break;case vi.VIDEO_LOAD_COMPLETE:this.displaySpinner(!1);break;case vi.CONTENT_TIME_UPDATE:if(this.seekRedirectPending)return;this.ui.updateProgress({currentTime:r.contentTime,duration:r.contentDuration});break;case vi.AD_CUEPOINTS_AVAILABLE:this.ui.setChapterMarkers(r.cuepoints);break;case vi.AD_TIME_UPDATE:this.adViewSuppressed||this.ui.updateProgress({currentTime:r.currentTime,duration:r.duration});break;case vi.TEXT_TRACK_AVAILABLE:this.ccAvail=!0,this.ui.enableControl(this.controlNames.CC_TOGGLE),this.ccEnabled&&(this.ui.setClosedCaptionState(!0),this.activateCaptions(!0));break;case vi.TEXT_TRACK_DISPLAY_MODE_CHANGE:this.doCaptionCheckOnControlVisChange();break;case vi.SEEK:case vi.SEEK_FORWARD:case vi.SEEK_BACK:case vi.CONTENT_SEEKING:if(this.displaySpinner(!0),this.seekRedirectPending)return;this.ui.setSeekComplete();break;case vi.SEEK_REDIRECT_START:this.seekRedirectPending=!0;break;case vi.SEEK_REDIRECT_COMPLETE:this.seekRedirectPending=!1;break;case vi.CONTENT_SEEKED:if(this.displaySpinner(!1),this.seekRedirectPending)return;this.ui.setSeekComplete(),this.adErrorOccurred&&(this.adErrorOccurred=!1,this.ui.setVideoMode(gi.CONTENT),this.ccAvail&&this.ui.enableControl(this.controlNames.CC_TOGGLE));break;case vi.CONTENT_BUFFERING:this.displaySpinner(r.value);break;case vi.FULLSCREEN_AVAILABLE:this.enableFullscreen();break;case vi.FULLSCREEN_CHANGE:this.ui.setFullscreenState(e.body.isFullscreen);break;case vi.PRESENTATION_SIZE_CHANGE:this.ui.updateSize();break;case vi.CONTENT_PLAYING:this.ui.hideClickCatcher(!1),this.displaySpinner(!1),this.setPlayState(t.PlaybackState.PLAYING);break;case vi.CONTENT_PAUSED:this.displaySpinner(!1),this.setPlayState(t.PlaybackState.PAUSED);break;case vi.AD_BREAK_START:this.displaySpinner(!1),this.ui.hideClickCatcher(!0),this.ui.hidePanelsForAdPlay(!0),this.setPlayState(t.PlaybackState.PLAYING),this.ui.setVideoMode(gi.AD);break;case vi.AD_PAUSED:this.setPlayState(t.PlaybackState.PAUSED),this.ui.forceControlsVisible(!0);break;case vi.AD_PLAYING:this.displaySpinner(!1),this.setPlayState(t.PlaybackState.PLAYING),this.ui.forceControlsVisible(!1);break;case vi.CONTENT_START:case vi.CONTENT_SEGMENT_START:this.ui.setVideoMode(gi.CONTENT),this.ccAvail&&this.ui.enableControl(this.controlNames.CC_TOGGLE);break;case vi.AD_ERROR:case vi.AD_STALLED:this.adErrorOccurred=!0;break;case vi.AD_BREAK_COMPLETE:case vi.CONTENT_SEGMENT_END:case vi.RESOURCE_INTERRUPTED:case vi.CONTENT_COMPLETE:this.ui.resetProgress(),this.ui.setVideoMode(gi.IDLE),i===vi.AD_BREAK_COMPLETE?this.ui.hidePanelsForAdPlay(!1):this.ui.disableControl(this.controlNames.CC_TOGGLE),i!=vi.RESOURCE_INTERRUPTED&&i!==vi.CONTENT_COMPLETE||(this.ccAvail=!1);break;case vi.READY:case vi.LANGUAGE_CHANGE:this.ui.updateText();break;case vi.STREAM_TYPE_CHANGE:this.setTransportType(r.value);break;case vi.CONTENT_IS_LIVE_CHANGED:this.setIsPlayingLive(r.value)}},i.prototype.listNotificationInterests=function(){return[vi.AD_CUEPOINTS_AVAILABLE,vi.ENABLE_UI,vi.DISABLE_UI,vi.SEEK_REDIRECT_START,vi.SEEK_REDIRECT_COMPLETE,vi.SEEK,vi.SEEK_FORWARD,vi.SEEK_BACK,vi.CONTENT_SEEKED,vi.CONTENT_BUFFERING,vi.CONTENT_PLAYING,vi.CONTENT_PAUSED,vi.AD_PLAYING,vi.AD_PAUSED,vi.AD_ERROR,vi.AD_STALLED,vi.FULLSCREEN_AVAILABLE,vi.FULLSCREEN_CHANGE,vi.PRESENTATION_SIZE_CHANGE,vi.RESOURCE_INTERRUPTED,vi.AD_BREAK_START,vi.CONTENT_START,vi.CONTENT_COMPLETE,vi.CONTENT_SEGMENT_START,vi.AD_BREAK_COMPLETE,vi.CONTENT_SEGMENT_END,vi.AD_TIME_UPDATE,vi.CONTENT_TIME_UPDATE,vi.TEXT_TRACK_AVAILABLE,vi.TEXT_TRACK_DISPLAY_MODE_CHANGE,vi.VIDEO_LOAD_START,vi.VIDEO_LOAD_COMPLETE,vi.LANGUAGE_CHANGE,vi.READY,vi.STREAM_TYPE_CHANGE,vi.CONTENT_IS_LIVE_CHANGED]},i.prototype.setPlayState=function(e){switch(e){case"waiting":e="buffering";break;case"stopped":e="idle"}this.ui.setPlayState(e)},Object.defineProperty(i.prototype,"ui",{get:function(){return this.viewControl},enumerable:!1,configurable:!0}),i.prototype.hVisibilityEvent=function(e){if(!this.getModel(yi.PresentationState).isCurrentVideoAd){var t=this.enums.ControlEvent,i=null;switch(e.type){case t.BEFORE_CONTROLS_VISIBLE:this.updateControlsVisible(!0),i=vi.BEFORE_CONTROLS_VISIBLE;break;case t.CONTROLS_VISIBLE:i=vi.CONTROLS_VISIBLE;break;case t.BEFORE_CONTROLS_HIDDEN:i=vi.BEFORE_CONTROLS_HIDDEN;break;case t.CONTROLS_HIDDEN:this.updateControlsVisible(!1),i=vi.CONTROLS_HIDDEN}i&&this.sendNotification(i)}},i.prototype.hActionEvent=function(e){var t=e.data.action,i=null,r=null;switch(t){case"mute":i=vi.MUTE;break;case"unmute":i=vi.UNMUTE;break;case"volume":i=vi.VOLUME_CHANGE,r={value:e.data.value};break;case"pause":i=vi.PAUSE;break;case"stop":i=vi.STOP;break;case"play":i=vi.PLAY;break;case"posterClick":i=vi.PLAY_ON_USER_GESTURE;break;case"ccEnabled":case"ccDisabled":var n="ccEnabled"===t;this.activateCaptions(n);break;case"seek":i=vi.SEEK,r={value:e.data.value};break;case"seekForward":i=vi.SEEK_FORWARD,r={value:e.data.value||this.increment};break;case"seekBack":i=vi.SEEK_BACK,r={value:e.data.value||this.increment};break;case"enterFullscreen":i=vi.ENTER_FULLSCREEN_REQUEST;break;case"exitFullscreen":i=vi.EXIT_FULLSCREEN_REQUEST;break;case"goLive":i=vi.SEEK_TO_LIVE;break;case"settings":i=vi.USER_SETTINGS_REQUEST}i&&this.sendNotification(i,r,mi.UI)},i.prototype.doCaptionCheckOnControlVisChange=function(){this.ui.isStandardView()&&this.ccAvail&&this.sendNotification(vi.TT_OFFSET_REQUEST,{controlsVisible:this.controlsVisible},mi.UI)},i.prototype.updateControlsVisible=function(e){this.controlsVisible=e,this.doCaptionCheckOnControlVisChange()},i.prototype.hGestureEvent=function(e){if(!this.getModel(yi.PresentationState).isCurrentVideoAd){var t=e.type===this.enums.ControlEvent.MOUSE_ENTER_PRESENTATION?vi.MOUSE_ENTER_PRESENTATION:vi.MOUSE_LEAVE_PRESENTATION;this.sendNotification(t,null,mi.UI)}},i.prototype.activateCaptions=function(e){this.ccEnabled=e,this.sendNotification(vi.SWITCH_TEXT_MODE,{value:e},mi.UI)},i.prototype.isFullScreenAvailable=function(){return this.fsMediator&&this.fsMediator.isFullScreenPermitted()},Object.defineProperty(i.prototype,"fsMediator",{get:function(){return this.fsm||(this.fsm=this.facade.retrieveMediator(hi.FULLSCREEN)),this.fsm},enumerable:!1,configurable:!0}),i.prototype.init=function(){for(var e=this,i=this.enums.ControlEvent,r=this.controlNames,n=function(t){return e.hVisibilityEvent(t)},a=function(t){return e.hGestureEvent(t)},o=[i.BEFORE_CONTROLS_VISIBLE,i.CONTROLS_VISIBLE,i.BEFORE_CONTROLS_HIDDEN,i.CONTROLS_HIDDEN],s=o.length;s--;)this.ui.on(o[s],n);this.ui.on(i.ACTION,function(t){return e.hActionEvent(t)}),this.ui.on(i.MOUSE_ENTER_PRESENTATION,a),this.ui.on(i.MOUSE_LEAVE_PRESENTATION,a),this.ui.disableControl(r.CC_TOGGLE),this.disableFullscreen(),this.ui.setVolume(.35),this.ui.setVideoMode(gi.IDLE),this.log(t.LogLevel.INFO,"UI created.")},i}(Si);!function(e){e.ABR_QUALITY_LOADED="abrQualityLoaded",e.ABR_QUALITY_SWITCHED="abrQualitySwitched",e.ABR_QUALITY_SWITCHING="abrQualitySwitching",e.ABR_CONSTRAINTS_CHANGE="maxLevelChanged",e.FRAGMENT_LOADED="fragmentLoaded",e.FRAGMENT_PARSED="fragmentParsed",e.MANIFEST_LOADED="manifestLoaded",e.MANIFEST_PARSED="manifestParsed",e.LOADED_METADATA="loadedMetdata",e.DRM_KEYSYSTEM_CREATED="drmKeySystemCreated",e.AUDIO_TRACK_UPDATED="audioTrackUpdated",e.AUDIO_TRACK_CHANGE="audioTrackChange",e.MULTI_CDN="multiCdn",e.ERROR="adapterError"}(Ti||(Ti={}));var _i,Pi,Ii,Ri=function(e){function i(t){var i=e.call(this)||this;i.enableLogger=!1,i.networkErrorRetryCount=0,i.mediaErrorRetryCount=0,i.minAutoLevel=NaN,i.maxAutoLevel=NaN,i.multiCdnHeaderPresent=!0,i.pIsLiveStream=!1,i.lowLevelDvrDetails=null,i.liveStreamInfoVO={isPlayingLive:!1,liveEdgeOffset:NaN,dvrWindowSize:NaN,safeSeekingDuration:NaN,safeSeekingTime:NaN,relativeTime:NaN,relativeDuration:NaN,absoluteStart:NaN,absoluteTime:NaN,absoluteDuration:NaN},i.blockTimeUpdateEvent=!1,i.loaded=!1,i.pauseTime=NaN,i.videoSurfaceEventHandler=function(e){return i.onVideoSurfaceEvent(e)},i.videoEventMap=i.enumToEventMap(ot,i.videoSurfaceEventHandler),i.textEventMap=i.enumToEventMap(nt,i.videoSurfaceEventHandler),i.config=t,i.playback=i.config.resource.playback,i.logger=t.logger,i.mediaUrl=t.resource.location.mediaUrl;var r=i.config.playerOptions.overrides;return C.isEmpty(r.enableLowLevelStreamingLogs)||(i.enableLogger=r.enableLowLevelStreamingLogs),i.videoSurface=i.createVideoSurface(),i.metadataSurface=i.createMetadataSurface(),i}return s(i,e),i.prototype.createVideoSurface=function(){return new Ut(this.config)},i.prototype.createMetadataSurface=function(){var e=this;return new Bt(this.config,function(t){e.emit(nt.METADATA_CUEPOINT,t)})},i.prototype.initialize=function(){this.addEvents(this.videoSurface,this.videoEventMap),this.addEvents(this.videoSurface,this.textEventMap)},i.prototype.destroy=function(){var t;return this.removeEvents(this.videoSurface,this.videoEventMap),this.removeEvents(this.videoSurface,this.textEventMap),this.videoSurface.destroy(),this.videoSurface=null,null===(t=this.metadataSurface)||void 0===t||t.destroy(),this.metadataSurface=null,this.logger=null,this.config=null,this.playback=null,this.liveStreamInfoVO=null,this.lowLevelDvrDetails=null,this.normalizedAudioTracks=null,e.prototype.destroy.call(this),Promise.resolve()},i.prototype.play=function(){var e=this;this.load().then(function(){e.videoSurface.play()})},i.prototype.pause=function(){this.videoSurface.pause()},i.prototype.suspend=function(){},i.prototype.resume=function(){},i.prototype.seek=function(e){this.videoSurface.seek(e)},i.prototype.load=function(){var e=this;if(!0===this.loaded)return Promise.resolve();if(this.pendingLoad)return this.pendingLoad;this.videoSurface.addEvents();var t=this.config.resource.location.textTrackUrl;return C.isEmpty(t)||(this.videoSurface.textTrackSrc=t),this.pendingLoad=this.loadMediaUrl().then(function(){e.loadComplete()}),this.pendingLoad},i.prototype.resize=function(){},i.prototype.clearCue=function(){this.videoSurface.clearCue()},Object.defineProperty(i.prototype,"audioTrack",{set:function(e){this.videoSurface.video.audioTracks[e.index].enabled=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackMode",{set:function(e){this.videoSurface.textTrackMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{set:function(e){var t=this.videoSurface.video.textTracks,i=C.find(t,function(t){return e.language==t.language&&e.kind===t.kind&&e.label===t.label});this.videoSurface.textTrack=i},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bufferLength",{get:function(){return this.videoSurface.bufferLength},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return this.videoSurface.time},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this.videoSurface.duration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLiveStream",{get:function(){return this.pIsLiveStream},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"droppedVideoFrames",{get:function(){return this.videoSurface.metrics.droppedVideoFrames},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"framerate",{get:function(){return this.videoSurface.framerate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffering",{get:function(){return this.videoSurface.buffering},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this.pType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fragmentType",{get:function(){return""},enumerable:!1,configurable:!0}),i.prototype.eventsToPromise=function(e){return C.eventsToPromise([{target:this.videoSurface,events:[e]}],[{target:this.videoSurface,events:[ot.ERROR]},{target:this,events:[Ti.ERROR]}])},i.prototype.loadMediaUrl=function(){var e=this;return this.eventsToPromise(ot.LOADED_METADATA).then(function(){return e.loadedMetadata()})},i.prototype.getStreamMetadata=function(){return{manifest:{mimeType:C.getMimeType(this.mediaUrl)},fragment:{mimeType:this.fragmentType}}},i.prototype.loadedMetadata=function(){var e=this.getStreamMetadata();this.emit(Ti.LOADED_METADATA,e)},i.prototype.loadComplete=function(){this.pendingLoad=null,this.loaded=!0},i.prototype.checkAbrConstraints=function(e){if(this.manifestQualities.length>0){var t=this.getCurrentAbrConstraints(e);this.updateAbrConstraints(t.min,t.max,this.manifestQualities)}},i.prototype.updateAbrConstraints=function(e,t,i){e===this.minAutoLevel&&t===this.maxAutoLevel||(this.minAutoLevel=e,this.maxAutoLevel=t,this.emit(Ti.ABR_CONSTRAINTS_CHANGE,{minIndex:this.minAutoLevel,maxIndex:this.maxAutoLevel,manifestQualities:i}))},i.prototype.getCurrentAbrConstraints=function(e){return{min:e?C.getIndexForBitrate(this.manifestQualities,this.minBitrate,!0):0,max:e}},i.prototype.onVideoSurfaceEvent=function(e){if(e.type===ot.ERROR||e.type===ot.STALLED||e.type===ot.ABORT)this.handleVideoSurfaceError(e);else if(e.type===ot.TIME_UPDATE&&this.blockTimeUpdateEvent)return;this.emit(e.type,e.data)},i.prototype.handleVideoSurfaceError=function(e){var i=this.videoSurface.video.error;i&&i.code===MediaError.MEDIA_ERR_ABORTED&&this.throwError(t.ErrorCode.MEDIA_ABORTED,i,i)},i.prototype.enumToEventMap=function(e,t){var i=this;return C.values(e).map(function(e){return i.mapEvent(e,t)})},i.prototype.mapEvent=function(e,t){return{type:e,callback:t.bind(this)}},i.prototype.addEvents=function(e,t){var i=C.isFunction(e.on)?"on":"addEventListener";t.forEach(function(t){return e[i](t.type,t.callback)})},i.prototype.removeEvents=function(e,t){var i=C.isFunction(e.off)?"off":"removeEventListener";t.forEach(function(t){return e[i](t.type,t.callback)})},i.prototype.throwError=function(e,i,r,n){void 0===n&&(n=!0),this.log(t.LogLevel.ERROR,i),this.emit(Ti.ERROR,{code:e,message:i,data:r,fatal:n})},i.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},i.prototype.getErrorMessage=function(e,t,i){return void 0===i&&(i="n/a"),"".concat(e," fatal: ").concat(t," retry: ").concat(i)},i.prototype.normalizeAudioTracks=function(e,t){return e.map(function(e,i){return{index:i,id:isNaN(e[t.id])?isNaN(e.id)?"":e.id.toString():e[t.id].toString(),type:e[t.type]||e.type||"",lang:e[t.lang]||e.lang||"",codec:e[t.codec]||e.codec||"",label:e[t.label]||e.label||""}}).filter(function(e){var t=e.codec;return""===t||-1!==t.indexOf("mp4a")})},i.prototype.normalizeQuality=function(e,t){return{index:t,bitrate:e.bitrate,height:e.height,width:e.width,codec:e.codec||e.codecs}},i.prototype.mergeStreamingConfigs=function(e,t){var i;return C.isEmpty(null===(i=null==t?void 0:t[this.pType])||void 0===i?void 0:i.config)?e:C.merge(e,t[this.pType].config)},i}(_),ki=function(e){function i(i){var r=e.call(this,i)||this;return r.MAX_BITRATE_CLEAR_VALUE=1e8,r.pType=t.PlaybackAdapterType.TWITCH_LOW_LATENCY,r.twitch=window.IVSPlayer,r.autoMaxBitrate=Number.POSITIVE_INFINITY,r.twitchEventMap=[{type:r.twitch.PlayerState.READY,callback:function(e){return r.onReady(e)}},{type:r.twitch.PlayerEventType.QUALITY_CHANGED,callback:function(e){return r.onQualityChange(e)}},{type:r.twitch.PlayerEventType.ERROR,callback:function(e){return r.onError(e)}},{type:r.twitch.PlayerEventType.AUDIO_BLOCKED,callback:function(e){return r.onError(e)}},{type:r.twitch.PlayerEventType.PLAYBACK_BLOCKED,callback:function(e){return r.onError(e)}}],r.logger.log(t.LogLevel.INFO,"TwitchLowLatencyAdapter created"),r}return s(i,e),i.prototype.initialize=function(){var i;e.prototype.initialize.call(this),this.player=this.twitch.create(),this.player.attachHTMLVideoElement(this.videoSurface.video),this.player.setAutoplay(!1);var r=this.enableLogger?"debug":"error";this.player.setLogLevel(r);var n=(null===(i=this.config.resource.overrides)||void 0===i?void 0:i.twitch)||{},a=!C.isBoolean(n.rebufferToLive)||n.rebufferToLive;this.player.setRebufferToLive(a),this.addEvents(this.player,this.twitchEventMap),!isNaN(this.playback.abr.maxBitrate)&&(this.maxBitrate=this.playback.abr.maxBitrate),!isNaN(this.playback.abr.minBitrate)&&(this.minBitrate=this.playback.abr.minBitrate),this.logger.log(t.LogLevel.INFO,"Twitch Version",this.player.getVersion())},i.prototype.seek=function(e){},i.prototype.destroy=function(){return this.removeEvents(this.player,this.twitchEventMap),this.player.delete(),this.player=null,this.twitch=null,e.prototype.destroy.call(this)},i.prototype.play=function(){this.player.play()},Object.defineProperty(i.prototype,"duration",{get:function(){return this.player.getDuration()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return this.player.getPosition()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoQualitySwitching",{get:function(){return this.player.getAutoSwitchQuality()},set:function(e){this.player.setAutoSwitchQuality(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentIndex",{get:function(){var e=this.player.getQuality();return C.getIndexForBitrate(this.manifestQualities,e.bitrate,!1)},set:function(e){var t=this.player.getQualities();this.player.setQuality(t[e])},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{get:function(){return this.manifestQualities[0].bitrate},set:function(e){this.logger.log(t.LogLevel.INFO,ct.messages.ABR_MIN_BITRATE_RESTRICTION_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{get:function(){var e=isNaN(this.autoMaxBitrate)?this.manifestQualities.length-1:C.getIndexForBitrate(this.manifestQualities,this.autoMaxBitrate,!1);return this.manifestQualities[e].bitrate},set:function(e){this.autoMaxBitrate=isNaN(e)?this.MAX_BITRATE_CLEAR_VALUE:e,this.player.setAutoMaxBitrate(this.autoMaxBitrate)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manifestQualities",{get:function(){return this.player.getQualities().sort(function(e,t){return e.bitrate-t.bitrate}).map(this.normalizeQuality)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveStreamInfo",{get:function(){var e=this.liveStreamInfoVO;return this.pIsLiveStream&&(e.isPlayingLive=!0,e.relativeDuration=this.duration,e.relativeTime=this.time,e.liveEdgeOffset=this.player.getLiveLatency()),e},enumerable:!1,configurable:!0}),i.prototype.onVideoSurfaceEvent=function(t){t.type===ot.DURATION_CHANGE&&(this.pIsLiveStream=this.duration===1/0),e.prototype.onVideoSurfaceEvent.call(this,t)},i.prototype.loadMediaUrl=function(){var e=this;return Promise.resolve().then(function(){e.player.load(e.mediaUrl)})},i.prototype.onReady=function(e){this.emit(Ti.MANIFEST_PARSED,{profile:this.manifestQualities})},i.prototype.onQualityChange=function(e){var t=C.getIndexForBitrate(this.manifestQualities,e.bitrate,!1);this.checkAbrConstraints(C.getIndexForBitrate(this.manifestQualities,this.maxBitrate,!1)),this.emit(Ti.ABR_QUALITY_LOADED,{index:t})},i.prototype.onError=function(e){switch(void 0===e&&(e={}),e.type){case this.twitch.ErrorType.NETWORK_IO:case this.twitch.ErrorType.NETWORK:case this.twitch.ErrorType.NOT_AVAILABLE:this.throwError(t.ErrorCode.TWITCH_NETWORK_ERROR,"".concat(ct.messages.FATAL_PLAYBACK_NETWORK_ERROR," : ").concat(e.message),e);break;case this.twitch.ErrorType.INVALID_DATA:this.throwError(t.ErrorCode.TWITCH_PARSE_ERROR,"".concat(ct.messages.FATAL_PLAYBACK_MEDIA_ERROR," : ").concat(e.message),e);break;case this.twitch.ErrorType.NOT_SUPPORTED:this.throwError(t.ErrorCode.TWITCH_SRC_NOT_SUPPORTED,"".concat(ct.messages.FATAL_PLAYBACK_MEDIA_ERROR," : ").concat(e.message),e);break;default:switch(e.source){case this.twitch.ErrorSource.DECODER:case this.twitch.ErrorSource.RENDERER:case this.twitch.ErrorSource.SEGMENT:this.throwError(t.ErrorCode.TWITCH_MEDIA_ERROR,"".concat(ct.messages.FATAL_PLAYBACK_MEDIA_ERROR," : ").concat(e.message),e);break;default:this.throwError(t.ErrorCode.UNSPECIFIED_TWITCH_ERROR,e.message,e,!1)}}},i}(Ri),Ni=function(){function e(){}return e.warn=function(e){I.deprecated(e)},e.checkEventName=function(t){return/[A-Z]+/.test(t)&&(e.warn("Event name is being forced to lowercase. Please use the avia.PlayerEvent enum instead of a string literal. This check will be removed April 1st, 2022"),t=t.toLowerCase()),t},e.createUi=function(t,i,r,n){e.warn("CVUI is deprecated. Please use the avia-js-ui instead. Access to this feature will be completely removed April 1st, 2022");var a=t.retrieveProxy(zt.PlayerDomProxy),o=n.uiConfig;(r.isIos||r.isAndroid)&&(o||(o={}),o.exclude&&Array.isArray(o.exclude)||(o.exclude=[]),-1==o.exclude.indexOf(i.ControlName.CC_TOGGLE)&&o.exclude.push(i.ControlName.CC_TOGGLE));var s=i.createUi({controlContainer:a.getMain(),panelContainer:a.getElement(fi.PANEL_CONTAINER),zOrigin:a.getSafeZIndex(),systemInfo:r.info,configuration:o||{},omitVolume:!r.isDesktop}),l={ControlName:i.ControlName,ControlEvent:i.ControlEvent,PlayState:i.PlayState,DecoratorName:i.DecoratorName,VideoType:i.VideoType},c=new Ci(hi.UI,s);t.registerMediator(c),c.initialize(l)},e.getModelSnapShot=function(t){e.warn("getModelSnapShot method is deprecated. Access to this property will be completely removed April 1st, 2022");var i=t.getSnapshot();return i.BuildInfo=it,i},Object.defineProperty(e,"xhr",{get:function(){return{performXhr:function(t){e.warn("performXhr method is deprecated. Please use Util.request, or fetch directly. Access to this property will be completely removed April 28th, 2022");var i=t.onComplete;t.onComplete=function(e){i(e),e.target.destroy()},new je(t)}}},enumerable:!1,configurable:!0}),e.setResource=function(t,i){e.warn("The setter for the resource property is deprecated. Please use player.attachResource. Access to this property will be completely removed July 1st, 2022"),t.attachResource(i)},e.createTwitch=function(t){return e.warn("The twitch low latency adapter is deprecated. Please use the Twitch Adapter Plugin. This feature will be completely removed January 1st, 2022"),new ki(t)},e.getAutoplayCapabilities=function(t){return e.warn("The getAutoplayCapabilities function is deprecated. Please use avia.getAutoplayCapabilities. This feature will be completely removed January 1st, 2022"),t.getService(ze.AutoplayCapabilities).detectCapabilities()},e}(),Oi=function(e){function t(t,i){var r=e.call(this)||this;return r.proxyName=null,r.pData=null,r.proxyName=t,r.pData=i||{},r}return s(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.proxyName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.pData},enumerable:!1,configurable:!0}),t.prototype.onRegister=function(){},t.prototype.onRemove=function(){this.pData=null,e.prototype.onRemove.call(this)},t}(bi),Li=((_i={})[t.HookType.EVENT]={multiple:!0},_i[t.HookType.AD_BREAK]={multiple:!1},_i[t.HookType.AD]={multiple:!1},_i),Di=function(e){function t(t){var i=e.call(this,zt.HookProxy,t)||this;return i.hookMap={},i}return s(t,e),t.prototype.onRemove=function(){this.hookMap=null,e.prototype.onRemove.call(this)},t.prototype.registerHook=function(e,t){this.hookMap[e]||(this.hookMap[e]=[]),!1===Li[e].multiple&&this.hookMap[e].length||this.hookMap[e].push(t)},t.prototype.removeHook=function(e,t){this.hookMap[e]&&(this.hookMap[e]=this.hookMap[e].filter(function(e){return e!==t}))},t.prototype.applyHook=function(e,t){return d(this,void 0,void 0,function(){var i,r,n,a,o=this;return p(this,function(s){return(i=this.hookMap[e])&&0!==i.length?(r=!1,n=function(){return r=!0},[2,(a=function(t,s){return void 0===s&&(s=0),d(o,void 0,void 0,function(){var o,l,c;return p(this,function(u){switch(u.label){case 0:if(s>=i.length)return[2,t];if("function"!=typeof(o=i[s]))throw new Wt(e,"Hook must be a valid function");l={type:e,value:t,cancel:n},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o(l)];case 2:return u.sent(),[3,4];case 3:throw c=u.sent(),new Wt(e,c.toString(),c);case 4:return[2,r?null:a(l.value,++s)]}})})})(t)]):[2,t]})})},t}(Oi),Mi=((Pi={})[t.QualityCategory.UHD_8K]=4320,Pi[t.QualityCategory.UHD_4K]=2160,Pi[t.QualityCategory.UHD]=1440,Pi[t.QualityCategory.HD]=720,Pi[t.QualityCategory.SD]=0,Pi),wi=function(){function e(){}return e.getMinAndMaxValuesForCategory=function(e,t){var i=1/0,r=0,n=1/0,a=0;return e.forEach(function(e){e.category.indexOf(t)>=0&&(r=Math.max(r,e.index),i=Math.min(i,e.index),a=Math.max(a,e.bitrate),n=Math.min(n,e.bitrate))}),{maxIndex:r,minIndex:i,minBitrate:n,maxBitrate:a}},e.getQualityCategoryForVideoHeight=function(e){var i=Mi;return e>=i[t.QualityCategory.UHD_8K]?t.QualityCategory.UHD_8K:e>=i[t.QualityCategory.UHD_4K]?t.QualityCategory.UHD_4K:e>=i[t.QualityCategory.UHD]?t.QualityCategory.UHD:e>=i[t.QualityCategory.HD]?t.QualityCategory.HD:t.QualityCategory.SD},e.classFromQualifiedName=function(e){if(!C.isString(e))return e;var t,i,r=ui.getInstance().global,n=e.split("."),a=r,o=n.length;for("window"===n[0]&&(o=(n=n.slice(1)).length),t=0;t<o;t++){if(void 0===a[i=n[t]])return I.error("Util.classFromQualifiedName: '".concat(e,"' is undefined.")),null;a=a[i]}return a},e.serializeConfigSnapshot=function(e,t,i,r){void 0===r&&(r=0);var n=t.currentResource?JSON.parse(JSON.stringify(t.currentResource)):{},a=function(e){var t=typeof e;if(e&&"object"==t){for(var i in e){var r=a(e[i]);"\0"===r?delete e[i]:e[i]=r}return e}return null===e||"number"===t&&isNaN(e)?"\0":e};a(n);var o=JSON.stringify(e,function(e,t){return t instanceof HTMLElement?void 0:t}),s=JSON.parse(o);delete s.dataTransformers,s.container=null;var l={buildInfo:it,playerOptions:s,resource:n,system:i.info};return JSON.stringify(l,null,r)},e.getNativePluginConfig=function(e,t){var i,r,n=ct.nativePluginConfig[e];if(!n)return null;var a=Object.assign({},n),o=(null===(r=null===(i=t.overrides)||void 0===i?void 0:i.dependencies)||void 0===r?void 0:r[e])||a.url;return a.url=o,a},e}(),xi=function(e){function t(t,i){var r=e.call(this,t)||this;return r.pLogger=i,r}return s(t,e),t.prototype.destroy=function(){this.pLogger.destroy(),this.pLogger=null},Object.defineProperty(t.prototype,"logger",{get:function(){return this.pLogger},enumerable:!1,configurable:!0}),t}(oi),Ui=((Ii={})[vi.READY]=t.PlayerEvent.READY,Ii[vi.POSTER_CLICK]=t.PlayerEvent.POSTER_CLICK,Ii[vi.VIDEO_START_ERROR]=t.PlayerEvent.VIDEO_START_ERROR,Ii[vi.VIDEO_PLAYBACK_ERROR]=t.PlayerEvent.VIDEO_PLAYBACK_ERROR,Ii[vi.RESOURCE_ERROR]=t.PlayerEvent.RESOURCE_ERROR,Ii[vi.PLAYLIST_ADVANCED]=t.PlayerEvent.PLAYLIST_ADVANCED,Ii[vi.PLAYLIST_COMPLETE]=t.PlayerEvent.PLAYLIST_COMPLETE,Ii[vi.PLAYLIST_CHANGE]=t.PlayerEvent.PLAYLIST_CHANGE,Ii[vi.PLAYLIST_CLEARED]=t.PlayerEvent.PLAYLIST_CLEARED,Ii[vi.PLAYLIST_CURRENT_RESOURCE_CLEARED]=t.PlayerEvent.PLAYLIST_CURRENT_RESOURCE_CLEARED,Ii[vi.RESOURCE_START]=t.PlayerEvent.RESOURCE_START,Ii[vi.RESOURCE_END]=t.PlayerEvent.RESOURCE_END,Ii[vi.RESOURCE_INTERRUPTED]=t.PlayerEvent.RESOURCE_INTERRUPTED,Ii[vi.PLAYLIST_OUT_OF_RANGE]=t.PlayerEvent.PLAYLIST_OUT_OF_RANGE,Ii[vi.PLAYBACK_SUSPENDED]=t.PlayerEvent.PLAYBACK_SUSPENDED,Ii[vi.PLAYBACK_RESUMED]=t.PlayerEvent.PLAYBACK_RESUMED,Ii[vi.PLAYBACK_STATE_CHANGE]=t.PlayerEvent.PLAYBACK_STATE_CHANGE,Ii[vi.AUDIO_TRACK_INFO_CHANGE]=t.PlayerEvent.AUDIO_TRACK_INFO_CHANGE,Ii[vi.AUDIO_TRACK_CHANGE]=t.PlayerEvent.AUDIO_TRACK_CHANGE,Ii[vi.QUALITY_CHANGE]=t.PlayerEvent.QUALITY_CHANGE,Ii[vi.QUALITY_INFO_CHANGE]=t.PlayerEvent.QUALITY_INFO_CHANGE,Ii[vi.CDN_CHANGE]=t.PlayerEvent.CDN_CHANGE,Ii[vi.CONTENT_START]=t.PlayerEvent.CONTENT_START,Ii[vi.CONTENT_DURATION_AVAILABLE]=t.PlayerEvent.CONTENT_DURATION_AVAILABLE,Ii[vi.CONTENT_SEGMENT_START]=t.PlayerEvent.CONTENT_SEGMENT_START,Ii[vi.CONTENT_TIME_UPDATE]=t.PlayerEvent.CONTENT_PROGRESS,Ii[vi.CONTENT_BUFFERING]=t.PlayerEvent.RESOURCE_BUFFERING,Ii[vi.CONTENT_PLAYING]=t.PlayerEvent.CONTENT_PLAYING,Ii[vi.CONTENT_PAUSED]=t.PlayerEvent.CONTENT_PAUSED,Ii[vi.CONTENT_SEEKING]=t.PlayerEvent.SEEK_START,Ii[vi.CONTENT_SEEKED]=t.PlayerEvent.SEEK_COMPLETE,Ii[vi.CONTENT_IS_LIVE_CHANGED]=t.PlayerEvent.CONTENT_IS_PLAYING_LIVE,Ii[vi.STREAM_TYPE_CHANGE]=t.PlayerEvent.STREAM_TYPE_CHANGE,Ii[vi.STREAM_METADATA]=t.PlayerEvent.STREAM_METADATA,Ii[vi.STREAM_ID_AVAILABLE]=t.PlayerEvent.STREAM_ID_AVAILABLE,Ii[vi.SEEK_REDIRECT_START]=t.PlayerEvent.SEEK_REDIRECT_START,Ii[vi.SEEK_REDIRECT_COMPLETE]=t.PlayerEvent.SEEK_REDIRECT_COMPLETE,Ii[vi.CONTENT_SEGMENT_END]=t.PlayerEvent.CONTENT_SEGMENT_END,Ii[vi.CONTENT_COMPLETE]=t.PlayerEvent.CONTENT_COMPLETE,Ii[vi.DRM_KEYSYSTEM_CREATED]=t.PlayerEvent.DRM_KEYSYSTEM_CREATED,Ii[vi.METADATA_CUEPOINT]=t.PlayerEvent.METADATA_CUEPOINT,Ii[vi.TEXT_CUEPOINT]=t.PlayerEvent.TEXT_CUEPOINT,Ii[vi.TEXT_TRACK_DISPLAY_MODE_CHANGE]=t.PlayerEvent.TEXT_TRACK_DISPLAY_MODE_CHANGE,Ii[vi.TEXT_TRACK_CHANGE]=t.PlayerEvent.TEXT_TRACK_CHANGE,Ii[vi.TEXT_TRACK_INFO_CHANGE]=t.PlayerEvent.TEXT_TRACK_INFO_CHANGE,Ii[vi.TEXT_TRACK_AVAILABLE]=t.PlayerEvent.TEXT_TRACK_AVAILABLE,Ii[vi.VIDEO_LOAD_COMPLETE]=t.PlayerEvent.VIDEO_LOAD_COMPLETE,Ii[vi.THUMBNAIL_TRACK_AVAILABLE]=t.PlayerEvent.THUMBNAIL_TRACK_AVAILABLE,Ii[vi.AD_SEGMENT_START]=t.PlayerEvent.AD_SEGMENT_START,Ii[vi.AD_SEGMENT_END]=t.PlayerEvent.AD_SEGMENT_END,Ii[vi.AD_CUEPOINTS_AVAILABLE]=t.PlayerEvent.AD_CUEPOINTS_AVAILABLE,Ii[vi.AD_BREAK_START]=t.PlayerEvent.AD_BREAK_START,Ii[vi.AD_BREAK_METADATA]=t.PlayerEvent.AD_BREAK_METADATA,Ii[vi.AD_START]=t.PlayerEvent.AD_START,Ii[vi.AD_PAUSED]=t.PlayerEvent.AD_PAUSED,Ii[vi.AD_PLAYING]=t.PlayerEvent.AD_PLAYING,Ii[vi.AD_TIME_UPDATE]=t.PlayerEvent.AD_PROGRESS,Ii[vi.AD_FIRST_QUARTILE]=t.PlayerEvent.AD_FIRST_QUARTILE,Ii[vi.AD_MIDPOINT]=t.PlayerEvent.AD_MIDPOINT,Ii[vi.AD_THIRD_QUARTILE]=t.PlayerEvent.AD_THIRD_QUARTILE,Ii[vi.AD_COMPLETE]=t.PlayerEvent.AD_COMPLETE,Ii[vi.AD_BREAK_COMPLETE]=t.PlayerEvent.AD_BREAK_COMPLETE,Ii[vi.AD_ERROR]=t.PlayerEvent.AD_ERROR,Ii[vi.AD_STALLED]=t.PlayerEvent.AD_STALLED,Ii[vi.AD_BREAK_DISCARDED]=t.PlayerEvent.AD_BREAK_DISCARDED,Ii[vi.AD_BUFFERING]=t.PlayerEvent.RESOURCE_BUFFERING,Ii[vi.AD_CLICK]=t.PlayerEvent.AD_CLICK,Ii[vi.AD_SKIPPED]=t.PlayerEvent.AD_SKIPPED,Ii[vi.USER_PAUSE]=t.PlayerEvent.USER_PAUSE,Ii[vi.BEFORE_CONTROLS_VISIBLE]=t.PlayerEvent.BEFORE_CONTROLS_VISIBLE,Ii[vi.BEFORE_CONTROLS_HIDDEN]=t.PlayerEvent.BEFORE_CONTROLS_HIDDEN,Ii[vi.CONTROLS_VISIBLE]=t.PlayerEvent.CONTROLS_VISIBLE,Ii[vi.CONTROLS_HIDDEN]=t.PlayerEvent.CONTROLS_HIDDEN,Ii[vi.USER_SETTINGS_REQUEST]=t.PlayerEvent.USER_SETTINGS,Ii[vi.LIVE_PRESENTATION_STOPPED]=t.PlayerEvent.LIVE_PRESENTATION_STOPPED,Ii[vi.PRESENTATION_SIZE_CHANGE]=t.PlayerEvent.PRESENTATION_SIZE_CHANGE,Ii[vi.FULLSCREEN_ENTER]=t.PlayerEvent.FULLSCREEN_ENTER,Ii[vi.FULLSCREEN_EXIT]=t.PlayerEvent.FULLSCREEN_EXIT,Ii[vi.MOUSE_ENTER_PRESENTATION]=t.PlayerEvent.MOUSE_ENTER_PRESENTATION,Ii[vi.MOUSE_LEAVE_PRESENTATION]=t.PlayerEvent.MOUSE_LEAVE_PRESENTATION,Ii[vi.LANGUAGE_CHANGE]=t.PlayerEvent.LANGUAGE_CHANGE,Ii[vi.USER_KEYBOARD_COMMAND]=t.PlayerEvent.USER_KEYBOARD_COMMAND,Ii[vi.HOTKEY_ACTION]=t.PlayerEvent.HOTKEY_ACTION,Ii[vi.AUTOPLAY_BLOCKED]=t.PlayerEvent.AUTOPLAY_BLOCKED,Ii[vi.VOLUME_CHANGE]=t.PlayerEvent.VOLUME_CHANGE,Ii[vi.MUTE]=t.PlayerEvent.MUTE_CHANGE,Ii[vi.UNMUTE]=t.PlayerEvent.MUTE_CHANGE,Ii),Bi=function(e){function i(t,i){var r=e.call(this,t)||this;return r.app=i,r}return s(i,e),i.prototype.setFullscreenElement=function(e){this.facade.retrieveMediator(hi.FULLSCREEN).fullscreenElement=e},i.prototype.getFullscreenElement=function(){return this.facade.retrieveMediator(hi.FULLSCREEN).fullscreenElement},i.prototype.onRemove=function(){this.app=null,e.prototype.onRemove.call(this)},i.prototype.getAppApi=function(){return this.app.getApi()},i.prototype.loadNativePlugin=function(e,t){var i=ct.nativePluginConfig[e];if(!i)return null;t&&(i.url=t);var r=this.facade.retrieveMediator(hi.PLUGIN_MEDIATOR);return null==r?void 0:r.loadPlugin(i)},i.prototype.getSnapshot=function(){return this.getProxy(zt.ModelCollectionProxy).collection.getSnapshot()},i.prototype.getConfigAsJson=function(e){var t=this.getProxy(zt.ModelCollectionProxy).getModel(yi.PlayerOptions).data,i=this.getProxy(zt.Playlist),r=this.facade.retrieveService(ze.System);return wi.serializeConfigSnapshot(t,i,r,e)},i.prototype.validateSeek=function(e,i){if(isNaN(e))return this.log(t.LogLevel.WARN,"Invalid seek() time [".concat(e,"] supplied")),null;var r=this.getModel(yi.PresentationState),n=this.getProxy(zt.ContentPlaybackStateProxy),a=n&&n.model.streamType===t.StreamType.LIVE;return!r||!n||r.isCurrentVideoAd||a?(this.log(t.LogLevel.WARN,"seek() may not be called in the current context"),null):C.clampValue(e,0,i)},i.prototype.isPlaybackSuspended=function(){return this.getModel(yi.PresentationState).suspended},i.prototype.getAutoplayCapabilities=function(){return Ni.getAutoplayCapabilities(this)},i.prototype.getContainerRect=function(){var e=this.getProxy(zt.PlayerDomProxy);return e?e.getPresentationRect():null},i.prototype.attachResource=function(e,i){var r,n=this;return i||null===(r=this.getProxy(zt.Playlist))||void 0===r||r.softClear(),this.stopPresentation().then(function(){return null==i||i(),n.app.sendAsyncNotification({name:vi.PREP_RESOURCE_COLLECTION,body:{resource:e,start:!0}},[t.PlayerEvent.RESOURCE_START],[t.PlayerEvent.RESOURCE_ERROR])}).then(function(){return n.getCurrentResource()})},i.prototype.getCurrentResource=function(){var e;return(null===(e=this.getProxy(zt.ResourceProxy))||void 0===e?void 0:e.resource)||null},i.prototype.killCurrentResource=function(){var e=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR);return this.log(t.LogLevel.INFO,"Killing current resource"),Promise.resolve().then(function(){return null==e?void 0:e.close()}).catch(function(e){I.error(e)})},i.prototype.stopPresentation=function(){var e=this.getProxy(zt.ContentPlaybackStateProxy);if(!(null==e?void 0:e.model))return Promise.resolve();var i={name:vi.STOP,type:mi.EXTERNAL};return this.app.sendAsyncNotification(i,[t.PlayerEvent.RESOURCE_INTERRUPTED,t.PlayerEvent.RESOURCE_END])},i.prototype.skipAd=function(){this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR).skipAd()},i.prototype.getPlugin=function(e){var t=this.facade.retrieveMediator(hi.PLUGIN_MEDIATOR);return t?t.getPlugin(e):null},i.prototype.dispatchPluginEvent=function(e){this.app.sendEvent(t.PlayerEvent.PLUGIN_EVENT,e)},i.prototype.prepForPlayerRemoval=function(){var e=this.facade.retrieveMediator(hi.UI);e&&(e.killUi(),this.log(t.LogLevel.INFO,"UI layer destroyed"))},i.prototype.getMuteState=function(){var e=this.getModel(yi.PresentationState);return e?e.isMuted:null},i.prototype.getVolume=function(){var e=this.getModel(yi.PresentationState);return e?e.volume:NaN},i.prototype.getDimensions=function(){var e=this.getProxy(zt.PlayerDomProxy);return e?e.getDimensions():null},i.prototype.getAdBreakTimes=function(){var e=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR);return e?e.getAdBreakTimes():null},i.prototype.grabFrame=function(){var e=this.getProxy(zt.PlayerDomProxy),t=e&&e.getVideo();if(!e||!t)return null;var i,r,n,a=document.createElement("canvas");i=a.getContext("2d");var o=a.width=t.videoWidth,s=a.height=t.videoHeight;return i.drawImage(t,0,0,o,s),r=a.toDataURL(),(n=document.createElement("img")).setAttribute("src",r),n},i.prototype.listNotificationInterests=function(){return[vi.APP_EVENT]},i.prototype.sendErrorEvent=function(e){this.app.sendErrorEvent(e)},i.prototype.handleNotification=function(e){var t=e.body,i=Ui[t.notificationName]||t.type;e.name===vi.APP_EVENT&&i&&this.app.sendEvent(i,t.data)},i.prototype.onRegister=function(){e.prototype.onRegister.call(this)},i}(Si),Vi=function(e){function t(t){var i=e.call(this,t||{})||this;return i.pAppId=t.id||C.uid8(),i.pFacade=ai.createFacade(i.pAppId,t.commandMap||null),i}return s(t,e),t.prototype.destroy=function(){this.mdlCollProxy=null,this.pFacade=null,e.prototype.destroy.call(this),ai.removeCore(this.pAppId)},Object.defineProperty(t.prototype,"appId",{get:function(){return this.pAppId},enumerable:!1,configurable:!0}),t.prototype.sendNotification=function(e,t,i){this.pFacade.sendNotification(e,t,i)},t.prototype.createLoggingService=function(e){var t=this,i=new I({logLevel:e,id:this.appId,onLogEvent:function(e){return t.sendEvent(e.type,e.data)}});this.pFacade.registerService(new xi(ze.Logging,i))},t.prototype.registerGlobalServices=function(e){var t=this.pFacade;for(var i in e)t.registerService(e[i])},Object.defineProperty(t.prototype,"facade",{get:function(){return this.pFacade},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelCollectionProxy",{get:function(){return this.mdlCollProxy||(this.mdlCollProxy=this.facade.retrieveProxy(zt.ModelCollectionProxy)),this.mdlCollProxy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appMediator",{get:function(){return this.pFacade.retrieveMediator(hi.APPLICATION)},enumerable:!1,configurable:!0}),t.prototype.createApplicationMediator=function(e){var t=new Bi(e,this);this.pFacade.registerMediator(t)},t}(_);function Fi(){return function(e,t,i){C.isObject(e.apiMethods)||(e.apiMethods={}),e.apiMethods[t]=i.value}}function Hi(e){return void 0===e&&(e=!1),function(t,i,r){C.isObject(t.apiAccessors)||(t.apiAccessors={});var n={get:r.get,set:e?void 0:r.set||void 0};t.apiAccessors[i]=n}}function Ki(e,t){var i=function(i){e[i]=function(){var e=Array.prototype.slice.call(arguments);return!!t&&!!t.apiMethods&&!!t.apiMethods[i]&&t.apiMethods[i].apply(t,e)||null}};for(var r in t.apiMethods)i(r);var n=function(i){var r=t.apiAccessors[i],n={};r.get&&(n.get=function(){return t[i]}),r.set&&(n.set=function(e){t[i]=e}),Object.defineProperty(e,i,n)};for(var a in t.apiAccessors)n(a);return e}var Gi,ji,Wi=function(e){function t(){return e.call(this)||this}return s(t,e),Object.defineProperty(t.prototype,"logger",{get:function(){return this.facade.logger},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},t}(function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.getModel=function(e){return this.getModelCollection().getModel(e)},t.prototype.getProxy=function(e){return this.facade?this.facade.retrieveProxy(e):null},t.prototype.getService=function(e){return this.facade?this.facade.retrieveService(e):null},t.prototype.getModelCollection=function(){return this.facade?this.facade.retrieveProxy(zt.ModelCollectionProxy):null},t}(bi)),Yi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR),r=this.facade.retrieveProxy(zt.ContentPlaybackStateProxy),n=i.adapter,a=e.body.value;if(r.isAbrSwitchingAvailable)switch(e.name){case vi.SWITCH_BITRATE:var o=C.getIndexForBitrate(r.qualityInfo.qualities,a,!1);this.switchToIndex(o,r,n);break;case vi.SWITCH_QUALITY_CATEGORY:r.userQualityCategory=a,this.switchQualityCategory(r,a,n);break;case vi.AUTO_QUALITY_SWITCHING:n.autoQualitySwitching=a,r.qualitySwitchingMode=this.getAbrMode(a);break;case vi.MIN_BITRATE:n.minBitrate=a;break;case vi.MAX_BITRATE:n.maxBitrate=a}else r.qualitySwitchingMode=t.QualityMode.UNAVAILABLE},i.prototype.switchToIndex=function(e,i,r){var n=i.minIndex,a=i.maxIndex;C.inRange(e,n,a)?(r.autoQualitySwitching=!1,i.qualitySwitchingMode=this.getAbrMode(!1),r.currentIndex=e):this.logger.log(t.LogLevel.WARN,e>=a?ct.messages.ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS:ct.messages.ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS)},i.prototype.switchQualityCategory=function(e,t,i){var r=e.qualityInfo.qualities,n=wi.getMinAndMaxValuesForCategory(r,t),a=n.minBitrate,o=n.maxBitrate,s=n.minIndex;s===n.maxIndex?this.switchToIndex(s,e,i):(i.minBitrate=a,i.maxBitrate=o)},i.prototype.getAbrMode=function(e){return e?t.QualityMode.AUTO:t.QualityMode.MANUAL},i}(Wi),zi=function(e){function t(){var t=e.call(this)||this;return t.subCommands=null,t.subCommands=[],t.initializeMacroCommand(),t}return s(t,e),t.prototype.addSubCommand=function(e){this.subCommands.push(e)},t.prototype.execute=function(e){for(var t;this.subCommands.length>0;)(t=new(this.subCommands.shift())).initializeNotifier(this.multiCoreKey),t.execute(e)},t}(bi),$i=function(e){function i(i,r){var n=e.call(this,i,{activeState:t.ActiveState.INACTIVE})||this;return n.mouseDown=!1,n.mouseOver=!1,n.idleDelay=3e3,n.idleEvents=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","touchstart","MSPointerMove","MSPointerDown","pointermove","pointerdown"],n.container=r.container,n.document=r.document,n.idleDelay=r.idleDelay,n}return s(i,e),i.prototype.onRegister=function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.reset=this.reset.bind(this),this.idle=this.idle.bind(this),this.container.addEventListener("mouseenter",this.onMouseEnter),this.container.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("mousedown",this.onMouseDown),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("keydown",this.onKeyDown)},i.prototype.onRemove=function(){this.container.removeEventListener("mouseenter",this.onMouseEnter),this.container.removeEventListener("mouseleave",this.onMouseLeave),this.container.removeEventListener("mousedown",this.onMouseDown),this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("keydown",this.onKeyDown),this.stop(),this.container=null,this.document=null,e.prototype.onRemove.call(this)},i.prototype.applyListeners=function(e){var t=this;void 0===e&&(e=!0);var i=e?"add":"remove";this.idleEvents.forEach(function(e){return t.container["".concat(i,"EventListener")](e,t.reset,{passive:!0})})},i.prototype.start=function(){this.stop(),this.applyListeners(),this.timeout=setTimeout(this.idle,this.idleDelay)},i.prototype.stop=function(){clearTimeout(this.timeout),this.applyListeners(!1)},i.prototype.idle=function(){this.activeState=this.mouseOver?t.ActiveState.IDLE:t.ActiveState.INACTIVE},i.prototype.reset=function(){this.activeState=t.ActiveState.ACTIVE,this.start()},i.prototype.onMouseEnter=function(){this.reset(),this.mouseOver=!0,this.activeState=t.ActiveState.ACTIVE,this.start()},i.prototype.onMouseLeave=function(){this.reset(),this.mouseOver=!1,this.activeState=t.ActiveState.INACTIVE},i.prototype.onMouseDown=function(){this.mouseDown=!0},i.prototype.onMouseUp=function(){this.mouseDown&&(this.mouseDown=!1,this.start())},i.prototype.onKeyDown=function(e){var i=this,r=e.key,n=e.keyCode;"Tab"!=r&&9!=n||setTimeout(function(){var e=i.document.activeElement,r=i.container==e||i.container.contains(e);r&&i.stop(),i.activeState=r?t.ActiveState.ACTIVE:t.ActiveState.INACTIVE},0)},Object.defineProperty(i.prototype,"activeState",{get:function(){return this.data.activeState},set:function(e){this.mouseDown&&(e=t.ActiveState.ACTIVE),e!=this.data.activeState&&(this.data.activeState=e,this.sendNotification(vi.APP_EVENT,{type:t.PlayerEvent.ACTIVE_CHANGE,data:{value:e}}))},enumerable:!1,configurable:!0}),i}(Oi),qi=function(){function e(e,t){this.document=t,this.main=e}return e.createVideoElement=function(){var e=document.createElement("video");return e.style.height="100%",e.style.width="100%",e.style.backgroundColor="#000",e.dataset.elementId=C.uid8(),e},e.prototype.destroy=function(){this.main=null,this.document=null},e.prototype.create=function(t,i){var r,n,a,o=this,s=((r={})[fi.MAIN_CONTAINER]=this.main,r),l=this.main,c={position:"absolute",width:"100%",height:"100%",padding:0,margin:0,overflow:"hidden"},u=[fi.AD_CONTAINER,fi.PANEL_CONTAINER,fi.CC_CONTAINER,fi.VIDEO_CONTAINER],d=l.style;d.position=d.position||"relative",d.padding=d.padding||"0",d.margin=d.margin||"0",d.width=d.width||"100%",d.height=d.height||"100%",d.backgroundColor=d.backgroundColor||"#000",d.overflow=d.overflow||"hidden",l.classList.add("cvp-container"),l.classList.add("avia-container");var p=l.hasChildNodes()?l.firstChild:null;if(u.forEach(function(e){if(!C.includes(t,e)){var i=o.div(e,c);s[e]=i,p?l.insertBefore(i,p):l.appendChild(i),p=i}}),!1!==(null===(a=i.overrides)||void 0===a?void 0:a.reuseVideoElement)){var h=e.createVideoElement();s[fi.VIDEO_CONTAINER].appendChild(h),s[fi.VIDEO_EL]=h}return s[fi.AD_CLICK_EL]=this.createAdClickEl(),l.appendChild(s[fi.AD_CLICK_EL]),(n={})[fi.MAIN_CONTAINER]=s[fi.MAIN_CONTAINER],n[fi.VIDEO_EL]=s[fi.VIDEO_EL],n[fi.VIDEO_CONTAINER]=s[fi.VIDEO_CONTAINER],n[fi.CC_CONTAINER]=s[fi.CC_CONTAINER],n[fi.AD_CONTAINER]=s[fi.AD_CONTAINER],n[fi.AD_CLICK_EL]=s[fi.AD_CLICK_EL],n[fi.PANEL_CONTAINER]=s[fi.PANEL_CONTAINER],n},e.prototype.createAdClickEl=function(){var e=this.div("adClickEl",{display:"none",padding:"4px 8px",fontSize:"12px",background:"#dedede",lineHeight:"14px",color:"#000",position:"absolute",right:"2px",top:"2px",textAlign:"center"});return e.innerHTML="Learn More",e},e.prototype.div=function(e,t){var i=this.document.createElement("div");return i.setAttribute("data-role",e),C.assign(i.style,t),i},e}(),Qi=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i=e.body.playerOptions.container,r=this.facade.retrieveService(ze.System),n=this.getModel(yi.PlayerOptions);if(!r.isWebMaf&&r.global&&r.document&&i){var a="string"==typeof i?r.document.querySelector(i):i,o=[];n.useNativeControls&&(o=[fi.CC_CONTAINER,fi.PANEL_CONTAINER]);var s=new qi(a,r.document),l=s.create(o,n),c=this.facade.retrieveProxy(zt.PlayerDomProxy);c.setModel(l),s.destroy(),c.showAdContainer(!1),n.useNativeControls&&c.setVideoAttribute("controls",""),!1!==n.playsInline&&c.setVideoAttribute("playsinline",""),c.setVideoAttribute("data-player-id",this.facade.appId),this.facade.registerProxy(new $i(zt.ActivityProxy,{container:a,document:r.document,idleDelay:n.idleDelay})),this.log(t.LogLevel.INFO,"Player DOM created.")}},i}(Wi),Xi=function(e){function t(t){var i=e.call(this,zt.AdapterProxy,t)||this;return i.adapterMap={},i}return s(t,e),t.prototype.onRemove=function(){this.adapterMap=null,e.prototype.onRemove.call(this)},t.prototype.registerAdapter=function(e){var t=e.id;this.adapterMap[t]=e},t.prototype.retrieveAdapter=function(e){return this.adapterMap[e]},t.prototype.removeAdapter=function(e){delete this.adapterMap[e]},t.prototype.getAdaptersByRole=function(e){return C.values(this.adapterMap).filter(function(t){return C.includes(t.role,e)})},t.prototype.createContext=function(e,t){var i=this.facade.retrieveMediator(hi.PLUGIN_MEDIATOR).createPluginServices(),r=i.dom,n=i.system,a=this.facade.retrieveProxy(zt.ModelCollectionProxy).getModel(yi.PresentationState),o=this.facade.retrieveProxy(zt.TextTrackProxy),s=this.facade.retrieveProxy(zt.PerformanceProxy);return Object.assign(i,{resource:e,video:n.isWebMaf?n.webMafPlayer:r.video,container:r.main,autoplay:a.isAutoplay,muted:a.isMuteAtPlayStart,performanceSettings:s,textTrackSettings:o,getDelegate:t})},t.prototype.createAdapter=function(e,t,i){var r;return d(this,void 0,void 0,function(){var n,a,o,s,l,c,u,d,h,f,y;return p(this,function(p){switch(p.label){case 0:n=this.createContext(t,i),a=this.getAdaptersByRole(e),o=(null===(r=n.resource[e])||void 0===r?void 0:r.adapter)||{},s=o.id,l=o.options,c=void 0===l?{}:l,u=s?a.filter(function(e){return e.id===s}):a,d=0,h=u,p.label=1;case 1:return d<h.length?[4,(f=h[d]).factory(n,C.merge({},f.options,c))]:[3,4];case 2:if(y=p.sent())return[2,y];p.label=3;case 3:return d++,[3,1];case 4:throw new Error("Could not find adapter for role: ".concat(e))}})})},t}(Oi),Ji=function(e){function i(t,r){var n=e.call(this,t,{})||this;return n.pLocalizationData=[],n.pLocale={},n.pLanguage=r,n.registerLocalizationData(i.LocalizationData),n}return s(i,e),i.load=function(e){return null==this.pExternalData[e]&&(this.pExternalData[e]=Ye({url:e})),this.pExternalData[e]},i.prototype.onRemove=function(){this.pLocale=null,this.pLocalizationData=null,this.pLanguageTag=null,this.pLanguage=null},i.prototype.getApi=function(){return Ki({},this)},Object.defineProperty(i.prototype,"defaultLanguage",{get:function(){return navigator&&navigator.language?navigator.language:"en"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"language",{get:function(){return this.pLanguage||this.defaultLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageTag",{get:function(){return this.pLanguageTag},enumerable:!1,configurable:!0}),i.prototype.changeLanguage=function(e){var r=this;void 0===e&&(e=this.defaultLanguage),this.pLanguage=e,this.pLanguageTag=C.parseLanguageTag(this.language);var n=new RegExp("^".concat(this.pLanguageTag.language),"i"),a=this.pLocalizationData.map(function(e){var a=C.entries(e).filter(function(e){return n.test(e[0])}).map(function(e){return"string"==typeof e[1]?function(e){var n=e[0],a=e[1];return i.load(a).then(function(e){return[n,e]}).catch(function(e){return r.facade.log(t.LogLevel.ERROR,"Could not load locale file ".concat(a),e),[n,{}]})}(e):e});return Promise.all(a)});return Promise.all(a).then(function(e){var t=e.map(function(e){return C.fromEntries(e)}),i=C.merge.apply(C,t);return r.pLocale=i})},i.prototype.registerLocalizationData=function(e){C.isEmpty(e)||this.pLocalizationData.push(e)},i.prototype.localize=function(e,t){var i=this.lookup(e);return C.template(i,t)},i.prototype.lookup=function(e,t){var i=this;void 0===t&&(t=this.language);var r=function(t){return(i.pLocale[t]||{})[e]};return r(t)||r(this.pLanguageTag.language)||e},i.pExternalData={},i.LocalizationData={en:(Gi={},Gi[t.LocalizationId.MEDIA_PLAYER]="Media Player",Gi),es:(ji={},ji[t.LocalizationId.MEDIA_PLAYER]="Reproductor multimedia",ji)},u([Hi(!0)],i.prototype,"defaultLanguage",null),u([Hi(!0)],i.prototype,"language",null),u([Fi()],i.prototype,"languageTag",null),u([Fi()],i.prototype,"changeLanguage",null),u([Fi()],i.prototype,"registerLocalizationData",null),u([Fi()],i.prototype,"localize",null),i}(Oi),Zi=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.resettables=[yi.AdBreakInfo,yi.AdItem,yi.ContentPlaybackState],r}return s(t,e),t.prototype.onRemove=function(){this.resettables=null;var t=this.facade.retrieveProxy(zt.PlayerDomProxy);t&&t.removeDom(),e.prototype.onRemove.call(this)},Object.defineProperty(t.prototype,"collection",{get:function(){return this.data},enumerable:!1,configurable:!0}),t.prototype.getSnapshot=function(){return this.collection.getSnapshot()},t.prototype.getModel=function(e){return this.data.getModel(e)},t.prototype.reset=function(){for(var e=this.resettables,t=e.length;t--;)this.getModel(e[t]).reset();var i=this.getModel(yi.PresentationState);i.skipAutoplayCheck=!i.isAutoplay||null!==i.autoplaySupport,i.isAutoplay=!0,i.isCurrentVideoAd=!1,i.started=!1,i.streamDuration=NaN,i.streamTime=NaN},t}(Oi),er=function(e){function t(i){var r=e.call(this,i)||this;return r.timer=new $t(t.INTERVAL),r.timer.on($t.TIC_EVENT,function(e){return r.onTic(e)}),r}return s(t,e),t.prototype.killTimer=function(){var e;null===(e=this.timer)||void 0===e||e.stop()},t.prototype.listNotificationInterests=function(){return[vi.RESOURCE_START]},t.prototype.handleNotification=function(e){var t;e.name===vi.RESOURCE_START&&(null===(t=this.timer)||void 0===t||t.start())},t.prototype.onRegister=function(){e.prototype.onRegister.call(this)},t.prototype.onRemove=function(){this.timer.destroy(),this.timer=null,e.prototype.onRemove.call(this)},t.prototype.onTic=function(e){this.facade.sendNotification(vi.TIMER_TIC,{count:e.data.count},mi.INTERNAL)},t.INTERVAL=100,t}(Si),tr=function(e){function i(t,i){return e.call(this,t,i)||this}return s(i,e),i.prototype.onRegister=function(){var e=this.facade.retrieveProxy(zt.ModelCollectionProxy).getModel(yi.PlayerOptions);this.pOverrides=e.overrides,this.pMode=e.performanceMode==t.PerformanceMode.AUTO?this.calculatePerformanceMode():e.performanceMode},i.prototype.calculatePerformanceMode=function(){var e=this.facade.retrieveService(ze.System);switch(!0){case e.isTv:case e.isEmbedded:return t.PerformanceMode.TV;case e.isMobile:return t.PerformanceMode.MOBILE;default:return t.PerformanceMode.DESKTOP}},Object.defineProperty(i.prototype,"mode",{get:function(){return this.pMode},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"forwardBufferLength",{get:function(){switch(this.pMode){case t.PerformanceMode.MOBILE:case t.PerformanceMode.TV:return 20;default:return}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"backBufferLength",{get:function(){switch(this.pMode){case t.PerformanceMode.MOBILE:case t.PerformanceMode.TV:return 30;default:return 60}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topQualityForwardBufferLength",{get:function(){switch(this.pMode){case t.PerformanceMode.MOBILE:case t.PerformanceMode.TV:return 60;default:return}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bufferingSampleRate",{get:function(){var e;return(null===(e=this.pOverrides)||void 0===e?void 0:e.bufferingSampleRate)||(this.pMode===t.PerformanceMode.TV?300:er.INTERVAL)},enumerable:!1,configurable:!0}),i}(Oi),ir=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.controlVisCssClass="cvui-ctrlbar-vis",r}return s(i,e),i.prototype.setModel=function(e){for(var t in e)this.model[t]=e[t]},i.prototype.removeDom=function(){for(var e=this.getMain(),t=e.childNodes,i=t.length;i--;)e.removeChild(t[i])},i.prototype.removePanelContainer=function(){var e=this.getElement(fi.PANEL_CONTAINER),t=this.getMain();t&&e&&t.removeChild(e)},i.prototype.setControlVisibility=function(e){var t=this.getMain();if(t){var i=e?"add":"remove";t.classList[i](this.controlVisCssClass)}},i.prototype.getElement=function(e){return this.model[e]||null},i.prototype.getSafeZIndex=function(){var e=this.getElement(fi.AD_CONTAINER);return e?Number(e.style.zIndex)+10:10},i.prototype.getVideo=function(){return this.getElement(fi.VIDEO_EL)},i.prototype.getTextTrackContainer=function(){return this.getElement(fi.CC_CONTAINER)||null},i.prototype.setVideoVolume=function(e){var t=this.getVideo();t&&this.getVideoVolume()!=e&&(t.volume=e)},i.prototype.getVideoVolume=function(){var e=this.getVideo();return e?e.volume:null},i.prototype.getMain=function(){return this.getElement(fi.MAIN_CONTAINER)},i.prototype.showAdClickElement=function(e){var t=this.getElement(fi.AD_CLICK_EL);t&&(t.style.display=!1!==e?"block":"none")},i.prototype.getDimensions=function(){var e=this.getPresentationRect();return e?{width:e.width,height:e.height}:null},i.prototype.showContainer=function(e,t){var i=this.getElement(e);i&&(i.style.display=t?"inline-block":"none")},i.prototype.showAdContainer=function(e){this.showContainer(fi.AD_CONTAINER,e)},i.prototype.getPresentationRect=function(){var e=this.getMain();return e&&e.getBoundingClientRect()||null},i.prototype.muteVideo=function(e){var t=this.getVideo(),i="muted";t&&(t.muted=e,e&&t.setAttribute(i,i),!e&&t.removeAttribute(i))},i.prototype.primeVideo=function(e){var t=this;return void 0===e&&(e=ct.blankVideoUrl),Promise.resolve().then(function(){var i=t.getVideo();if(i)return i.src=e,i.load(),i.play().catch(function(e){if(i.error&&i.src!=ct.blankDataUrl)return t.primeVideo(ct.blankDataUrl)})})},i.prototype.setVideoAttribute=function(e,t){var i=this.getVideo();null==i||i.setAttribute(e,t)},i.prototype.removeVideoAttribute=function(e){var t=this.getVideo();null==t||t.removeAttribute(e)},i.prototype.recreateVideo=function(){var e,i=qi.createVideoElement(),r=this.getElement(fi.VIDEO_CONTAINER),n=this.getElement(fi.VIDEO_EL);if(n){var a=["src","data-element-id"];n.getAttributeNames().filter(function(e){return!C.includes(a,e)}).forEach(function(e){return i.setAttribute(e,n.getAttribute(e))}),r.replaceChild(i,n),this.sendNotification(vi.APP_EVENT,{type:t.PlayerEvent.VIDEO_ELEMENT_REMOVED,data:n})}else r.appendChild(i);this.setModel(((e={})[fi.VIDEO_EL]=i,e)),this.sendNotification(vi.APP_EVENT,{type:t.PlayerEvent.VIDEO_ELEMENT_ADDED,data:i})},Object.defineProperty(i.prototype,"model",{get:function(){return this.data},enumerable:!1,configurable:!0}),i}(Oi),rr=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.pCurrentIndex=-1,r.cachedApi=null,r.pList=[],r}return s(i,e),i.prototype.onRegister=function(){var e=this.facade.retrieveMediator(hi.APPLICATION);this.appMediator=e},i.prototype.onRemove=function(){this.clear(),this.pList=null,this.cachedApi=null,e.prototype.onRemove.call(this)},i.prototype.getApi=function(){return this.cachedApi||(this.cachedApi=Ki({},this)),this.cachedApi},Object.defineProperty(i.prototype,"list",{get:function(){for(var e=[],t=this.pList.length;t--;)e.unshift(C.merge({},this.pList[t]));return e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.pList.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentIndex",{get:function(){return this.pCurrentIndex},set:function(e){if(e<0||e>=this.pList.length)this.notify(vi.PLAYLIST_OUT_OF_RANGE);else{var t=Math.max(this.pCurrentIndex,0);this.advance(e-t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentResource",{get:function(){return this.appMediator.getCurrentResource()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nextResource",{get:function(){var e=this.find(this.pCurrentIndex+1);return e?C.merge({},e):null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"prevResource",{get:function(){var e=this.find(this.pCurrentIndex-1);return e?C.merge({},e):null},enumerable:!1,configurable:!0}),i.prototype.next=function(){return this.advance(1)},i.prototype.prev=function(){return this.advance(-1)},i.prototype.start=function(e){return void 0===e&&(e=0),this.pCurrentIndex=isNaN(e)?-1:e-1,this.advance()},i.prototype.addResources=function(e,t){var i=this;void 0===t&&(t=null),(Array.isArray(e)?e:[e]).forEach(function(e,r){var n=new Ei(e);null!==t?i.pList.splice(t+r,0,n):i.pList.push(n)}),this.notifyChanged()},i.prototype.removeResourceAtIndex=function(e){var t=this.length;if(e===this.currentIndex&&1===t)return this.clear(),null;if(e>=0&&e<t){var i=this.pList.splice(e,1);return e===this.currentIndex&&this.notify(vi.PLAYLIST_CURRENT_RESOURCE_CLEARED,{interruptedResource:i}),this.notifyChanged(),i&&i[0]||null}return null},i.prototype.clear=function(){var e=this.find(this.pCurrentIndex);this.pList=[],this.pCurrentIndex=-1,this.notify(vi.PLAYLIST_CLEARED,{interruptedResource:e})},i.prototype.softClear=function(){this.pList=[],this.pCurrentIndex=-1,this.sendNotification(vi.APP_EVENT,{type:t.PlayerEvent.PLAYLIST_CLEARED})},i.prototype.advance=function(e){var t=this;void 0===e&&(e=1);var i,r=this.pCurrentIndex+e,n=this.find(r);return n?this.appMediator.attachResource(n,function(){return t.pCurrentIndex=r}).then(function(e){return t.notify(vi.PLAYLIST_ADVANCED,{resource:n,currentIndex:r}),e}):((i=r<0?vi.PLAYLIST_OUT_OF_RANGE:vi.PLAYLIST_COMPLETE)&&this.notify(i),Promise.resolve(null))},i.prototype.find=function(e){return e>=0&&e<this.pList.length&&this.pList[e]||null},i.prototype.notify=function(e,t){void 0===t&&(t=null),this.facade&&this.facade.sendNotification(e,t||null,mi.INTERNAL)},i.prototype.notifyChanged=function(){this.notify(vi.PLAYLIST_CHANGE,null)},u([Hi(!0)],i.prototype,"list",null),u([Hi()],i.prototype,"length",null),u([Hi()],i.prototype,"currentIndex",null),u([Hi()],i.prototype,"currentResource",null),u([Hi()],i.prototype,"nextResource",null),u([Hi()],i.prototype,"prevResource",null),u([Fi()],i.prototype,"next",null),u([Fi()],i.prototype,"prev",null),u([Fi()],i.prototype,"start",null),u([Fi()],i.prototype,"addResources",null),u([Fi()],i.prototype,"removeResourceAtIndex",null),u([Fi()],i.prototype,"clear",null),i}(Oi),nr=function(e){function i(i,r){return void 0===r&&(r={}),e.call(this,i,{native:!1!==r.native,mode:t.TextTrackMode.DISABLED,language:null!=r.language?r.language:navigator.language})||this}return s(i,e),Object.defineProperty(i.prototype,"mode",{get:function(){return this.data.mode},set:function(e){this.data.mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this.data.mode!=t.TextTrackMode.DISABLED},set:function(e){this.mode=e?this.enabledMode:t.TextTrackMode.DISABLED},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enabledMode",{get:function(){return this.data.native?t.TextTrackMode.SHOWING:t.TextTrackMode.HIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"native",{get:function(){return this.data.native},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"language",{get:function(){return this.data.language},set:function(e){this.data.language=e},enumerable:!1,configurable:!0}),i}(Oi),ar=function(){function e(){}return e.checkType=function(e,t,i){return"string"==typeof t&&(t=[t]),!(!i||null!==e)||t.some(function(t){return typeof e===t})},e.notEmpty=function(e){return!(null==e||Array.isArray(e)&&0===e.length||"object"==typeof e&&e.constructor===Object&&0===Object.keys(e).length||"string"==typeof e&&""===e)},e.isArray=function(e){return Array.isArray(e)},e.validNumber=function(e,t){return"number"!=typeof e?t:e},e.isTypedArray=function(e,t){if(this.isArray(e)&&this.notEmpty(e)){for(var i=e.length;i--;)if(typeof e[i]!==t)return!1;return!0}return!1},e.isType=function(e,t){return e instanceof t},e.isPositiveNumber=function(e){return"number"==typeof e&&e>=0},e}(),or={adBreakDuration:{type:"number",defaultValue:-1,setterTransformer:function(e){return"number"!=typeof e?-1:e}},adTotal:{type:"number",defaultValue:-1,setterTransformer:function(e){return"number"!=typeof e?-1:e}},adBreakPosition:{type:"number",defaultValue:-1,setterTransformer:function(e){return"number"!=typeof e?-1:e}},adBreakType:{type:"string",defaultValue:null,setterTransformer:function(e){return e===t.AdBreakType.MID||e===t.AdBreakType.POST||e===t.AdBreakType.PRE?e:null}},adServerName:{type:"string",defaultValue:null,validator:ar.notEmpty}},sr={adDuration:{type:"number",defaultValue:-1,setterTransformer:function(e){return ar.validNumber(e,-1)}},adTitle:{type:"string",defaultValue:null},adId:{type:"string",defaultValue:null},adPosition:{type:"number",defaultValue:-1,setterTransformer:function(e){return ar.validNumber(e,-1)}},adAssetUrl:{type:"string",defaultValue:null},isVpaid:{type:"boolean",defaultValue:!1,setterTransformer:function(e){return"boolean"==typeof e&&e}},wrapperAdId:{type:"string",defaultValue:null},creativeId:{type:"string",defaultValue:null},wrapperCreativeId:{type:"string",defaultValue:null},vastMediaWidth:{type:"number",defaultValue:null},vastMediaHeight:{type:"number",defaultValue:null},vastMediaBitrate:{type:"number",defaultValue:null}},lr={manifestQualities:{type:"object",defaultValue:null},qualityInfo:{type:"object",defaultValue:null},audioTracks:{type:"object",defaultValue:null},textTracks:{type:"object",defaultValue:null},streamType:{type:"string",defaultValue:t.StreamType.VOD},liveStreamInfo:{type:"object",defaultValue:null},bufferLength:{type:"number",defaultValue:0},cdn:{type:"string",defaultValue:null,validator:ar.notEmpty},drmType:{type:"string",defaultValue:null,validator:ar.notEmpty},contentSegment:{type:"number",defaultValue:NaN},maxBandwidth:{type:"number",defaultValue:NaN},time:{type:"number",defaultValue:0},state:{type:"string",defaultValue:t.PlaybackState.IDLE},duration:{type:"number",defaultValue:NaN},bitrate:{type:"number",defaultValue:NaN},started:{type:"boolean",defaultValue:!1},averageDroppedFps:{type:"number",defaultValue:NaN},framerate:{type:"number",defaultValue:NaN}},cr={container:{type:["object","string"],defaultValue:null},dataTransformers:{type:"object",defaultValue:null},plugins:{type:"object",defaultValue:null},nativePlugins:{type:"object",defaultValue:null},autoplay:{type:"string",defaultValue:t.Autoplay.NONE},offsetTextOnControlsVisible:{type:"boolean",defaultValue:!1},id:{type:"string",defaultValue:null},networkErrorRecovery:{type:"object",defaultValue:null},networkTimeout:{type:"number",defaultValue:R.TIMEOUT},performanceMode:{type:"string",defaultValue:t.PerformanceMode.AUTO},renderTextTrackNatively:{type:"boolean",defaultValue:!0},useNativeFullscreen:{type:"boolean",defaultValue:!0},playsInline:{type:"boolean",defaultValue:!0},uiConfig:{type:"object",defaultValue:null},useNativeControls:{type:"boolean",defaultValue:!1},overrides:{type:"object",defaultValue:{}},logLevel:{type:"string",defaultValue:t.LogLevel.OFF},language:{type:"string",defaultValue:null},localization:{type:"object",defaultValue:null},idleDelay:{type:"number",defaultValue:3e3},enableOm:{type:"boolean",defaultValue:!1}},ur=function(){function e(){}return e.clampValue=function(e,t,i){return"number"!=typeof e?null:Math.max(t,Math.min(e,i))},e.lowerCase=function(e){return"string"==typeof e?e.toLowerCase():e},e.strToNum=function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);return isNaN(t)?e:t}return e},e}(),dr={ad_break_info_config:or,ad_item_config:sr,content_playback_state_config:lr,player_dom_config:{main:{type:"object",defaultValue:null},video:{type:"object",defaultValue:null},videoContainer:{type:"object",defaultValue:null},ccContainer:{type:"object",defaultValue:null},adContainer:{type:"object",defaultValue:null},panelContainer:{type:"object",defaultValue:null},adClickEl:{type:"object",defaultValue:null}},player_options_config:cr,presentation_state_config:{skipAutoplayCheck:{type:"boolean",defaultValue:!1},streamTime:{type:"number",defaultValue:0,setterTransformer:function(e){return ar.isPositiveNumber(e)?e:0}},streamDuration:{type:"number",defaultValue:NaN,setterTransformer:function(e){return ar.isPositiveNumber(e)?e:NaN}},autoplaySupport:{type:"object",defaultValue:null},isAutoplay:{type:"boolean",defaultValue:!1},isCurrentVideoAd:{type:"boolean",defaultValue:!1},isFullscreen:{type:"boolean",defaultValue:!1},isMuted:{type:"boolean",defaultValue:!1},isMuteAtPlayStart:{type:"boolean",defaultValue:!1},started:{type:"boolean",defaultValue:!1},userHasUnmuted:{type:"boolean",defaultValue:!1},volume:{type:"number",defaultValue:1,setterTransformer:function(e){return ur.clampValue(e,0,1)}},usesSsai:{type:"boolean",defaultValue:!1},streamId:{type:"string",defaultValue:null},suspended:{type:"boolean",defaultValue:!1}}},pr=function(){function e(){}return e.generateModel=function(e,t,i,r){for(var n in t)this.createProperty(n,t[n],e,i,r)},e.createProperty=function(e,t,i,r,n){var a=t.validator,o=t.type,s=t.defaultValue,l=!1!==t.enumerable,c=this.getTransformer(t,"setter",i),u=this.getTransformer(t,"getter",i);!1===t.writable?(Object.defineProperty(i,e,{enumerable:l,value:s,writable:!1}),r[e]=s):(Object.defineProperty(i,e,{enumerable:l,set:function(t){var i=c(t);!a||a(i)?ar.checkType(i,o,null===s)?r[e]=i:I.warn("Invalid type supplied for property ".concat(e)):I.warn("Invalid value '".concat(i,"' for property ").concat(e))},get:function(){return u(r[e])}}),r[e]=s),n[e]=s},e.getTransformer=function(e,t,i){var r=e[t+"Transformer"];return r&&"function"==typeof r?r.bind(i):this.blankTransformer},e.blankTransformer=function(e){return e},e}(),hr=function(){function e(e){this.pData={},this.defaultValues={},pr.generateModel(this,e,this.pData,this.defaultValues)}return Object.defineProperty(e.prototype,"data",{get:function(){return C.assign({},this.pData)},enumerable:!1,configurable:!0}),e.prototype.reset=function(){for(var e in this.defaultValues)this.pData[e]=this.defaultValues[e]},e}(),fr=function(){function e(e){this.model=new hr(e)}return Object.defineProperty(e,"modelName",{get:function(){return"AdBreakInfo"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.model.reset()},Object.defineProperty(e.prototype,"adBreakDuration",{get:function(){return this.model.adBreakDuration},set:function(e){this.model.adBreakDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adBreakPosition",{get:function(){return this.model.adBreakPosition},set:function(e){this.model.adBreakPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adBreakType",{get:function(){return this.model.adBreakType},set:function(e){this.model.adBreakType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adServerName",{get:function(){return this.model.adServerName},set:function(e){this.model.adServerName=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adTotal",{get:function(){return this.model.adTotal},set:function(e){this.model.adTotal=e},enumerable:!1,configurable:!0}),e}(),yr=function(){function e(e){this.model=new hr(e)}return Object.defineProperty(e,"modelName",{get:function(){return"AdItem"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.model.reset()},Object.defineProperty(e.prototype,"adDuration",{get:function(){return this.model.adDuration},set:function(e){this.model.adDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adTitle",{get:function(){return this.model.adTitle},set:function(e){this.model.adTitle=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adId",{get:function(){return this.model.adId},set:function(e){this.model.adId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adPosition",{get:function(){return this.model.adPosition},set:function(e){this.model.adPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adAssetUrl",{get:function(){return this.model.adAssetUrl},set:function(e){this.model.adAssetUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVpaid",{get:function(){return this.model.isVpaid},set:function(e){this.model.isVpaid=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapperAdId",{get:function(){return this.model.wrapperAdId},set:function(e){this.model.wrapperAdId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creativeId",{get:function(){return this.model.creativeId},set:function(e){this.model.creativeId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapperCreativeId",{get:function(){return this.model.wrapperCreativeId},set:function(e){this.model.wrapperCreativeId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vastMediaWidth",{get:function(){return this.model.vastMediaWidth},set:function(e){this.model.vastMediaWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vastMediaHeight",{get:function(){return this.model.vastMediaHeight},set:function(e){this.model.vastMediaHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vastMediaBitrate",{get:function(){return this.model.vastMediaBitrate},set:function(e){this.model.vastMediaBitrate=e},enumerable:!1,configurable:!0}),e}(),vr=function(){function e(e){this.model=new hr(e)}return Object.defineProperty(e,"modelName",{get:function(){return"ContentPlaybackState"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.model.reset()},Object.defineProperty(e.prototype,"manifestQualities",{get:function(){return this.model.manifestQualities},set:function(e){this.model.manifestQualities=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"qualityInfo",{get:function(){return this.model.qualityInfo},set:function(e){this.model.qualityInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioTracks",{get:function(){return this.model.audioTracks},set:function(e){this.model.audioTracks=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textTracks",{get:function(){return this.model.textTracks},set:function(e){this.model.textTracks=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamType",{get:function(){return this.model.streamType},set:function(e){this.model.streamType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"liveStreamInfo",{get:function(){return this.model.liveStreamInfo},set:function(e){this.model.liveStreamInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferLength",{get:function(){return this.model.bufferLength},set:function(e){this.model.bufferLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cdn",{get:function(){return this.model.cdn},set:function(e){this.model.cdn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drmType",{get:function(){return this.model.drmType},set:function(e){this.model.drmType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentSegment",{get:function(){return this.model.contentSegment},set:function(e){this.model.contentSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxBandwidth",{get:function(){return this.model.maxBandwidth},set:function(e){this.model.maxBandwidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.model.time},set:function(e){this.model.time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.model.state},set:function(e){this.model.state=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.model.duration},set:function(e){this.model.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bitrate",{get:function(){return this.model.bitrate},set:function(e){this.model.bitrate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"started",{get:function(){return this.model.started},set:function(e){this.model.started=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageDroppedFps",{get:function(){return this.model.averageDroppedFps},set:function(e){this.model.averageDroppedFps=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"framerate",{get:function(){return this.model.framerate},set:function(e){this.model.framerate=e},enumerable:!1,configurable:!0}),e}(),mr=function(){function e(e){this.model=new hr(e)}return Object.defineProperty(e,"modelName",{get:function(){return"PlayerDom"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.model.reset()},Object.defineProperty(e.prototype,"main",{get:function(){return this.model.main},set:function(e){this.model.main=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"video",{get:function(){return this.model.video},set:function(e){this.model.video=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoContainer",{get:function(){return this.model.videoContainer},set:function(e){this.model.videoContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ccContainer",{get:function(){return this.model.ccContainer},set:function(e){this.model.ccContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adContainer",{get:function(){return this.model.adContainer},set:function(e){this.model.adContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panelContainer",{get:function(){return this.model.panelContainer},set:function(e){this.model.panelContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adClickEl",{get:function(){return this.model.adClickEl},set:function(e){this.model.adClickEl=e},enumerable:!1,configurable:!0}),e}(),gr=function(){function e(e){this.model=new hr(e)}return Object.defineProperty(e,"modelName",{get:function(){return"PlayerOptions"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.model.reset()},Object.defineProperty(e.prototype,"container",{get:function(){return this.model.container},set:function(e){this.model.container=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataTransformers",{get:function(){return this.model.dataTransformers},set:function(e){this.model.dataTransformers=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"plugins",{get:function(){return this.model.plugins},set:function(e){this.model.plugins=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativePlugins",{get:function(){return this.model.nativePlugins},set:function(e){this.model.nativePlugins=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoplay",{get:function(){return this.model.autoplay},set:function(e){this.model.autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetTextOnControlsVisible",{get:function(){return this.model.offsetTextOnControlsVisible},set:function(e){this.model.offsetTextOnControlsVisible=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.model.id},set:function(e){this.model.id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmbedded",{get:function(){return this.model.isEmbedded},set:function(e){this.model.isEmbedded=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"networkErrorRecovery",{get:function(){return this.model.networkErrorRecovery},set:function(e){this.model.networkErrorRecovery=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"networkTimeout",{get:function(){return this.model.networkTimeout},set:function(e){this.model.networkTimeout=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"performanceMode",{get:function(){return this.model.performanceMode},set:function(e){this.model.performanceMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderTextTrackNatively",{get:function(){return this.model.renderTextTrackNatively},set:function(e){this.model.renderTextTrackNatively=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useNativeFullscreen",{get:function(){return this.model.useNativeFullscreen},set:function(e){this.model.useNativeFullscreen=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playsInline",{get:function(){return this.model.playsInline},set:function(e){this.model.playsInline=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uiConfig",{get:function(){return this.model.uiConfig},set:function(e){this.model.uiConfig=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useNativeControls",{get:function(){return this.model.useNativeControls},set:function(e){this.model.useNativeControls=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overrides",{get:function(){return this.model.overrides},set:function(e){this.model.overrides=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this.model.logLevel},set:function(e){this.model.logLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.model.language},set:function(e){this.model.language=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localization",{get:function(){return this.model.localization},set:function(e){this.model.localization=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleDelay",{get:function(){return this.model.idleDelay},set:function(e){this.model.idleDelay=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableOm",{get:function(){return this.model.enableOm},set:function(e){this.model.enableOm=e},enumerable:!1,configurable:!0}),e}(),Ar=function(){function e(e){this.model=new hr(e)}return Object.defineProperty(e,"modelName",{get:function(){return"PresentationState"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.model.reset()},Object.defineProperty(e.prototype,"skipAutoplayCheck",{get:function(){return this.model.skipAutoplayCheck},set:function(e){this.model.skipAutoplayCheck=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamTime",{get:function(){return this.model.streamTime},set:function(e){this.model.streamTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamDuration",{get:function(){return this.model.streamDuration},set:function(e){this.model.streamDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoplaySupport",{get:function(){return this.model.autoplaySupport},set:function(e){this.model.autoplaySupport=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAutoplay",{get:function(){return this.model.isAutoplay},set:function(e){this.model.isAutoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCurrentVideoAd",{get:function(){return this.model.isCurrentVideoAd},set:function(e){this.model.isCurrentVideoAd=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return this.model.isFullscreen},set:function(e){this.model.isFullscreen=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMuted",{get:function(){return this.model.isMuted},set:function(e){this.model.isMuted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMuteAtPlayStart",{get:function(){return this.model.isMuteAtPlayStart},set:function(e){this.model.isMuteAtPlayStart=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"started",{get:function(){return this.model.started},set:function(e){this.model.started=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userHasUnmuted",{get:function(){return this.model.userHasUnmuted},set:function(e){this.model.userHasUnmuted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.model.volume},set:function(e){this.model.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usesSsai",{get:function(){return this.model.usesSsai},set:function(e){this.model.usesSsai=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamId",{get:function(){return this.model.streamId},set:function(e){this.model.streamId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"suspended",{get:function(){return this.model.suspended},set:function(e){this.model.suspended=e},enumerable:!1,configurable:!0}),e}(),Er=function(){function e(){this.mdlCollection={},this.createModels()}return e.prototype.destroy=function(){for(var e in this.mdlCollection)delete this.mdlCollection[e];this.mdlCollection=null},e.prototype.getModel=function(e){return this.mdlCollection[e]},e.prototype.getSnapshot=function(){var e={};for(var t in this.mdlCollection)"PlayerDom"!=t&&"PlayerOptions"!=t&&"BuildInfo"!=t&&(e[t]=this.mdlCollection[t].data);return e},Object.defineProperty(e.prototype,"AdBreakInfo",{get:function(){return this.mdlCollection.AdBreakInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AdItem",{get:function(){return this.mdlCollection.AdItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ContentPlaybackState",{get:function(){return this.mdlCollection.ContentPlaybackState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"PlayerDom",{get:function(){return this.mdlCollection.PlayerDom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"PlayerOptions",{get:function(){return this.mdlCollection.PlayerOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"PresentationState",{get:function(){return this.mdlCollection.PresentationState},enumerable:!1,configurable:!0}),e.prototype.createModels=function(){for(var e=[fr,yr,vr,mr,gr,Ar],t=e.length;t--;){var i=e[t],r=i.modelName,n=dr[this.classToCfgName(r)];this.mdlCollection[r]=new i(n)}},e.prototype.classToCfgName=function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")+"_config"},e}(),Tr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i=this.facade.retrieveService(ze.System),r=new Er,n=new Zi(zt.ModelCollectionProxy,r),a=e.body.playerOptions;this.facade.registerProxy(n),this.setPlayerOptions(n,a),this.facade.registerProxy(new tr(zt.PerformanceProxy));var o=new Ji(zt.LocalizationProxy,a.language);this.facade.registerProxy(o),this.facade.registerProxy(new nr(zt.TextTrackProxy,{native:a.renderTextTrackNatively,language:o.language})),!i.isWebMaf&&this.createDomProxy(n),this.facade.registerProxy(new Xi),this.facade.registerProxy(new rr(zt.Playlist)),this.log(t.LogLevel.DEBUG,"Model prepared")},i.prototype.setPlayerOptions=function(e,t){var i=e.getModel(yi.PlayerOptions);for(var r in t)!C.isUndefined(i[r])&&(i[r]=t[r])},i.prototype.createDomProxy=function(e){var t=e.getModel(yi.PlayerDom),i=new ir(zt.PlayerDomProxy,t);this.facade.registerProxy(i)},i}(Wi),br=function(){function e(e){var t=this;this.xhr=Ni.xhr,this.event={dispatchPluginEvent:function(e){t.dispatch(e)}},this.util={queryStrFromObj:function(e,t){return We.encode(e)}},this.vc=null,this.playerApi=null,this.sys=null,this.bi=null,this.domProxy=null,this.playerOpts=null,this.loc=null,this.log=null,this.playerApi=e.player,this.vc=e.viewController,this.sys=e.system,this.bi=e.buildInfo,this.domProxy=e.domProxy,this.playerOpts=e.playerOptions,this.loc=e.localization,this.dispatch=e.dispatch,this.log=e.logger}return Object.defineProperty(e.prototype,"player",{get:function(){return this.playerApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this.log},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewController",{get:function(){return this.vc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"system",{get:function(){return this.sys},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appNamespace",{get:function(){return this.sys.appNamespace},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avia",{get:function(){return this.sys.appNamespace},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerOptions",{get:function(){return this.playerOpts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buildInfo",{get:function(){return this.bi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerDomProxy",{get:function(){return Ni.warn("The PluginService.playerDomProxy method is deprecated. Use PluginService.dom instead. Access to this property will be completely removed April 28th, 2022"),this.domProxy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localization",{get:function(){return this.loc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){var e,t,i,r,n,a=this;return{main:null===(e=this.domProxy)||void 0===e?void 0:e.getMain(),get video(){return null===(e=a.domProxy)||void 0===e?void 0:e.getVideo();var e},videoContainer:null===(t=this.domProxy)||void 0===t?void 0:t.getElement(fi.VIDEO_CONTAINER),ccContainer:null===(i=this.domProxy)||void 0===i?void 0:i.getElement(fi.CC_CONTAINER),adContainer:null===(r=this.domProxy)||void 0===r?void 0:r.getElement(fi.AD_CONTAINER),adClickEl:null===(n=this.domProxy)||void 0===n?void 0:n.getElement(fi.AD_CLICK_EL)}},enumerable:!1,configurable:!0}),e}(),Sr=function(e){function i(t){var i=e.call(this,t)||this;return i.plugins={},i.pendingLoads=null,i.services=null,i.diagnosticPlugin=null,i.diagnosticPluginVisible=!1,i}return s(i,e),i.prototype.onRemove=function(){var t=this;Object.keys(this.plugins).forEach(function(e){try{t.killPlugin(e)}catch(i){t.logger.warn("Error destroying plugin: ".concat(e),i)}}),this.plugins=null,this.pendingLoads=null,this.services=null,this.diagnosticPlugin=null,e.prototype.onRemove.call(this)},i.prototype.removePlugin=function(e){this.killPlugin(e)},i.prototype.getPlugin=function(e){return this.plugins[e]||null},i.prototype.loadPlugin=function(e){return d(this,void 0,void 0,function(){var i;return p(this,function(r){switch(r.label){case 0:return[4,this.createPlugin(e)];case 1:return i=r.sent(),e.name==t.NativePlugin.DIAGNOSTIC&&this.registerDiagnosticPlugin(e.name),[2,i]}})})},i.prototype.toggleDiagnosticPlugin=function(){!this.diagnosticPlugin&&this.createDiagnosticPlugin()||(this.diagnosticPluginVisible=!this.diagnosticPluginVisible,this.diagnosticPluginVisible?this.diagnosticPlugin.show():this.diagnosticPlugin.hide())},i.prototype.listNotificationInterests=function(){return[vi.LOAD_PLUGINS,vi.AD_BREAK_START,vi.CONTENT_START,vi.REMOVE_PLUGIN]},i.prototype.handleNotification=function(e){switch(e.name){case vi.LOAD_PLUGINS:this.loadPlugins(e.body);break;case vi.REMOVE_PLUGIN:this.removePlugin(e.body.name);break;case vi.AD_BREAK_START:case vi.CONTENT_START:this.loadPendingPlugins()}},i.prototype.createPluginServices=function(){var e=this.facade.retrieveMediator(hi.APPLICATION),t=this.facade.retrieveMediator(hi.UI);return new br({player:e.getAppApi(),viewController:t?t.viewController:null,buildInfo:it,system:this.facade.retrieveService(ze.System),domProxy:this.facade.retrieveProxy(zt.PlayerDomProxy),localization:this.facade.retrieveProxy(zt.LocalizationProxy).getApi(),playerOptions:this.playerOptions,dispatch:function(t){e.dispatchPluginEvent(t)},logger:this.logger})},i.prototype.registerDiagnosticPlugin=function(e){this.diagnosticPlugin=this.plugins[e],this.diagnosticPluginVisible=!0},Object.defineProperty(i.prototype,"playerOptions",{get:function(){return this.getModel(yi.PlayerOptions).data},enumerable:!1,configurable:!0}),i.prototype.initPluginServices=function(){this.services||(this.services=this.createPluginServices())},i.prototype.createDiagnosticPlugin=function(){var e=this,i=wi.getNativePluginConfig(t.NativePlugin.DIAGNOSTIC,this.playerOptions);return!i||(this.plugins[i.name]?(this.registerDiagnosticPlugin(i.name),!1):(this.initPluginServices(),this.createPlugin(i).then(function(){return e.registerDiagnosticPlugin(i.name)}),!0))},i.prototype.createPlugins=function(e,t){var i=this;return Promise.all(e.map(function(e){return i.createPlugin(e)})).then(function(){return null==t?void 0:t()})},i.prototype.createPlugin=function(e){var i;return d(this,void 0,void 0,function(){var r,n,a,o,s;return p(this,function(l){switch(l.label){case 0:if(!e.url)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,N.load({url:e.url,errorRecovery:this.playerOptions.networkErrorRecovery,timeout:null!=e.loadTimeout?e.loadTimeout:this.playerOptions.networkTimeout})];case 2:return l.sent(),[3,4];case 3:return r=l.sent(),this.log(t.LogLevel.ERROR,ct.messages.PLUGIN_LOAD_ERROR,r),[2];case 4:return n=e.name,a=C.assign({name:n},e.options),e.factory?[4,e.factory(this.services,a)]:[3,6];case 5:return o=l.sent(),C.isFunction(o)&&(o={destroy:o}),[3,8];case 6:return(s=e.classRef?e.classRef:wi.classFromQualifiedName(e.qualifiedClassName))?(o=C.isFunction(s.onRegister)?s:new s,[4,null===(i=o.onRegister)||void 0===i?void 0:i.call(o,this.services.player,a,this.services)]):[3,8];case 7:l.sent(),l.label=8;case 8:return o?(this.plugins[n]=o,this.log(t.LogLevel.INFO,"Created plugin '".concat(n,"'")),[2,o]):[2]}})})},i.prototype.killPlugin=function(e){var t=this.plugins[e];t&&(C.isFunction(t.destroy)&&t.destroy(),delete this.plugins[e])},i.prototype.loadPendingPlugins=function(){this.pendingLoads&&(this.createPlugins(this.pendingLoads),this.pendingLoads=null)},i.prototype.loadPlugins=function(e){var i=e.plugins||this.playerOptions.plugins,r=!this.getModel(yi.PresentationState).started,n=e.callback;if(null==i?void 0:i.length){this.initPluginServices();var a=i.filter(function(e){return e.priority===t.PluginPriority.LOW}),o=i.filter(function(e){return e.priority!==t.PluginPriority.LOW});r&&(this.pendingLoads=a);var s=r?o:a.concat(o);this.createPlugins(s,n)}else null==n||n()},i}(Si),Cr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){this.facade.registerMediator(new Sr(hi.PLUGIN_MEDIATOR)),this.log(t.LogLevel.DEBUG,"Plugins Prepared")},i}(Wi),_r=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){this.facade.registerMediator(new er(hi.TIMER_MEDIATOR)),this.log(t.LogLevel.DEBUG,"Timer mediator registered")},i}(Wi),Pr=function(e){function t(t){var i=e.call(this,t)||this;return i.defs=[],i.pScope=null,i.keyUpHandler=null,i.keyDownHandler=null,i.pDisabled=!1,i.suppressed=!1,i.scopeActive=null,i}return s(t,e),t.prototype.onRemove=function(){this.activateScope(!1),this.pScope=null;var e=function(e){};this.keyUpHandler=e,this.keyDownHandler=e},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.suppressed||this.pDisabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scope",{set:function(e){this.suppressed||(this.pScope&&this.scopeActive&&this.activateScope(!1),this.pScope=e,(this.scopeActive||null===this.scopeActive)&&this.activateScope(!0))},enumerable:!1,configurable:!0}),t.prototype.registerCommandDef=function(e){this.suppressed||this.defs.push(e)},t.prototype.disable=function(){this.suppressed||(this.scopeActive&&this.activateScope(!1),this.pDisabled=!0)},t.prototype.enable=function(){this.suppressed||(!this.scopeActive&&this.activateScope(!0),this.pDisabled=!1)},t.prototype.validatePrimaryKey=function(e,t){var i=t.key,r=C.isString(i)&&i.toLowerCase(),n=t.keyCode;return!(!i&&!n||e.primaryKey!==i&&e.primaryKey!==r&&e.keyCode!==n)},t.prototype.getCommand=function(e,t){void 0===t&&(t=!0);for(var i,r=this.defs.length,n=null;r--;)if(i=this.defs[r],this.validatePrimaryKey(i,e)&&(!t||this.hasRequiredModifiers(i,e))){n=i;break}return n},t.prototype.hasRequiredModifiers=function(e,t){var i=!!((e.requireCtrl?1:0)^(t.ctrlKey?1:0)),r=!!((e.requireShift?1:0)^(t.shiftKey?1:0)),n=!!((e.requireMeta?1:0)^(t.metaKey?1:0));return!i&&!r&&!n},t.prototype.activateScope=function(e){if(this.pScope&&!this.suppressed){var t=e?"addEventListener":"removeEventListener";this.pScope[t]("keyup",this.keyUpHandler),this.pScope[t]("keydown",this.keyDownHandler),this.scopeActive=e}},t.prototype.handleNotification=function(e){},t.prototype.onRegister=function(){var t=this;e.prototype.onRegister.call(this);var i=this.facade.retrieveService(ze.System);!i.document||i.isTv||i.isWebMaf?this.suppressed=!0:(this.keyDownHandler=function(e){return t.hKeyDown(e)},this.keyUpHandler=function(e){return t.hKeyUp(e)})},t}(Si),Ir=function(e){function i(t){var i=e.call(this,t)||this;return i.uim=null,i.vpi=null,i.seekMoving=!1,i.seekEnabled=!1,i.VOLUME_INCREMENT=.05,i.SEEK_FACTOR_DISCRETE=.05,i.SEEK_INCREMENT_CONTINUOUS=.001,i.tZero=0,i}return s(i,e),i.prototype.onRemove=function(){clearTimeout(this.timeout),this.vpi=null,this.uim=null,e.prototype.onRemove.call(this)},i.prototype.isControl=function(e){return"BUTTON"==e.nodeName||"INPUT"==e.nodeName},i.prototype.hKeyUp=function(e){this.disabled||this.isControl(document.activeElement)||(this.seekMoving?this.disengageSeek():this.processKeyEvent(e))},i.prototype.hKeyDown=function(e){var t=e.key,i=e.keyCode,r=t===et.ARROW_UP||38===i,n=t===et.ARROW_DOWN||40===i,a=t===et.SPACE||32===i,o=t===et.ARROW_LEFT||37===i,s=t===et.ARROW_RIGHT||39===i,l=e.repeat;if(!(s||o||r||n||a)||this.isControl(document.activeElement)){if(this.shouldSeekContinuous()&&(o||s)){if(!this.seekMoving&&l)this.tZero=Date.now(),this.engageSeek();else if(this.seekMoving&&l){var c=.001*(Date.now()-this.tZero),u=c>=5?3:c>=3?2:1,d=o?-1:1;this.moveSeekBy(d*this.SEEK_INCREMENT_CONTINUOUS*u)}this.stopEvent(e)}}else e.preventDefault()},i.prototype.engageSeek=function(){this.uim&&this.uim.engageSeek(),this.seekMoving=!0},i.prototype.disengageSeek=function(){var e=this;this.uim&&this.uim.disengageSeek(),this.seekMoving=!1,this.tZero=null,this.timeout=setTimeout(function(){e.uim&&e.uim.forceControlsVisible(!1)},500)},i.prototype.moveSeekBy=function(e){this.uim&&this.uim.moveSeekBy(e)},i.prototype.shouldSeekContinuous=function(){return this.uim&&this.uim.uiIsStandardView()&&!this.disabled&&this.seekEnabled},Object.defineProperty(i.prototype,"player",{get:function(){if(!this.vpi){var e=this.facade.retrieveMediator(hi.APPLICATION);this.vpi=e.getAppApi()}return this.vpi},enumerable:!1,configurable:!0}),i.prototype.stopEvent=function(e){e.stopImmediatePropagation(),e.preventDefault()},i.prototype.processKeyEvent=function(e){if(e.ctrlKey||e.shiftKey||e.metaKey||e.key===et.META||e.key===et.SHIFT||e.key===et.CONTROL)return null;var t=this.getCommand(e,!1);t&&(this.doAction(t),this.stopEvent(e))},i.prototype.doAction=function(e){var i,r,n,a=e.action;switch(a){case t.AccessibilityAction.INCREASE_VOLUME:case t.AccessibilityAction.DECREASE_VOLUME:n=a===t.AccessibilityAction.DECREASE_VOLUME?-1:1,i=this.player.volume,r=C.clampValue(i+this.VOLUME_INCREMENT*n,0,1),this.player.muted&&r>0&&(this.player.muted=!1),this.player.volume=r,this.uim&&this.uim.setAccVolumeLevelIndicator(r),this.notify({action:a,value:this.player.volume});break;case t.AccessibilityAction.SEEK_BACK:case t.AccessibilityAction.SEEK_FORWARD:if(!this.seekEnabled)return;var o=this.player.contentDuration;if(n=a===t.AccessibilityAction.SEEK_BACK?-1:1,i=this.player.contentTime,!o||isNaN(o)||1===n&&this.player.streamType===t.StreamType.DVR&&this.player.isPlayingLive)return;r=C.clampValue(i+this.SEEK_FACTOR_DISCRETE*n*o,0,o),this.setSeekNotice(r,n),this.notify({action:a,position:r,duration:o}),this.player.seek(r);break;case t.AccessibilityAction.ENTER_FULLSCREEN:this.player.enterFullscreen();break;case t.AccessibilityAction.TOGGLE_PLAY:this.player.streamType!==t.StreamType.LIVE&&this.player.togglePlayPause();break;case t.AccessibilityAction.TOGGLE_MUTE:this.player.muted=!this.player.muted,this.notify({action:a,muted:this.player.muted});break;case t.AccessibilityAction.TOGGLE_TT:this.player.textTrackEnabled=!this.player.textTrackEnabled;break;case t.AccessibilityAction.PLAYLIST_NEXT:case t.AccessibilityAction.PLAYLIST_PREV:n=a==t.AccessibilityAction.PLAYLIST_PREV?-1:1,this.player.playlist.length>1&&(n<0?this.player.playlist.prev():this.player.playlist.next());break;case t.AccessibilityAction.STOP:this.player.streamType===t.StreamType.LIVE?this.player.stop():this.player.pause()}},i.prototype.setSeekNotice=function(e,t){if(this.uim){var i=C.secToHms(e),r=C.secToHms(this.player.contentDuration),n=t>0?"&gt;&nbsp;&nbsp;".concat(i,"&nbsp;/&nbsp;").concat(r):"".concat(i,"&nbsp;/&nbsp;").concat(r,"&nbsp;&nbsp;&lt;");this.uim.setSeekNotice(n,t)}},i.prototype.notify=function(e){this.sendNotification(vi.HOTKEY_ACTION,e,mi.INTERNAL)},i.prototype.handleNotification=function(e){var i=e.name,r=vi;switch(i){case r.AD_BREAK_START:this.seekEnabled=!1,this.enable();break;case r.CONTENT_COMPLETE:this.seekEnabled=!1,this.disable();break;case r.CONTENT_START:case r.CONTENT_SEGMENT_START:this.enable(),this.seekEnabled=this.player.streamType!==t.StreamType.LIVE}},i.prototype.listNotificationInterests=function(){var e=vi;return[e.AD_BREAK_START,e.CONTENT_START,e.CONTENT_SEGMENT_START,e.CONTENT_COMPLETE]},i.prototype.onRegister=function(){var t=this;e.prototype.onRegister.call(this),ct.accessibilityKeyCmdDefs.forEach(function(e){return t.registerCommandDef(e)}),this.uim=this.facade.retrieveMediator(hi.UI)||null},i}(Pr),Rr={exports:{}};!function(e){var t,i,r,n,a;t="undefined"!=typeof window&&void 0!==window.document?window.document:{},i=e.exports,r=function(){for(var e,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,n=i.length,a={};r<n;r++)if((e=i[r])&&e[1]in t){for(r=0;r<e.length;r++)a[i[0][r]]=e[r];return a}return!1}(),n={change:r.fullscreenchange,error:r.fullscreenerror},a={request:function(e,i){return new Promise(function(n,a){var o=function(){this.off("change",o),n()}.bind(this);this.on("change",o);var s=(e=e||t.documentElement)[r.requestFullscreen](i);s instanceof Promise&&s.then(o).catch(a)}.bind(this))},exit:function(){return new Promise(function(e,i){if(this.isFullscreen){var n=function(){this.off("change",n),e()}.bind(this);this.on("change",n);var a=t[r.exitFullscreen]();a instanceof Promise&&a.then(n).catch(i)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,i){var r=n[e];r&&t.addEventListener(r,i,!1)},off:function(e,i){var r=n[e];r&&t.removeEventListener(r,i,!1)},raw:r},r?(Object.defineProperties(a,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),i?e.exports=a:window.screenfull=a):i?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}(Rr);var kr,Nr=Rr.exports,Or=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.isFullscreen=!1,r.fsElement=null,r.enabled=!1,r.pIsAndroidFirefox=null,r.isIos=!1,r.fsMgr=null,r.useCustomFullscreen=!0,r.iosPropNames={ENTER_EVENT:"webkitbeginfullscreen",EXIT_EVENT:"webkitendfullscreen",ENTER_METHOD:"webkitEnterFullscreen",EXIT_METHOD:"webkitExitFullscreen",SUPPORTED:"webkitSupportsFullscreen"},r.fsMgr=Nr,r.changeHandler=function(e){return r.hChange(e)},r}return s(i,e),Object.defineProperty(i.prototype,"fullscreenElement",{get:function(){return this.fsElement},set:function(e){e instanceof HTMLElement&&(this.systemService.isIos||this.systemService.isAndroid||(this.fsElement=e))},enumerable:!1,configurable:!0}),i.prototype.onRemove=function(){this.isIos&&this.fsElement&&(this.fsElement.removeEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.removeEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler)),this.fsMgr&&C.isFunction(this.fsMgr.off)&&this.fsMgr.off("change",this.changeHandler),this.fsElement=null,this.fsMgr=null,e.prototype.onRemove.call(this)},i.prototype.enter=function(){if(this.enabled)return this.useCustomFullscreen?(this.isFullscreen=!0,void this.sendFullscreenNotification()):void(this.isIos?this.enterFsIos():this.fsMgr.request(this.fsElement))},i.prototype.exit=function(){if(this.enabled)return this.useCustomFullscreen?(this.isFullscreen=!1,void this.sendFullscreenNotification()):void(this.isIos?this.exitFsIos():this.fsMgr.exit())},i.prototype.isFullScreenPermitted=function(){return this.enabled},i.prototype.isFullScreen=function(){return this.isFullscreen},Object.defineProperty(i.prototype,"isAndroidFirefox",{get:function(){if(null===this.pIsAndroidFirefox){var e=this.systemService;this.pIsAndroidFirefox=e.os===t.Os.ANDROID&&e.browser===t.Browser.FIREFOX}return this.pIsAndroidFirefox},enumerable:!1,configurable:!0}),i.prototype.handleNotification=function(e){var t=e.name;t!==vi.VIDEO_LOADED_METADATA?this.enabled&&(t===vi.ENTER_FULLSCREEN_REQUEST?this.enter():this.exit()):this.handleMetadataLoaded()},i.prototype.listNotificationInterests=function(){return[vi.VIDEO_LOADED_METADATA,vi.ENTER_FULLSCREEN_REQUEST,vi.EXIT_FULLSCREEN_REQUEST]},i.prototype.handleMetadataLoaded=function(){this.enabled=this.enabled||this.webkitIosEnabled(),this.enabled&&this.sendNotification(vi.FULLSCREEN_AVAILABLE,null)},i.prototype.hChange=function(e){this.isFullscreen=this.isIos?this.checkWebkitIsoState(e):Nr.isFullscreen,this.isAndroidFirefox&&(this.isFullscreen&&this.fsElement.setAttribute("controls",""),!this.isFullscreen&&this.fsElement.removeAttribute("controls")),this.sendFullscreenNotification()},i.prototype.sendFullscreenNotification=function(){this.sendNotification(vi.FULLSCREEN_CHANGE,{isFullscreen:this.isFullscreen},mi.INTERNAL)},i.prototype.enterFsIos=function(){this.fsElement[this.iosPropNames.ENTER_METHOD]()},i.prototype.exitFsIos=function(){this.fsElement[this.iosPropNames.EXIT_METHOD]()},i.prototype.webkitIosEnabled=function(){return this.systemService.isIos&&this.fsElement[this.iosPropNames.SUPPORTED]},i.prototype.checkWebkitIsoState=function(e){return e.type===this.iosPropNames.ENTER_EVENT},i.prototype.onRegister=function(){if(this.useCustomFullscreen=!this.getModel(yi.PlayerOptions).useNativeFullscreen,this.useCustomFullscreen)this.enabled=!0;else{var e=this.systemService,t=this.facade.retrieveProxy(zt.PlayerDomProxy);e.isIos||e.isAndroid?(this.isIos=e.isIos,this.fsElement=t.getVideo()):this.fsElement=t.getMain(),!this.isIos&&this.fsElement&&this.fsMgr.isEnabled?(this.enabled=!0,this.fsMgr.on("change",this.changeHandler)):this.fsElement&&this.isIos&&(this.fsElement.addEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.addEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler))}},i}(Si),Lr=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.hKeyUp=function(e){var t=this.getCommand(e);t&&this.sendNotification(vi.USER_KEY_COMMAND,{action:t.action})},t.prototype.hKeyDown=function(e){},t.prototype.onRegister=function(){e.prototype.onRegister.call(this);for(var t=ct.userKeyCmdDefs,i=t.length;i--;)this.registerCommandDef(t[i])},t}(Pr),Dr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i,r=this.facade,n=r.retrieveService(ze.System),a=e.body.playerOptions;if(n.global&&!n.isWebMaf){var o=(null===(i=null==a?void 0:a.uiConfig)||void 0===i?void 0:i.cvui)||n.global.cvui;if(!a.useNativeControls&&o?Ni.createUi(this.facade,o,n,a):a.useNativeControls||(this.log(t.LogLevel.INFO,"PrepView: No UI specified."),r.retrieveProxy(zt.PlayerDomProxy).removePanelContainer()),n.isTv||r.registerMediator(new Or(hi.FULLSCREEN)),this.getScopeForKeys(a.overrides&&a.overrides.keyboardScope)!==t.KeyboardScope.NONE){var s=new Ir(hi.ACC_KEY_CMD_MEDIATOR);r.registerMediator(s);var l=new Lr(hi.KEY_COMMAND);r.registerMediator(l);var c=this.getPlayerContainer();s.scope=c,l.scope=c}this.log(t.LogLevel.DEBUG,"View prepared")}else this.log(t.LogLevel.INFO,"Skipping view creation")},i.prototype.getScopeForKeys=function(e){switch(e){case t.KeyboardScope.PLAYER:case t.KeyboardScope.DOCUMENT:case t.KeyboardScope.NONE:return e}return t.KeyboardScope.PLAYER},i.prototype.getPlayerContainer=function(){return this.facade.retrieveProxy(zt.PlayerDomProxy).getMain()},i}(Wi),Mr=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.initializeMacroCommand=function(){this.addSubCommand(Tr),this.addSubCommand(Qi),this.addSubCommand(_r),this.addSubCommand(Dr),this.addSubCommand(Cr)},t}(zi),wr=function(e){function t(t,i,r,n,a){void 0===a&&(a=!1);var o=e.call(this,t,null,C.assign({},n))||this;return o.pCode=i,o.pMessage=r,o.pFatal=a,o}return s(t,e),Object.defineProperty(t.prototype,"code",{get:function(){return this.pCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.pMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fatal",{get:function(){return this.pFatal},enumerable:!1,configurable:!0}),t}(v),xr=function(e){function i(i,r,n,a){var o=e.call(this,t.PlayerEvent.AD_ERROR,i,r,n,a)||this;return o.eInfo=o.data||{},o}return s(i,e),Object.defineProperty(i.prototype,"errorCode",{get:function(){return this.eInfo.errorCode||null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"innerErrorMessage",{get:function(){return this.eInfo.innerErrorMessage||null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sdkVersion",{get:function(){return this.eInfo.sdkVersion||null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"vastErrorCode",{get:function(){return this.eInfo.vastErrorCode||null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requestContext",{get:function(){return this.eInfo.requestContext||null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adInfo",{get:function(){return this.eInfo.adInfo||null},enumerable:!1,configurable:!0}),i}(wr),Ur=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i=this.facade.retrieveMediator(hi.APPLICATION);if(i){var r=e.name,n=Ui[r],a=e.body,o=this.isAdRelatedError(r)?new xr(a.code,a.message,a.data,a.fatal):new wr(n,a.code,a.message,a.data,a.fatal);if(this.logger.error(a.message,t.LogLevel.ERROR),a.fatal){var s=new wr(t.PlayerEvent.FATAL_ERROR,a.code,a.message,a.data,a.fatal);i.sendErrorEvent(s)}i.sendErrorEvent(o);var l=new wr(t.PlayerEvent.ERROR,a.code,a.message,a.data,a.fatal);i.sendErrorEvent(l)}},i.prototype.isAdRelatedError=function(e){return e===vi.AD_ERROR||e===vi.AD_STALLED},i}(Wi),Br=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.execute=function(e){this.facade.removeMediator(hi.PRESENTATION_MEDIATOR),this.facade.removeProxy(zt.ResourceProxy),this.facade.removeProxy(zt.ContentPlaybackStateProxy),this.facade.retrieveProxy(zt.ModelCollectionProxy).reset()},t}(Wi),Vr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i=this,r=e.name,n=e.body;switch(r){case vi.CHANGE_LANGUAGE:var a=this.facade.retrieveProxy(zt.LocalizationProxy),o=n.value;a.changeLanguage(o).then(function(){var e=i.facade.retrieveProxy(zt.PlayerDomProxy);if(e){var r=e.getMain();r.setAttribute("aria-label",a.localize(t.LocalizationId.MEDIA_PLAYER)),r.setAttribute("lang",a.language)}i.sendNotification(vi.LANGUAGE_CHANGE,n)});break;case vi.LANGUAGE_CHANGE:this.sendNotification(vi.APP_EVENT,{notificationName:r,data:n})}},i}(Wi),Fr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i=e.body;this.sendNotification(vi.APP_EVENT,{type:t.PlayerEvent.METRIC,data:i})},i}(Wi),Hr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var t,i,r,n=this,a=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR),o=null===(t=this.contentPlaybackStateProxy)||void 0===t?void 0:t.model;if(o)switch(e.name){case vi.PLAY_ON_USER_GESTURE:if(a){this.invokePlayOnUserGesture(a);var s=this.facade.retrieveProxy(zt.Playlist);this.facade.sendNotification(vi.POSTER_CLICK,{resource:s.currentResource},mi.INTERNAL)}else this.facade.sendNotification(vi.POSTER_CLICK,null,mi.INTERNAL);break;case vi.PLAY:var l=!!a,c=l&&this.getModel(yi.PresentationState).started;l&&e.type===mi.EXTERNAL&&!c?this.invokePlayOnUserGesture(a):c&&a&&a.play();break;case vi.PAUSE:a&&a.pause(),(r=this.getModel(yi.PresentationState)).isCurrentVideoAd||e.type!==mi.UI||this.facade.sendNotification(vi.USER_PAUSE,null,mi.INTERNAL);break;case vi.STOP:var u=this.facade.retrieveMediator(hi.APPLICATION),d=this.facade.retrieveProxy(zt.Playlist).currentResource,p=this.isVod();u.killCurrentResource().then(function(){p||n.sendNotification(vi.APP_EVENT,{notificationName:vi.LIVE_PRESENTATION_STOPPED,data:d})});break;case vi.SEEK:a.seek(e.body.value);break;case vi.SEEK_FORWARD:i=o.time+e.body.value,a.seek(Math.min(i,o.duration));break;case vi.SEEK_BACK:i=o.time-e.body.value,a.seek(Math.max(i,0));break;case vi.SEEK_TO_LIVE:!this.isVod()&&o.liveStreamInfo&&(i=o.liveStreamInfo.relativeDuration,a.seek(Math.min(i,o.duration)));break;case vi.SWITCH_AUDIO_TRACK:a.adapter.audioTrack=e.body.value;break;case vi.SWITCH_TEXT_TRACK:var h=e.body.value;if(h){this.facade.retrieveProxy(zt.TextTrackProxy).language=h.language;var f=this.contentPlaybackStateProxy.getTextTrackById(h.id);a.adapter.textTrack=f}break;case vi.SWITCH_TEXT_MODE:var y=e.body.value,v=this.facade.retrieveProxy(zt.TextTrackProxy);v.enabled=y,(null==a?void 0:a.adapter)&&(a.adapter.textTrackMode=v.mode);break;case vi.MUTE:a.mute(!0),this.sendNotification(vi.APP_EVENT,{notificationName:vi.MUTE,data:!0});break;case vi.UNMUTE:a.mute(!1),this.sendNotification(vi.APP_EVENT,{notificationName:vi.UNMUTE,data:!1});break;case vi.VOLUME_CHANGE:var m=e.body,g=m.value,A=m.muted;if(!isNaN(g)&&a.setVolume(g),r=this.getModel(yi.PresentationState),C.isUndefined(A)||r.isMuted==A||this.sendNotification(A?vi.MUTE:vi.UNMUTE),e.type===mi.EXTERNAL){var E=this.facade.retrieveMediator(hi.UI);E&&E.setVolume(g)}this.sendNotification(vi.APP_EVENT,{notificationName:vi.VOLUME_CHANGE,data:g})}else this.log("play() can not be invoked in this context.")},Object.defineProperty(i.prototype,"contentPlaybackStateProxy",{get:function(){return this.facade.retrieveProxy(zt.ContentPlaybackStateProxy)},enumerable:!1,configurable:!0}),i.prototype.isVod=function(){var e=this.contentPlaybackStateProxy.model.streamType;return e!=t.StreamType.LIVE&&e!=t.StreamType.DVR},i.prototype.shouldSkipPriming=function(){var e=this.facade.retrieveProxy(zt.PlayerDomProxy),i=this.facade.retrieveService(ze.System),r=this.getModel(yi.PlayerOptions).overrides;return!e||i.device==t.Device.LG_SMART_TV||i.device==t.Device.PLAYSTATION_5||!0===(null==r?void 0:r.skipPriming)},i.prototype.invokePlayOnUserGesture=function(e){var i=this,r=this.facade.retrieveProxy(zt.PlayerDomProxy),n=this.facade.retrieveService(ze.System),a=this.getModel(yi.PlayerOptions).overrides;e.beforePlayOnUserGesture(),this.shouldSkipPriming()?e&&e.playOnUserGesture():r.primeVideo(null==a?void 0:a.blankVideoUrl).then(function(){if(n.device==t.Device.IPHONE){var i="timeupdate",a=r.getVideo(),o=function(t){a.removeEventListener(i,o),setTimeout(function(){return e.playOnUserGesture()},200)};a.addEventListener(i,o)}else e.playOnUserGesture()}).catch(function(e){i.log(t.LogLevel.ERROR,"ERROR - PlaybackCommand: Priming FAILED.  ".concat(e.message)),i.facade.sendNotification(vi.AUTOPLAY_BLOCKED,e,mi.INTERNAL)})},i}(Wi),Kr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.execute=function(e){var t=this;switch(e.name){case vi.PLAYLIST_ADVANCED:this.sendAppEventNotification(e.name,e.body);break;case vi.PLAYLIST_COMPLETE:case vi.PLAYLIST_CLEARED:case vi.PLAYLIST_CURRENT_RESOURCE_CLEARED:this.close().then(function(){t.sendAppEventNotification(e.name,e.body)})}},t.prototype.sendAppEventNotification=function(e,t){void 0===t&&(t=null),this.sendNotification(vi.APP_EVENT,{notificationName:e,data:t})},t.prototype.close=function(){var e=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR);return e?e.close():Promise.resolve()},t}(Wi),Gr=function(e){function t(t,i,r,n){var a=e.call(this,t,null,r)||this;return a.ad=null,a.data=r,a.target=i,n&&(a.ad=n),a}return s(t,e),Object.defineProperty(t.prototype,"Type",{get:function(){return t.Type},enumerable:!1,configurable:!0}),t.prototype.getAd=function(){return this.ad},t.prototype.getStreamData=function(){return this.data},t.Type={LOADED:"loaded",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded",CUEPOINTS_CHANGED:"cuePointsChanged",STREAM_INITIALIZED:"streamInitialized",ERROR:"error",AD_PROGRESS:"adProgress",CLICK:"click"},t}(v),jr=function(){function e(e,t){this.data=e,this.podInfo=t}return e.prototype.getAdId=function(){return this.data.ad_id},e.prototype.getAdPodInfo=function(){return this.podInfo},e.prototype.getAdSystem=function(){return this.data.advertiser||null},e.prototype.getAdvertiserName=function(){return this.data.advertiser||null},e.prototype.getApiFramework=function(){return null},e.prototype.getCreativeAdId=function(){return this.data.creative_ad_id},e.prototype.getCreativeId=function(){return this.data.creative_id},e.prototype.getDealId=function(){return this.data.deal_id||null},e.prototype.getDescription=function(){return this.data.description},e.prototype.getDuration=function(){return this.data.duration},e.prototype.getTitle=function(){return this.data.title},e.prototype.getDaiWrapperData=function(){var e=null,t=null,i=null;if(this.data.wrappers&&this.data.wrappers[0]){var r=this.data.wrappers[0];e=r.ad_id,t=r.creative_id,i=r.creative_ad_id}return{adId:e,creativeId:t,creativeAdId:i}},e.prototype.getWrapperAdIds=function(){return this.getWrapperPropArray("ad_id")},e.prototype.getWrapperCreativeIds=function(){return this.getWrapperPropArray("creative_id")},e.prototype.getWrapperCreativeAdIds=function(){return this.getWrapperPropArray("creative_ad_id")},e.prototype.getWrapperAdSystems=function(){return this.getWrapperPropArray("system")},e.prototype.getCompanionAds=function(){return null},e.prototype.getWrapperPropArray=function(e){var t,i=[],r=this.data.wrappers||null;if(!r)return null;for(var n=0,a=r.length;n<a;n++)(t=r[n][e])&&""!=t&&i.push(t);return i},e}(),Wr=function(){function e(e,t,i){this.data=e,this.podIdx=i,this.pos=t}return e.prototype.getAdPosition=function(){return this.pos},e.prototype.setAdPosition=function(e){this.pos=e},e.prototype.getMaxDuration=function(){return this.data.duration},e.prototype.getPodIndex=function(){return this.podIdx},e.prototype.setPodIndex=function(e){this.podIdx=e},e.prototype.getTimeOffset=function(){return this.data.start},e.prototype.getTotalAds=function(){return this.data.ads&&this.data.ads.length},e}(),Yr=function(e){function i(t,i,r){var n=e.call(this,null)||this;return n.adBreaks=[],n.currBreak=null,n.currBreakIndex=null,n.currAd=null,n.breakStatus={},n.breakPoints=[],n.pollId=null,n.lastRecordedTime=-1,n.currEventStatus=n.createEventStatus(),n.currBreakIndex=null,n.vidIface=t,n.logger=r,n.setClickElement(i),n}return s(i,e),i.prototype.addEventListener=function(e,t){this.on(e,t)},i.prototype.removeEventListener=function(e,t){this.off(e,t)},i.prototype.requestStream=function(e,i){var r=this;void 0===i&&(i=null),e.adTagParameters.correlator=this.getCorrelator(),e.apiKey&&(e.adTagParameters["api-key"]=e.apiKey),e.authToken&&(e.adTagParameters["auth-token"]=e.authToken),Ye({method:"POST",errorRecovery:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:this.getUrl(e.contentSourceId,e.videoId,e.format||"hls"),data:e.adTagParameters,encodeList:["cust_params"]}).then(function(e){r.gatherStreamInfo(e),r.emitCues(),r.beginPoll(),r.emitLoaded(e)}).catch(function(e){var i="Error. Status: ".concat(e.status||"Unknown","; Message: ").concat(e.message);r.logger.log(t.LogLevel.ERROR,i),r.emitError(i,t.ErrorCode.DAI_NETWORK_ERROR)})},i.prototype.setClickElement=function(e){var t=this;e&&(this.clickEl=e||null,this.clickThruHandler=function(e){t.hClickThru(e)},this.clickEl.addEventListener("click",this.clickThruHandler))},i.prototype.contentTimeForStreamTime=function(e){var t,i=this.adBreaks,r=0;null==e&&(e=this.streamDur);for(var n=0,a=i.length;n<a;n++){if(!(e>(t=i[n]).start))return e-r;if(!(e>=t.end))return t.start-r;if(r+=t.duration,n==a-1)return e-r}return e},i.prototype.streamTimeForContentTime=function(e){for(var t,i=this.adBreaks,r=0,n=0,a=i.length;n<a&&(t=i[n],e>=this.contentTimeForStreamTime(i[n].start));n++)r+=t.duration;return e+r},i.prototype.previousCuePointForStreamTime=function(e){for(var t,i=this.adBreaks,r=i.length;r--;)if(e>=(t=i[r]).start)return t.played?null:this.cuePointFromBreak(t);return null},i.prototype.onTimedMetadata=function(e){Ye({url:this.mvu+e.TXXX})},i.prototype.processMetadata=function(e,t,i){},i.prototype.reset=function(){clearInterval(this.pollId),this.clickEl&&this.clickEl.removeEventListener("click",this.clickThruHandler),this.clickEl=null,this.streamId=null,this.adBreaks=[],this.breakPoints=[],this.streamDur=NaN,this.currBreak=null,this.currBreakIndex=null,this.currAd=null,this.mvu=null,this.resetUponAdComplete(),this.lastRecordedTime=-1,this.pollId=null},i.prototype.beginPoll=function(){var e=this;clearInterval(this.pollId),this.pollId=setInterval(function(){e.checkState()},100)},i.prototype.checkState=function(){var e=this.vidIface.currentTime;if(!isNaN(e)&&e>0&&e>this.lastRecordedTime){if(!this.currBreak){var t=this.getBreakForStreamTime(e),i=t.break;i&&i.played?this.emitAdPeriodStarted(i):i&&this.beginBreak(i,t.index)}if(this.currBreak){var r=this.currBreak;e>=r.end?(this.monitorAdStatus(e,r),this.endBreak()):this.monitorAdStatus(e,r)}}!isNaN(e)&&e>=0&&(this.lastRecordedTime=e)},i.prototype.monitorAdStatus=function(e,t){var i=t.ads,r=t.start;if(this.currAd)this.monitorCurrentAd(e);else for(var n,a=i.length;a--;)if((e>=(n=i[a].start||0)||null==n)&&!this.breakStatus["t_".concat(r)]["t_".concat(n)]){var o=t.type.toLowerCase();this.currBreakIndex="pre"===o?0:"mid"===o?t.index:-1,this.beginAd(i[a],n);break}},i.prototype.monitorCurrentAd=function(e){for(var t,r=this.currAd.events,n=this.currEventStatus,a=!0,o=r.length;o--;)if(e>=(t=r[o]).time&&!n[t.type]){if(n[t.type]=!0,"complete"===t.type||e>=this.currAd.start+this.currAd.duration){a=!1,this.emitAdComplete(),this.resetUponAdComplete();break}if("start"!==t.type){a=!1,this.emit(i.eventStatusMap[t.type],this.createStreamData());break}}a&&this.emitProgress(e)},i.prototype.resetUponAdComplete=function(){this.currEventStatus=this.createEventStatus(),this.currAd=null},i.prototype.beginBreak=function(e,t){this.currBreak=e,this.currBreak.played=!0,this.emitCues();var r=this.createStreamData();r.streamId=this.streamId,this.emit(i.event.AD_BREAK_STARTED,r)},i.prototype.endBreak=function(){this.emit(i.event.AD_BREAK_ENDED,this.createStreamData()),this.currBreak=null},i.prototype.beginAd=function(e,t){this.currAd=e,this.breakStatus["t_".concat(this.currBreak.start)]["t_".concat(t)]=!0,this.currEventStatus.start=!0;var r=this.createStreamData();r.streamId=this.streamId;var n=new Wr(this.currBreak,this.currAd.seq,this.currBreakIndex),a=new jr(this.currAd,n),o=new Gr(i.event.STARTED,this,r,a);this.dispatchEvt(o)},i.prototype.hClickThru=function(e){if(this.currAd){var t=this.currAd.clickthrough_url;t&&""!==t&&window.open(t),this.emit(i.event.CLICK)}},i.prototype.emit=function(e,t){void 0===t&&(t=null);var i=new Gr(e,this,t);this.dispatchEvt(i)},i.prototype.emitCues=function(){var e=this.createStreamData();e.cuepoints=this.assembleCuePoints(),this.emit(i.event.CUEPOINTS_CHANGED,e)},i.prototype.emitProgress=function(e){var t=this.createAdProgressData(null===e?(this.currAd.start||0)+this.currAd.duration:e),r=this.createStreamData();r.adProgressData=t,this.emit(i.event.AD_PROGRESS,r)},i.prototype.emitLoaded=function(e){var t=this.createStreamData();t.stream_id=this.streamId,t.subtitles=e.subtitles,t.manifestFormat=this.getFormat(e.stream_manifest),t.url=e.stream_manifest,this.emit(i.event.LOADED,t)},i.prototype.emitAdComplete=function(){var e=this.createStreamData();e.streamId=this.streamId,this.emitProgress(null),this.emit(i.event.COMPLETE,e)},i.prototype.emitError=function(e,t){var r=this.createStreamData();r.streamId=this.streamId,r.errorMessage=e,r.code=t,this.emit(i.event.ERROR,r)},i.prototype.emitAdPeriodStarted=function(e){var t=this.createStreamData();t.streamResumeTime=e.start+e.duration+.1,this.emit(i.event.AD_PERIOD_STARTED,t)},i.prototype.createAdProgressData=function(e){return{adBreakDuration:this.currBreak.duration,adPeriodDuration:null,adPosition:this.currAd.seq,currentTime:C.clampValue(e-(this.currAd.start||0),0,this.currAd.duration),duration:this.currAd.duration,totalAds:this.currBreak.ads.length}},i.prototype.createEventStatus=function(){return{start:!1,first:!1,mid:!1,third:!1,complete:!1}},i.prototype.assembleCuePoints=function(){for(var e=[],t=0,i=this.adBreaks.length;t<i;t++)e.push(this.cuePointFromBreak(this.adBreaks[t]));return e},i.prototype.getBreakForStreamTime=function(e){for(var t,i=0,r=this.adBreaks.length;i<r;i++)if(e>=(t=this.adBreaks[i]).start&&e-t.start<=1.5&&!this.currBreak)return{break:t,index:i};return{break:null,index:null}},i.prototype.getUrl=function(e,t,r){return i.DAI_BASE_URL+i.STREAM_PATH.replace("{format}",r).replace("{contentSourceId}",e).replace("{daiVideoId}",t)},i.prototype.getCorrelator=function(){var e=String(Math.round(1e15+9e15*Math.random()));if(e.length<16)for(;e.length<16;)e+="0";return e.length>16&&(e=e.substr(0,17)),e},i.prototype.cuePointFromBreak=function(e){return{adTechnology:t.AdTechnology.SSAI,start:e.start,end:e.end,played:e.played}},i.prototype.createStreamData=function(){return{adProgressData:null,cuepoints:null,errorMessage:null,streamId:this.streamId||null,manifestFormat:null,subtitles:null,url:null}},i.prototype.getFormat=function(e){var i=e.indexOf(".m3u8")>=0,r=!i&&e.indexOf(".mpd")>=0;return i?t.VideoFormat.HLS:r?t.VideoFormat.DASH:t.VideoFormat.UNKNOWN},i.prototype.gatherBreakInfo=function(e){for(var t,i,r,n,a=e&&e.length||0,o=1,s=0;s<a;s++){r=(i=(t=e[s]).start)+(n=t.duration),this.breakPoints.push(i),this.adBreaks.push({duration:n,start:i,end:r,played:!1,type:t.type,ads:t.ads,index:s,seq:"mid"==t.type?o++:0});for(var l=this.breakStatus["t_"+i]={},c=0,u=t.ads.length;c<u;c++)l["t_"+(t.ads[c].start||0)]=!1}},i.prototype.gatherStreamInfo=function(e){this.streamDur=e.total_duration,this.mvu=e.media_verification_url,this.streamId=e.stream_id,this.gatherBreakInfo(e.ad_breaks)},i.event={LOADED:"loaded",STREAM_INITIALIZED:"streamInitialized",CUEPOINTS_CHANGED:"cuePointsChanged",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",AD_PROGRESS:"adProgress",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",CLICK:"click",ERROR:"error",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded"},i.eventStatusMap={start:"started",firstquartile:"firstQuartile",midpoint:"midpoint",thirdquartile:"thirdQuartile",complete:"complete"},i.DAI_BASE_URL="https://dai.google.com",i.STREAM_PATH="/ondemand/v1/{format}/content/{contentSourceId}/vid/{daiVideoId}/stream",i}(_),zr=function(){function e(e){this.req={apiKey:null,streamActivityMonitorId:null,adTagParameters:null,assetKey:null,format:"hls",contentSourceId:null,videoId:null},e&&C.assign(this.req,e)}return Object.defineProperty(e.prototype,"adTagParameters",{get:function(){return this.req.adTagParameters},set:function(e){this.req.adTagParameters=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoId",{get:function(){return this.req.videoId},set:function(e){this.req.videoId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentSourceId",{get:function(){return this.req.contentSourceId},set:function(e){this.req.contentSourceId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apiKey",{get:function(){return this.req.apiKey},set:function(e){this.req.apiKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this.req.authToken},set:function(e){this.req.authToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.req.format},set:function(e){this.req.format=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"assetKey",{get:function(){return this.req.assetKey},set:function(e){this.req.assetKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamActivityMonitorId",{get:function(){return this.req.streamActivityMonitorId},set:function(e){this.req.streamActivityMonitorId=e},enumerable:!1,configurable:!0}),e}(),$r={StreamManager:Yr,StreamEvent:Gr,VODStreamRequest:zr},qr=function(){function e(){this.MOAT_PARTNER_CODE="cbsiimajsint708425247896",this.adContextToVpaidEventMap={ima:{start:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",skip:"AdSkipped",volumechange:"AdVolumeChange",mute:"AdVolumeChange"},dai_sdk:{started:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",controlpause:"AdPaused",controlplay:"AdPlaying",controlvolumeset:"AdVolumeChange",controlmute:"AdVolumeChange",controlunmute:"AdVolumeChange"}}}return e.prototype.destroy=function(){this.adContextToVpaidEventMap=null,this.trackingObj=null},e.prototype.track=function(e){var t=e.context,i=e.adInfo,r={level1:"",level2:"",level3:i.wrapperAdId,level4:i.wrapperCreativeId,slicer1:"vaw-can",slicer2:e.partner,slicer3:e.pageType,moatVASTSystem:t,moatVASTAdID:i.wrapperAdId},n=e.viewGuid||e.vguid,a=e.pageType||e.ptype;n&&(r.zMoatVGUID=n),a&&(r.zMoatPT=a),this.initMoat(e.adVideoContainer,r,i.adDuration,this.MOAT_PARTNER_CODE,null)},e.prototype.untrack=function(){this.trackingObj=null},e.prototype.trackEvent=function(e){var t=this.adContextToVpaidEventMap[e.context][e.eventName.toLowerCase()];t&&this.trackingObj&&this.trackingObj.dispatchEvent({type:t,adVolume:e.volume})},e.prototype.initMoat=function(e,t,i,r,n){void 0===n&&(n=null);var a,o,s,l=document.createElement("script"),c=[],u={adData:{ids:t,duration:i,url:n},dispatchEvent:function(e){this.sendEvent?(c&&(c.push(e),e=c,c=!1),this.sendEvent(e)):c.push(e)}};s="_moatApi"+Math.floor(1e8*Math.random());try{o=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){o=window}o[s]=u,l.type="text/javascript",e&&e.insertBefore(l,e.childNodes[0]||null),l.src="https://z.moatads.com/"+r+"/moatvideo.js#"+s,this.trackingObj=u},e}(),Qr=function(e){function i(t,i){var r=e.call(this,t)||this;return r.adContext=i,r}return s(i,e),i.prototype.destroy=function(){this.moatTracker&&this.moatTracker.destroy(),this.moatTracker=null,this.adContainer=null,this.trackingData=null,e.prototype.destroy.call(this)},i.prototype.getGamPlatformString=function(){return this.getService(ze.System).isDesktop?"desktop":"mobile_web"},i.prototype.setTrackingData=function(e){this.trackingData=e},i.prototype.getAdContext=function(){return this.adContext},i.prototype.setContainer=function(e){this.adContainer=e},i.prototype.getAdBreakTypeFromPodIndex=function(e){return 0===e?t.AdBreakType.PRE:-1===e?t.AdBreakType.POST:t.AdBreakType.MID},i.prototype.assembleAdBreakInfo=function(e,t){var i=e.getAdPodInfo(),r=i.getPodIndex();return{adBreakDuration:i.getMaxDuration(),adBreakPosition:r,adTotal:i.getTotalAds(),adBreakType:this.getAdBreakTypeFromPodIndex(r),adServerName:this.adContext,adTechnology:t}},i.prototype.assembleAdInfo=function(e,i,r){void 0===r&&(r=!1);var n=e.getAdPodInfo(),a=n&&n.getAdPosition()||-1,o=this.getIdInfo(e),s=this.adContext===t.AdContext.IMA;return{adObject:r?e:null,adServerName:this.adContext,adDuration:e.getDuration(),adTitle:e.getTitle(),adId:o.adId,adPosition:a,adAssetUrl:s?e.getMediaUrl():i.mediaUrl||null,isVpaid:s?this.getIsVpaid(e):null,wrapperAdId:o.wrapperAdId,creativeId:o.creativeId,wrapperCreativeId:o.wrapperCreativeId,vastMediaHeight:s?e.getVastMediaHeight():null,vastMediaWidth:s?e.getVastMediaWidth():null,vastMediaBitrate:s?e.getVastMediaBitrate():null}},i.prototype.trackAd=function(e){var t=this.trackingData;this.moatTracker.track({viewGuid:t.viewGuid,pageType:t.pageType,adInfo:e,adVideoContainer:this.adContainer,context:this.adContext,partner:t.partner})},i.prototype.trackAdEvent=function(e){this.moatTracker.trackEvent(e)},i.prototype.untrackAd=function(){this.moatTracker.untrack()},i.prototype.createViewabilityTracker=function(){this.moatTracker=new qr},i.prototype.getIdInfo=function(e){var i=this.getWrapperId(e),r=this.getCreativeId(e);return{adId:i.adId,wrapperAdId:i.wrapperAdId,creativeId:r.creativeId,wrapperCreativeId:r.wrapperCreativeId,adServerName:t.AdContext.IMA,adDuration:e.getDuration()}},i.prototype.getWrapperId=function(e){var t=e.getWrapperAdIds(),i=Array.isArray(t)&&t.length,r=e.getAdId()||"",n=i?t[0]:r,a=i?t[t.length-1]:r;return a||(a=null),{adId:n,wrapperAdId:a}},i.prototype.getCreativeId=function(e){var t=e.getWrapperCreativeIds(),i=Array.isArray(t)&&t.length,r=e.getCreativeId()||null,n=i?t[0]:r,a=i?t[t.length-1]:r;return a||(a=null),{creativeId:n,wrapperCreativeId:a}},i.prototype.getIsVpaid=function(e){return"application/javascript"===e.getContentType()},i}(oi),Xr=function(e){function i(i,r){var n=e.call(this,i,r?t.AdContext.DAI_API:t.AdContext.DAI_SDK)||this;return n.pSdk=null,n.usesApi=!1,n.videoIface=null,r&&(n.pSdk=r,n.usesApi=!0),n}return s(i,e),i.prototype.destroy=function(){this.streamMgr&&this.streamMgr.reset(),this.streamMgr=null,this.pSdk=null,this.videoIface=null,e.prototype.destroy.call(this)},i.prototype.initViewabilityTracking=function(){this.createViewabilityTracker()},Object.defineProperty(i.prototype,"videoInterface",{get:function(){return this.videoIface},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"usesDaiApi",{get:function(){return this.usesApi},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sdk",{get:function(){var e,t;if(!this.pSdk){var i=this.getService(ze.System).global;(null===(t=null===(e=null==i?void 0:i.google)||void 0===e?void 0:e.ima)||void 0===t?void 0:t.dai)&&(this.pSdk=i.google.ima.dai.api)}return this.pSdk},enumerable:!1,configurable:!0}),i.prototype.getSdkVersion=function(){return""},i.prototype.setVideoInterface=function(e){this.videoIface=e},i.prototype.setVolume=function(e){this.usesApi&&(this.videoIface.volume=e)},i.prototype.setMuted=function(e){this.usesApi&&(this.videoIface.muted=e)},i.prototype.setDuration=function(e){this.usesApi&&(this.videoIface.duration=e)},i.prototype.setCurrentTime=function(e){this.usesApi&&(this.videoIface.currentTime=e)},i.prototype.reset=function(){this.streamMgr.reset(),this.usesApi&&(this.videoIface.duration=NaN,this.videoIface.currentTime=NaN)},i.prototype.assembleAdInfo=function(i,r){if(this.adContext===t.AdContext.DAI_SDK)return e.prototype.assembleAdInfo.call(this,i,r);var n=i.getAdPodInfo(),a=n&&n.getAdPosition()||-1,o=i.getDaiWrapperData(),s=o.adId,l=o.creativeId;return{adObject:i,adServerName:this.adContext,adDuration:i.getDuration(),adTitle:i.getTitle(),adId:s,adPosition:a,adAssetUrl:r.mediaUrl||null,isVpaid:!1,wrapperAdId:s,creativeId:l,wrapperCreativeId:l,vastMediaHeight:null,vastMediaWidth:null,vastMediaBitrate:null}},i.prototype.getStreamManager=function(){return!this.streamMgr&&this.sdk&&(this.usesApi?this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer,this.getLogger()):this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer)),this.streamMgr},i}(Qr);(kr||(kr={})).GOOGLE_DAI="urn:google:dai:2018";var Jr,Zr,en,tn,rn=function(e){function t(){var t=e.call(this)||this;return t.pManifestParsed=!1,t.qualityChange=function(e){t.emit(Ti.ABR_QUALITY_LOADED,e)},t.qualityInfoChange=function(e){t.qualities=e.qualities,t.emit(Ti.MANIFEST_PARSED,{profile:e.qualities}),t.emit(Ti.ABR_CONSTRAINTS_CHANGE,{minIndex:0,maxIndex:e.qualities.length-1,manifestQualities:e.qualities})},t.error=function(e){t.emit(Ti.ERROR,e)},t.audioTrackChange=function(e){t.emit(Ti.AUDIO_TRACK_CHANGE,{track:e})},t.audioTrackInfoChange=function(e){t.emit(Ti.AUDIO_TRACK_UPDATED,e)},t.cdnChange=function(e){t.emit(Ti.MULTI_CDN,{cdn:e})},t.drmKeySystemCreated=function(e){t.emit(Ti.DRM_KEYSYSTEM_CREATED,{keysystem:e})},t.timeUpdate=function(){t.emit(ot.TIME_UPDATE)},t.playing=function(){t.emit(ot.PLAYING)},t.paused=function(){t.emit(ot.PAUSE)},t.seeking=function(){t.emit(ot.SEEKING)},t.seeked=function(){t.emit(ot.SEEKED)},t.ended=function(){t.emit(ot.ENDED)},t.durationChange=function(){t.emit(ot.DURATION_CHANGE)},t.volumeChange=function(e,i){t.emit(ot.VOLUME_CHANGE,{volume:e,muted:i})},t.metadataCuepoint=function(e){t.emit(nt.METADATA_CUEPOINT,e)},t.textCuepoints=function(e){t.emit(nt.TEXT_CUEPOINT,e)},t.textTrackDisplayModeChange=function(e){t.emit(nt.TEXT_TRACK_DISPLAY_MODE_CHANGE,{mode:e})},t.textTrackInfoChange=function(e){var i;null===(i=e.tracks)||void 0===i||i.forEach(function(e){return t.emit(nt.TEXT_TRACK_ADDED,e)}),t.emit(nt.TEXT_TRACK_AVAILABLE)},t.textTrackChange=function(e){t.emit(nt.TEXT_TRACK_CHANGE,e)},t}return s(t,e),t}(_),nn=function(e){function i(t,i,r){var n=e.call(this)||this;return n.config=t,n.adapter=i,n.delegate=r,n.lastKnownTimes={buffer:NaN},n.pBuffering=!1,n.pPaused=!1,n.pSeeking=!1,n.pConstraints={},n.logger=t.logger,n.dispatchEvt=n.dispatchEvt.bind(n),Qe.values(ot).forEach(function(e){return n.delegate.on(e,n.dispatchEvt)}),Qe.values(Ti).forEach(function(e){return n.delegate.on(e,n.dispatchEvt)}),Qe.values(nt).forEach(function(e){return n.delegate.on(e,n.dispatchEvt)}),n}return s(i,e),i.prototype.destroy=function(){return e.prototype.destroy.call(this),Promise.resolve(this.adapter.destroy())},Object.defineProperty(i.prototype,"type",{get:function(){return this.adapter.getType()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return this.adapter.getCurrentTime()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this.adapter.getDuration()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveStreamInfo",{get:function(){return this.adapter.getLiveStreamInfo()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLiveStream",{get:function(){return this.adapter.getIsLiveStream()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"droppedVideoFrames",{get:function(){var e,t;return null===(t=(e=this.adapter).getMetrics)||void 0===t?void 0:t.call(e).droppedVideoFrames},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"framerate",{get:function(){var e,t;return null===(t=(e=this.adapter).getMetrics)||void 0===t?void 0:t.call(e).framerate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffering",{get:function(){if(!this.pPaused){var e=this.lastKnownTimes.buffer+.001,t=this.adapter.getCurrentTime();this.lastKnownTimes.buffer=t;var i=t<e;this.pBuffering=i&&!this.pSeeking}return this.pBuffering},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bufferLength",{get:function(){return this.adapter.getBufferLength()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentIndex",{set:function(e){this.adapter.setQuality(this.delegate.qualities[e])},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoQualitySwitching",{set:function(e){this.adapter.setAutoQualitySwitching(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{set:function(e){this.pConstraints.maxBitrate=e,this.adapter.setMaxBitrate(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{set:function(e){this.pConstraints.minBitrate=e,this.adapter.setMinBitrate(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackMode",{set:function(e){this.adapter.setTextTrackMode(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{set:function(e){this.adapter.setTextTrack(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"audioTrack",{set:function(e){this.adapter.setAudioTrack(e)},enumerable:!1,configurable:!0}),i.prototype.initialize=function(){},i.prototype.load=function(){var e=this;return this.adapter.load().then(function(t){void 0===t&&(t={});var i=Qe.merge({manifest:{mimeType:Qe.getResourceMimeType(e.config.resource)},fragment:{mimeType:""}},t);e.delegate.emit(Ti.LOADED_METADATA,i)})},i.prototype.play=function(){var e=this;this.adapter.play().then(function(){e.pPaused=!1}).catch(function(i){e.logger.warn("Exception caught in play() Promise: "+i.message,t.LogLevel.WARN),e.emit(ot.AUTOPLAY_BLOCKED,i)})},i.prototype.pause=function(){this.pPaused=!0,this.adapter.pause()},i.prototype.suspend=function(){throw new Error("Method not implemented.")},i.prototype.resume=function(){throw new Error("Method not implemented.")},i.prototype.seek=function(e){var t=this;this.pSeeking=!0,this.adapter.seek(e).then(function(){return t.pSeeking=!1})},i.prototype.resize=function(){this.adapter.resize()},i.prototype.clearCue=function(){var e,t;null===(t=(e=this.adapter).clearText)||void 0===t||t.call(e)},i}(_);!function(e){e.HLSJS_GZIP_CDN="//cdnjs.cloudflare.com/ajax/libs/hls.js/{{VERSION}}/hls.min.js",e.SHAKA_GZIP_CDN="//cdnjs.cloudflare.com/ajax/libs/shaka-player/{{VERSION}}/shaka-player.compiled{{DEBUG}}.js",e.TWITCH_GZIP_CDN="//player.live-video.net/{{VERSION}}/amazon-ivs-player.min.js"}(Jr||(Jr={})),function(e){e.HLSJS="1.0.7",e.SHAKA="3.2.0",e.TWITCH="1.1.2"}(Zr||(Zr={})),function(e){e[e.BUFFER_LEVEL_PRELOAD=12]="BUFFER_LEVEL_PRELOAD",e[e.BUFFER_LEVEL_PLAYBACK=60]="BUFFER_LEVEL_PLAYBACK",e[e.MANIFEST_RETRY_ATTEMPTS=2]="MANIFEST_RETRY_ATTEMPTS",e[e.MANIFEST_RETRY_DELAY=1e3]="MANIFEST_RETRY_DELAY",e[e.LEVEL_RETRY_TIMEOUT=2e3]="LEVEL_RETRY_TIMEOUT",e[e.LEVEL_RETRY_DELAY=500]="LEVEL_RETRY_DELAY",e[e.FRAGMENT_RETRY_TIMEOUT=2e3]="FRAGMENT_RETRY_TIMEOUT",e[e.FRAGMENT_RETRY_DELAY=500]="FRAGMENT_RETRY_DELAY",e[e.FATAL_ERROR_RECOVERY_ATTEMPTS=3]="FATAL_ERROR_RECOVERY_ATTEMPTS"}(en||(en={})),function(e){e.MULTI_CDN="x-cdn",e.VIDEO="video",e.AUDIO="audio",e.TEXT="text"}(tn||(tn={}));var an,on,sn=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastKnownTimes={absolute:NaN,relative:NaN,end:NaN},t}return s(i,e),i.prototype.play=function(){if(!isNaN(this.pauseTime)){if(this.pauseTime<this.liveStreamInfo.absoluteStart){var i=this.seekable.start+1;this.logger.log(t.LogLevel.INFO,"Playhead outside of DVR window bounds. Moving to ".concat(i)),this.videoSurface.seek(i)}this.pauseTime=NaN}e.prototype.play.call(this)},i.prototype.pause=function(){var t;this.pIsLiveStream&&!0===(null===(t=this.config.resource.overrides)||void 0===t?void 0:t.clearOutOfBoundsDvrBuffer)&&(this.pauseTime=this.liveStreamInfo.absoluteTime),e.prototype.pause.call(this)},i.prototype.seek=function(t){if(this.pIsLiveStream){var i=this.liveStreamInfoVO;t=C.mapToRange(t,0,i.relativeDuration,i.safeSeekingTime,i.safeSeekingDuration)}e.prototype.seek.call(this,t)},Object.defineProperty(i.prototype,"seekable",{get:function(){var e={start:0,end:0},t=this.videoSurface.video.seekable,i=t.length-1;return i>=0&&(e.start=t.start(i),e.end=t.end(i)),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"segmentDuration",{get:function(){return 6},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveStreamInfo",{get:function(){var e,t=this.liveStreamInfoVO,i=this.videoSurface.video,r=this.seekable,n=r.start,a=r.end,o=i.currentTime,s=a-n,l=this.segmentDuration,c=this.playback.liveEdgeSyncFragmentCount,u=(null===(e=this.config.resource.overrides)||void 0===e?void 0:e.safeSeekDuration)||l;t.relativeTime=Math.max(o-n,0),t.relativeDuration=s,t.absoluteDuration=Date.now(),t.dvrWindowSize=Math.floor(s),t.liveEdgeOffset=l*c+l,t.safeSeekingTime=Math.ceil(n+u),t.safeSeekingDuration=Math.floor(a-u),t.isPlayingLive=Math.ceil(o+t.liveEdgeOffset)>=t.safeSeekingDuration,a!=this.lastKnownTimes.end&&(this.lastKnownTimes.end=a,t.absoluteStart=t.absoluteDuration-1e3*s,this.lastKnownTimes.absolute=Math.round(t.absoluteStart+1e3*t.relativeTime),this.lastKnownTimes.relative=o);var d=Math.round(1e3*(o-this.lastKnownTimes.relative));return t.absoluteTime=this.lastKnownTimes.absolute+d,t},enumerable:!1,configurable:!0}),i}(Ri),ln=function(e){function i(i){var r=e.call(this,i)||this;return r.pType=t.PlaybackAdapterType.HLSJS,r.Hls=window.Hls,r.pFramerate=Number.NaN,r.pFragmentType="",r.textTrackInfo={track:null,tracks:[]},r.hlsjsEventMap=[{type:r.Hls.Events.MANIFEST_PARSED,callback:function(e,t){return r.onManifestParsed(e,t)}},{type:r.Hls.Events.LEVEL_LOADED,callback:function(e,t){return r.onLevelLoaded(e,t)}},{type:r.Hls.Events.LEVEL_UPDATED,callback:function(e,t){return r.onLevelUpdated(e,t)}},{type:r.Hls.Events.LEVEL_SWITCHING,callback:function(e,t){return r.onLevelSwitching(e,t)}},{type:r.Hls.Events.LEVEL_SWITCHED,callback:function(e,t){return r.onLevelSwitched(e,t)}},{type:r.Hls.Events.FRAG_LOADED,callback:function(e,t){return r.onFragmentLoaded(e,t)}},{type:r.Hls.Events.FRAG_PARSING_DATA,callback:function(e,t){return r.onFragmentParsingData(e,t)}},{type:r.Hls.Events.AUDIO_TRACKS_UPDATED,callback:function(e,t){return r.onAudioTrackUpdated(e,t)}},{type:r.Hls.Events.AUDIO_TRACK_SWITCHED,callback:function(e,t){return r.onAudioTrackSwitched(e,t)}},{type:r.Hls.Events.ERROR,callback:function(e,t){return r.onError(e,t)}},{type:r.Hls.Events.SUBTITLE_TRACKS_UPDATED,callback:function(e,t){return r.onSubtitleTracksUpdated(e,t)}},{type:r.Hls.Events.SUBTITLE_TRACK_SWITCH,callback:function(e,t){return r.onSubtitleTrackSwitch(e,t)}}],r.onCueChange=function(e){var t=e.target,i=C.dedupeCues(t);r.config.textTrackSettings.native||r.emit(nt.TEXT_CUEPOINT,{activeCues:i})},r.logger.log(t.LogLevel.INFO,"HlsjsAdapter created"),r}return s(i,e),i.prototype.createVideoSurface=function(){return new Ut(this.config,!1)},Object.defineProperty(i.prototype,"textTrackMode",{set:function(e){this.enabledSubtitles(e),this.emit(nt.TEXT_TRACK_DISPLAY_MODE_CHANGE,{mode:e})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{set:function(e){e&&(this.player.subtitleTrack=parseInt(e.id))},enumerable:!1,configurable:!0}),i.prototype.initialize=function(){var i=this;e.prototype.initialize.call(this);var r={};r.debug=this.enableLogger,r.capLevelToPlayerSize=this.playback.abr.capQualityToScreenSize,r.autoStartLoad=!1,r.liveSyncDurationCount=this.playback.liveEdgeSyncFragmentCount,r.manifestLoadingMaxRetry=en.MANIFEST_RETRY_ATTEMPTS,r.manifestLoadingRetryDelay=en.MANIFEST_RETRY_DELAY,r.levelLoadingRetryDelay=en.LEVEL_RETRY_DELAY,r.fragLoadingRetryDelay=en.FRAGMENT_RETRY_DELAY,r.enableCEA708Captions=!0;var n=this.config.performanceSettings;null!=n.forwardBufferLength&&(r.maxBufferLength=n.forwardBufferLength),null!=n.backBufferLength&&(r.liveBackBufferLength=n.backBufferLength),null!=n.topQualityForwardBufferLength&&(r.maxMaxBufferLength=n.topQualityForwardBufferLength);var a=(r=this.mergeStreamingConfigs(r,this.config.resource.overrides)).xhrSetup;r.xhrSetup=a?function(e,t){a(e,t),i.onRequest(e,t)}:this.onRequest.bind(this),this.logger.log(t.LogLevel.INFO,"Hlsjs version: ".concat(this.Hls.version)),this.player=new this.Hls(r),this.player.subtitleDisplay=this.config.textTrackSettings.native,this.addEvents(this.player,this.hlsjsEventMap)},i.prototype.loadMediaUrl=function(){var t=this,i=C.eventsToPromise([{target:this.player,events:[this.Hls.Events.MANIFEST_LOADED]}],[{target:this,events:[Ti.ERROR]}]);return this.player.loadSource(this.mediaUrl),i.then(function(e){t.initNativeTextTracks(e);var i=C.eventsToPromise([{target:t.player,events:[t.Hls.Events.MEDIA_ATTACHED]}],[{target:t,events:[Ti.ERROR]}]);return t.player.attachMedia(t.videoSurface.video),i}).then(function(){var e=t.playback.startTime;t.player.startLoad(isNaN(e)?-1:e),t.setBitrateRestrictionAtStartup(),t.emit(Ti.MANIFEST_LOADED)}).then(function(){return e.prototype.loadMediaUrl.call(t)})},i.prototype.destroy=function(){var i=this;this.removeEvents(this.player,this.hlsjsEventMap),this.destroyNativeTextTracks();var r=C.eventsToPromise([{target:this.player,events:[this.Hls.Events.MEDIA_DETACHING]}],[{target:this,events:[Ti.ERROR]}]);return this.player.destroy(),this.player=null,this.Hls=null,C.forEach(this.config.video.textTracks,function(e){e.removeEventListener(t.TextTrackEvent.CUE_CHANGE,i.onCueChange)}),r.then(function(){return e.prototype.destroy.call(i)})},i.prototype.suspend=function(){this.player.stopLoad()},i.prototype.resume=function(){this.player.startLoad()},Object.defineProperty(i.prototype,"audioTrack",{set:function(e){this.player.audioTrack=e.index},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentIndex",{get:function(){return this.player.loadLevel},set:function(e){this.player.loadLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoQualitySwitching",{get:function(){return-1===this.player.loadLevel},set:function(e){this.player.loadLevel=e?-1:this.player.nextLoadLevel},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{get:function(){return this.player.config.minAutoBitrate},set:function(e){this.player.config.minAutoBitrate=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.player.levels[this.player.autoLevelCapping].bitrate},set:function(e){var t=isNaN(e);this.player.capLevelToPlayerSize=!!t&&this.playback.abr.capQualityToScreenSize,this.player.autoLevelCapping=t?-1:C.getIndexForBitrate(this.player.levels,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manifestQualities",{get:function(){return this.player.levels.map(function(e,t){return{index:t,bitrate:e.bitrate,width:e.width,height:e.height,codec:e.attrs?e.attrs.CODECS:void 0}})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"seekable",{get:function(){var e=this.videoSurface.video.duration;return{start:e-(this.lowLevelDvrDetails?this.lowLevelDvrDetails.totalduration:0),end:e}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"segmentDuration",{get:function(){return this.lowLevelDvrDetails?this.lowLevelDvrDetails.averagetargetduration:e.prototype.segmentDuration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"framerate",{get:function(){return this.pFramerate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fragmentType",{get:function(){return this.pFragmentType},enumerable:!1,configurable:!0}),i.prototype.onManifestParsed=function(e,t){this.emit(Ti.MANIFEST_PARSED,{profile:this.manifestQualities})},i.prototype.onLevelLoaded=function(e,t){this.lowLevelDvrDetails=t.details,this.pIsLiveStream=this.lowLevelDvrDetails.live,this.emit(Ti.ABR_QUALITY_LOADED,{index:t.level})},i.prototype.onLevelUpdated=function(e,t){this.checkAbrConstraints(this.player.maxAutoLevel)},i.prototype.onLevelSwitching=function(e,t){this.emit(Ti.ABR_QUALITY_SWITCHING,{index:t.level})},i.prototype.onLevelSwitched=function(e,t){this.emit(Ti.ABR_QUALITY_LOADED,{index:t.level})},i.prototype.onFragmentLoaded=function(e,t){this.networkErrorRetryCount=0,this.mediaErrorRetryCount=0,this.pFragmentType||(this.pFragmentType=C.getMimeType(t.frag.url)),this.checkAbrConstraints(this.player.maxAutoLevel);var i=t.stats?t.stats:t.frag.stats,r=8e3*i.loaded/Number(window.performance.now()-i.trequest);this.emit(Ti.FRAGMENT_LOADED,{bandwidth:r})},i.prototype.onFragmentParsingData=function(e,t){this.pFramerate=t.nb/(t.endPTS-t.startPTS),this.emit(Ti.FRAGMENT_PARSED,{rate:this.pFramerate})},i.prototype.onAudioTrackUpdated=function(e,t){this.normalizedAudioTracks=this.normalizeAudioTracks(this.player.audioTracks,{codec:"audioCodec",label:"name"}),this.emit(Ti.AUDIO_TRACK_UPDATED,{tracks:this.normalizedAudioTracks,track:this.normalizedAudioTracks[this.player.audioTrack]})},i.prototype.onAudioTrackSwitched=function(e,t){this.emit(Ti.AUDIO_TRACK_CHANGE,{track:this.normalizedAudioTracks[parseInt(t.id)]})},i.prototype.onSubtitleTrackSwitch=function(e,t){var i=this.textTrackInfo.tracks.find(function(e){return e.id==t.id});-1!==t.id&&i&&this.textTrackInfo.track!==i&&this.selectSubtitles(i)},i.prototype.onSubtitleTracksUpdated=function(e,t){this.setTextTracks(t.subtitleTracks.map(function(e,t){return{id:e.id,language:e.lang,kind:e.type.toLowerCase(),label:e.name,default:e.default}}))},i.prototype.onRequest=function(e,t){var i=this;e.withCredentials||(e.withCredentials=t.indexOf("akamaihd")>-1&&t.indexOf("csmil")>-1);var r=this.config.resource.location.drm.aes;if(!C.isEmpty(r)&&t.includes(r.provider)){var n=r.header;for(var a in n){var o=n[a];e.setRequestHeader(a,o)}}this.multiCdnHeaderPresent&&e.addEventListener("readystatechange",function(r){if(-1!==t.indexOf(".ts")&&e.readyState===XMLHttpRequest.HEADERS_RECEIVED&&i.multiCdnHeaderPresent){var n=e.getAllResponseHeaders();i.multiCdnHeaderPresent=-1!==n.indexOf(tn.MULTI_CDN),i.multiCdnHeaderPresent&&i.emit(Ti.MULTI_CDN,{cdn:e.getResponseHeader(tn.MULTI_CDN.toUpperCase())})}})},i.prototype.onError=function(e,i){var r=t.ErrorCode.UNSPECIFIED_HLSJS_ERROR;switch(i.type){case this.Hls.ErrorTypes.NETWORK_ERROR:i.fatal&&this.handleNetworkErrors(i);break;case this.Hls.ErrorTypes.MEDIA_ERROR:i.fatal&&this.handleMediaErrors(i);break;case this.Hls.ErrorTypes.MUX_ERROR:r=t.ErrorCode.HLSJS_MUX_ERROR;default:var n=this.getErrorMessage("".concat(i.details),i.fatal);this.log(t.LogLevel.ERROR,n,i),this.throwError(r,n,i,i.fatal)}},i.prototype.handleNetworkErrors=function(e){var i=en.FATAL_ERROR_RECOVERY_ATTEMPTS,r=this.Hls.ErrorDetails;switch(e.details){case r.LEVEL_LOAD_ERROR:case r.FRAG_LOAD_ERROR:if(this.networkErrorRetryCount<i){this.player.startLoad(),this.networkErrorRetryCount++,this.log(t.LogLevel.ERROR,this.getErrorMessage(ct.messages.RETRY_PLAYBACK_NETWORK_ERROR,!1,"".concat(this.networkErrorRetryCount," / ").concat(i)));break}this.throwError(t.ErrorCode.HLSJS_NETWORK_ERROR,ct.messages.FATAL_PLAYBACK_NETWORK_ERROR,e);break;case r.MANIFEST_PARSING_ERROR:this.throwError(t.ErrorCode.HLSJS_PARSE_ERROR,"".concat(ct.messages.FATAL_PLAYBACK_NETWORK_ERROR," : ").concat(e.details),e);break;default:this.throwError(t.ErrorCode.HLSJS_NETWORK_ERROR,"".concat(ct.messages.FATAL_PLAYBACK_NETWORK_ERROR," : ").concat(e.details),e,e.fatal)}},i.prototype.handleMediaErrors=function(e){var i=this.Hls.ErrorDetails;e.details===i.MANIFEST_INCOMPATIBLE_CODECS_ERROR?this.throwError(t.ErrorCode.HLSJS_SRC_NOT_SUPPORTED,"".concat(ct.messages.FATAL_PLAYBACK_MEDIA_ERROR," : ").concat(e.details),e):this.throwError(t.ErrorCode.HLSJS_MEDIA_ERROR,"".concat(ct.messages.FATAL_PLAYBACK_MEDIA_ERROR," : ").concat(e.details),e)},i.prototype.setBitrateRestrictionAtStartup=function(){var e=this.playback.abr;if(isNaN(e.minBitrate)||(this.minBitrate=e.minBitrate-1),isNaN(e.maxBitrate)||(this.maxBitrate=e.maxBitrate),!isNaN(e.startBitrate)){var t=this.player.levels,i=C.getIndexForBitrate(t,e.startBitrate,!1);C.inRange(i,0,t.length-1)&&(this.player.config.startLevel=i)}},i.prototype.setTextTracks=function(e){var i=this;this.textTrackInfo.tracks=e,C.forEach(e,function(e){return i.emit(nt.TEXT_TRACK_ADDED,e)}),C.forEach(this.config.video.textTracks,function(e){C.isTextTrack(e.kind)&&e.addEventListener(t.TextTrackEvent.CUE_CHANGE,i.onCueChange)}),this.emit(nt.TEXT_TRACK_AVAILABLE),C.find(e,function(e){return e.default})||this.selectSubtitles(C.findDefaultTrack(e,this.config.textTrackSettings.language))},i.prototype.selectSubtitles=function(e){this.textTrackInfo.track=e,this.emit(nt.TEXT_TRACK_CHANGE,e),this.enabledSubtitles(this.config.textTrackSettings.mode)},i.prototype.enabledSubtitles=function(e){e!==t.TextTrackMode.DISABLED?this.textTrack=this.textTrackInfo.track:this.player.subtitleTrack=-1},i.prototype.initNativeTextTracks=function(e){var i,r=this,n=null===(i=e.subtitles)||void 0===i?void 0:i.length,a=this.config.resource.location.textTrackUrl;if(n)a&&this.logger.warn("Detected subtitles in the manifest. Ignoring resource's textTrackUrl");else{var o=this.config.video.textTracks,s=[],l=new Map,c=function(){return C.find(o,function(e){return C.isTextTrack(e.kind)&&e.mode!==t.TextTrackMode.DISABLED})},u=c(),d=function(e){var t=c();t!==u&&t&&(u=t,r.textTrackInfo.track=l.get(u))},p=C.debounce(function(){r.setTextTracks(s),o.addEventListener(t.TextTrackEvent.CHANGE,d)},100),h=function(e){var t=e.track;if(C.isTextTrack(t.kind)){var i={id:s.length.toString(),language:t.language,kind:t.kind,label:t.label,default:!1};l.set(i,t),l.set(t,i),s.push(i),p()}};o.addEventListener(t.TextTrackEvent.ADD_TRACK,h),this.enabledSubtitles=function(e){var t=l.get(r.textTrackInfo.track);t&&(t.mode=e)},this.destroyNativeTextTracks=function(){r.config.video.textTracks.removeEventListener(t.TextTrackEvent.ADD_TRACK,h),r.config.video.textTracks.removeEventListener(t.TextTrackEvent.CHANGE,d)},a&&this.createSidecarTextTrack(a)}},i.prototype.destroyNativeTextTracks=function(){},i.prototype.createSidecarTextTrack=function(e){return d(this,void 0,void 0,function(){var i,r,n,a,o,s,l,c,u=this;return p(this,function(d){switch(d.label){case 0:return i=e.indexOf(".vtt")>=0,r=this.config.video,n="English",a="en",i?((o=document.createElement("track")).kind=at.CAPTIONS,o.label=n,o.srclang=a,o.id="sidecar-vtt",o.src=e,r.appendChild(o),o.track.mode=this.config.textTrackSettings.mode,[3,4]):[3,1];case 1:return d.trys.push([1,3,,4]),[4,new wt(e,this.config.system).convert()];case 2:return s=d.sent(),l=r.addTextTrack(at.CAPTIONS,n,a),this.logger.log(t.LogLevel.INFO,"Smpte XML conversion and text track creation successful"),C.forEach(s,function(e){try{l.addCue(e)}catch(e){u.logger.log(t.LogLevel.INFO,e)}}),[3,4];case 3:return c=d.sent(),this.logger.log(t.LogLevel.INFO,"Smpte XML conversion and text track creation error",c.message),[3,4];case 4:return[2]}})})},i}(sn);!function(e){e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(an||(an={})),function(e){e.IRDETO="irdeto",e.DRM_TODAY="drmtoday",e.UNKNOWN="unknown"}(on||(on={}));var cn,un=function(e){function i(t,i,r){var n=e.call(this)||this;return n.WEBKIT_KEY_MESSAGE="webkitkeymessage",n.WEBKIT_KEY_ADDED="webkitkeyadded",n.WEBKIT_KEY_ERROR="webkitkeyerror",n.appCertLoaded=!1,n.webKitNeedKeyCalled=!1,n.webkitNeedKeyHandler=function(e){return n.onWebkitNeedKey(e)},n.drmInfo=i.resource.location.drm,n.videoSurface=t,n.videoSurface.on(ot.WEBKIT_NEED_KEY,n.webkitNeedKeyHandler),n.logger=r,n}return s(i,e),i.prototype.initialize=function(){var e=this;Ye({url:this.drmInfo.fairplay.appCertUrl,responseType:S.ARRAY_BUFFER}).then(function(t){return e.onAppCertLoaded(t)})},i.prototype.destroy=function(){this.videoSurface.off(ot.WEBKIT_NEED_KEY,this.webkitNeedKeyHandler)},i.prototype.onAppCertLoaded=function(e){this.appCertData=new Uint8Array(e),this.appCertLoaded=!0,this.webKitNeedKeyCalled&&this.initializeFairplayCDM()},i.prototype.onWebkitNeedKey=function(e){this.initData=e.data.initData,this.webKitNeedKeyCalled=!0,this.appCertLoaded&&this.initializeFairplayCDM()},i.prototype.onLicenseRequestReady=function(e,t){this.drmVendor=this.getDrmVendor(e);var i=new XMLHttpRequest;i.session=t.target,i.addEventListener("load",this.onLicenseLoaded.bind(this),!1),i.open("POST",e,!0),i.responseType=this.drmVendor===on.IRDETO||this.drmVendor===on.UNKNOWN?S.ARRAY_BUFFER:S.TEXT;var r="spc="+encodeURIComponent(C.base64EncodeUint8Array(t.message))+"&"+i.session.contentId;(i=this.setRequestHeaders(i)).send(r)},i.prototype.setRequestHeaders=function(e){if(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),!C.isEmpty(this.drmInfo.fairplay.header)){var t=this.drmInfo.fairplay.header;for(var i in t){var r=t[i];e.setRequestHeader(i,r)}}return e},i.prototype.onLicenseLoaded=function(e){var i=e.target,r=i.session;C.inRange(i.status,200,400)||this.throwFatalError(t.ErrorCode.FAIRPLAY_LIC_ERROR,ct.messages.FAIRPLAY_LICENSE_ERROR);var n="arraybuffer"!==i.responseType?C.base64DecodeUint8Array(i.responseText):new Uint8Array(i.response);r.update(n)},i.prototype.onWebkitKeyAdded=function(e){this.logger.log(t.LogLevel.INFO,ct.messages.WEBKIT_KEY_ADDED_SUCCESS)},i.prototype.onWebkitError=function(e){this.throwFatalError(t.ErrorCode.FAIRPLAY_LIC_ERROR,"".concat(ct.messages.FAIRPLAY_LICENSE_ERROR))},i.prototype.initializeFairplayCDM=function(){var e=this.getLicenseServerUrl(this.initData),i=this.getId(e,this.initData),r=this.videoSurface.video,n=ui.getInstance().global,a=ct.messages;if(i){if(!r.webkitKeys){var o=t.DrmType.FAIRPLAY_1_0;if(!n.WebKitMediaKeys.isTypeSupported(o,"video/mp4"))return void this.throwFatalError(t.ErrorCode.FAIRPLAY_APP_CERT_ERROR,a.FAIRPLAY_WEBKIT_ERROR);try{r.webkitSetMediaKeys(new n.WebKitMediaKeys(o))}catch(e){return void this.throwFatalError(t.ErrorCode.FAIRPLAY_APP_CERT_ERROR,e.message)}}var s=this.concatInitDataIdAndCertificate(this.initData,i,this.appCertData),l=r.webkitKeys.createSession("video/mp4",s);l?(l.contentId=i,l.addEventListener(this.WEBKIT_KEY_MESSAGE,this.onLicenseRequestReady.bind(this,e),!1),l.addEventListener(this.WEBKIT_KEY_ADDED,this.onWebkitKeyAdded.bind(this),!1),l.addEventListener(this.WEBKIT_KEY_ERROR,this.onWebkitError.bind(this),!1)):this.throwFatalError(t.ErrorCode.FAIRPLAY_APP_CERT_ERROR,a.FAIRPLAY_WEBKIT_ERROR)}else this.throwFatalError(t.ErrorCode.FAIRPLAY_APP_CERT_ERROR,a.FAIRPLAY_NO_CONTENT_ID)},i.prototype.concatInitDataIdAndCertificate=function(e,t,i){"string"==typeof t&&(t=C.stringToArray(t));var r=0,n=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),a=new DataView(n);new Uint8Array(n,r,e.byteLength).set(e),r+=e.byteLength,a.setUint32(r,t.byteLength,!0),r+=4;var o=new Uint16Array(n,r,t.length);return o.set(t),r+=o.byteLength,a.setUint32(r,i.byteLength,!0),r+=4,new Uint8Array(n,r,i.byteLength).set(i),new Uint8Array(n,0,n.byteLength)},i.prototype.getLicenseServerUrl=function(e){var t=null;return t=C.isEmpty(this.drmInfo.fairplay.licenseUrl)?"https://"+String.fromCharCode.apply(null,new Uint16Array(e.buffer)).split("://")[1]:this.drmInfo.fairplay.licenseUrl,this.drmInfo.sessionId&&(t=We.append(t,{SessionId:this.drmInfo.sessionId})),this.drmInfo.ticket&&(t=We.append(t,{Ticket:this.drmInfo.ticket})),t},i.prototype.extractContentId=function(e){return C.arrayToString(e).split("skd://")[1]},i.prototype.getId=function(e,t){var i=We.decode(e);return console.log(i),i.ContentId||i.contentId||i.assetId||this.extractContentId(t)},i.prototype.getDrmVendor=function(e){var t=on.UNKNOWN;return-1!==e.indexOf(on.IRDETO)?t=on.IRDETO:-1!==e.indexOf(on.DRM_TODAY)&&(t=on.DRM_TODAY),t},i.prototype.throwFatalError=function(e,i){this.logger.log(t.LogLevel.ERROR,e,i),this.emit(Ti.ERROR,{code:e,message:i,fatal:!0})},i}(_),dn=function(e){function i(i){var r=e.call(this,i)||this;return r.pType=t.PlaybackAdapterType.HTML5,r.audioTrackIdx=-1,r.fairPlayEventHandler=function(e){return r.onFairplayEvent(e)},r.textTrackMap=new Map,r.logger.log(t.LogLevel.INFO,"Html5Adapter created"),r}return s(i,e),i.prototype.initialize=function(){e.prototype.initialize.call(this),this.hasFairplayDrm(this.config.resource.location.drm)&&(this.fairplay=new un(this.videoSurface,this.config,this.logger),this.fairplay.on(Ti.ERROR,this.fairPlayEventHandler),this.fairplay.initialize(),this.emit(Ti.DRM_KEYSYSTEM_CREATED,{keysystem:t.DrmType.FAIRPLAY_1_0}))},i.prototype.destroy=function(){return this.videoSurface.video.removeAttribute("src"),this.videoSurface.video.load(),this.fairplay&&(this.fairplay.off(Ti.ERROR,this.fairPlayEventHandler),this.fairplay.destroy()),e.prototype.destroy.call(this)},Object.defineProperty(i.prototype,"currentIndex",{set:function(e){this.logger.log(t.LogLevel.INFO,ct.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoQualitySwitching",{set:function(e){this.logger.log(t.LogLevel.INFO,ct.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{set:function(e){this.logger.log(t.LogLevel.INFO,ct.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{set:function(e){this.logger.log(t.LogLevel.INFO,ct.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manifestQualities",{get:function(){return[]},enumerable:!1,configurable:!0}),i.prototype.onVideoSurfaceEvent=function(t){var i,r=t.data;switch(t.type){case ot.DURATION_CHANGE:this.pIsLiveStream=this.videoSurface.duration==1/0;break;case nt.TEXT_TRACK_ADDED:return i={id:C.uid8(),language:r.language,kind:r.kind,label:r.label},this.textTrackMap.set(r,i),void this.emit(t.type,i);case nt.TEXT_TRACK_CHANGE:return i=this.textTrackMap.get(r),void this.emit(t.type,i)}e.prototype.onVideoSurfaceEvent.call(this,t),this.updateAudioTracks(t)},i.prototype.loadMediaUrl=function(){var t=this;return this.videoSurface.src=this.mediaUrl,e.prototype.loadMediaUrl.call(this).then(function(){var e=t.playback.startTime;if(e>0)return t.eventsToPromise(ot.CAN_PLAY_THROUGH).then(function(){return t.seek(e)})})},i.prototype.updateAudioTracks=function(e){var t=-1!==this.audioTrackIdx,i=this.videoSurface&&this.videoSurface.video&&this.videoSurface.video.audioTracks;if(i){var r=this.getEnabledAudioTrackId(i);switch(e.type){case ot.CAN_PLAY:t||(this.audioTrackIdx=r,this.normalizedAudioTracks=this.normalizeAudioTracks(C.toArray(i),{type:"kind",lang:"language"}),this.emit(Ti.AUDIO_TRACK_UPDATED,{tracks:this.normalizedAudioTracks,track:this.normalizedAudioTracks[this.audioTrackIdx]}));break;case ot.PROGRESS:t&&this.audioTrackIdx!==r&&(this.audioTrackIdx=r,this.emit(Ti.AUDIO_TRACK_CHANGE,{track:this.normalizedAudioTracks[this.audioTrackIdx]}))}}},i.prototype.onFairplayEvent=function(e){this.emit(e.type,e.data)},i.prototype.getEnabledAudioTrackId=function(e){for(var t=e.length;t--;)if(e[t].enabled)return t;return t},i.prototype.hasFairplayDrm=function(e){return null!==e&&!C.isEmpty(e.fairplay)},i.prototype.handleVideoSurfaceError=function(i){e.prototype.handleVideoSurfaceError.call(this,i);var r=this.videoSurface.video.error,n=Object.keys(an)[(null==r?void 0:r.code)-1]||ct.messages.UNSPECIFIED_ERROR;if(r)switch(r.code){case an.MEDIA_ERR_NETWORK:this.throwError(t.ErrorCode.HTML5_NETWORK_ERROR,n,r);break;case an.MEDIA_ERR_DECODE:this.throwError(t.ErrorCode.HTML5_MEDIA_ERROR,n,r);break;case an.MEDIA_ERR_SRC_NOT_SUPPORTED:this.throwError(t.ErrorCode.HTML5_SRC_NOT_SUPPORTED,n,r);break;default:this.throwError(t.ErrorCode.UNSPECIFIED_VIDEO_PLAYBACK_ERROR,n,r)}},i}(sn);!function(e){e.BUFFERING="buffering",e.END_OF_STREAM="endOfStream",e.NOT_READY="notReady",e.OPENING="opening",e.PAUSED="paused",e.PLAYING="playing",e.STOPPED="stopped",e.DISPLAYING_VIDEO="DisplayingVideo",e.UNKNOWN="unknown",e.READY="ready",e.PLAYER_TIMED_EVENT="playerTimedEvent",e.NETWORK_STATUS_CHANGE="networkStatusChange",e.CONTENT_AVAILABLE="contentAvailable",e.PLAYER_STATUS_CHANGE="playerStatusChange",e.PLAYER_STREAMING_ERROR="playerStreamingError",e.PLAYER_ERROR="playerError",e.PLAYER_SUBTITLE="playerSubtitle",e.GET_AUDIO_TRACKS="getAudioTracks",e.GET_VIDEO_REP_COUNT="getRepresentationsCount",e.GET_VIDEO_REP_INFO="getRepresentationInfo",e.GET_SUBTITLE_TRACKS="getSubtitleTracks",e.GET_PLAYBACK_TIME="getPlaybackTime",e.GET_SEEK_WINDOW="getSeekWindow"}(cn||(cn={}));var pn,hn=function(e){function i(i){var r,n=e.call(this)||this;return n.onTicHandler=function(e){return n.onTic(e)},n.pTime=NaN,n.pDuration=NaN,n.abrProfileCount=0,n.pMasterBitrateProfile=[],n.audioTrackUpdated=!1,n.pStartTime=NaN,n.debugMode=!1,n.fatalErrorInProgress=!1,n.cea608708Detected=!1,n.cea608708Enabled=!1,n.seeking=!1,n.logger=i.logger,n.timer=new $t(500),n.timer.on($t.TIC_EVENT,n.onTicHandler),n.config=i,n.logger.log(t.LogLevel.WARN,"".concat(n.config)),n.global=i.system.global,n.pVideo=n.global.WM_videoPlayer,n.global.accessfunction=function(e){return n.accessfunction(e)},n.pMetrics=n.global.videometrics,n.pMetrics.onBitrateChange=function(e){return n.onBitrateChange(e)},n.debugMode=!!(null===(r=i.playerOptions.overrides)||void 0===r?void 0:r.enableLowLevelStreamingLogs),n.logger&&(n.pVideo.TTY=function(e){n.logger.log(t.LogLevel.DEBUG,e)},n.pVideo.TTYLevel=n.debugMode?3:1),n}return s(i,e),i.prototype.destroy=function(){this.callExternalWebMafApi('{"command":"stop"}'),this.timer.off($t.TIC_EVENT,this.onTicHandler),e.prototype.destroy.call(this)},i.prototype.load=function(e){return Promise.resolve()},i.prototype.play=function(){return this.callExternalWebMafApi('{"command":"play"}'),Promise.resolve()},i.prototype.pause=function(){this.callExternalWebMafApi('{"command":"pause"}')},i.prototype.seek=function(e){if(!this.seeking){this.seeking=!0,this.pStatePreSeek=this.pState;var i=Math.floor(e);this.callExternalWebMafApi('{"command":"setPlayTime","playTime":'+i+"}"),this.logger.log(t.LogLevel.INFO,"seeking to ".concat(i)),this.emit(ot.SEEKING,{position:i}),this.pState=cn.BUFFERING}return C.eventsToPromise([{events:[ot.SEEKED],target:this}],[{events:[ot.ERROR],target:this}])},i.prototype.addEvents=function(){},i.prototype.clearCue=function(){},Object.defineProperty(i.prototype,"startTime",{set:function(e){this.logger.log(t.LogLevel.INFO,"startTime set on webmaf ".concat(e)),this.pStartTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return 1},set:function(e){this.callExternalWebMafApi('{"command":"setVolume", "volume":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"muted",{get:function(){return!1},set:function(e){this.callExternalWebMafApi('{"command": "setVolume", "volume": 0.0}')},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"src",{set:function(e){this.callExternalWebMafApi(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"video",{get:function(){return this.pVideo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"framerate",{get:function(){return this.metrics.renderedFramerate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metrics",{get:function(){return this.pMetrics},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return this.pTime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this.pDuration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bufferLength",{get:function(){return this.pVideo.bufferedRange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffering",{get:function(){return this.pState===cn.BUFFERING},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"paused",{get:function(){return this.pState===cn.PAUSED},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this.pState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"masterBitrateProfile",{get:function(){return this.pMasterBitrateProfile},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bitrate",{get:function(){return this.pMetrics.currentBitrate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"startingBitrate",{set:function(e){this.logger.log(t.LogLevel.INFO,"startingBitrate set on webmaf ".concat(e)),this.callExternalWebMafApi('{"command":"setVideoStartingBandwidth","bandwidth":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{set:function(e){this.logger.log(t.LogLevel.INFO,"minBitrate set on webmaf ".concat(e)),this.callExternalWebMafApi('{"command":"setFixVideoRepresentations", "minBitrate":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{set:function(e){this.logger.log(t.LogLevel.INFO,"maxBitrate set on webmaf ".concat(e)),this.callExternalWebMafApi('{"command":"setFixVideoRepresentations", "maxBitrate":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"audioTrack",{set:function(e){var t=this.audioTrackInfo.tracks[e.index].id;this.audioTrackUpdated=!0,this.callExternalWebMafApi('{"command":"setAudioTrack", "audioTrack":'+JSON.stringify(t)+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackMode",{set:function(e){var i=e!==t.TextTrackMode.DISABLED;if(this.cea608708Detected)this.cea608708Enabled=i,this.callExternalWebMafApi('{"command":"setClosedCaptions","enable": '+i+"}");else{var r=i?"en":"";this.callExternalWebMafApi('{"command":"setSubtitleTrack","subtitleTrack":'+JSON.stringify(r)+', "disablePreviousTrack":false }')}this.logger.log(t.LogLevel.INFO,"Text Track is enabled: ".concat(i))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{set:function(e){this.logger.log(t.LogLevel.WARN,"Changing the text track language is not supported on PlayStation 4 at this time")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackSrc",{set:function(e){this.logger.log(t.LogLevel.INFO,"Sidecar text is not supported on playstation ".concat(e))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTracks",{get:function(){return[]},enumerable:!1,configurable:!0}),i.prototype.callExternalWebMafApi=function(e){this.global.external.user(e)},i.prototype.onTic=function(e){this.callExternalWebMafApi('{"command":"getPlaybackTime"}'),this.audioTrackUpdated&&(this.audioTrackUpdated=!1),this.pMetrics.poll()},i.prototype.respondToPlaybackTime=function(e){this.pTime!==e.elapsedTime&&e.elapsedTime<=this.pDuration&&(this.pTime=e.elapsedTime,this.seeking||this.emit(ot.TIME_UPDATE,{value:this.pTime}),this.seeking&&(this.seeking=!1,this.pState=this.pStatePreSeek,this.emit(ot.SEEKED)))},i.prototype.onBitrateChange=function(e){var i=e,r=C.getIndexForBitrate(this.pMasterBitrateProfile,i,!1);this.logger.log(t.LogLevel.INFO,"bitrate change ".concat(i)),this.emit(Ti.ABR_QUALITY_LOADED,{index:r})},i.prototype.parseAudioInfo=function(e){for(var t=e.audioTracks.split(","),i=e.audioNumChannels.split(","),r={track:null,tracks:[]},n=0,a=t.length;n<a;n++){var o={index:n,id:t[n],type:i[n],lang:t[n],label:t[n],codec:""};r.tracks.push(o),t[n]===e.currentAudioTrack&&(r.track=o)}return r},i.prototype.accessfunction=function(e){this.debugMode&&-1===e.indexOf("getPlaybackTime")&&-1===e.indexOf("playerSubtitle")&&-1===e.indexOf("playerMessage")&&this.logger.log(t.LogLevel.INFO,"Access Function Avia:",e);var i=JSON.parse(e);switch(i.command){case cn.GET_AUDIO_TRACKS:this.respondToAudioTrackInfo(i);break;case cn.GET_VIDEO_REP_COUNT:this.respondToVideoRepCount(i);break;case cn.GET_VIDEO_REP_INFO:this.respondToVideoRepInfo(i);break;case cn.GET_SUBTITLE_TRACKS:this.respondToGetSubtitleTracks(i);break;case cn.GET_PLAYBACK_TIME:this.respondToPlaybackTime(i);break;case cn.NETWORK_STATUS_CHANGE:break;case cn.CONTENT_AVAILABLE:this.respondToContentAvailable(i);break;case cn.PLAYER_SUBTITLE:this.respondToPlayerSubtitle(i);break;case cn.GET_SEEK_WINDOW:break;case cn.PLAYER_TIMED_EVENT:this.respondToTimedMetadataEvent(i);break;case cn.PLAYER_ERROR:case cn.PLAYER_STREAMING_ERROR:this.fatalErrorInProgress||(this.fatalErrorInProgress=!0,this.respondToError(i));break;case cn.PLAYER_STATUS_CHANGE:this.respondToPlayerStatusChange(i)}},i.prototype.respondToPlayerStatusChange=function(e){switch(e.playerState){case cn.BUFFERING:break;case cn.READY:this.respondToPlayerStatusReady(e);break;case cn.PAUSED:this.emit(ot.PAUSE);break;case cn.PLAYING:this.emit(ot.PLAYING);break;case cn.DISPLAYING_VIDEO:this.timer.start();break;case cn.END_OF_STREAM:this.respondToPlayerStatusEOS()}this.pState=e.playerState},i.prototype.respondToError=function(e){var i=0===this.pDuration?t.ErrorCode.WEBMAF_START_ERROR:t.ErrorCode.WEBMAF_NETWORK_ERROR,r="fail"===e.status,n=null;e.error_info?n=e.error_info:e.error&&e.status_code&&(n=e.error+" : "+e.status_code),this.emit(ot.ERROR,{code:i,message:n,data:e,fatal:r})},i.prototype.respondToGetSubtitleTracks=function(e){var i=this;e.subtitleTracks.split(",").forEach(function(r){if("und"===r)i.logger.log(t.LogLevel.INFO,"timed metadata detected.",e),i.callExternalWebMafApi('{"command":"setTimedMetadata","enable":true}'),i.callExternalWebMafApi('{"command":"setSubtitleTrack","subtitleTrack":"und", "disablePreviousTrack":false}'),i.callExternalWebMafApi('{"command":"setClosedCaptions","enable":true}');else if("en"===r){var n={language:r,kind:"subtitle",label:r};i.emit(nt.TEXT_TRACK_AVAILABLE),i.emit(nt.TEXT_TRACK_ADDED,n),i.emit(nt.TEXT_TRACK_CHANGE,n)}})},i.prototype.respondToTimedMetadataEvent=function(e){var t=this;if("cea-708"===e.datatype)this.cea608708Detected?this.cea608708Enabled&&this.respondToPlayerSubtitle(e):(this.cea608708Detected=!0,this.callExternalWebMafApi('{"command":"setClosedCaptions","enable":false}'),this.emit(nt.TEXT_TRACK_AVAILABLE));else if("data"===e.datatype){var i=this.config.resource.playback.id3OwnerIds,r=atob(e.data).split("PRIV")[1].slice(6,-1);C.forEach(i,function(i){-1!==r.indexOf(i)&&t.emit(nt.METADATA_CUEPOINT,{id:"PRIV",info:r,data:e.data})})}else"text"===e.datatype&&this.detectDaiImpression(e.data)&&this.emit(nt.METADATA_CUEPOINT,{id:"google_dai",info:"",data:e.data,startTime:e.timestamp/1e3})},i.prototype.detectDaiImpression=function(e){return/google_\d+/.test(e)},i.prototype.respondToPlayerSubtitle=function(e){if(!this.detectDaiImpression(e.text)){var t=[];"cea-708"===e.datatype?t=e.details.captions:t.push({text:e.text}),t.length>0&&this.emit(nt.TEXT_CUEPOINT,{activeCues:t})}},i.prototype.respondToContentAvailable=function(e){this.pDuration!==e.totalLength&&(this.pDuration=0===e.totalLength?Number.POSITIVE_INFINITY:e.totalLength,this.emit(ot.DURATION_CHANGE,{value:this.pDuration}))},i.prototype.respondToVideoRepInfo=function(e){this.pMasterBitrateProfile.push(e),this.pMasterBitrateProfile.length===this.abrProfileCount&&this.emit(Ti.MANIFEST_PARSED,this.pMasterBitrateProfile)},i.prototype.respondToVideoRepCount=function(e){this.abrProfileCount=e.count;for(var t=0;t<this.abrProfileCount;t++)this.callExternalWebMafApi('{"command":"getRepresentationInfo", "representation":'+t+"}")},i.prototype.respondToAudioTrackInfo=function(e){this.audioTrackInfo=this.parseAudioInfo(e),this.emit(Ti.AUDIO_TRACK_UPDATED,this.audioTrackInfo)},i.prototype.respondToPlayerStatusEOS=function(){this.timer.stop(),this.emit(ot.ENDED)},i.prototype.respondToPlayerStatusReady=function(e){this.emit(ot.LOADED_METADATA),this.callExternalWebMafApi('{"command":"getRepresentationsCount"}'),this.callExternalWebMafApi('{"command":"getSubtitleTracks"}'),this.callExternalWebMafApi('{"command":"getSeekWindow"}'),!isNaN(this.pStartTime)&&this.seek(this.pStartTime)},i}(_),fn=function(e){function i(i){var r=e.call(this,i)||this;return r.pType=t.PlaybackAdapterType.PLAY_STATION,r.psEventMap=[{type:Ti.MANIFEST_PARSED,callback:function(e){return r.onManifestParsed(e)}},{type:Ti.ABR_QUALITY_LOADED,callback:function(e){return r.onBubble(e)}},{type:Ti.AUDIO_TRACK_UPDATED,callback:function(e){return r.onBubble(e)}}],r.log(r.pType,r.videoSurface.video.version,r.videoSurface.video.TTYLevel,r.videoSurface.metrics),r}return s(i,e),i.prototype.createVideoSurface=function(){return new hn(this.config)},i.prototype.createMetadataSurface=function(){return null},i.prototype.initialize=function(){e.prototype.initialize.call(this);var t=this.playback,i=this.videoSurface;!isNaN(t.abr.startBitrate)&&(i.startingBitrate=t.abr.startBitrate),!isNaN(t.abr.minBitrate)&&(i.minBitrate=t.abr.minBitrate),!isNaN(t.abr.maxBitrate)&&(i.maxBitrate=t.abr.maxBitrate),!isNaN(t.startTime)&&(i.startTime=t.startTime),this.addEvents(this.videoSurface,this.psEventMap)},i.prototype.loadMediaUrl=function(){var t,i,r=this.config.resource.location.drm,n=null===(i=null===(t=r.aes.header)||void 0===t?void 0:t.authorization)||void 0===i?void 0:i.trim().replace(/^Bearer /i,""),a='{"command":"load", "contentUri":"'+this.mediaUrl+'","licenseUri":"", "customData":"&ls_session='+n+'","sourceType":0}',o='{"command":"load", "contentUri":"'+this.mediaUrl+'", "licenseUri":"'+r.playready.url+'","customData": "","sourceType":0}';return this.videoSurface.src=C.isEmpty(r.aes.header)?o:a,e.prototype.loadMediaUrl.call(this)},i.prototype.destroy=function(){return this.removeEvents(this.videoSurface,this.psEventMap),this.videoSurface.destroy(),e.prototype.destroy.call(this)},i.prototype.play=function(){this.videoSurface.play()},i.prototype.pause=function(){this.videoSurface.pause()},i.prototype.seek=function(e){this.videoSurface.seek(e)},Object.defineProperty(i.prototype,"audioTrack",{set:function(e){this.videoSurface.audioTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this.pType},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return this.videoSurface.time},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"duration",{get:function(){return this.videoSurface.duration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"droppedVideoFrames",{get:function(){return this.videoSurface.metrics.droppedFrame},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffering",{get:function(){return this.videoSurface.buffering},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentIndex",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentBitrate",{get:function(){return this.videoSurface.metrics.bitrate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoQualitySwitching",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manifestQualities",{get:function(){return this.videoSurface.masterBitrateProfile.map(this.normalizeQuality)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveStreamInfo",{get:function(){return this.liveStreamInfoVO},enumerable:!1,configurable:!0}),i.prototype.handleVideoSurfaceError=function(e){var t=e.data,i=t.data,r=t.message,n=t.code,a=t.fatal;this.throwError(n,r,i,a)},i.prototype.onManifestParsed=function(e){this.emit(Ti.MANIFEST_PARSED,{profile:this.manifestQualities})},i.prototype.onBubble=function(e){this.emit(e.type,e.data)},i}(Ri);!function(e){e[e.MANIFEST_RETRY_ATTEMPTS=2]="MANIFEST_RETRY_ATTEMPTS",e[e.MANIFEST_RETRY_INTERVAL=1e3]="MANIFEST_RETRY_INTERVAL",e[e.FATAL_ERROR_RECOVERY_ATTEMPTS=4]="FATAL_ERROR_RECOVERY_ATTEMPTS",e[e.FATAL_ERROR_RECOVERY_DELAY=1e3]="FATAL_ERROR_RECOVERY_DELAY",e[e.FATAL_ERROR_RECOVERY_BACKOFF=2]="FATAL_ERROR_RECOVERY_BACKOFF",e[e.FATAL_ERROR_RECOVERY_FUZZ=0]="FATAL_ERROR_RECOVERY_FUZZ"}(pn||(pn={}));var yn=function(e){function i(i){var r=e.call(this,i)||this;return r.pType=t.PlaybackAdapterType.SHAKA,r.shaka=window.shaka,r.textTracks=[],r.pSegmentDuration=NaN,r.playerEventMap=[r.mapEvent("error",r.onError),r.mapEvent("streaming",r.onManifestParsed),r.mapEvent("variantchanged",r.onBitrateChanged),r.mapEvent("adaptation",r.onBitrateChanged),r.mapEvent("emsg",r.onEmsg),r.mapEvent("trackschanged",r.onTracksChanged),r.mapEvent("variantchanged",r.onVariantChanged),r.mapEvent("adaptation",r.onAdaptation),r.mapEvent("drmsessionupdate",r.onDrmSessionUpdate),r.mapEvent("texttrackvisibility",r.onTextTrackVisibility),r.mapEvent("timelineregionenter",r.onTimelineRegionEnter)],r.onCueChangeHandler=function(e){return r.onCueChange(e)},r.audioSwitching=!1,r.renderTextTrackNatively=!0,r.cleanUpVtt=!1,r.logger.log(t.LogLevel.INFO,"ShakaAdapter created"),r.updateAudioTracks=C.debounce(r.updateAudioTracks.bind(r),25),r.updateTextTracks=C.debounce(r.updateTextTracks.bind(r),25),r.resize=C.debounce(r.resize.bind(r),250),r}return s(i,e),i.prototype.createVideoSurface=function(){return new Ut(this.config,!1)},i.prototype.initialize=function(){e.prototype.initialize.call(this),"undefined"==typeof VTTCue&&(this.cleanUpVtt=!0),this.shaka.polyfill.installAll(),this.player=new this.shaka.Player(this.videoSurface.video),this.logger.log(t.LogLevel.INFO,"Shaka version: ".concat(this.shaka.Player.version)),this.playerConfig=this.player.getConfiguration(),this.addEvents(this.player,this.playerEventMap);var i=this.playerConfig.streaming.retryParameters;i.maxAttempts=pn.FATAL_ERROR_RECOVERY_ATTEMPTS,i.baseDelay=pn.FATAL_ERROR_RECOVERY_DELAY,i.backoffFactor=pn.FATAL_ERROR_RECOVERY_BACKOFF,i.fuzzFactor=pn.FATAL_ERROR_RECOVERY_FUZZ,(i=this.playerConfig.manifest.retryParameters).maxAttempts=pn.MANIFEST_RETRY_ATTEMPTS,i.baseDelay=pn.MANIFEST_RETRY_INTERVAL,this.networkEngine=this.player.getNetworkingEngine(),this.networkEngine.registerRequestFilter(this.onRequest.bind(this)),this.networkEngine.registerResponseFilter(this.onResponse.bind(this));var r=this.config.resource.location.drm;r.widevine&&r.widevine.url&&(this.playerConfig.drm.servers["com.widevine.alpha"]=r.widevine.url),r.playready&&r.playready.url&&(this.playerConfig.drm.servers["com.microsoft.playready"]=r.playready.url);var n=this.playback.abr,a=this.playerConfig.abr;isNaN(n.minBitrate)||(a.restrictions.minBandwidth=n.minBitrate),isNaN(n.maxBitrate)||(a.restrictions.maxBandwidth=n.maxBitrate),isNaN(n.startBitrate)||(a.defaultBandwidthEstimate=1.15*n.startBitrate);var o=this.config.performanceSettings;null!=o.forwardBufferLength&&(this.playerConfig.streaming.bufferingGoal=o.forwardBufferLength),null!=o.backBufferLength&&(this.playerConfig.streaming.bufferBehind=o.backBufferLength),this.renderTextTrackNatively=this.config.playerOptions.renderTextTrackNatively,0==this.renderTextTrackNatively&&(this.playerConfig.streaming.alwaysStreamText=!0);var s=this.playback,l=s.enableAdvancedCodecs,c=C.isEmpty(s.preferredVideoCodecs)?null:s.preferredVideoCodecs,u=C.isEmpty(s.preferredAudioCodecs)?null:s.preferredAudioCodecs;l&&(this.playerConfig.preferredVideoCodecs=c||["hev","hvc","dvhe"],this.playerConfig.preferredAudioCodecs=u||["ec-3","ac-3"]),this.playerConfig=this.mergeStreamingConfigs(this.playerConfig,this.config.resource.overrides),this.configure()},i.prototype.resize=function(){if(this.playback.abr.capQualityToScreenSize){var e=this.getVariantTracks()[0];if(e){var t=this.videoSurface.video,i=t.clientWidth,r=t.clientHeight;(i<e.width||r<e.height)&&(i=e.width,r=e.height);var n=this.playerConfig.restrictions;n.maxWidth===i&&n.maxHeight===r||(n.maxWidth=i,n.maxHeight=r,this.configure())}}},i.prototype.destroy=function(){var i=this;return this.removeEvents(this.player,this.playerEventMap),this.pTextTrack&&this.pTextTrack.removeEventListener(t.TextTrackEvent.CUE_CHANGE,this.onCueChangeHandler),this.player.destroy().then(function(){return i.player=null,i.networkEngine=null,i.playerConfig=null,i.shaka=null,i.textTracks=null,i.audioTracks=null,i.variant=null,i.pTextTrack=null,i.currentTextTrack=null,i.cleanUpVtt&&delete window.VTTCue,e.prototype.destroy.call(i)})},i.prototype.suspend=function(){this.playerConfig.streaming.bufferingGoal=1,this.playerConfig.streaming.rebufferingGoal=1},i.prototype.resume=function(){this.playerConfig.streaming.bufferingGoal=10,this.playerConfig.streaming.rebufferingGoal=10},i.prototype.clearCue=function(){C.clearCue(this.pTextTrack,this.videoSurface.video.currentTime)},Object.defineProperty(i.prototype,"seekable",{get:function(){return this.player.seekRange()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoQualitySwitching",{get:function(){return this.playerConfig.abr.enabled},set:function(e){this.playerConfig.abr.enabled=e,this.configure()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentIndex",{get:function(){return C.findIndex(this.getVariantTracks(),this.isActive)},set:function(e){var t=this.getVariantTracks()[e];this.player.selectVariantTrack(t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"segmentDuration",{get:function(){return this.pSegmentDuration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manifestQualities",{get:function(){return this.getVariantTracks().map(function(e,t){return{index:t,bitrate:e.bandwidth,width:e.width,height:e.height,codec:e.codecs}})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.playerConfig.abr.restrictions.maxBandwidth},set:function(e){isNaN(e)&&(e=1/0),this.playerConfig.abr.restrictions.maxBandwidth=e,this.configure(),this.constrainAbr()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{get:function(){return this.playerConfig.abr.restrictions.minBandwidth},set:function(e){isNaN(e)&&(e=-1/0),this.playerConfig.abr.restrictions.minBandwidth=e,this.configure(),this.constrainAbr()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"audioTrack",{set:function(e){e?(this.audioSwitching=!0,this.player.selectAudioLanguage(e.lang,e.type)):this.logger.log(t.LogLevel.INFO,"ShakaAdapter: Audio track is null, will not set.")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"droppedVideoFrames",{get:function(){return this.player.getStats().droppedFrames},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"framerate",{get:function(){var e=this.variant;return e?e.frameRate:Number.NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackMode",{set:function(e){this.currentTextTrackMode=e,this.renderTextTrackNatively?(this.player.setTextTrackVisibility(e!=t.TextTrackMode.DISABLED),this.pTextTrack.mode=e):this.onTextTrackVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{set:function(e){if(!this.currentTextTrack||e.id!=this.currentTextTrack.id){this.currentTextTrack=e,this.emit(nt.TEXT_TRACK_CHANGE,this.currentTextTrack);var t=C.find(this.player.getTextTracks(),function(t){return t.id.toString()==e.id});this.player.selectTextTrack(t)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fragmentType",{get:function(){var e=this.getVariantTrack();return e?e.mimeType:""},enumerable:!1,configurable:!0}),i.prototype.loadMediaUrl=function(){var e=this,i=this.playback.startTime;return this.player.load(this.mediaUrl,isNaN(i)||i<0?0:i).then(function(){e.pIsLiveStream=e.player.isLive(),e.loadedMetadata();var i=e.config.resource.location.textTrackUrl;if(!C.isEmpty(i)){var r=C.getMimeType(i);e.player.addTextTrack(i,"en",t.TextTrackKind.CAPTIONS,r)}}).catch(function(t){throw e.createPlayerError(t)})},i.prototype.onError=function(e){var t=this.createPlayerError(e.detail),i=t.code,r=t.message,n=t.data,a=t.fatal;this.throwError(i,r,n,a)},i.prototype.onManifestParsed=function(e){this.pSegmentDuration=this.player.getManifest().presentationTimeline.getMaxSegmentDuration(),this.emit(Ti.MANIFEST_PARSED,{profile:this.manifestQualities})},i.prototype.onBitrateChanged=function(e){this.constrainAbr(),this.emit(Ti.ABR_QUALITY_LOADED,{index:this.currentIndex})},i.prototype.onRequest=function(e,t){var i=this.config.resource.location.drm;e===this.shaka.net.NetworkingEngine.RequestType.LICENSE&&i.enabled&&(i.widevine&&i.widevine.header&&C.assign(t.headers,i.widevine.header),i.playready&&i.playready.header&&C.assign(t.headers,i.playready.header))},i.prototype.onResponse=function(e,t){if(this.multiCdnHeaderPresent){var i=t.headers[tn.MULTI_CDN];this.multiCdnHeaderPresent=null!=i,this.multiCdnHeaderPresent&&this.emit(Ti.MULTI_CDN,{cdn:i})}if(e===this.shaka.net.NetworkingEngine.RequestType.SEGMENT){var r=this.player.getStats().estimatedBandwidth;this.emit(Ti.FRAGMENT_LOADED,{bandwidth:r})}},i.prototype.onEmsg=function(e){var t=e.detail,i={id:t.schemeIdUri,info:t.value,data:t.messageData};this.emit(nt.METADATA_CUEPOINT,i)},i.prototype.onTracksChanged=function(e){this.resize(),this.updateAudioTracks(),this.updateTextTracks()},i.prototype.onAdaptation=function(e){this.variant=this.getVariantTrack()},i.prototype.onVariantChanged=function(e){this.audioSwitching&&(this.audioSwitching=!1,this.emit(Ti.AUDIO_TRACK_CHANGE,{track:this.normalizedAudioTracks[this.getAudioTrackIndex()]})),this.variant=this.getVariantTrack()},i.prototype.onDrmSessionUpdate=function(e){this.emit(Ti.DRM_KEYSYSTEM_CREATED,{keysystem:this.player.keySystem()})},i.prototype.onTextTrackVisibility=function(){this.currentTextTrackMode&&this.emit(nt.TEXT_TRACK_DISPLAY_MODE_CHANGE,{mode:this.currentTextTrackMode})},i.prototype.onCueChange=function(e){if(!this.renderTextTrackNatively&&this.config.textTrackSettings.enabled){var t=e.target;this.emit(nt.TEXT_CUEPOINT,{activeCues:t.activeCues})}},i.prototype.onTimelineRegionEnter=function(e){if(!this.videoSurface.video.seeking){var t=e.detail,i={id:t.schemeIdUri,info:t.value||t.eventElement.getAttribute("messageData"),data:t};this.emit(nt.METADATA_CUEPOINT,i)}},i.prototype.isActive=function(e){return e.active},i.prototype.getAudioTrackIndex=function(){var e=this.getVariantTracks()[this.currentIndex],t=e.language,i=e.audioRoles.join(",");return C.findIndex(this.audioTracks,function(e){return e.language==t&&e.role==i})},i.prototype.configure=function(){this.player.configure(this.playerConfig)},i.prototype.constrainAbr=function(){var e=C.getIndexForBitrate(this.manifestQualities,this.maxBitrate,!1);this.checkAbrConstraints(e)},i.prototype.getVariantTracks=function(){return this.player.getVariantTracks().sort(function(e,t){return e.bandwidth-t.bandwidth})},i.prototype.getVariantTrack=function(){return C.find(this.player.getVariantTracks(),this.isActive)},i.prototype.updateAudioTracks=function(){this.audioTracks=this.player.getAudioLanguagesAndRoles(),this.normalizedAudioTracks=this.normalizeAudioTracks(this.audioTracks,{type:"role",lang:"language",label:"language"});var e=function(e){return"und"===e.lang},t=this.normalizedAudioTracks.filter(function(t){return!e(t)}),i=this.normalizedAudioTracks[this.getAudioTrackIndex()];if(e(i)){var r=this.normalizedAudioTracks.length>i.index+1?i.index+1:i.index;i=this.normalizedAudioTracks[r],this.audioTrack=i}this.emit(Ti.AUDIO_TRACK_UPDATED,{tracks:t,track:i})},i.prototype.updateTextTracks=function(){var e=this;if(this.player.getTextTracks().forEach(function(i){if(!e.textTracks.some(function(e){return e.id==i.id.toString()})){var r=null!=i.id?i.id.toString():C.uid8(),n="caption"===i.kind?t.TextTrackKind.CAPTIONS:"subtitle"===i.kind?t.TextTrackKind.SUBTITLES:i.kind,a=Object.freeze({id:r,language:i.language,kind:n,label:i.label});e.textTracks.push(a),e.emit(nt.TEXT_TRACK_ADDED,a)}}),!this.currentTextTrack){this.pTextTrack=C.find(this.videoSurface.video.textTracks,function(e){return"Shaka Player TextTrack"==e.label}),this.pTextTrack.addEventListener(t.TextTrackEvent.CUE_CHANGE,this.onCueChangeHandler);var i=C.findDefaultTrack(this.textTracks,this.config.textTrackSettings.language);i&&(this.currentTextTrack=i,this.emit(nt.TEXT_TRACK_AVAILABLE),this.emit(nt.TEXT_TRACK_CHANGE,this.currentTextTrack))}this.renderTextTrackNatively&&this.player.setTextTrackVisibility(this.config.textTrackSettings.enabled)},i.prototype.createPlayerError=function(e){var i=this.shaka.util.Error,r=i.Category,n=i.Code,a=function(t,i,r,a){for(var o in void 0===a&&(a=!0),n){var s=n[o];if(s==e.code){i+=" : ".concat(o," / ").concat(s);break}}return{code:t,message:i,data:r,fatal:a}};switch(e.category){case r.NETWORK:return a(t.ErrorCode.SHAKA_NETWORK_ERROR,ct.messages.FATAL_PLAYBACK_NETWORK_ERROR,e);case r.MANIFEST:return a(t.ErrorCode.SHAKA_PARSE_ERROR,ct.messages.FATAL_PLAYBACK_MEDIA_ERROR,e);case r.MEDIA:return a(e.code==n.VIDEO_ERROR&&e.data[0]==MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED?t.ErrorCode.SHAKA_SRC_NOT_SUPPORTED:t.ErrorCode.SHAKA_MEDIA_ERROR,ct.messages.FATAL_PLAYBACK_MEDIA_ERROR,e);case r.DRM:return a(t.ErrorCode.SHAKA_DRM_ERROR,ct.messages.FATAL_PLAYBACK_MEDIA_ERROR,e);default:return a(t.ErrorCode.UNSPECIFIED_SHAKA_ERROR,ct.messages.UNSPECIFIED_ERROR,e,!1)}},i}(sn),vn=function(){function e(){}return e.getAdapterOverride=function(e){var t;return null===(t=e.resource.overrides)||void 0===t?void 0:t.adapter},e.getAdapterType=function(i){var r;if(null===(r=i.resource.playback.adapter)||void 0===r?void 0:r.id)return null;var n=[{adapter:t.PlaybackAdapterType.TWITCH_LOW_LATENCY,condition:e.isTwitchLowLatencyAdapter},{adapter:t.PlaybackAdapterType.PLAY_STATION,condition:e.isPlayStationAdapter},{adapter:t.PlaybackAdapterType.HTML5,condition:e.isHTML5Adapter},{adapter:t.PlaybackAdapterType.SHAKA,condition:e.isDashAdapter},{adapter:t.PlaybackAdapterType.HLSJS,condition:e.isHlsAdapter}],a=e.getAdapterOverride(i);if(!C.isEmpty(a)){var o=C.find(n,function(e){return e.adapter===a});if(!o||o.condition(i))return a}var s=C.find(n,function(e){return e.condition(i)});return(null==s?void 0:s.adapter)||t.PlaybackAdapterType.UNKNOWN},e.getUrl=function(e,i){var r,n=i.playerOptions.overrides,a=function(e,t,i){return void 0===i&&(i={}),C.template(e,c({VERSION:t},i))};if(null===(r=null==n?void 0:n.dependencies)||void 0===r?void 0:r[e])return n.dependencies[e];switch(e){case t.PlaybackAdapterType.HLSJS:return a(Jr.HLSJS_GZIP_CDN,Zr.HLSJS);case t.PlaybackAdapterType.SHAKA:var o=!0===(null==n?void 0:n.enableLowLevelStreamingLogs)?".debug":"";return a(Jr.SHAKA_GZIP_CDN,Zr.SHAKA,{DEBUG:o});case t.PlaybackAdapterType.TWITCH_LOW_LATENCY:return a(Jr.TWITCH_GZIP_CDN,Zr.TWITCH);default:return null}},e.loadLib=function(t,i,r){try{if(null!=r())return Promise.resolve()}catch(t){}return Qe.loadScript({url:e.checkSslForUrl(i.system,t),timeout:e.getScriptLoaderTimeout(i),errorRecovery:e.getErrorRecoveryFromConfig(i)})},e.getAdapter=function(i){var r=i.logger,n=e.getAdapterType(i),a=function(e,t){return void 0===t&&(t=ct.messages.ADAPTER_LIB_UNAVAILABLE),{target:n,code:e,message:t,fatal:!0}},o=e.getUrl(n,i);switch(n){case t.PlaybackAdapterType.HLSJS:return e.loadLib(o,i,function(){return window.Hls}).then(function(){return r.log(t.LogLevel.INFO,"Loading ".concat(t.PlaybackAdapterType.HLSJS," external library version: ").concat(Zr.HLSJS)),new ln(i)}).catch(function(e){throw a(t.ErrorCode.HLS_SDK_MISSING)});case t.PlaybackAdapterType.SHAKA:return e.loadLib(o,i,function(){return window.shaka.Player}).then(function(){return r.log(t.LogLevel.INFO,"Loading ".concat(t.PlaybackAdapterType.SHAKA," external library version: ").concat(Zr.SHAKA)),new yn(i)}).catch(function(e){throw a(t.ErrorCode.SHAKA_SDK_MISSING)});case t.PlaybackAdapterType.TWITCH_LOW_LATENCY:return e.loadLib(o,i,function(){return window.IVSPlayer}).then(function(){return r.log(t.LogLevel.INFO,"Loading ".concat(t.PlaybackAdapterType.TWITCH_LOW_LATENCY," external library version: ").concat(Zr.TWITCH)),Ni.createTwitch(i)}).catch(function(e){throw a(t.ErrorCode.TWITCH_SDK_MISSING)});case t.PlaybackAdapterType.HTML5:return Promise.resolve(new dn(i));case t.PlaybackAdapterType.PLAY_STATION:return Promise.resolve(new fn(i))}return null},e.getMimeType=function(e){var t;return((null===(t=e.overrides)||void 0===t?void 0:t.mimeType)||"").split(";").shift()||C.getMimeType(e.location.mediaUrl)},e.isPlayStationAdapter=function(e){return e.system.isWebMaf},e.isHTML5Adapter=function(i){var r,n,a=!C.isEmpty(null===(n=null===(r=i.resource.location.drm)||void 0===r?void 0:r.fairplay)||void 0===n?void 0:n.appCertUrl),o=i.system.info.browser===t.Browser.SAFARI,s=i.system.os===t.Os.IOS,l=i.system.os==t.Os.ANDROID,c=i.system.osVersionInfo,u=e.getMimeType(i.resource),d=u==t.MimeType.HLS||u==t.MimeType.HLS_ALT,p=e.getAdapterOverride(i);if(!i.capabilities.hasMediaSource||p==t.PlaybackAdapterType.HTML5)return i.video&&""!=i.video.canPlayType(u);if(!d&&u==t.MimeType.MP4_VIDEO)return!0;if(d&&a&&o)return!0;if(d&&s){if(a&&o)return!0;if(!a)return!0}return!!(d&&!a&&l&&c.majorVersion<5)},e.isDashAdapter=function(i){return i.capabilities.hasMediaSource&&e.getMimeType(i.resource)==t.MimeType.DASH},e.isTwitchLowLatencyAdapter=function(i){return e.getAdapterOverride(i)===t.PlaybackAdapterType.TWITCH_LOW_LATENCY},e.isHlsAdapter=function(i){var r=i.system.info.browser===t.Browser.SAFARI,n=i.system.os===t.Os.IOS,a=e.getMimeType(i.resource),o=a==t.MimeType.HLS||a==t.MimeType.HLS_ALT;return!!i.capabilities.hasMediaSource&&!(o&&n&&!r)&&o},e.checkSslForUrl=function(e,t){return e.isWebOs?C.makeUrl(!0,t):t},e.getScriptLoaderTimeout=function(e){var t=e.playerOptions,i=t.overrides,r=t.networkTimeout;return i.streamingLibLoaderTimeout||r||R.TIMEOUT},e.getErrorRecoveryFromConfig=function(e){var t=null,i=e.playerOptions.networkErrorRecovery;return C.isEmpty(i)||(t={retryAttempts:i.retryAttempts,retryIntervals:i.retryIntervals}),t},e}(),mn=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.uim=null,t.contentDurationReleased=!1,t.resumeTimeMaxProximityToAdBreak=5,t.isClickToPlay=!1,t.fullscreenRestrictedDuringAdPlay=!1,t.hasContent=!0,t.contentComplete=!1,t.timeSpent={startTime:null,lastTime:0,sessionTime:0,playbackTime:0,elapsedTime:0},t}return s(i,e),i.prototype.onRemove=function(){this.uim=null,e.prototype.onRemove.call(this)},i.prototype.start=function(){var e=this.resourceProxy.location.mediaUrl;this.hasContent=C.isString(e)&&!C.isEmpty(e)},i.prototype.close=function(){var e,i=this;if(this.closing)return this.closing;var r=null===(e=this.contentPlaybackStateProxy)||void 0===e?void 0:e.model,n=(null==r?void 0:r.time)||0,a=(null==r?void 0:r.duration)||0,o=this.isAdPlaying();return this.respondToPlaybackStateChange(t.PlaybackState.STOPPED),this.contentPlaybackStateProxy.isReady=!1,this.closing=this.adapterTask.then(function(){i.pause(),i.log(t.LogLevel.INFO,"Closing Presentation"),i.closeAds()}).then(function(){return i.adapter?i.adapter.destroy():null}).then(function(){o||i.hasContent&&!i.isContentComplete()?i.sendNotification(vi.RESOURCE_INTERRUPTED,{contentTime:n,contentDuration:a,adInterrupted:o}):i.notify(vi.RESOURCE_END)}).catch(function(e){throw I.error(e),e}).then(function(){i.closing=null})},i.prototype.setAdPlaying=function(){this.uiMediator&&(this.uiMediator.hideClickCatcher(!0),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator.disableFullscreen())},i.prototype.getPlayerVersionInfo=function(){return"".concat(it.playerName,"_").concat(it.playerVersion)},i.prototype.startContentSegment=function(){this.uiMediator&&!this.contentPlaybackStateProxy.model.liveStreamInfo&&this.uiMediator.setSeekable(!0),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator&&(this.uiMediator.setFullScreenAccessRestricted(!1),this.uiMediator.enableFullscreen())},i.prototype.closeAds=function(){},i.prototype.beforePlayOnUserGesture=function(){},i.prototype.playOnUserGesture=function(){this.uiMediator&&this.uiMediator.displayPoster(!1),this.notify(vi.VIDEO_LOAD_START),this.prepareForPlayback(!0)},i.prototype.mute=function(e){this.muteVideo(e),this.uiMediator&&this.uiMediator.setMuteState(e)},i.prototype.seek=function(e){this.seekVideo(e)},i.prototype.setVolume=function(t){this.domProxy&&this.domProxy.setVideoVolume(t),e.prototype.setVolume.call(this,t)},i.prototype.getAdBreakTimes=function(){return[]},i.prototype.releaseContentDuration=function(e){this.contentDurationReleased=!0,this.notify(vi.CONTENT_DURATION_AVAILABLE,{contentDuration:e})},i.prototype.updateTimeSpent=function(){var e=Date.now();null===this.timeSpent.startTime&&(this.timeSpent.startTime=e),null===this.timeSpent.lastTime&&(this.timeSpent.lastTime=e);var i=e-this.timeSpent.startTime;return this.timeSpent.elapsedTime=i,this.timeSpent.sessionTime=i/1e3,this.contentPlaybackStateProxy.model.state!==t.PlaybackState.PAUSED&&(this.timeSpent.playbackTime+=(e-this.timeSpent.lastTime)/1e3,this.timeSpent.lastTime=e),this.timeSpent},i.prototype.adjustStartTimeForAdBreakProximity=function(e,t){for(var i=0,r=t.length;i<r;i++){var n=t[i].startTime-e;if(n>=0&&n<this.resumeTimeMaxProximityToAdBreak)return e-this.resumeTimeMaxProximityToAdBreak}return e},Object.defineProperty(i.prototype,"uiMediator",{get:function(){return this.uim},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"domProxy",{get:function(){return this.facade.retrieveProxy(zt.PlayerDomProxy)},enumerable:!1,configurable:!0}),i.prototype.muteVideo=function(t){e.prototype.muteVideo.call(this,t),this.domProxy&&this.domProxy.muteVideo(t)},i.prototype.respondToPlaybackStateChange=function(t){e.prototype.respondToPlaybackStateChange.call(this,t),this.timeSpent.lastTime=null},i.prototype.respondToFullscreenChange=function(e){this.checkSize(),this.notify(e?vi.FULLSCREEN_ENTER:vi.FULLSCREEN_EXIT)},i.prototype.respondToVideoPaused=function(){this.respondToPlaybackStateChange(t.PlaybackState.PAUSED),this.notify(vi.RESOURCE_PAUSED)},i.prototype.respondToVideoPlaying=function(){this.presoModel.started||(this.presoModel.started=!0,this.uiMediator&&(this.uiMediator.displayPoster(!1),this.uiMediator.hideClickCatcher(!0),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&this.uiMediator.showUnmutePrompt(),this.setTransportType()),this.notify(vi.ENABLE_UI)),this.respondToPlaybackStateChange(t.PlaybackState.PLAYING),this.notify(vi.RESOURCE_PLAYING)},i.prototype.respondToVideoSeeking=function(){this.notify(vi.CONTENT_SEEKING)},i.prototype.respondToVideoSeeked=function(){this.notify(vi.CONTENT_SEEKED)},i.prototype.respondToVideoProgress=function(){this.notify(vi.VIDEO_PROGRESS)},i.prototype.respondToQualityChange=function(e){void 0===e&&(e=null),this.notify(vi.QUALITY_CHANGE,e)},i.prototype.respondToError=function(e){this.uiMediator&&this.uiMediator.displaySpinner(!1),e.message||(e.message=ct.messages.UNSPECIFIED_ERROR),e.code||(e.code=t.ErrorCode.UNSPECIFIED_VIDEO_PLAYBACK_ERROR),this.sendErrorNotification(vi.VIDEO_PLAYBACK_ERROR,e)},i.prototype.respondToVideoEnd=function(){this.notify(vi.DISABLE_UI),this.notify(vi.RESOURCE_COMPLETE)},i.prototype.respondToBufferingStatusCheck=function(e){var t=this.presoModel.streamTime;!isNaN(t)&&t>0&&this.checkVideoBuffering(e)},i.prototype.respondToId3Data=function(e){this.notify(vi.METADATA_CUEPOINT,e)},i.prototype.respondToVideoTimeUpdate=function(e){var i=this.contentPlaybackStateProxy.model,r=i.duration,n=i.liveStreamInfo,a=i.streamType,o=i.time;this.updateTimeSpent();var s={contentTime:o,contentDuration:r,streamTime:e,streamDuration:this.presoModel.streamDuration,sessionTime:this.timeSpent.sessionTime,playbackTime:this.timeSpent.playbackTime};if(a!==t.StreamType.VOD){var l=n.relativeTime,c=n.relativeDuration;s.contentTime=l,s.contentDuration=c,s.elapsedTimeMs=this.timeSpent.elapsedTime,i.time=l,i.duration=c}this.notify(vi.CONTENT_TIME_UPDATE,s)},i.prototype.respondToDurationChange=function(e){},i.prototype.respondToSizeChange=function(){this.adapter&&this.adapter.resize()},i.prototype.respondToTextTrackModeChange=function(e){this.uiMediator&&this.uiMediator.setClosedCaptionState(e)},i.prototype.checkSize=function(){if(this.domProxy){var e=this.domProxy.getPresentationRect();e.width===this.currentRect.width&&e.height===this.currentRect.height||(this.currentRect=e,this.respondToSizeChange(),this.notify(vi.PRESENTATION_SIZE_CHANGE,{width:this.currentRect.width,height:this.currentRect.height}))}},i.prototype.setTransportType=function(e){void 0===e&&(e=this.contentPlaybackStateProxy.model.streamType);var i=e!=t.StreamType.LIVE;this.uiMediator&&(this.uiMediator.setSeekable(i),this.uiMediator.setTransportType(e),this.uiMediator.setIsPlayingLive(this.isPlayingLive))},i.prototype.setForClickToPlay=function(){var e=this;if(this.uiMediator)this.uiMediator.displayPoster(!0),this.uiMediator.activatePoster();else if(this.getModel(yi.PlayerOptions).useNativeControls){var t=this.domProxy.getMain(),i=function(){t.removeEventListener("click",i),e.notify(vi.PLAY_ON_USER_GESTURE)};t.addEventListener("click",i)}},i.prototype.setPausedState=function(){this.uiMediator&&(this.uiMediator.setClickCatcherState(t.PlaybackState.PAUSED),this.uiMediator.hideClickCatcher(!1))},i.prototype.setPlayingState=function(){this.uiMediator&&(this.uiMediator.setClickCatcherState(t.PlaybackState.PLAYING),this.uiMediator.hideClickCatcher(!1))},i.prototype.isContentComplete=function(){if(this.contentComplete)return!0;var e=this.contentPlaybackStateProxy.model;return e.streamType!=t.StreamType.LIVE&&e.streamType!=t.StreamType.DVR&&!(isNaN(e.time)||e.time<e.duration)},i.prototype.isAdPlaying=function(){return this.presoModel.isCurrentVideoAd},i.prototype.handleNotification=function(t){e.prototype.handleNotification.call(this,t)},i.prototype.listNotificationInterests=function(){return e.prototype.listNotificationInterests.call(this).concat([])},i.prototype.onRegister=function(){e.prototype.onRegister.call(this);var i=this.playerOptions.overrides;i.resumeTimeMaxProximityToAdBreak&&(this.resumeTimeMaxProximityToAdBreak=i.resumeTimeMaxProximityToAdBreak),this.isClickToPlay=!this.presoModel.isAutoplay;var r=this.facade.retrieveMediator(hi.UI);r&&(this.uim=r);var n=this.facade.retrieveService(ze.System);this.fullscreenRestrictedDuringAdPlay=n.isIos||n.isAndroid,this.uim&&(this.uim.disableFullscreen(),this.uim.setFullScreenAccessRestricted(this.fullscreenRestrictedDuringAdPlay)),this.setTransportType(t.StreamType.VOD),this.domProxy&&(this.currentRect=this.domProxy.getPresentationRect())},i}(function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.started=!1,r.preloadContent=!0,r.minDvrDuration=1800,r.adapterTask=Promise.resolve(),r.seeking=!1,r.onLoadError=function(e){var t=e.name,i=e.error;return r.sendErrorNotification(t,i)},r.previousPlaybackState={state:null,overrides:{}},r.contentIsBuffering=!1,r.adapterEventHandler=function(e){return r.hPlaybackAdaptorEvents(e)},r.videoEventHandler=function(e){return r.hVideoAdapterEvents(e)},r.textTrackEventHandler=function(e){return r.hTextTrackEvents(e)},r.endFreezeTimeoutHandle=null,r.loadComplete=!1,r.offsetTtOnControlVis=!1,r.isMonitoringCueEvents=!1,r.respondToTextTrackInfoChange=C.debounce(r.respondToTextTrackInfoChange.bind(r),10),r}return s(i,e),Object.defineProperty(i.prototype,"adapter",{get:function(){return this.pAdapter},enumerable:!1,configurable:!0}),i.prototype.onRemove=function(){clearTimeout(this.endFreezeTimeoutHandle),this.removeEvents(Ti,this.adapterEventHandler),this.removeEvents(ot,this.videoEventHandler),this.removeEvents(nt,this.textTrackEventHandler),this.pAdapter=null,this.contentPlaybackStateProxy=null,this.resourceProxy=null,this.presoModel=null,this.playerOptions=null,e.prototype.onRemove.call(this)},i.prototype.setVolume=function(e){this.presoModel.volume=e},i.prototype.load=function(){var e=this;return this.loadVideo().then(function(){var t=function(e){return e==Ti.ERROR||e==ot.ERROR};e.addEvents(Ti,e.adapterEventHandler,t),e.addEvents(ot,e.videoEventHandler,t)}).catch(function(e){var t=e.type?e.data:e;throw{name:vi.VIDEO_START_ERROR,error:t}})},i.prototype.play=function(){this.playVideo()},i.prototype.pause=function(){this.pauseVideo()},i.prototype.suspend=function(){this.pAdapter.suspend()},i.prototype.resume=function(){this.pAdapter.resume()},i.prototype.loadVideo=function(){var e=this;return this.respondToWaiting("loading",!0),this.pAdapter.load().then(function(){e.respondToWaiting("loading",!1)})},i.prototype.playVideo=function(){this.pAdapter&&this.pAdapter.play()},i.prototype.pauseVideo=function(){this.pAdapter&&this.pAdapter.pause()},i.prototype.muteVideo=function(e){e||this.presoModel.userHasUnmuted||(this.presoModel.userHasUnmuted=!0),this.presoModel.isMuted=e},i.prototype.seekVideo=function(e){this.pAdapter&&this.pAdapter.seek(e)},i.prototype.checkVideoBuffering=function(e){var t,i=Math.max(Math.floor(this.bufferingSampleRate/er.INTERVAL),1);if(!(isFinite(i)&&e%i)){var r=(null===(t=this.pAdapter)||void 0===t?void 0:t.buffering)||!1;this.contentIsBuffering!==r&&(this.contentIsBuffering=r,this.notify(vi.CONTENT_BUFFERING,{value:r}),this.respondToWaiting("buffering",r))}},Object.defineProperty(i.prototype,"video",{get:function(){return this.viewControl},enumerable:!1,configurable:!0}),i.prototype.notify=function(e,t){this.sendNotification(e,t||null,mi.INTERNAL)},i.prototype.respondToIsPlayingLiveChange=function(e){this.notify(vi.CONTENT_IS_LIVE_CHANGED,{value:e})},i.prototype.respondToStreamTypeChange=function(e){var t=this.contentPlaybackStateProxy.model;this.streamType!=e&&(this.streamType=e,t.streamType=e,this.notify(vi.STREAM_TYPE_CHANGE,{value:e}))},i.prototype.respondToWaiting=function(e,i){this.previousPlaybackState.overrides[e]=i;var r=!this.previousPlaybackState.state||C.includes(C.values(this.previousPlaybackState.overrides),!0);this.respondToPlaybackStateChange(r?t.PlaybackState.WAITING:this.previousPlaybackState.state)},i.prototype.respondToPlaybackStateChange=function(e){var i=this.contentPlaybackStateProxy.model,r=e!==t.PlaybackState.WAITING;if(i.state!=e){if(e!==t.PlaybackState.IDLE&&r&&(this.previousPlaybackState.state=e),this.seeking&&r)return;i.state=e,this.notify(vi.PLAYBACK_STATE_CHANGE,{value:e})}},i.prototype.respondToTtOffsetRequest=function(e){if(this.facade.retrieveService(ze.System).browser===t.Browser.FIREFOX)this.monitorTtCues(e);else{var i=this.facade.retrieveProxy(zt.PlayerDomProxy);i&&i.setControlVisibility(e)}},i.prototype.monitorTtCues=function(e){var i=C.find(this.video.textTracks,function(e){return C.isTextTrack(e.kind)&&e.mode===t.TextTrackMode.SHOWING}),r=null==i?void 0:i.activeCues;if(this.isMonitoringCueEvents=e,r)for(var n=0,a=r.length||0;n<a;n++)this.respondToTtCue(r[n])},i.prototype.respondToTtCue=function(e){e.line=this.isMonitoringCueEvents?14:"auto"},i.prototype.handleNotification=function(e){switch(e.name){case vi.TIMER_TIC:this.respondToBufferingStatusCheck(e.body.count),this.checkSize();break;case vi.FULLSCREEN_CHANGE:var t=e.body;this.presoModel.isFullscreen=t.isFullscreen,this.respondToFullscreenChange(t.isFullscreen);break;case vi.AUTO_QUALITY_SWITCHING:this.notify(vi.QUALITY_INFO_CHANGE,this.contentPlaybackStateProxy.model.qualityInfo);break;case vi.TT_OFFSET_REQUEST:this.offsetTtOnControlVis&&this.respondToTtOffsetRequest(e.body.controlsVisible)}},i.prototype.listNotificationInterests=function(){return[vi.TIMER_TIC,vi.FULLSCREEN_CHANGE,vi.TT_OFFSET_REQUEST]},i.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.contentPlaybackStateProxy=this.facade.retrieveProxy(zt.ContentPlaybackStateProxy),this.resourceProxy=this.facade.retrieveProxy(zt.ResourceProxy),this.performanceProxy=this.facade.retrieveProxy(zt.PerformanceProxy),this.presoModel=this.getModel(yi.PresentationState),this.playerOptions=this.getModel(yi.PlayerOptions);var t=this.resourceProxy.resource.overrides;C.isNumber(null==t?void 0:t.minDvrDuration)&&(this.minDvrDuration=t.minDvrDuration),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&(this.muteVideo(!0),this.presoModel.isMuted=!0),this.offsetTtOnControlVis=this.playerOptions.offsetTextOnControlsVisible,this.bufferingSampleRate=this.performanceProxy.bufferingSampleRate},i.prototype.prepareForPlayback=function(e){if(void 0===e&&(e=!1),!this.initializing){var t={system:this.systemService,capabilities:this.facade.retrieveService(ze.MediaCapabilities).capabilities,playerOptions:this.playerOptions,resource:this.resourceProxy.resource,performanceSettings:this.performanceProxy,textTrackSettings:this.facade.retrieveProxy(zt.TextTrackProxy),video:this.viewControl,logger:this.logger};this.adapterTask=this.initializeAdapter(t,e).catch(this.onLoadError)}},i.prototype.sendErrorNotification=function(e,i){this.logger.log(t.LogLevel.ERROR,i),this.notify(e,i)},i.prototype.getAdapter=function(e){return d(this,void 0,void 0,function(){var i,r,n,a;return p(this,function(o){switch(o.label){case 0:return[4,vn.getAdapter(e)];case 1:return(i=o.sent())?[2,i]:(r=this.facade.retrieveProxy(zt.AdapterProxy),n=new rn,[4,r.createAdapter(t.AdapterRole.PLAYBACK,e.resource,function(){return n})]);case 2:return a=o.sent(),[2,new nn(e,a,n)]}})})},i.prototype.initializeAdapter=function(e,t){var i;return d(this,void 0,void 0,function(){var r,n,a,o;return p(this,function(s){switch(s.label){case 0:if(s.trys.push([0,,9,10]),this.initializing=!0,this.closing)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.getAdapter(e)];case 2:return r=s.sent(),this.closing?[2]:(this.pAdapter=r,n=function(e){return e!=Ti.ERROR&&e!=ot.ERROR},this.addEvents(Ti,this.adapterEventHandler,n),this.addEvents(ot,this.videoEventHandler,n),this.addEvents(nt,this.textTrackEventHandler),this.pAdapter.initialize(),!0===(null===(i=e.playerOptions.overrides)||void 0===i?void 0:i.exposePlaybackAdapter)&&(this.facade.retrieveMediator(hi.APPLICATION).getAppApi().adapter=this.pAdapter.adapter||this.pAdapter),[3,4]);case 3:throw a=s.sent(),{name:vi.RESOURCE_ERROR,error:a};case 4:return s.trys.push([4,7,,8]),this.preloadContent?[4,this.load()]:[3,6];case 5:s.sent(),s.label=6;case 6:return this.closing?[2]:this.presoModel.isAutoplay||t?(this.play(),[3,8]):[2];case 7:throw o=s.sent(),{name:vi.VIDEO_PLAYBACK_ERROR,error:o};case 8:return[3,10];case 9:return this.initializing=!1,[7];case 10:return[2]}})})},i.prototype.hPlaybackAdaptorEvents=function(e){var i=this,r=this.contentPlaybackStateProxy.model;switch(e.type){case Ti.ABR_QUALITY_LOADED:if(this.contentPlaybackStateProxy.isAbrSwitchingAvailable){var n=this.contentPlaybackStateProxy.qualityInfo,a=this.contentPlaybackStateProxy.manifestQualities[e.data.index].bitrate,o=C.getIndexForBitrate(n.qualities,a,!1),s=n.qualities[o];n.quality&&n.quality.bitrate===s.bitrate||(this.contentPlaybackStateProxy.quality=s,r.bitrate=s.bitrate,this.respondToQualityChange(s))}break;case Ti.ABR_CONSTRAINTS_CHANGE:this.contentPlaybackStateProxy.isAbrSwitchingAvailable?r.qualityInfo&&(this.contentPlaybackStateProxy.updateQualityProfile(e.data.minIndex,e.data.maxIndex,e.data.manifestQualities),this.log(t.LogLevel.INFO,"Quality Info: ",r.qualityInfo),this.notify(vi.QUALITY_INFO_CHANGE,r.qualityInfo)):(this.logger.log(t.LogLevel.INFO,ct.messages.ABR_UNAVAILABLE),this.contentPlaybackStateProxy.qualitySwitchingMode=t.QualityMode.UNAVAILABLE);break;case Ti.AUDIO_TRACK_UPDATED:this.contentPlaybackStateProxy.updateAudioTracks(e.data.track,e.data.tracks),this.notify(vi.AUDIO_TRACK_INFO_CHANGE,e.data);break;case Ti.AUDIO_TRACK_CHANGE:this.contentPlaybackStateProxy.updateAudioTracks(e.data.track),this.notify(vi.AUDIO_TRACK_CHANGE,e.data.track);break;case Ti.FRAGMENT_LOADED:this.contentPlaybackStateProxy.maxBandwidth=e.data.bandwidth;break;case Ti.FRAGMENT_PARSED:r.framerate=e.data.rate;break;case Ti.MANIFEST_PARSED:this.contentPlaybackStateProxy.processQualityProfile(e.data.profile),this.contentPlaybackStateProxy.manifestQualities=e.data.profile;break;case Ti.LOADED_METADATA:this.notify(vi.STREAM_METADATA,e.data);try{var l=this.facade.retrieveProxy(zt.Playlist).currentResource.location.thumbnailTrackUrl;!this.contentPlaybackStateProxy.thumbnailTrack&&l&&qe.create(l).then(function(e){i.contentPlaybackStateProxy.thumbnailTrack=e,i.notify(vi.THUMBNAIL_TRACK_AVAILABLE,e)}).catch(function(e){return i.log(t.LogLevel.WARN,"Could not load thumbnail track")})}catch(e){this.log(t.LogLevel.WARN,"Could not load thumbnail track")}break;case Ti.ERROR:this.respondToError(e.data);break;case Ti.MULTI_CDN:var c=e.data.cdn;c!==r.cdn&&(r.cdn=c,this.notify(vi.CDN_CHANGE,e.data));break;case Ti.DRM_KEYSYSTEM_CREATED:r.drmType=e.data.keysystem,this.notify(vi.DRM_KEYSYSTEM_CREATED,e.data)}},i.prototype.hVideoAdapterEvents=function(e){var t=this.contentPlaybackStateProxy.model;switch(e.type){case ot.PROGRESS:t.bufferLength=this.pAdapter.bufferLength,t.averageDroppedFps=this.pAdapter.droppedVideoFrames,t.framerate=this.pAdapter.framerate,this.respondToVideoProgress();break;case ot.CAN_PLAY_THROUGH:this.loadComplete||(this.loadComplete=!0,this.notify(vi.VIDEO_LOAD_COMPLETE));break;case ot.LOADED_METADATA:this.updateLiveStreamInfo(),this.notify(vi.VIDEO_LOADED_METADATA);break;case ot.TIME_UPDATE:clearTimeout(this.endFreezeTimeoutHandle);var i=this.pAdapter.time,r=this.presoModel.streamDuration;this.pAdapter.isLiveStream?this.updateLiveStreamInfo():!isNaN(r)&&r-i<=.15&&this.protectAgainstEndFreeze(250),this.respondToVideoTimeUpdate(i);break;case ot.PLAYING:this.updateLiveStreamInfo(),this.respondToVideoPlaying();break;case ot.PAUSE:this.respondToVideoPaused();break;case ot.SEEKING:this.seeking=!0,this.respondToVideoSeeking(),this.respondToWaiting("seeking",!0);break;case ot.SEEKED:this.seeking=!1,this.respondToVideoSeeked(),this.respondToWaiting("seeking",!1);break;case ot.ENDED:clearTimeout(this.endFreezeTimeoutHandle),this.respondToVideoEnd();break;case ot.DURATION_CHANGE:var n=this.pAdapter.duration;n>0&&this.respondToDurationChange(n);break;case ot.VOLUME_CHANGE:var a=e.data.target||e.data;this.notify(vi.VOLUME_CHANGE,{value:a.volume,muted:a.muted});break;case ot.AUTOPLAY_BLOCKED:this.sendNotification(vi.AUTOPLAY_BLOCKED,e.data,mi.INTERNAL)}},i.prototype.hTextTrackEvents=function(e){var i=this.facade.retrieveProxy(zt.TextTrackProxy);switch(e.type){case nt.METADATA_CUEPOINT:this.respondToId3Data(e.data);break;case nt.TEXT_CUEPOINT:this.isMonitoringCueEvents&&this.respondToTtCue(e.data),this.notify(vi.TEXT_CUEPOINT,e.data);break;case nt.TEXT_TRACK_DISPLAY_MODE_CHANGE:var r=e.data.mode!==t.TextTrackMode.DISABLED;i.mode=e.data.mode,this.notify(vi.TEXT_TRACK_DISPLAY_MODE_CHANGE,{enabled:r}),this.respondToTextTrackModeChange(r);break;case nt.TEXT_TRACK_ADDED:this.contentPlaybackStateProxy.addTextTrack(e.data),this.respondToTextTrackInfoChange();break;case nt.TEXT_TRACK_CHANGE:var n=e.data;this.contentPlaybackStateProxy.textTrack=n,this.notify(vi.TEXT_TRACK_CHANGE,this.contentPlaybackStateProxy.textTrack),this.respondToTextTrackInfoChange();break;case nt.TEXT_TRACK_AVAILABLE:this.notify(vi.TEXT_TRACK_AVAILABLE)}},i.prototype.respondToTextTrackInfoChange=function(){this.notify(vi.TEXT_TRACK_INFO_CHANGE,this.contentPlaybackStateProxy.textTrackInfo)},i.prototype.protectAgainstEndFreeze=function(e){var t=this;clearTimeout(this.endFreezeTimeoutHandle),this.endFreezeTimeoutHandle=setTimeout(function(){t.respondToVideoEnd()},e)},i.prototype.addEvents=function(e,t,i){var r=this;void 0===i&&(i=function(e){return!0}),this.pAdapter&&C.values(e).filter(i).forEach(function(e){return r.pAdapter.on(e,t)})},i.prototype.removeEvents=function(e,t){var i=this;this.pAdapter&&C.values(e).forEach(function(e){return i.pAdapter.off(e,t)})},i.prototype.calculateStreamType=function(){if(this.pAdapter.isLiveStream){var e=this.pAdapter.liveStreamInfo.dvrWindowSize;return e<this.minDvrDuration||isNaN(e)?t.StreamType.LIVE:t.StreamType.DVR}return t.StreamType.VOD},i.prototype.updateLiveStreamInfo=function(){if(this.pAdapter.isLiveStream){var e=this.contentPlaybackStateProxy.model,i=this.pAdapter.liveStreamInfo;e.liveStreamInfo=i;var r=this.calculateStreamType();this.respondToStreamTypeChange(r);var n=r==t.StreamType.LIVE||i.isPlayingLive;this.isPlayingLive!=n&&(this.isPlayingLive=n,this.respondToIsPlayingLiveChange(n)),e.streamType==t.StreamType.DVR&&this.respondToDurationChange(i.relativeDuration)}else this.respondToStreamTypeChange(t.StreamType.VOD)},i}(Si)),gn=function(e){function t(t,i){return e.call(this,t,i)||this}return s(t,e),t.prototype.onRegister=function(){var e=this.facade.retrieveProxy(zt.ModelCollectionProxy);this.breakModel=e.getModel(yi.AdBreakInfo),this.adItemModel=e.getModel(yi.AdItem)},t.prototype.onRemove=function(){this.breakModel=null,this.adItemModel=null,e.prototype.onRemove.call(this)},t.prototype.resetAll=function(){this.breakModel.reset(),this.resetAd()},t.prototype.resetAd=function(){this.adItemModel.reset()},Object.defineProperty(t.prototype,"breakInfo",{get:function(){return this.breakModel.data},set:function(e){var t=this.breakModel.model;for(var i in t)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adInfo",{get:function(){return this.adItemModel.data},set:function(e){var t=this.adItemModel.model;for(var i in t)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},enumerable:!1,configurable:!0}),t}(Oi),An="640x480",En="640x483",Tn="".concat("sz","=").concat(An),bn="".concat("sz","=").concat(En),Sn="imafw__fw_h_referer";function Cn(){var e=String(Math.round(1e15+9e15*Math.random()));if(e.length<16)for(;e.length<16;)e+="0";return e.length>16&&(e=e.substr(0,17)),e}function _n(){return new URL(window.location.href).host}function Pn(){return null===document||void 0===document?void 0:document.referrer}var In,Rn=function(){function e(e,t,i){this.breaks={pre:null,mid:[],post:null},this.breaksById={},e?this.createBreaksFromTimes(e):t&&this.createBreaksFromCuepoints(t,i)}return e.prototype.destroy=function(){this.breaks=null,this.breaksById=null,this.breaks=null},Object.defineProperty(e.prototype,"adBreaks",{get:function(){return this.breaks},enumerable:!1,configurable:!0}),e.prototype.hasMidRolls=function(){return!!this.breaks.mid.length},e.prototype.hasPostRoll=function(){return!!this.breaks.post},e.prototype.getBreakById=function(e){return this.breaksById[e]||null},e.prototype.updateBreaks=function(e){for(var t,i=[],r=e.length;r--;)e[r].played&&i.push(e[r].start);for(var n in this.breaksById)!(t=this.breaksById[n]).hasPlayed&&i.indexOf(t.streamStartTime)>=0&&(t.hasPlayed=!0)},e.prototype.isBreakPending=function(e,t){return!!this.processMid(function(i){return i.startTime>e&&i.startTime-e<=t?!i.hasPlayed||-1:null})},e.prototype.getBreakForContentSeekTime=function(e){return this.processMid(function(t){return t.startTime<=e?t.hasPlayed?-1:t:null})},e.prototype.hasPlayed=function(e){return this.breaksById[e]&&!0===this.breaksById[e].hasPlayed},e.prototype.markPlayed=function(e){this.breaksById[e]&&(this.breaksById[e].hasPlayed=!0)},e.prototype.processMid=function(e){if(!this.hasMidRolls())return null;for(var t,i=this.breaks.mid,r=i.length;r--;){if(-1==(t=e(i[r])))return null;if(t)return t}return null},e.prototype.createBreaksFromCuepoints=function(e,i){var r,n,a,o,s,l,c=1;e.sort(function(e,t){return e.start-t.start});for(var u=0,d=0,p=e.length;d<p;d++)r=e[d].start,o=(n=e[d].end)-r,s=r,r-u>=i&&(r=-1),u+=o,a=this.makeBrkId(r,r>0?c++:null),(l=this.makeBreak(r,a,s,t.AdTechnology.SSAI)).endTime=n,l.duration=o,this.addBreak(r,l,a)},e.prototype.createBreaksFromTimes=function(e){var i,r,n=1;e.sort(function(e,t){return e-t});for(var a=0,o=e.length;a<o;a++)i=e[a],r=this.makeBrkId(i,i>0?n++:null),this.addBreak(i,this.makeBreak(i,r,null,t.AdTechnology.CSAI),r)},e.prototype.addBreak=function(e,t,i){var r=i.split("_")[0];e<=0?this.breaks[r]=t:this.breaks.mid.push(t),this.breaksById[i]=t},e.prototype.makeBreak=function(e,i,r,n){return void 0===r&&(r=null),{adTechnology:n,startTime:e,hasPlayed:!1,streamStartTime:null!==r?r:null,breakId:i,type:0===e?t.AdBreakType.PRE:-1===e?t.AdBreakType.POST:t.AdBreakType.MID}},e.prototype.makeBrkId=function(e,t){return(0===e?"pre":-1===e?"post":"mid")+(e>0?"_".concat(t):"_0")},e}(),kn=function(e){function i(t,i){var r=e.call(this,null)||this;return r.streamInfo={},r.adBreakSchedule=null,r.pStreamDuration=NaN,r.pContentDuration=NaN,r.breakMetadataPending=!1,r.cuesReleased=!1,r.adBreakInProgress=!1,r.breakCount=0,r.unlockedBreaks=[],r.rawScheduleReleased=!1,r.isIgnoringEvents=!1,r.omEnabled=!0,r.cuePoints=[],r.adService=t,r.sdk=r.adService.sdk,r.mgr=r.adService.getStreamManager(),r.omEnabled=i,r.streamEventHandler=function(e){r.hStreamEvent(e)},r.initialize(),r}return s(i,e),i.prototype.destroy=function(){this.listenToStreamManager(!1),this.cuePoints=null,this.adService=null,this.sdk=null,this.adBreakSchedule=null,this.mgr=null},i.prototype.getCuePoints=function(){return this.cuePoints||[]},i.prototype.getCuePointsInContentTime=function(){var e=this.cuePoints,t=[];if(!e)return t;for(var i=0,r=e.length;i<r;i++){var n=e[i],a=n.end-n.start,o=this.contentTimeForStreamTime(n.start);t.push({streamTimeStart:n.start,streamTimeEnd:n.start+a,start:o,duration:a,played:n.played})}return t},i.prototype.ignoreAdEvents=function(e){this.isIgnoringEvents=e},i.prototype.setUnlockedBreaks=function(e){this.unlockedBreaks=e},i.prototype.getUnlockedBreaks=function(){return this.unlockedBreaks},i.prototype.addUnlockedBreak=function(e){this.unlockedBreaks.push(e)},i.prototype.hasPostRoll=function(){var e;return!!(null===(e=this.adBreakSchedule)||void 0===e?void 0:e.hasPostRoll())},i.prototype.checkForAdPeriod=function(e,t){for(var r,n,a,o,s=this.cuePoints.length,l=0;l<s;l++)if(a=(n=e-(r=this.cuePoints[l]).start)>-.3&&n<2,o=r.end-e>=3,this.isUnlockedBreak(r)&&a&&o)return this.emit(i.event.AD_PERIOD_STARTED,{streamResumeTime:r.end}),!0;return!1},i.prototype.isUnlockedBreak=function(e){for(var t=this.unlockedBreaks.length;t--;)if(Math.floor(this.unlockedBreaks[t])===Math.floor(e.start))return!0;return!1},i.prototype.getPermittedSeekTime=function(e){if(this.adBreakSchedule&&this.adBreakSchedule.hasMidRolls()){var t=this.mgr.streamTimeForContentTime(e),i=this.adBreakSchedule.getBreakForContentSeekTime(t);if(i){for(var r=this.unlockedBreaks.length;r--;)if(Math.floor(this.unlockedBreaks[r])===Math.floor(i.streamStartTime))return i.hasPlayed=!0,e;return i.startTime}}return e},Object.defineProperty(i.prototype,"streamDuration",{get:function(){return this.pStreamDuration||NaN},set:function(e){this.pStreamDuration=e,this.pContentDuration=this.mgr.contentTimeForStreamTime(e),this.pendingCues&&!this.cuesReleased&&(this.updateBreakSchedule(this.pendingCues),this.releaseCues(this.pendingCues),this.pendingCues=null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentDuration",{get:function(){return this.pContentDuration||NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"streamId",{get:function(){return this.streamInfo.streamId},enumerable:!1,configurable:!0}),i.prototype.onTimedMetadata=function(e){var t={TXXX:e.TXXX||e.msg};this.mgr.onTimedMetadata(t)},i.prototype.contentTimeForStreamTime=function(e){return this.mgr.contentTimeForStreamTime(e)},i.prototype.streamTimeForContentTime=function(e){return this.mgr.streamTimeForContentTime(e)},i.prototype.requestVODStream=function(e,t){void 0===t&&(t=null);var i=new this.sdk.VODStreamRequest(e);this.enableOmFullAccess(i),this.isLiveStream=!1,this.mgr.requestStream(i,t)},i.prototype.requestLiveStream=function(e,t){void 0===t&&(t=null);var i=new this.sdk.LiveStreamRequest(e);this.enableOmFullAccess(i),this.isLiveStream=!0,this.mgr.requestStream(i,t)},i.prototype.enableOmFullAccess=function(e){var t;!this.adService.usesDaiApi&&this.omEnabled&&(e.omidAccessModeRules={},e.omidAccessModeRules[null===(t=this.sdk.OmidAccessMode)||void 0===t?void 0:t.FULL]=[new RegExp(".*")])},i.prototype.hStreamEvent=function(e){if(this.sdk&&this.adService&&!this.isIgnoringEvents){var t=e.type,r=this.sdk.StreamEvent.Type,n=i.event;switch(t){case r.LOADED:this.handleStreamLoaded(e);break;case r.STREAM_INITIALIZED:var a=e.getStreamData();this.streamInfo.streamId=a.streamId,this.emit(n.STREAM_ID_AVAILABLE,{streamId:a.streamId});break;case r.AD_PERIOD_STARTED:break;case r.CUEPOINTS_CHANGED:var o=e.getStreamData().cuepoints;this.rawScheduleReleased||(this.emit(n.RAW_AD_SCHEDULE_AVAILABLE,{schedule:this.getRawSchedule(o)}),this.rawScheduleReleased=!0),this.updateBreakSchedule(o),isNaN(this.contentDuration)||this.cuesReleased?this.pendingCues=o:this.releaseCues(o);break;case r.AD_BREAK_STARTED:this.adBreakInProgress=!0,this.breakMetadataPending=!0,this.emit(n.AD_BREAK_START);break;case r.STARTED:var s=e.getAd();this.handleAdStart(s,r.STARTED);break;case r.AD_PROGRESS:if(this.adBreakInProgress){var l=e.getStreamData().adProgressData;this.emit(n.AD_PROGRESS,l)}break;case r.FIRST_QUARTILE:this.adBreakInProgress&&(this.trackQuartile(r.FIRST_QUARTILE),this.emit(n.AD_FIRST_QUARTILE));break;case r.MIDPOINT:this.adBreakInProgress&&(this.trackQuartile(r.MIDPOINT),this.emit(n.AD_MIDPOINT));break;case r.THIRD_QUARTILE:this.adBreakInProgress&&(this.trackQuartile(r.THIRD_QUARTILE),this.emit(n.AD_THIRD_QUARTILE));break;case r.COMPLETE:this.adBreakInProgress&&this.handleAdComplete(r.COMPLETE);break;case r.AD_BREAK_ENDED:case r.AD_PERIOD_ENDED:this.adBreakInProgress&&this.emit(n.AD_BREAK_COMPLETE),this.updateUnlockedBreaks(),this.adBreakInProgress=!1;break;case r.CLICK:this.adBreakInProgress&&this.emit(n.AD_CLICK);break;case r.ERROR:this.adBreakInProgress=!1,this.emitError(e.getStreamData().errorMessage,e.data?e.data.code:null)}}},i.prototype.handleAdComplete=function(e){this.adService.usesDaiApi||(this.adService.trackAdEvent({context:this.adService.getAdContext(),eventName:e,volume:this.adService.videoInterface.volume}),this.adService.untrackAd()),this.emit(i.event.AD_COMPLETE)},i.prototype.trackQuartile=function(e){!this.adService.usesDaiApi&&this.adService.trackAdEvent({context:this.adService.getAdContext(),eventName:e,volume:this.adService.videoInterface.volume})},i.prototype.handleAdStart=function(e,r){var n=this.adService.assembleAdBreakInfo(e,t.AdTechnology.SSAI),a=this.adService.assembleAdInfo(e,{mediaUrl:this.mediaUrl}),o=i.event;!this.breakMetadataPending&&this.adBreakInProgress||(this.breakMetadataPending=!1,this.adBreakInProgress=!0,this.isLiveStream&&(n.adBreakPosition=++this.breakCount,n.adBreakType=t.AdBreakType.MID),this.emit(o.AD_BREAK_METADATA,n)),this.adService&&(this.adService.usesDaiApi||(this.adService.trackAd(a),this.adService.trackAdEvent({context:this.adService.getAdContext(),eventName:r,volume:this.adService.videoInterface.volume})),this.emit(o.AD_START,a))},i.prototype.handleStreamLoaded=function(e){var t=e.getStreamData(),r=t.url;C.isString(r)&&""!=r?(this.mediaUrl=r,this.streamInfo.streamId=t.streamId,this.emit(i.event.STREAM_ID_AVAILABLE,{streamId:t.streamId}),this.emit(i.event.MEDIA_URL_AVAILABLE,{mediaUrl:r})):this.emitError(ct.messages.DAI_MISSING_ASSET_URL)},i.prototype.updateUnlockedBreaks=function(){var e,t=null===(e=this.adBreakSchedule)||void 0===e?void 0:e.adBreaks;if(t)for(var i in t)"pre"===i?this.updateUnlockedScheduleItems([t[i]]):this.updateUnlockedScheduleItems(t[i])},i.prototype.updateUnlockedScheduleItems=function(e){for(var t=e?e.length:0;t--;){var i=e[t];i&&i.hasPlayed&&-1===this.unlockedBreaks.indexOf(i.startTime)&&this.addUnlockedBreak(i.startTime)}},i.prototype.getRawSchedule=function(e){for(var i=[],r=0,n=e.length;r<n;r++){var a=e[r];i[r]={adTechnology:t.AdTechnology.SSAI,start:this.mgr.contentTimeForStreamTime(a.start),streamTimeStart:a.start,end:this.mgr.contentTimeForStreamTime(a.end),streamTimeEnd:a.end,played:!1}}return i},i.prototype.releaseCues=function(e){for(var t=[],r=e||this.cuePoints,n=r.length;n--;)t.unshift(this.contentTimeForStreamTime(r[n].start));this.cuesReleased=!0,this.emit(i.event.AD_CUEPOINTS_AVAILABLE,{cuepoints:t})},i.prototype.emitError=function(e,r){this.emit(i.event.AD_ERROR,{message:e,code:r||t.ErrorCode.DAI_DATA_ERROR,streamId:this.streamInfo.streamId||null})},i.prototype.listenToStreamManager=function(e){var t,i=e?"addEventListener":"removeEventListener",r=this.getEventInterests();if(this.sdk)for(var n=0,a=r.length;n<a;n++)t=this.sdk.StreamEvent.Type[r[n]],this.mgr[i](t,this.streamEventHandler)},i.prototype.getEventInterests=function(){return["LOADED","STREAM_INITIALIZED","CUEPOINTS_CHANGED","AD_BREAK_STARTED","AD_BREAK_ENDED","STARTED","COMPLETE","AD_PERIOD_STARTED","AD_PERIOD_ENDED","AD_PROGRESS","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","CLICK","ERROR"]},i.prototype.updateBreakSchedule=function(e){var i=e&&e.length;if(this.cuePoints=[],i&&this.contentDuration){for(var r=void 0,n=0,a=e.length;n<a;n++)r=e[n],this.cuePoints.push({adTechnology:t.AdTechnology.SSAI,start:r.start,played:r.played,end:r.end});!this.adBreakSchedule&&(this.adBreakSchedule=new Rn(null,e,this.contentDuration))}i&&this.adBreakSchedule&&this.adBreakSchedule.updateBreaks(e)},i.prototype.initialize=function(){this.listenToStreamManager(!0)},i.event={MEDIA_URL_AVAILABLE:"mediaUrlAvailable",STREAM_ID_AVAILABLE:"streamIdAvailable",AD_PERIOD_STARTED:"adPeriodStarted",AD_CUEPOINTS_AVAILABLE:"adCuepointsAvailable",AD_BREAK_START:"adBreakStarted",AD_BREAK_METADATA:"adBreakMetadata",AD_BREAK_COMPLETE:"adBreakEnded",AD_ERROR:"adError",AD_START:"adStarted",AD_COMPLETE:"adComplete",AD_PROGRESS:"adProgress",AD_CLICK:"adClick",AD_FIRST_QUARTILE:"firstQuartile",AD_MIDPOINT:"midpoint",AD_THIRD_QUARTILE:"thirdQuartile",RAW_AD_SCHEDULE_AVAILABLE:"rawAdScheduleAvailable"},i}(_),Nn={cmsid:2289,output:"xml_vmap1",unviewed_position_start:1,correlator:"1",gdfp_req:1,env:"vp"},On=function(){function e(){}return e.prototype.assembleStdParams=function(t,i){var r,n=Nn,a=t.ad.adTagParameters,o=t.ad.viewabilityTracking,s={};for(r in n)s[r]=a[r]||n[r];for(r in a)"cust_params"===r||C.isEmpty(a[r])||(s[r]=a[r]);for(r in o)s[r]=o[r];if(s.sz===e.SZ_DEFAULT){var l=this.getSzStringForPlayback(i.mutedPlayback);l&&(s.sz=l)}return s},e.prototype.getSzStringForPlayback=function(t){return t?e.SZ_MUTED:null},e.prototype.substituteStringForMutedPlayback=function(t){var i=this.getSzStringForPlayback(!0);if(i){var r=new RegExp("sz=".concat(e.SZ_DEFAULT),"g");return t.replace(r,"sz=".concat(i))}return t},e.prototype.queryStrFromObj=function(e,t){return We.encode(e)},e.prototype.objFromQueryStr=function(e){return We.decode(e)},e.SZ_DEFAULT="640x480",e.SZ_MUTED="640x483",e}(),Ln=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.assembleStreamRequest=function(e,i,r,n){void 0===r&&(r=!1);var a=this.assembleStdParams(e,i),o=e.ad.dai;o.filterOutPremiumAudioCodecs&&(a["dai-excl"]=t.FILTER_OUT_PREMIUM_AUDIO);var s=C.assign({},a);for(var l in s.cust_params=this.queryStrFromObj(e.ad.adTagParameters.cust_params,[]),delete s.output,n)l.indexOf("imafw_")<0&&(s[l]=n[l]);var c={apiKey:o.apiKey,authToken:o.authToken||null,assetKey:o.assetKey||null,streamActivityMonitorId:o.streamActivityMonitorId||null,adTagParameters:s,videoId:o.daiVideoId||null,contentSourceId:o.contentSourceId||null};return C.isString(o.format)&&(c.format=o.format),c},t.FILTER_OUT_PREMIUM_AUDIO="codec:ac-3,codec:ec-3",t}(On),Dn=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.contentSegmentStarted=!1,r.contentStartReleased=!1,r.pendingSeekTime=null,r.contentCompleteReleased=!1,r.presoComplete=!1,r.rawAdSchedule=null,Ni.warn("The internal ad service is deprecated. Please use the @cbsinteractive/avia-js-gam plugin. Access to this property will be completely removed July 1st, 2022"),r}return s(i,e),i.prototype.onRemove=function(){var t;this.listenToStreamManager(!1),this.adService&&this.adService.reset(),null===(t=this.streamManager)||void 0===t||t.destroy(),this.streamManager=null,this.adDataProxy=null,e.prototype.onRemove.call(this)},i.prototype.closeAds=function(){var e,t;this.listenToStreamManager(!1),null===(e=this.domProxy)||void 0===e||e.showAdContainer(!1),null===(t=this.adService)||void 0===t||t.reset()},i.prototype.start=function(){var e,t,i=this.presoModel;this.uiMediator&&(this.uiMediator.setMuteState(i.isMuted),!0===(null===(t=null===(e=this.resourceProxy)||void 0===e?void 0:e.ad)||void 0===t?void 0:t.suppressAdUi)&&(this.uiMediator.adViewSuppressed=!0)),this.adService.setMuted(i.isMuteAtPlayStart&&!i.userHasUnmuted),this.presoModel.usesSsai=!0,this.initStreamManager()},i.prototype.getAdBreakTimes=function(){return this.streamManager?this.streamManager.getCuePointsInContentTime():null},i.prototype.initStreamManager=function(){var e=this,t=this.assembleStreamRequest(),i=this.getModel(yi.PlayerOptions),r=!C.isEmpty(t.assetKey);this.streamManager=new kn(this.adService,this.playerOptions.enableOm),this.streamEventHandler=function(t){e.hStreamEvent(t)},this.listenToStreamManager(!0),r?this.streamManager.requestLiveStream(t,i.networkErrorRecovery):this.streamManager.requestVODStream(t,i.networkErrorRecovery)},i.prototype.assembleStreamRequest=function(){var e,t,i,r,n,a=this.facade.retrieveProxy(zt.ResourceProxy).resource,o={buildEnv:it.env,platform:this.adService.getGamPlatformString(),mutedPlayback:this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted},s=!C.isEmpty((null===(e=a.ad.dai)||void 0===e?void 0:e.daiVideoId)||(null===(t=a.ad.dai)||void 0===t?void 0:t.assetKey)),l=((null===(i=a.ad.ssai)||void 0===i?void 0:i.videoId)||(null===(r=a.ad.ssai)||void 0===r?void 0:r.assetKey))&&!C.isEmpty(null===(n=a.ad.ssai)||void 0===n?void 0:n.adParameters);if(s)return(new Ln).assembleStreamRequest(a,o,!1,{playername_version:this.getPlayerVersionInfo()});if(l){var c=this.facade.retrieveService(ze.System);return function(e,t,i,r){var n=t.muted;void 0===i&&(i=!1);var a=e.adParameters,o=!1,s=!1;for(var l in e.filterOutPremiumAudioCodecs&&(a["dai-excl"]="codec:ac-3,codec:ec-3"),a)"sz"==l&&n&&a[l]==An&&(a[l]=En),"[RANDOM]"==a[l]&&(a[l]=Cn()),"imafw_host"==l&&(o=!0),l==Sn&&(s=!0);for(var c in i||(o||(a.imafw_host=_n()),s||(a[Sn]=Pn())),r)c.indexOf("imafw_")>=0&&(a[c]=r[c]);var u={apiKey:e.apiKey,authToken:e.authToken||null,assetKey:e.assetKey||null,adTagParameters:a,videoId:e.videoId||null,contentSourceId:e.contentSourceId||null};return Qe.isString(e.format)&&(u.format=e.format),u}(a.ad.ssai,{muted:this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted,autoplay:this.presoModel.isAutoplay},!(c.isDesktop||c.isMobile),{imafw_playername_version:this.getPlayerVersionInfo()})}return null},i.prototype.mute=function(e){this.muteVideo(e),this.uiMediator&&this.uiMediator.setMuteState(e),this.adService.setMuted(e)},i.prototype.seek=function(e){if(!this.isAdPlaying()){var t=this.streamManager.getPermittedSeekTime(e),i=t===e?this.streamManager.streamTimeForContentTime(t):t;t!==e&&(this.notify(vi.SEEK_REDIRECT_START,{requestedSeekTime:e,actualSeekTime:t}),this.pendingSeekTime=this.streamManager.streamTimeForContentTime(e)),this.seekVideo(i)}},i.prototype.respondToId3Data=function(i){var r=C.isEmpty(i.info)?C.isEmpty(i.data)?null:i.data:i.info;!r||"google_dai"!==i.id&&i.id!=kr.GOOGLE_DAI?e.prototype.respondToId3Data.call(this,i):(this.log(t.LogLevel.INFO,"metadata received - id: ".concat(i.id," msg ").concat(r)),this.streamManager.onTimedMetadata({TXXX:r}))},i.prototype.respondToVideoPlaying=function(){this.presoModel.started||(this.presoModel.started=!0,this.uiMediator&&(this.uiMediator&&this.uiMediator.displayPoster(!1),this.uiMediator&&this.uiMediator.hideClickCatcher(!0),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&this.uiMediator.showUnmutePrompt(),this.setTransportType()),this.notify(vi.ENABLE_UI)),e.prototype.respondToVideoPlaying.call(this),this.isAdPlaying()?this.notify(vi.AD_PLAYING):this.contentSegmentStarted&&(this.respondToPlaybackStateChange(t.PlaybackState.PLAYING),this.setPlayingState(),this.notify(vi.CONTENT_PLAYING))},i.prototype.respondToVideoPaused=function(){e.prototype.respondToVideoPaused.call(this),this.isAdPlaying()?this.notify(vi.AD_PAUSED):(this.respondToPlaybackStateChange(t.PlaybackState.PAUSED),this.setPausedState(),this.notify(vi.CONTENT_PAUSED))},i.prototype.respondToVideoTimeUpdate=function(i){if(!this.contentComplete){var r=this.contentPlaybackStateProxy.model;this.adService.setCurrentTime(i),this.streamManager.ignoreAdEvents(!1),this.presoModel.streamTime=i,r.time=this.streamManager.contentTimeForStreamTime(i);var n=this.streamManager.checkForAdPeriod(i);this.isAdPlaying()||n||(i>.75&&!this.contentSegmentStarted&&(this.contentSegmentStarted=!0,this.contentPlaybackStateProxy.model.started=!0,this.domProxy&&this.domProxy.showAdContainer(!1),this.setPlayingState(),this.setTransportType(),!this.contentStartReleased&&this.signalContentStart(),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator&&(this.uiMediator.setFullScreenAccessRestricted(!1),this.uiMediator.enableFullscreen()),this.notify(vi.CONTENT_SEGMENT_START)),this.contentSegmentStarted&&e.prototype.respondToVideoTimeUpdate.call(this,i),r.streamType!==t.StreamType.LIVE&&r.time>=r.duration&&!this.contentCompleteReleased&&this.signalContentComplete())}},i.prototype.respondToVideoEnd=function(){this.contentComplete=!0,this.contentCompleteReleased||this.signalContentComplete(),this.presoComplete=!0,e.prototype.respondToVideoEnd.call(this)},i.prototype.respondToDurationChange=function(e){var t=this.streamManager.contentTimeForStreamTime(e);this.contentPlaybackStateProxy.model.duration=t,this.presoModel.streamDuration=e,this.adService.setDuration(e),!this.contentDurationReleased&&t&&!isNaN(t)&&t>0&&this.releaseContentDuration(t),this.streamManager.streamDuration=e},i.prototype.isContentComplete=function(){return this.presoComplete},i.prototype.signalContentStart=function(){this.contentStartReleased=!0,this.notify(vi.CONTENT_START)},i.prototype.signalContentComplete=function(){this.contentCompleteReleased=!0,this.notify(vi.CONTENT_SEGMENT_END),this.notify(vi.CONTENT_COMPLETE)},Object.defineProperty(i.prototype,"adService",{get:function(){return this.facade.retrieveService(ze.DaiAd)},enumerable:!1,configurable:!0}),i.prototype.handleMediaUrlAvailable=function(e){var t=this.resourceProxy.playback.startTime,i=this.resourceProxy.ad.showPrerollOnNonZeroStart;if(!isNaN(t)&&t>0){var r=this.rawAdSchedule.map(function(e){return e.streamTimeStart}),n=this.adjustStartTimeForAdBreakProximity(t,this.rawAdSchedule),a=this.streamManager.streamTimeForContentTime(n);this.checkForBreaksToUnlock(r),i?(this.resourceProxy.playback.startTime=NaN,this.pendingSeekTime=a):("dash"==this.resourceProxy.ad.dai.format&&this.streamManager.ignoreAdEvents(!0),this.resourceProxy.playback.startTime=a)}this.resourceProxy.location.mediaUrl=e,this.adService.initViewabilityTracking(),this.isClickToPlay?this.setForClickToPlay():(this.notify(vi.VIDEO_LOAD_START),this.prepareForPlayback())},i.prototype.checkForBreaksToUnlock=function(e){if(e&&e.length){var t=this.resourceProxy.playback.startTime,i=this.resourceProxy.ad.showPrerollOnNonZeroStart,r=this.streamManager.streamTimeForContentTime(t),n=[];if(r>0){!0!==i&&n.push(0);for(var a=e.length;a--;)if(a>0&&r>e[a]){n.push(e[a]);break}this.streamManager&&this.streamManager.setUnlockedBreaks(n)}}},i.prototype.hStreamEvent=function(e){var i=kn.event;switch(e.type){case i.RAW_AD_SCHEDULE_AVAILABLE:this.rawAdSchedule=e.data.schedule;break;case i.STREAM_ID_AVAILABLE:this.presoModel.streamId=this.streamManager.streamId,this.notify(vi.STREAM_ID_AVAILABLE,{streamId:this.streamManager.streamId});break;case i.MEDIA_URL_AVAILABLE:this.handleMediaUrlAvailable(e.data.mediaUrl);break;case i.AD_CUEPOINTS_AVAILABLE:this.notify(vi.AD_CUEPOINTS_AVAILABLE,e.data);break;case i.AD_PERIOD_STARTED:this.seekVideo(e.data.streamResumeTime);break;case i.AD_BREAK_START:this.contentSegmentStarted&&(this.contentSegmentStarted=!1,this.notify(vi.CONTENT_SEGMENT_END)),this.domProxy&&this.domProxy.showAdContainer(!0),this.presoModel.isCurrentVideoAd=!0,this.uiMediator&&this.uiMediator.hideClickCatcher(!0),this.notify(vi.AD_BREAK_START);break;case i.AD_BREAK_METADATA:var r=e.data;this.adDataProxy.breakInfo=r,this.notify(vi.AD_BREAK_METADATA,{adBreakInfo:r});break;case i.AD_START:var n=e.data;this.adDataProxy.adInfo=n,this.notify(vi.AD_START,{adInfo:n}),this.contentPlaybackStateProxy.model.state===t.PlaybackState.PAUSED&&this.notify(vi.AD_PAUSED);break;case i.AD_PROGRESS:var a=this.contentPlaybackStateProxy.model;if(a.state===t.PlaybackState.PLAYING){var o={currentTime:e.data.currentTime,duration:e.data.duration,streamTime:this.presoModel.streamTime,streamDuration:this.presoModel.streamDuration};a.streamType===t.StreamType.LIVE&&(o.elapsedTimeMs=this.updateTimeSpent().elapsedTime),this.notify(vi.AD_TIME_UPDATE,o)}break;case i.AD_FIRST_QUARTILE:this.notify(vi.AD_FIRST_QUARTILE);break;case i.AD_MIDPOINT:this.notify(vi.AD_MIDPOINT);break;case i.AD_THIRD_QUARTILE:this.notify(vi.AD_THIRD_QUARTILE);break;case i.AD_COMPLETE:this.notify(vi.AD_COMPLETE);break;case i.AD_BREAK_COMPLETE:this.domProxy&&this.domProxy.showAdContainer(!1),this.presoModel.isCurrentVideoAd=!1,this.notify(vi.AD_BREAK_COMPLETE),this.pendingSeekTime&&(this.contentPlaybackStateProxy.model.started&&this.notify(vi.SEEK_REDIRECT_COMPLETE),this.seekVideo(this.pendingSeekTime),this.pendingSeekTime=null);break;case i.AD_CLICK:this.pause();break;case i.AD_ERROR:e.data.fatal=!0,this.notify(vi.RESOURCE_ERROR,e.data)}},i.prototype.listenToStreamManager=function(e){if(this.streamManager){var t=kn.event,i=e?"on":"off";for(var r in t)this.streamManager[i](t[r],this.streamEventHandler)}},i.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.domProxy&&this.domProxy.showAdContainer(!1),this.adDataProxy=new gn(zt.AdDataProxy,null),this.facade.registerProxy(this.adDataProxy)},i}(mn);!function(e){e.DISABLED="DISABLED",e.ENABLED="ENABLED",e.INSECURE="INSECURE"}(In||(In={}));var Mn,wn=function(e){function t(t){var i=e.call(this,t)||this;return i.eMap={errorHandler:null,adsMgrLoadedHandler:null},i.initialized=!1,i.omEnabled=!0,i.adService=i.opts.adService,i.sdk=i.adService.sdk,i.omEnabled=i.opts.enableOm,i.eMap.errorHandler=function(e){return i.hError(e)},i.eMap.adsMgrLoadedHandler=function(e){return i.hAdsMgrLoaded(e)},i}return s(t,e),t.prototype.destroy=function(){this.adsLoader&&(this.adsLoader.removeEventListener(this.sdk.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.adsLoader.removeEventListener(this.sdk.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler),this.adsLoader.destroy()),this.adsLoader=null,this.adService=null,this.sdk=null,e.prototype.destroy.call(this)},t.prototype.initialize=function(){var e=this.opts,t=this.sdk;if(!t||!t.AdsLoader)return!1;if(this.initialized)return!0;var i=new t.AdDisplayContainer(e.adContainer,e.video,e.adClickEl);i.initialize(),this.adsLoader=new t.AdsLoader(i);var r=this.adsLoader.getSettings();return this.populateSdkSettings(r),this.adsLoader.addEventListener(t.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler),this.adsLoader.addEventListener(t.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.initialized=!0,!0},t.prototype.requestAds=function(e,t){var i,r=this.sdk;this.omEnabled&&(e.omidAccessModeRules={},e.omidAccessModeRules[null===(i=r.OmidAccessMode)||void 0===i?void 0:i.FULL]=[new RegExp(".*")]),this.adsLoader&&this.adsLoader.requestAds(e)},t.prototype.getSdkVersion=function(){return this.adsLoader.getVersion()},t.prototype.contentComplete=function(){this.adsLoader&&this.adsLoader.contentComplete()},t.prototype.getSettings=function(){return this.adsLoader?this.adsLoader.getSettings():null},t.prototype.hAdsMgrLoaded=function(e){this.emit(t.event.ADS_MANAGER_LOADED,e)},t.prototype.hError=function(e){var i=this.parseAdErrorEvent(e);this.emit(t.event.ADS_LOADER_ERROR,i)},t.prototype.parseAdErrorEvent=function(e){return this.adService.parseAdError(e)},t.prototype.populateSdkSettings=function(e){var t=this.opts.sdkSettings,i=this.sdk.ImaSdkSettings.VpaidMode[t.vpaidMode];e.setVpaidMode(i),e.setDisableCustomPlaybackForIOS10Plus(t.disableCustomPlaybackForIOS10Plus),e.setPlayerType(t.playerType),e.setPlayerVersion(t.playerVersion)},t.event={ADS_MANAGER_LOADED:"adsManagerLoaded",ADS_LOADER_ERROR:"adsLoaderError"},t}(_),xn=function(e){function i(i){return e.call(this,i,t.AdContext.IMA)||this}return s(i,e),i.prototype.destroy=function(){this.pAdsLoader&&this.pAdsLoader.destroy(),this.pAdsLoader=null,this.pAdsLoaderOptions=null,e.prototype.destroy.call(this)},Object.defineProperty(i.prototype,"sdk",{get:function(){var e=this.getService(ze.System).global;return e&&e.google&&e.google.ima||null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sdkSettings",{get:function(){return{vpaidMode:In.INSECURE,disableCustomPlaybackForIOS10Plus:!1,playerType:it.playerName,playerVersion:it.playerVersion}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"defaultRenderingSettings",{get:function(){return{bitrate:900,enablePreloading:!1,loadVideoTimeout:-1,playAdsAfterTime:void 0,restoreCustomPlaybackStateOnAdBreakComplete:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adsLoaderOptions",{set:function(e){this.pAdsLoaderOptions=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adsLoader",{get:function(){return this.pAdsLoader},enumerable:!1,configurable:!0}),i.prototype.getSdkVersion=function(){var e;return null===(e=this.adsLoader)||void 0===e?void 0:e.getSdkVersion()},i.prototype.createAdsLoader=function(){var e;this.pAdsLoader||(this.pAdsLoaderOptions.enableOm=!0===(null===(e=this.getModel(yi.PlayerOptions))||void 0===e?void 0:e.enableOm),this.pAdsLoader=new wn(this.pAdsLoaderOptions))},i.prototype.initializeAdsLoader=function(){return this.createViewabilityTracker(),this.pAdsLoader.initialize()},i.prototype.parseAdError=function(e){var t=e.getError(),i=e.getUserRequestContext(),r=t.getInnerError();return{type:this.getAdErrorType(t),errorCode:t.getErrorCode(),vastErrorCode:t.getVastErrorCode(),message:t.getMessage(),innerErrorMessage:C.isString(r)?r:null,sdkVersion:this.sdk.VERSION,requestContext:i||null}},i.prototype.getAdErrorType=function(e){return e.getType()==this.sdk.AdError.Type.AD_LOAD?"adLoad":"adPlay"},i}(Qr);!function(e){e.DEV="dev",e.STAGE="stage",e.PROD="prod"}(Mn||(Mn={}));var Un,Bn=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.assembleAdCall=function(e,i,r){var n=t.adCallTemplate,a=this.assembleStdParams(e,i),o=C.assign({},a),s=this.queryStrFromObj(e.ad.adTagParameters.cust_params);for(var l in o.cust_params=s,i.buildEnv===Mn.DEV&&(o.pp="vpaid_js"),r)l.indexOf("imafw")<0&&(o[l]=r[l]);return n+this.queryStrFromObj(o,["description_url","url","iu","partner","cust_params","playername_version","sdkv"])},t.adCallTemplate="http://pubads.g.doubleclick.net/gampad/ads?",t}(On),Vn=function(e){function i(t){var i=e.call(this,t)||this;i.pIsFullscreen=!1,i.inProgressAd=null,i.inProgressBreakId=null,i.isPaused=!1,i.breakStartReleased=!1,i.pendingSeekedBreakId=null,i.markedAsPlayed=null,i.logger=null,i.adProgressData={lastRecordedTime:0,addTzero:null,pollTzero:null,timeoutHandle:null,stallThreshold:5,adId:null,duration:null,pollInterval:2e3},i.adCallUrl=t.adCallUrl,i.presentationContainer=t.presentationContainer,i.adService=t.adService,i.sdk=i.adService.sdk,i.adsLoader=i.adService.adsLoader,i.adProgressData.stallThreshold=t.stallThreshold||i.adProgressData.stallThreshold,i.logger=t.logger,delete i.opts.presentationContainer,i.adsLoaderEventMap={};var r=wn.event;return i.adsLoaderEventMap[r.ADS_LOADER_ERROR]=function(e){return i.hAdsLoaderError(e)},i.adsLoaderEventMap[r.ADS_MANAGER_LOADED]=function(e){return i.hAdsMgrLoaded(e)},i.adEventHandler=function(e){return i.hAdEvent(e)},i.errorEventHandler=function(e){return i.hAdsManagerAdError(e)},i.initialize(),i}return s(i,e),i.prototype.destroy=function(){var t,i;clearTimeout(this.adProgressData.timeoutHandle),this.listenToAdsLoader(!1),this.listenToAdsManager(!1),null===(t=this.adsManager)||void 0===t||t.destroy(),null===(i=this.adsLoader)||void 0===i||i.contentComplete(),this.adBreakSchedule&&this.adBreakSchedule.destroy(),this.presentationContainer=null,this.adsManager=null,this.sdk=null,this.adsLoader=null,this.adEventHandler=null,this.adBreakSchedule=null,this.renderingSettings=null,this.logger=null,e.prototype.destroy.call(this)},Object.defineProperty(i.prototype,"adBreaks",{get:function(){return this.adBreakSchedule?this.adBreakSchedule.adBreaks:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentBitrate",{set:function(e){this.renderingSettings&&this.adsManager&&(this.renderingSettings.bitrate=e,this.adsManager.updateAdsRenderingSettings(this.renderingSettings))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"volume",{set:function(e){this.adsManager&&this.adsManager.setVolume(C.clampValue(e,0,1))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isFullscreen",{set:function(e){this.pIsFullscreen=e},enumerable:!1,configurable:!0}),i.prototype.pauseAd=function(){var e;clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!0,null===(e=this.adsManager)||void 0===e||e.pause()},i.prototype.resumeAd=function(){var e;clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!1,null===(e=this.adsManager)||void 0===e||e.resume()},i.prototype.mute=function(){this.volume=0},i.prototype.unmute=function(e){this.volume=e},i.prototype.hasPostRoll=function(){var e;return!!(null===(e=this.adBreakSchedule)||void 0===e?void 0:e.hasPostRoll())},i.prototype.hasMidRolls=function(){var e;return!!(null===(e=this.adBreakSchedule)||void 0===e?void 0:e.hasMidRolls())},i.prototype.startAds=function(){var e=this.getRect(),r=this.pIsFullscreen?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL;try{this.adsManager.init(e.width,e.height,r),this.adsManager.start()}catch(e){this.log("AdsManager init failure."),this.emit(i.event.AD_INIT_ERROR,{code:t.ErrorCode.IMA_INIT_FAILURE,message:e.getMessage?e.getMessage():ct.messages.UNSPECIFIED_ERROR})}},i.prototype.markAsPlayed=function(e){this.markedAsPlayed?this.markedAsPlayed=this.markedAsPlayed.concat(e):this.markedAsPlayed=e},i.prototype.getBreakForSeekTime=function(e){if(this.adBreakSchedule&&this.adBreakSchedule.hasMidRolls()){var t=this.adBreakSchedule.getBreakForContentSeekTime(e);if(t&&(!this.markedAsPlayed||-1===this.markedAsPlayed.indexOf(t.breakId)))return this.pendingSeekedBreakId=t.breakId,t}return null},i.prototype.cancelPendingBreak=function(e){this.pendingSeekedBreakId===e&&(this.pendingSeekedBreakId=null)},i.prototype.isUsingContentVideoElement=function(){return this.adsManager&&this.adsManager.isCustomPlaybackUsed()},i.prototype.isUsingCustomClickTracker=function(){return!(!this.adsManager||!this.adsManager.isCustomClickTrackingUsed())},i.prototype.setContentComplete=function(){var e;null===(e=this.adsLoader)||void 0===e||e.contentComplete()},i.prototype.updateSize=function(e){var t=this.getRect();if(this.adsManager){var i=e?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL;this.adsManager.resize(t.width,t.height,i)}},i.prototype.hAdsManagerAdError=function(e){var r=this.adService.parseAdError(e);this.log("AdsManager ERROR",r),this.emit(i.event.AD_ERROR,{code:t.ErrorCode.IMA_AD_ERROR,message:r&&r.message||ct.messages.UNSPECIFIED_ERROR,data:r})},i.prototype.hAdEvent=function(e){var t=this,r=this.sdk.AdEvent.Type,n=e.getAd(),a=e.getAdData(),o=i.event;clearTimeout(this.adProgressData.timeoutHandle);var s=!1!==this.opts.enableStalledAdCheck;switch(e.type){case r.CONTENT_PAUSE_REQUESTED:s=!1,this.pendingSeekedBreakId=null,this.emit(o.CONTENT_PAUSE_REQUESTED);break;case r.CONTENT_RESUME_REQUESTED:this.log("IMA SDK requested content resume."),s=!1,this.pendingSeekedBreakId=null,this.processBreakComplete();break;case r.LOADED:s=!1,this.processAdLoadOrStart(n,a,r.LOADED);break;case r.STARTED:s=!1,this.inProgressBreakId&&!this.breakStartReleased&&(this.breakStartReleased=!0,this.emit(i.event.AD_BREAK_START,{adBreakId:this.inProgressBreakId})),this.processAdLoadOrStart(n,a,r.STARTED),this.checkForCustomClickTracking(),this.beginPollForProgress(this.inProgressAd);break;case r.AD_PROGRESS:this.processProgress();break;case r.FIRST_QUARTILE:this.processQuartile(r.FIRST_QUARTILE,o.AD_FIRST_QUARTILE);break;case r.MIDPOINT:this.processQuartile(r.MIDPOINT,o.AD_MIDPOINT);break;case r.THIRD_QUARTILE:this.processQuartile(r.THIRD_QUARTILE,o.AD_THIRD_QUARTILE);break;case r.COMPLETE:s=!1,this.processAdComplete(r.COMPLETE);break;case r.ALL_ADS_COMPLETED:s=!1,this.processAllComplete();break;case r.AD_BUFFERING:this.emit(o.AD_BUFFERING);break;case r.CLICK:s=!1,this.adsManager.pause(),this.emit(o.AD_CLICK,{ad:this.inProgressAd});break;case r.PAUSED:s=!1,this.isPaused=!0,this.emit(o.AD_PAUSED);break;case r.RESUMED:this.isPaused=!1,this.emit(o.AD_RESUMED);break;case r.SKIPPED:s=!1,this.processSkip(r.SKIPPED);break;case r.LOG:s=!1,this.processLogEvent(a);break;case r.USER_CLOSE:s=!1,this.killAd();break;case r.VOLUME_CHANGED:case r.VOLUME_MUTED:this.processVolumeChange(e.type)}!this.isPaused&&s&&(this.adProgressData.timeoutHandle=setTimeout(function(){return t.checkAdProgress()},this.adProgressData.pollInterval))},i.prototype.checkForCustomClickTracking=function(){this.isUsingCustomClickTracker()&&this.emit(i.event.AD_CLICK_ELEMENT_VISIBILITY_REQUESTED)},i.prototype.beginPollForProgress=function(e){var t=this;if(!0===this.opts.enableStalledAdCheck){var i=this.adProgressData;clearTimeout(i.timeoutHandle),i.duration=e.adDuration,i.adId=e.adId,i.pollTzero=Date.now(),i.timeoutHandle=setTimeout(function(){return t.checkAdProgress()},i.pollInterval)}},i.prototype.checkAdProgress=function(){var e=this,r=this.adProgressData,n=r.duration-this.adsManager.getRemainingTime(),a=Date.now();if(clearTimeout(r.timeoutHandle),!this.isPaused)if(null===r.pollTzero&&(r.pollTzero=Date.now()),n>r.lastRecordedTime)r.lastRecordedTime=n,r.pollTzero=a,r.timeoutHandle=setTimeout(function(){return e.checkAdProgress()},r.pollInterval);else if(.001*(a-r.pollTzero)>r.stallThreshold){var o=this.inProgressAd?C.assign({},this.inProgressAd):null;this.log("Ad stalled; discarding break"),this.emit(i.event.AD_STALLED,{code:t.ErrorCode.AD_STALLED,message:ct.messages.AD_STALLED,data:{adInfo:o}}),this.killAd(),this.emit(i.event.AD_BREAK_DISCARDED),this.adsManager&&this.adsManager.discardAdBreak(),this.processBreakComplete()}},i.prototype.processAdLoadOrStart=function(e,r,n){var a=n===this.sdk.AdEvent.Type.STARTED,o=this.adService.assembleAdBreakInfo(e,t.AdTechnology.CSAI),s=this.adService.assembleAdInfo(e,r,a),l=o.adBreakPosition,c=0===l?"pre_0":-1===l?"post_0":"mid_"+l;if(this.markedAsPlayed&&this.markedAsPlayed.indexOf(c)>=0)return this.adBreakSchedule.markPlayed(c),void this.adsManager.discardAdBreak();a?(this.inProgressAd=s,this.adService.trackAd(s),this.adService.trackAdEvent({context:t.AdContext.IMA,eventName:n,volume:this.adsManager.getVolume()}),this.emit(i.event.AD_BREAK_METADATA,o),this.emit(i.event.AD_START,s)):(this.adBreakSchedule.hasPlayed(c)||(this.adBreakSchedule.markPlayed(c),this.inProgressBreakId=c),this.emitAdLoaded(s))},i.prototype.emitAdLoaded=function(e){this.emit(i.event.AD_LOADED,e)},i.prototype.processProgress=function(){if(this.inProgressAd){var e=this.inProgressAd.adDuration,t=this.adsManager&&this.adsManager.getRemainingTime();isNaN(e)||isNaN(t)||t<0||this.emit(i.event.AD_PROGRESS,{currentTime:Math.min(e,Math.max(0,e-t)),duration:e})}},i.prototype.processQuartile=function(e,i){this.emit(i,{ad:this.inProgressAd}),this.adService.trackAdEvent({context:t.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()})},i.prototype.processAdComplete=function(e){this.adService.trackAdEvent({context:t.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()}),this.killAd()},i.prototype.processSkip=function(e){this.emit(i.event.AD_SKIPPED,{ad:this.inProgressAd}),this.adService.trackAdEvent({context:t.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()}),this.killAd()},i.prototype.processBreakComplete=function(){this.inProgressAd&&this.killAd(),this.inProgressBreakId&&(this.emit(i.event.AD_BREAK_COMPLETE,{adBreakId:this.inProgressBreakId}),this.inProgressBreakId=null),this.breakStartReleased=!1,this.emit(i.event.CONTENT_RESUME_REQUESTED)},i.prototype.processVolumeChange=function(e){this.adService.trackAdEvent({context:t.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()})},i.prototype.processAllComplete=function(){this.inProgressBreakId&&this.processBreakComplete(),this.emit(i.event.ALL_ADS_COMPLETED)},i.prototype.processLogEvent=function(e){this.pendingSeekedBreakId&&this.log("IMA SDK LOG event; break is pending."),e&&e.adError&&(this.log("LOG event; Ad data has error: msg = "+e.adError.getMessage()||!1),this.emit(i.event.AD_ERROR,{code:t.ErrorCode.IMA_AD_ERROR,message:e.adError.getMessage()||ct.messages.UNSPECIFIED_ERROR,data:{errorCode:e.adError.getErrorCode()}}),this.log("LOG event; Discarding Ad break"),this.emit(i.event.AD_BREAK_DISCARDED),this.adsManager&&this.adsManager.discardAdBreak())},i.prototype.killAd=function(){this.adService.untrackAd(),this.emit(i.event.AD_COMPLETE,{ad:this.inProgressAd}),this.inProgressAd=null;var e=this.adProgressData;clearTimeout(e.timeoutHandle),e.pollTzero=null,e.lastRecordedTime=null},i.prototype.requestAds=function(){var e=new this.sdk.AdsRequest,t=this.getRect();e.adTagUrl=this.adCallUrl,e.linearAdSlotWidth=t.width,e.linearAdSlotHeight=t.height,e.nonLinearAdSlotWidth=t.width,e.nonLinearAdSlotHeight=t.height,e.setAdWillAutoPlay(this.opts.initialPlayState.autoplay),e.setAdWillPlayMuted(this.opts.initialPlayState.muted),this.adsLoader.requestAds(e)},i.prototype.hAdsMgrLoaded=function(e){var t=e.data;this.renderingSettings=this.getRenderingSettings(),this.adsManager=t.getAdsManager(this.opts.playheadInterface,this.renderingSettings),this.createAdBreakSchedule(this.adsManager.getCuePoints()),this.listenToAdsManager(!0),this.startAds()},i.prototype.getRenderingSettings=function(){var e=new this.sdk.AdsRenderingSettings,t=this.opts.ad,i=this.adService.defaultRenderingSettings,r=t.ima.loadVideoTimeoutMs,n=t.ima.enableAdPreloading;return e.bitrate=i.bitrate,e.enablePreloading=C.isBoolean(n)?n:i.enablePreloading,e.loadVideoTimeout=isNaN(r)?i.loadVideoTimeout:r,e.restoreCustomPlaybackStateOnAdBreakComplete=i.restoreCustomPlaybackStateOnAdBreakComplete,e},i.prototype.createAdBreakSchedule=function(e){C.isEmpty(e)&&(e=[0]),this.adBreakSchedule=new Rn(e),this.emit(i.event.RAW_AD_SCHEDULE_AVAILABLE,{cuepoints:e}),this.emit(i.event.AD_CUEPOINTS_AVAILABLE,{cuepoints:e})},i.prototype.hAdsLoaderError=function(e){this.emit(i.event.AD_ERROR,{code:t.ErrorCode.IMA_AD_ERROR,message:e.data.message,data:e.data}),this.log("AdsLoader ERROR",e.data),this.emit(i.event.CONTENT_RESUME_REQUESTED)},i.prototype.listenToAdsManager=function(e){if(this.adsManager){for(var t,i=e?"addEventListener":"removeEventListener",r=this.getEventInterests(),n=0,a=r.length;n<a;n++)t=this.sdk.AdEvent.Type[r[n]],this.adsManager[i](t,this.adEventHandler);this.adsManager[i](this.sdk.AdErrorEvent.Type.AD_ERROR,this.errorEventHandler)}},i.prototype.listenToAdsLoader=function(e){var t=this.adsLoaderEventMap,i=[wn.event.ADS_MANAGER_LOADED,wn.event.ADS_LOADER_ERROR];if(this.adsLoader)for(var r=i.length;r--;)this.adsLoader[e?"on":"off"](i[r],t[i[r]])},i.prototype.getEventInterests=function(){return["CONTENT_PAUSE_REQUESTED","CONTENT_RESUME_REQUESTED","LOADED","STARTED","AD_PROGRESS","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","COMPLETE","ALL_ADS_COMPLETED","AD_BUFFERING","CLICK","PAUSED","RESUMED","SKIPPED","LOG","USER_CLOSE"]},i.prototype.getRect=function(){return this.presentationContainer.getBoundingClientRect()},i.prototype.initialize=function(){this.listenToAdsLoader(!0),this.requestAds()},i.prototype.log=function(e,i){var r,n;if(null===(r=this.logger)||void 0===r||r.log(t.LogLevel.DEBUG,"ImaAdPlayer: ".concat(e)),i)for(var a in i)null===(n=this.logger)||void 0===n||n.log(t.LogLevel.DEBUG,"".concat(a,": ").concat(i[a]))},i.event={CONTENT_PAUSE_REQUESTED:"contentPauseRequested",CONTENT_RESUME_REQUESTED:"contentResumeRequested",AD_CLICK_ELEMENT_VISIBILITY_REQUESTED:"adClickElementVisibilityRequested",AD_CUEPOINTS_AVAILABLE:"adCuepointsAvailable",AD_INIT_ERROR:"adInitError",AD_BREAK_START:"adBreakStart",AD_BREAK_METADATA:"adBreakMetadata",AD_LOADED:"adLoaded",AD_START:"adStarted",AD_PROGRESS:"adProgress",AD_FIRST_QUARTILE:"adFirstQuartile",AD_MIDPOINT:"adMidpoint",AD_THIRD_QUARTILE:"adThirdQuartile",AD_COMPLETE:"adComplete",ALL_ADS_COMPLETED:"allAdsCompleted",AD_BREAK_COMPLETE:"adBreakComplete",AD_BREAK_DISCARDED:"adBreakDiscarded",AD_BUFFERING:"adBuffering",AD_PAUSED:"paused",AD_RESUMED:"resumed",AD_SKIPPED:"adSkipped",AD_CLICK:"adClick",AD_ERROR:"adError",AD_VOLUME_CHANGED:"adVolumeChanged",AD_MUTED:"adMuted",AD_STALLED:"adStalled",RAW_AD_SCHEDULE_AVAILABLE:"rawAdScheduleAvailable"},i}(_),Fn=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.contentSegmentStarted=!1,r.pendingSeekTime=null,r.contentStartReleased=!1,r.fatalContentErrorReceived=!1,r.breaksToSkip=null,r.breakMetaDataReleased=!1,r.pendingBreak=null,r.preloadContent=!1,Ni.warn("The internal ad service is deprecated. Please use the @cbsinteractive/avia-js-gam plugin. Access to this property will be completely removed July 1st, 2022"),r}return s(i,e),i.prototype.onRemove=function(){this.killAdPlayer(),this.adDataProxy=null,e.prototype.onRemove.call(this)},i.prototype.closeAds=function(){var e,t;this.listenToAdPlayer(!1),null===(e=this.domProxy)||void 0===e||e.showAdContainer(!1),null===(t=this.adPlayer)||void 0===t||t.destroy()},i.prototype.start=function(){var e,t,i=this.resourceProxy.playback.startTime,r=this.resourceProxy.ad.showPrerollOnNonZeroStart,n=!isNaN(i)&&i>0,a=this.resourceProxy.location.mediaUrl;if(this.hasContent=C.isString(a)&&!C.isEmpty(a),this.uiMediator&&!0===(null===(t=null===(e=this.resourceProxy)||void 0===e?void 0:e.ad)||void 0===t?void 0:t.suppressAdUi)&&(this.uiMediator.adViewSuppressed=!0),n){var o=this.resourceProxy.ad.adTagParameters.cust_params;this.breaksToSkip=o&&o.skippod||null,r||null!==this.breaksToSkip||(this.breaksToSkip="1")}n&&r&&(this.resourceProxy.playback.startTime=NaN,this.pendingSeekTime=i),this.mute(this.presoModel.isMuted),this.isClickToPlay?this.setForClickToPlay():this.hasContent?(this.notify(vi.VIDEO_LOAD_START),this.prepareForPlayback()):this.play()},i.prototype.play=function(){this.presoModel.started?this.isAdPlaying()?this.adPlayer.resumeAd():this.playVideo():(this.adService.initializeAdsLoader(),this.domProxy&&this.domProxy.showAdContainer(!0),this.createAdPlayer())},i.prototype.playOnUserGesture=function(){this.facade.retrieveProxy(zt.ResourceProxy).resource.ad.context===t.AdContext.IMA_AD_ONLY?this.play():e.prototype.playOnUserGesture.call(this)},i.prototype.pause=function(){this.isAdPlaying()&&this.adPlayer?this.adPlayer.pauseAd():this.pauseVideo()},i.prototype.mute=function(e){this.muteVideo(e),this.adPlayer&&(e&&this.adPlayer.mute(),!e&&this.adPlayer.unmute(this.domProxy.getVideoVolume())),this.uiMediator&&this.uiMediator.setMuteState(e)},i.prototype.seek=function(e){var t=e;if(this.adPlayer){var i=this.adPlayer.getBreakForSeekTime(e);i&&(t=i.startTime,this.pendingSeekTime=e,this.pendingBreak=i,this.notify(vi.SEEK_REDIRECT_START,{requestedSeekTime:e,actualSeekTime:t}))}this.seekVideo(t)},i.prototype.getAdBreakTimes=function(){var e=[],i=this.adPlayer&&this.adPlayer.adBreaks;if(!i)return e;if(i.pre&&e.push({start:i.pre.startTime,duration:i.pre.endTime-i.pre.startTime,played:i.pre.hasPlayed,adTechnology:t.AdTechnology.CSAI}),i.mid)for(var r=i.mid.length,n=void 0;r--;)n=i.mid[r],e.unshift({start:n.startTime,duration:n.endTime-n.startTime,played:n.hasPlayed,adTechnology:t.AdTechnology.CSAI});return i.post&&e.push({start:i.post.startTime,duration:i.post.endTime-i.post.startTime,played:i.post.hasPlayed,adTechnology:t.AdTechnology.CSAI}),e},i.prototype.respondToVideoPlaying=function(){this.startPreso(),e.prototype.respondToVideoPlaying.call(this),this.isAdPlaying()?this.notify(vi.AD_PLAYING):this.contentSegmentStarted&&(this.respondToPlaybackStateChange(t.PlaybackState.PLAYING),this.setPlayingState(),this.notify(vi.CONTENT_PLAYING))},i.prototype.respondToVideoPaused=function(){e.prototype.respondToVideoPaused.call(this),this.isAdPlaying()?this.notify(vi.AD_PAUSED):(this.respondToPlaybackStateChange(t.PlaybackState.PAUSED),this.setPausedState(),this.notify(vi.CONTENT_PAUSED))},i.prototype.respondToVideoTimeUpdate=function(i){if(!this.contentComplete&&this.contentPlaybackStateProxy.isReady){var r=this.contentPlaybackStateProxy.model,n=this.isAdPlaying();if(this.setAdPlayerBitrate(),!n){if(this.presoModel.streamTime=i,r.time=i,this.pendingBreak&&i-this.pendingBreak.startTime>1){var a=this.resourceProxy.ad.ima.ignoreAnomalousConditionOnSeek;return this.log(t.LogLevel.DEBUG,"IMA PM: stream time: "+i+"; threshold exceeded for brk @ "+this.pendingBreak.startTime),!a&&this.adPlayer&&this.adPlayer.markAsPlayed([this.pendingBreak.breakId]),this.pendingSeekTime&&this.seek(this.pendingSeekTime),this.pendingBreak=null,void this.notify(vi.SEEK_REDIRECT_COMPLETE)}i>.75&&!this.contentSegmentStarted&&this.startContentSegment(),this.contentSegmentStarted&&e.prototype.respondToVideoTimeUpdate.call(this,i)}}},i.prototype.respondToVideoEnd=function(){var t,i;this.contentComplete=!0,this.contentSegmentStarted&&(this.contentSegmentStarted=!1,this.notify(vi.CONTENT_SEGMENT_END)),this.notify(vi.CONTENT_COMPLETE),null===(t=this.adPlayer)||void 0===t||t.setContentComplete(),(null===(i=this.adPlayer)||void 0===i?void 0:i.hasPostRoll())||e.prototype.respondToVideoEnd.call(this)},i.prototype.respondToDurationChange=function(e){if(this.contentPlaybackStateProxy.model.duration=e,this.presoModel.streamDuration=e,!isNaN(e)&&e>0&&(!this.contentDurationReleased&&this.releaseContentDuration(e),this.pendingCuepoints)){var t=this.pendingCuepoints;this.pendingCuepoints=null,this.notify(vi.AD_CUEPOINTS_AVAILABLE,{cuepoints:t})}},i.prototype.respondToBufferingStatusCheck=function(t){this.isAdPlaying()||e.prototype.respondToBufferingStatusCheck.call(this,t)},i.prototype.respondToQualityChange=function(t){void 0===t&&(t=null),this.setAdPlayerBitrate(),e.prototype.respondToQualityChange.call(this,t)},i.prototype.respondToSizeChange=function(){this.adPlayer&&this.adPlayer.updateSize(this.presoModel.isFullscreen)},i.prototype.respondToError=function(t){this.fatalContentErrorReceived=t.fatal,e.prototype.respondToError.call(this,t)},i.prototype.startPreso=function(){this.presoModel.started||(this.presoModel.started=!0,this.uiMediator&&(this.uiMediator.displayPoster(!1),this.uiMediator.hideClickCatcher(!0),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&this.uiMediator.showUnmutePrompt()),this.notify(vi.ENABLE_UI))},i.prototype.startContentSegment=function(){this.contentSegmentStarted=!0,this.contentPlaybackStateProxy.model.started=!0,this.domProxy&&this.domProxy.showAdContainer(!1),this.setPlayingState(),this.uiMediator&&!this.contentPlaybackStateProxy.model.liveStreamInfo&&this.uiMediator.setSeekable(!0),this.contentStartReleased||(this.contentStartReleased=!0,this.notify(vi.CONTENT_START)),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator&&(this.uiMediator.setFullScreenAccessRestricted(!1),this.uiMediator.enableFullscreen()),this.notify(vi.CONTENT_SEGMENT_START)},i.prototype.setAdPlayerBitrate=function(){if(this.adPlayer){var e=this.contentPlaybackStateProxy.model.bitrate;e&&!isNaN(e)&&(this.adPlayer.contentBitrate=.001*e)}},i.prototype.hAdPlayerEvent=function(e){var i=Vn.event;switch(e.type){case i.AD_CLICK_ELEMENT_VISIBILITY_REQUESTED:this.domProxy.showAdClickElement(!0);break;case i.AD_CLICK:this.notify(vi.AD_CLICK,e.data);break;case i.AD_SKIPPED:this.notify(vi.AD_SKIPPED,e.data);break;case i.RAW_AD_SCHEDULE_AVAILABLE:break;case i.AD_CUEPOINTS_AVAILABLE:this.pendingCuepoints=e.data.cuepoints;break;case i.CONTENT_PAUSE_REQUESTED:this.breakMetaDataReleased=!1,this.respondToPauseRequestFromAdPlayer();break;case i.CONTENT_RESUME_REQUESTED:this.resumeContentPlay();break;case i.AD_BREAK_START:this.pendingBreak=null,this.respondToContentEnd(),this.respondToAdBreakStart();break;case i.AD_BREAK_METADATA:this.pendingBreak=null,this.respondToAdBreakMetadata(e.data);break;case i.AD_LOADED:this.pendingBreak=null,this.respondToAdLoaded(e.data);break;case i.AD_START:this.respondToPlaybackStateChange(t.PlaybackState.PLAYING),this.pendingBreak=null,this.respondToAdStart(e.data);break;case i.AD_PROGRESS:this.respondToAdProgress(e.data);break;case i.AD_PAUSED:this.respondToPlaybackStateChange(t.PlaybackState.PAUSED),this.notify(vi.AD_PAUSED),this.notify(vi.RESOURCE_PAUSED);break;case i.AD_RESUMED:this.respondToPlaybackStateChange(t.PlaybackState.PLAYING),this.notify(vi.AD_PLAYING),this.notify(vi.RESOURCE_PLAYING);break;case i.AD_FIRST_QUARTILE:this.notify(vi.AD_FIRST_QUARTILE);break;case i.AD_MIDPOINT:this.notify(vi.AD_MIDPOINT);break;case i.AD_THIRD_QUARTILE:this.notify(vi.AD_THIRD_QUARTILE);break;case i.AD_COMPLETE:this.respondToAdComplete(),this.domProxy.showAdClickElement(!1),this.notify(vi.AD_COMPLETE);break;case i.AD_BREAK_COMPLETE:this.breakMetaDataReleased=!1,this.respondToAdBreakComplete();break;case i.ALL_ADS_COMPLETED:this.breakMetaDataReleased=!1,this.killAdPlayer();break;case i.AD_BREAK_DISCARDED:this.breakMetaDataReleased=!1,this.domProxy.showAdClickElement(!1),this.notify(vi.AD_BREAK_DISCARDED);break;case i.AD_BUFFERING:break;case i.AD_STALLED:this.adDataProxy.resetAll(),this.notify(vi.AD_STALLED,e.data);break;case i.AD_ERROR:this.domProxy.showAdClickElement(!1),this.contentSegmentStarted=!1,this.notify(vi.AD_ERROR,e.data);break;case i.AD_INIT_ERROR:this.killAdPlayer(),this.notify(vi.AD_ERROR,e.data),this.resumeContentPlay()}},i.prototype.respondToPauseRequestFromAdPlayer=function(){this.presoModel.started?this.pauseVideo():this.startPreso()},i.prototype.resumeContentPlay=function(){var t=this;if(this.domProxy.showAdClickElement(!1),this.fatalContentErrorReceived)this.notify(vi.DISABLE_UI);else if(this.hasContent&&!this.contentComplete)if(this.contentSegmentStarted)this.resumeContentPlayComplete();else{if(!this.contentStartReleased){var i=this.resourceProxy.playback.startTime;if(!isNaN(i)&&i>0){var r=this.getAdBreakTimes(),n=this.adjustStartTimeForAdBreakProximity(i,r);this.resourceProxy.playback.startTime=n}}this.load().then(function(){t.resumeContentPlayComplete(),t.startContentSegment()}).catch(this.onLoadError)}else e.prototype.respondToVideoEnd.call(this)},i.prototype.resumeContentPlayComplete=function(){this.pendingSeekTime&&(this.notify(vi.SEEK_REDIRECT_COMPLETE),this.seekVideo(this.pendingSeekTime),this.pendingSeekTime=null),this.startPreso(),this.play()},i.prototype.respondToContentEnd=function(){this.contentSegmentStarted&&(this.contentSegmentStarted=!1,this.notify(vi.CONTENT_SEGMENT_END))},i.prototype.respondToAdBreakStart=function(){this.domProxy&&this.domProxy.showAdContainer(!0),this.presoModel.isCurrentVideoAd=!0,this.uiMediator&&(this.uiMediator.hideClickCatcher(!0),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator.disableFullscreen()),this.notify(vi.AD_BREAK_START)},i.prototype.respondToAdBreakMetadata=function(e){this.breakMetaDataReleased||(this.adDataProxy.breakInfo=e,this.breakMetaDataReleased=!0,this.notify(vi.AD_BREAK_METADATA,{adBreakInfo:e}))},i.prototype.respondToAdStart=function(e){this.adDataProxy.adInfo=e,this.notify(vi.AD_START,{adInfo:e}),this.notify(vi.RESOURCE_PLAYING),this.checkPreload()},i.prototype.checkPreload=function(){var e=this,t=!0===this.resourceProxy.ad.ima.preloadContentAtEndOfPreRoll,i=this.adDataProxy.adInfo.adPosition===this.adDataProxy.breakInfo.adTotal,r=this.facade.retrieveService(ze.System);if(t&&i&&!r.isIos){var n=function(t){var i=t.data,r=C.clampValue(Math.ceil(i.duration/4),2,10);Math.round(i.currentTime)>=r&&(e.adPlayer.off(Vn.event.AD_PROGRESS,n),e.load().catch(e.onLoadError))};this.adPlayer.on(Vn.event.AD_PROGRESS,n)}},i.prototype.respondToAdComplete=function(){this.adDataProxy.resetAd()},i.prototype.respondToAdLoaded=function(e){this.adDataProxy.adInfo=e},i.prototype.respondToAdProgress=function(e){this.notify(vi.AD_TIME_UPDATE,{currentTime:e.currentTime,duration:e.duration})},i.prototype.respondToAdBreakComplete=function(){this.domProxy&&this.domProxy.showAdContainer(!1),this.presoModel.isCurrentVideoAd=!1,this.notify(vi.AD_BREAK_COMPLETE)},Object.defineProperty(i.prototype,"adService",{get:function(){return this.facade.retrieveService(ze.ImaAd)},enumerable:!1,configurable:!0}),i.prototype.assembleAdContextInfo=function(e){var t=this.facade.retrieveService(ze.System);return{buildEnv:it.env,platform:t.platform,mutedPlayback:e}},i.prototype.listenToAdPlayer=function(e){var t=this;if(this.adPlayer){var i=Vn.event,r=e?"on":"off";for(var n in i)this.adPlayer[r](i[n],e?function(e){return t.hAdPlayerEvent(e)}:null)}},i.prototype.createAdPlayer=function(){var e,t,i=this.facade.retrieveProxy(zt.ResourceProxy).resource,r=this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted,n={presentationContainer:this.domProxy.getMain(),playheadInterface:this.domProxy.getVideo(),initialPlayState:{autoplay:this.presoModel.isAutoplay,muted:r},playAdsAfterTime:this.breaksToSkip&&null!==this.breaksToSkip.match(/^1/)?0:null,adService:this.adService,logger:this.logger,ad:i.ad,adCallUrl:this.getAdCallUrl(i,r),enableStalledAdCheck:!1!==(null===(e=i.ad.ima)||void 0===e?void 0:e.enableStalledAdCheck),stallThreshold:(null===(t=i.ad.ima)||void 0===t?void 0:t.stalledAdThreshold)||5};if(this.adPlayer=new Vn(n),this.breaksToSkip){for(var a=this.breaksToSkip.split(",").map(function(e){return parseInt(e)}),o=[],s=a.length;s--;){var l=a[s],c=1===l?"pre_0":"mid_"+String(l-1);o.push(c)}this.adPlayer.markAsPlayed(o)}this.listenToAdPlayer(!0)},i.prototype.getAdCallUrl=function(e,t){var i,r,n=null===(i=e.ad.ima)||void 0===i?void 0:i.adCallUrl,a=!C.isEmpty(n),o=null===(r=e.ad.csai)||void 0===r?void 0:r.adCallUrl,s=!C.isEmpty(o),l=new Bn;if(a)return t?l.substituteStringForMutedPlayback(n):n;if(s){var c=this.facade.retrieveService(ze.System);return function(e,t,i,r){return t.muted&&(e=e.replace(Tn,bn)),C.template(e,{get RANDOM(){return Cn()},get HOST(){return _n()},get REFERER(){return i?"":Pn()},get PLAYERINFO(){return"".concat(r.playername_version)},get SDK(){return"".concat(r.ima_sdkv)}},"\\[","\\]")}(o,{autoplay:this.presoModel.isAutoplay,muted:t},!(c.isDesktop||c.isMobile),this.getVersionInfo())}return l.assembleAdCall(e,this.assembleAdContextInfo(t),this.getVersionInfo())},i.prototype.getVersionInfo=function(){var e=this.adService.getSdkVersion(),t=this.getPlayerVersionInfo();return{imafw_ima_sdkv:e,ima_sdkv:e,playername_version:t,imafw_playername_version:t}},i.prototype.killAdPlayer=function(){this.adPlayer&&(this.listenToAdPlayer(!1),this.adPlayer.destroy(),this.adPlayer=null)},i.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.domProxy&&this.domProxy.showAdContainer(!1),this.adDataProxy=new gn(zt.AdDataProxy,null),this.facade.registerProxy(this.adDataProxy)},i}(mn),Hn=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.isReady=!1,r.pUserQualityCategory=null,r}return s(i,e),i.prototype.onRegister=function(){e.prototype.onRegister.call(this);var i=this.facade.retrieveProxy(zt.ModelCollectionProxy);this.contentPlaybackState=i.getModel(vr.modelName),this.contentPlaybackState.qualityInfo={mode:t.QualityMode.AUTO,quality:null,qualities:[]},this.contentPlaybackState.textTracks={track:null,tracks:[]},this.contentPlaybackState.audioTracks={track:null,tracks:[]},this.pTextTracks={},this.isReady=!0},i.prototype.onRemove=function(){this.contentPlaybackState=null,this.pTextTracks=null,this.thumbnailTrack=null,e.prototype.onRemove.call(this)},i.prototype.processQualityProfile=function(e){this.tagQualities(e),this.contentPlaybackState.qualityInfo.qualities=e},i.prototype.updateQualityProfile=function(e,t,i){var r=i.slice(e,t+1);this.processQualityProfile(r)},i.prototype.updateAudioTracks=function(e,t){var i=this.contentPlaybackState.audioTracks;i.track=e,t&&(i.tracks=t)},i.prototype.addTextTrack=function(e){this.contentPlaybackState.textTracks.tracks.push(e),this.pTextTracks[e.id]=e},i.prototype.getTextTrackById=function(e){return this.pTextTracks[e]},i.prototype.tagQualities=function(e){e.forEach(function(e){e.category||(e.category=["".concat(String(wi.getQualityCategoryForVideoHeight(e.height))),"".concat(e.height,"p"),"".concat(Math.round(e.bitrate/1e3)," kbps")])})},i.prototype.getThumbnail=function(e){var t;return null===(t=this.thumbnailTrack)||void 0===t?void 0:t.getCueAt(e)},Object.defineProperty(i.prototype,"textTrackInfo",{get:function(){return this.contentPlaybackState.textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{get:function(){return this.contentPlaybackState.textTracks.track},set:function(e){this.contentPlaybackState.textTracks.track=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isAbrSwitchingAvailable",{get:function(){return!!this.manifestQualities&&this.manifestQualities.length>1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"userQualityCategory",{get:function(){return this.pUserQualityCategory},set:function(e){this.pUserQualityCategory=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"qualitySwitchingMode",{get:function(){return this.contentPlaybackState.qualityInfo.mode},set:function(e){this.contentPlaybackState.qualityInfo.mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"manifestQualities",{get:function(){return this.contentPlaybackState.manifestQualities},set:function(e){this.contentPlaybackState.manifestQualities=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBandwidth",{set:function(e){this.contentPlaybackState.maxBandwidth=isNaN(this.contentPlaybackState.maxBandwidth)?e:Math.max(e,this.contentPlaybackState.maxBandwidth)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this.contentPlaybackState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxIndex",{get:function(){return this.contentPlaybackState.qualityInfo.qualities?this.contentPlaybackState.qualityInfo.qualities.length-1:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.minIndex].bitrate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.maxIndex].bitrate},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"qualityInfo",{get:function(){return this.contentPlaybackState.qualityInfo},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{set:function(e){this.contentPlaybackState.qualityInfo.quality=e},enumerable:!1,configurable:!0}),i}(Oi),Kn=function(e){function t(t,i){return e.call(this,t,i)||this}return s(t,e),t.prototype.mock=function(e){this.pResource=e},t.prototype.onRemove=function(){this.pResource=null,e.prototype.onRemove.call(this)},t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.pResource=this.data},Object.defineProperty(t.prototype,"resource",{get:function(){return this.pResource},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this.pResource.location},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playback",{get:function(){return this.pResource.playback},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.pResource.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ad",{get:function(){return this.pResource.ad},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adTrackingSettings",{get:function(){return this.pResource.ad.viewabilityTracking},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasValidMediaUrl",{get:function(){return!C.isEmpty(this.location.mediaUrl)},enumerable:!1,configurable:!0}),t}(Oi),Gn=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r.pAdAdapter=null,r.adAdapterStarted=!1,r.contentSegmentStarted=!1,r.contentStartReleased=!1,r.contentCompleteReleased=!1,r.fatalContentErrorReceived=!1,r.presoComplete=!1,r.hasMidRolls=!1,r.pendingSeekTime=null,r.currentAd=null,r.currentBreak=null,r.preloadContent=!1,r}return s(i,e),Object.defineProperty(i.prototype,"adAdapter",{get:function(){return this.pAdAdapter},set:function(e){this.pAdAdapter=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adInProgress",{get:function(){return this.presoModel.isCurrentVideoAd},enumerable:!1,configurable:!0}),i.prototype.onRemove=function(){var t,i;null===(i=null===(t=this.pAdAdapter)||void 0===t?void 0:t.destroy)||void 0===i||i.call(t),this.pAdAdapter=null,e.prototype.onRemove.call(this)},i.prototype.closeAds=function(){var e,t;null===(e=this.domProxy)||void 0===e||e.showAdContainer(!1),null===(t=this.adAdapter)||void 0===t||t.destroy(),this.pAdAdapter=null},i.prototype.beforePlayOnUserGesture=function(){var e;null===(e=this.adAdapter)||void 0===e||e.playClicked()},i.prototype.start=function(){var t,i,r,n=this.resourceProxy.playback.startTime,a=this.resourceProxy.ad.showPrerollOnNonZeroStart,o=!isNaN(n)&&n>0;if(e.prototype.start.call(this),this.mute(this.presoModel.isMuted),o&&a&&(this.pendingSeekTime=n),this.isClickToPlay)this.setForClickToPlay();else{var s=this.resourceProxy.resource;(null===(i=null===(t=s.ad)||void 0===t?void 0:t.csai)||void 0===i?void 0:i.adCallUrl)&&!(null===(r=s.location)||void 0===r?void 0:r.mediaUrl)?this.play():(this.notify(vi.VIDEO_LOAD_START),this.prepareForPlayback())}},i.prototype.getAdBreakTimes=function(){var e=[];return this.breakSchedule.forEach(function(t){e.push(c({start:t.startTime,streamTimeStart:t.streamStartTime,end:t.endTime,streamTimeEnd:t.streamStartTime+t.duration,played:t.hasPlayed},t))}),e},i.prototype.getDelegate=function(){return Ki({},this)},i.prototype.play=function(){var e;if(this.presoModel.started){if(this.adInProgress)return void((null===(e=this.adAdapter)||void 0===e?void 0:e.resume)?this.adAdapter.resume():this.playVideo());this.playVideo()}else this.presoModel.started=!0,this.adAdapterStarted=!0,this.adAdapter.start()},i.prototype.pause=function(){var e;this.adInProgress&&(null===(e=this.adAdapter)||void 0===e?void 0:e.pause)?this.adAdapter.pause():this.pauseVideo()},i.prototype.mute=function(t){var i;return d(this,void 0,void 0,function(){return p(this,function(r){return null===(i=this.adAdapter)||void 0===i||i.setMuteState(t),e.prototype.mute.call(this,t),[2]})})},i.prototype.setVolume=function(t){var i;null===(i=this.adAdapter)||void 0===i||i.setVolume(t),e.prototype.setVolume.call(this,t)},i.prototype.seek=function(e){var t,i,r=e;if(this.hasMidRolls&&this.adAdapter){var n=this.adAdapter.getPermittedSeekTime(e);n!=e&&(this.pendingSeekTime=(null===(i=(t=this.adAdapter).streamTimeForContentTime)||void 0===i?void 0:i.call(t,e))||n,r=n,this.notify(vi.SEEK_REDIRECT_START,{requestedSeekTime:e,actualSeekTime:n}))}this.seekVideo(r)},i.prototype.skipAd=function(){var e;null===(e=this.adAdapter)||void 0===e||e.skipAd()},i.prototype.pauseContent=function(){var e;this.pauseVideo(),null===(e=this.domProxy)||void 0===e||e.showAdContainer(!0)},i.prototype.resumeContent=function(){var t,i,r=this;if(this.currentAd=null,this.currentBreak=null,null===(t=this.domProxy)||void 0===t||t.showAdClickElement(!1),null===(i=this.domProxy)||void 0===i||i.showAdContainer(!1),this.fatalContentErrorReceived)this.notify(vi.DISABLE_UI);else if(this.hasContent&&!this.contentComplete)if(this.contentSegmentStarted)this.resumeContentPlayComplete();else{if(!this.contentStartReleased){var n=this.resourceProxy.playback.startTime;if(!isNaN(n)&&n>0){var a=this.getAdBreakTimes(),o=this.adjustStartTimeForAdBreakProximity(n,a);this.resourceProxy.playback.startTime=o}}this.load().then(function(){r.resumeContentPlayComplete()}).catch(this.onLoadError)}else e.prototype.respondToVideoEnd.call(this)},i.prototype.streamIdAvailable=function(e){this.notify(vi.STREAM_ID_AVAILABLE,{streamId:e})},i.prototype.applyHook=function(e,t){var i=this;return new Promise(function(r){i.getProxy(zt.HookProxy).applyHook(e,t).then(function(e){return r(e)})})},i.prototype.adSegmentStarted=function(){this.contentSegmentStarted=!1,this.presoModel.isCurrentVideoAd=!0,this.notify(vi.AD_SEGMENT_START)},i.prototype.adSegmentEnded=function(){this.contentSegmentStarted=!1,this.presoModel&&(this.presoModel.isCurrentVideoAd=!1),this.notify(vi.AD_SEGMENT_END)},i.prototype.adBreaksAvailable=function(e){this.hasMidRolls=e.some(function(e){return e.type===t.AdBreakType.MID}),this.breakSchedule=e;var i=e.map(function(e){return e.startTime});this.notify(vi.AD_CUEPOINTS_AVAILABLE,{cuepoints:i})},i.prototype.seekToStreamTime=function(e){this.seekVideo(e)},i.prototype.adBreakStart=function(){var e;this.endContentSegment(),this.updateSize(),null===(e=this.domProxy)||void 0===e||e.showAdContainer(!0),this.presoModel.isCurrentVideoAd=!0,this.setAdPlaying(),this.notify(vi.AD_BREAK_START)},i.prototype.adBreakMetadata=function(e){this.currentBreak=e,this.notify(vi.AD_BREAK_METADATA,{adBreakInfo:e})},i.prototype.adLoaded=function(){},i.prototype.adStart=function(e){this.currentAd=e,this.notify(vi.AD_START,{adInfo:e})},i.prototype.adProgress=function(e,t){this.notify(vi.AD_TIME_UPDATE,{currentTime:e,duration:t,streamTime:this.presoModel.streamTime,streamDuration:this.presoModel.streamDuration}),this.checkPreload(e,t)},i.prototype.adFirstQuartile=function(){this.notify(vi.AD_FIRST_QUARTILE)},i.prototype.adMidpoint=function(){this.notify(vi.AD_MIDPOINT)},i.prototype.adThirdQuartile=function(){this.notify(vi.AD_THIRD_QUARTILE)},i.prototype.adComplete=function(){this.currentAd=null,this.notify(vi.AD_COMPLETE)},i.prototype.adBreakComplete=function(){var e,t;if(this.currentBreak=null,this.currentAd=null,null===(e=this.domProxy)||void 0===e||e.showAdContainer(!1),null===(t=this.domProxy)||void 0===t||t.showAdClickElement(!1),this.presoModel.isCurrentVideoAd=!1,this.notify(vi.AD_BREAK_COMPLETE),this.pendingSeekTime){var i=this.pendingSeekTime;this.pendingSeekTime=null,this.contentPlaybackStateProxy.model.started&&this.notify(vi.SEEK_REDIRECT_COMPLETE),this.seekVideo(i)}},i.prototype.adClicked=function(){var e,i;(null===(i=null===(e=this.contentPlaybackStateProxy)||void 0===e?void 0:e.model)||void 0===i?void 0:i.state)===t.PlaybackState.PLAYING&&this.pause()},i.prototype.adError=function(e){this.currentAd=null,e.message||(e.message=ct.messages.UNSPECIFIED_ERROR),this.notify(vi.AD_ERROR,e)},i.prototype.adPaused=function(){this.respondToPlaybackStateChange(t.PlaybackState.PAUSED),this.notify(vi.AD_PAUSED)},i.prototype.adResumed=function(){this.notify(vi.AD_BUFFERING,{value:!1}),this.notify(vi.AD_PLAYING)},i.prototype.adStalled=function(){this.notify(vi.AD_STALLED)},i.prototype.adBreakDiscarded=function(){this.notify(vi.AD_BREAK_DISCARDED)},i.prototype.adSkipped=function(){this.notify(vi.AD_SKIPPED)},i.prototype.allAdsComplete=function(){this.hasMidRolls=!1},i.prototype.adBuffering=function(e){},i.prototype.displayAdClickElement=function(){var e;null===(e=this.domProxy)||void 0===e||e.showAdClickElement(!0)},i.prototype.resumeContentPlayComplete=function(){this.pendingSeekTime&&(this.notify(vi.SEEK_REDIRECT_COMPLETE),this.seekVideo(this.pendingSeekTime),this.pendingSeekTime=null),this.play()},i.prototype.handleNotification=function(t){var i=t.name;switch(i){case vi.FULLSCREEN_EXIT:case vi.FULLSCREEN_ENTER:this.adAdapter.setFullscreenState(i==vi.FULLSCREEN_ENTER)}e.prototype.handleNotification.call(this,t)},i.prototype.updateSize=function(){var e,t=null===(e=this.domProxy)||void 0===e?void 0:e.getPresentationRect();t&&this.adAdapter.updateSize(t)},i.prototype.respondToSizeChange=function(){this.updateSize()},i.prototype.respondToId3Data=function(t){t.info&&(t.msg=t.info),this.adAdapter.handleTimedMetadata(t),e.prototype.respondToId3Data.call(this,t)},i.prototype.respondToVideoPaused=function(){e.prototype.respondToVideoPaused.call(this),this.adInProgress?this.notify(vi.AD_PAUSED):(this.respondToPlaybackStateChange(t.PlaybackState.PAUSED),this.setPausedState(),this.notify(vi.CONTENT_PAUSED))},i.prototype.respondToVideoPlaying=function(){e.prototype.respondToVideoPlaying.call(this),this.adAdapterStarted||(this.adAdapterStarted=!0,this.adAdapter.start()),this.contentPlaybackStateProxy.model.time>.5&&(this.adInProgress?this.notify(vi.AD_PLAYING):this.contentSegmentStarted&&(this.respondToPlaybackStateChange(t.PlaybackState.PLAYING),this.setPlayingState(),this.notify(vi.CONTENT_PLAYING)))},i.prototype.respondToVideoTimeUpdate=function(i){var r,n,a,o,s,l=this.contentPlaybackStateProxy.model;this.presoModel.streamTime=i,null===(r=this.adAdapter)||void 0===r||r.setStreamTime(i),l.time=(null===(n=this.adAdapter)||void 0===n?void 0:n.contentTimeForStreamTime)?null===(a=this.adAdapter)||void 0===a?void 0:a.contentTimeForStreamTime(i):i,this.adInProgress||(i>.75&&!this.contentSegmentStarted&&(l.started=!0,null===(o=this.domProxy)||void 0===o||o.showAdClickElement(!1),null===(s=this.domProxy)||void 0===s||s.showAdContainer(!1),this.setPlayingState(),this.setTransportType(),!this.contentStartReleased&&this.signalContentStart(),this.contentSegmentStarted=!0,this.hasMidRolls||l.streamType==t.StreamType.LIVE||l.streamType==t.StreamType.DVR?this.notify(vi.CONTENT_SEGMENT_START):this.notify(vi.CONTENT_PLAYING)),this.contentSegmentStarted&&e.prototype.respondToVideoTimeUpdate.call(this,i),l.streamType!==t.StreamType.LIVE&&l.time>=l.duration&&!this.contentCompleteReleased&&this.signalContentComplete())},i.prototype.endContentSegment=function(){this.contentSegmentStarted&&(this.contentSegmentStarted=!1,this.notify(vi.CONTENT_SEGMENT_END))},i.prototype.respondToVideoEnd=function(){this.contentComplete=!0,this.contentCompleteReleased||this.signalContentComplete(),this.presoComplete=!0,e.prototype.respondToVideoEnd.call(this)},i.prototype.respondToDurationChange=function(e){var t,i;if(e&&!isNaN(e)&&e>0){this.adAdapter.setStreamDuration(e),this.presoModel.streamDuration=e;var r=(null===(i=(t=this.adAdapter).contentTimeForStreamTime)||void 0===i?void 0:i.call(t,e))||e;this.contentPlaybackStateProxy.model.duration=r,this.contentDurationReleased||this.releaseContentDuration(e)}},i.prototype.respondToError=function(t){this.fatalContentErrorReceived=t.fatal,e.prototype.respondToError.call(this,t)},i.prototype.isContentComplete=function(){return this.presoComplete},i.prototype.startContentSegment=function(){var t;this.contentSegmentStarted=!0,this.contentPlaybackStateProxy.model.started=!0,null===(t=this.domProxy)||void 0===t||t.showAdContainer(!1),this.setPlayingState(),this.contentStartReleased||(this.contentStartReleased=!0,this.notify(vi.CONTENT_START)),e.prototype.startContentSegment.call(this),this.notify(vi.CONTENT_SEGMENT_START)},i.prototype.checkPreload=function(e,t){var i,r,n=!0===this.resourceProxy.ad.csai.preloadContentAtEndOfPreRoll,a=this.facade.retrieveService(ze.System);if(n){var o=(null===(i=this.currentAd)||void 0===i?void 0:i.adPosition)===(null===(r=this.currentBreak)||void 0===r?void 0:r.adTotal);if(n&&o&&!a.isIos){var s=C.clampValue(Math.ceil(t/4),2,10);Math.round(e)>=s&&this.load().catch(this.onLoadError)}}},i.prototype.signalContentStart=function(){this.contentStartReleased=!0,this.notify(vi.CONTENT_START)},i.prototype.signalContentComplete=function(){this.contentCompleteReleased=!0,this.contentSegmentStarted&&this.notify(vi.CONTENT_SEGMENT_END),this.notify(vi.CONTENT_COMPLETE)},i.prototype.listNotificationInterests=function(){return e.prototype.listNotificationInterests.call(this).concat([vi.FULLSCREEN_ENTER,vi.FULLSCREEN_EXIT,vi.PRESENTATION_SIZE_CHANGE])},i.prototype.onRegister=function(){var t,i;e.prototype.onRegister.call(this),null===(t=this.domProxy)||void 0===t||t.showAdContainer(!1),null===(i=this.domProxy)||void 0===i||i.showAdClickElement(!1)},u([Fi()],i.prototype,"pauseContent",null),u([Fi()],i.prototype,"resumeContent",null),u([Fi()],i.prototype,"streamIdAvailable",null),u([Fi()],i.prototype,"applyHook",null),u([Fi()],i.prototype,"adSegmentStarted",null),u([Fi()],i.prototype,"adSegmentEnded",null),u([Fi()],i.prototype,"adBreaksAvailable",null),u([Fi()],i.prototype,"seekToStreamTime",null),u([Fi()],i.prototype,"adBreakStart",null),u([Fi()],i.prototype,"adBreakMetadata",null),u([Fi()],i.prototype,"adLoaded",null),u([Fi()],i.prototype,"adStart",null),u([Fi()],i.prototype,"adProgress",null),u([Fi()],i.prototype,"adFirstQuartile",null),u([Fi()],i.prototype,"adMidpoint",null),u([Fi()],i.prototype,"adThirdQuartile",null),u([Fi()],i.prototype,"adComplete",null),u([Fi()],i.prototype,"adBreakComplete",null),u([Fi()],i.prototype,"adClicked",null),u([Fi()],i.prototype,"adError",null),u([Fi()],i.prototype,"adPaused",null),u([Fi()],i.prototype,"adResumed",null),u([Fi()],i.prototype,"adStalled",null),u([Fi()],i.prototype,"adBreakDiscarded",null),u([Fi()],i.prototype,"adSkipped",null),u([Fi()],i.prototype,"allAdsComplete",null),u([Fi()],i.prototype,"adBuffering",null),u([Fi()],i.prototype,"displayAdClickElement",null),i}(mn),jn=function(e){function t(t,i){return e.call(this,t,i)||this}return s(t,e),t.prototype.start=function(){var e=this.presoModel;this.uiMediator&&this.uiMediator.setMuteState(e.isMuted),this.isClickToPlay?this.setForClickToPlay():this.notify(vi.VIDEO_LOAD_START)},t.prototype.respondToVideoPlaying=function(){var t=!1;this.contentPlaybackStateProxy.model.started=!0,this.presoModel.started||(this.presoModel.started=!0,this.started=!0,this.uiMediator&&(this.uiMediator.displayPoster(!1),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&this.uiMediator.showUnmutePrompt(),this.notify(vi.ENABLE_UI),this.uiMediator.setFullScreenAccessRestricted(!1),this.uiMediator.enableFullscreen(),this.setTransportType()),t=!0),e.prototype.respondToVideoPlaying.call(this),this.setPlayingState(),t&&this.notify(vi.CONTENT_START),this.notify(vi.CONTENT_PLAYING)},t.prototype.respondToVideoTimeUpdate=function(t){if(!this.contentComplete){var i=this.contentPlaybackStateProxy.model;this.presoModel.started&&(this.presoModel.streamTime=t,i.time=t,e.prototype.respondToVideoTimeUpdate.call(this,t))}},t.prototype.respondToVideoPaused=function(){e.prototype.respondToVideoPaused.call(this),this.setPausedState(),this.notify(vi.CONTENT_PAUSED)},t.prototype.respondToIsPlayingLiveChange=function(t){this.uiMediator&&this.uiMediator.setIsPlayingLive(t),e.prototype.respondToIsPlayingLiveChange.call(this,t)},t.prototype.respondToVideoEnd=function(){this.contentComplete=!0,this.notify(vi.CONTENT_COMPLETE),e.prototype.respondToVideoEnd.call(this)},t.prototype.respondToDurationChange=function(e){this.presoModel.streamDuration=e,this.contentPlaybackStateProxy.model.duration=e,this.contentDurationReleased||this.releaseContentDuration(e)},t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.domProxy&&this.domProxy.showAdContainer(!1),!this.isClickToPlay&&this.prepareForPlayback()},t}(mn),Wn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var t=this,i=this.facade.retrieveService(ze.System),r=e.body;if(i.global&&i.global.document){var n=this.getModel(yi.PresentationState),a=this.getModel(yi.PlayerOptions),o=this.isAutoplayRequested(a.autoplay);this.facade.registerProxy(new Hn(zt.ContentPlaybackStateProxy)),i.isWebMaf||i.isTizenSmartTv||i.isXboxOne?(this.processAutoplaySupport({supportsMutedAutoplay:!0,supportsUnmutedAutoplay:!0},n,a),this.createPresentation(i,r,n,a)):!n.skipAutoplayCheck&&o?this.checkAutoplay(a).then(function(e){t.processAutoplaySupport(e,n,a),t.createPresentation(i,r,n,a)}):this.createPresentation(i,r,n,a)}else this.sendNotification(vi.VIDEO_START_ERROR,{error:ct.messages.ENVIRONMENT_NOT_SUPPORTED,fatal:!0})},i.prototype.createPresentation=function(e,t,i,r){return d(this,void 0,void 0,function(){var n;return p(this,function(a){switch(a.label){case 0:return[4,this.getPresoMediator(e,t,i,r)];case 1:return(n=a.sent())?(this.facade.registerMediator(n),this.sendNotification(vi.START_PRESENTATION),[2]):[2]}})})},i.prototype.getPresoMediator=function(e,i,r,n){var a;return d(this,void 0,void 0,function(){var o,s,l,c,u,d,h,f,y,v,m,g,A;return p(this,function(p){switch(p.label){case 0:if(o=this.facade.retrieveProxy(zt.PlayerDomProxy),s=this.getVideo(e,o,n),l=i.ad,c=l&&l.context||null,u=hi.PRESENTATION_MEDIATOR,d=null,null===s)return this.sendNotification(vi.RESOURCE_ERROR,{code:t.ErrorCode.UNEXPECTED_CONDITION,message:ct.messages.VIDEO_PLAYBACK_UNAVAILABLE,fatal:!0}),[2,d];switch((c&&c!==t.AdContext.NONE||r.isAutoplay)&&(null==o||o.setVideoAttribute("playsinline","")),c){case t.AdContext.IMA:case t.AdContext.IMA_AD_ONLY:return[3,1];case t.AdContext.DAI_SDK:case t.AdContext.DAI_API:return[3,2];case t.AdContext.DAI_SSB:return[3,3]}return[3,4];case 1:return(h=this.createImaAdService(i))?d=new Fn(u,s):this.sendNotification(vi.RESOURCE_ERROR,{code:t.ErrorCode.IMA_SDK_MISSING,message:ct.messages.IMA_SDK_MISSING,fatal:!0}),[3,12];case 2:return f=c===t.AdContext.DAI_API,(h=this.createDaiAdService(o,i,f,e))&&(d=new Dn(u,s)),!h&&this.sendNotification(vi.RESOURCE_ERROR,{code:t.ErrorCode.DAI_SDK_MISSING,message:ct.messages.DAI_SDK_UNAVAILABLE,fatal:!0}),[3,12];case 3:return l.dai.ssbStreamUrl&&(i.location.mediaUrl=l.dai.ssbStreamUrl),d=new jn(u,s),[3,12];case 4:if(!0!==l.enabled)return[3,10];p.label=5;case 5:return p.trys.push([5,8,,9]),y=new Gn(u,s),v=y.getDelegate(),[4,this.facade.retrieveProxy(zt.AdapterProxy).createAdapter(t.AdapterRole.AD,i,function(){return v})];case 6:return m=p.sent(),y.adAdapter=m,[4,null===(a=m.getResource)||void 0===a?void 0:a.call(m)];case 7:return(g=p.sent())&&(i=g),d=y,[3,9];case 8:return A=p.sent(),this.sendNotification(vi.RESOURCE_ERROR,{code:t.ErrorCode.AD_ADAPTER_ERROR,message:A.message,data:A,fatal:!0}),[3,9];case 9:return[3,11];case 10:d=new jn(u,s),p.label=11;case 11:return[3,12];case 12:return this.createResourceProxy(i),[2,d]}})})},i.prototype.createResourceProxy=function(e){var t=new Kn(zt.ResourceProxy,e);this.facade.registerProxy(t)},i.prototype.createDaiAdService=function(e,t,i,r){var n,a,o,s,l,c;if(this.facade.retrieveService(ze.DaiAd))return!0;var u=this.getModel(yi.PlayerOptions);i||!0!==u.enableOm||null===(c=null===(l=null===(s=null===(o=null===(a=null===(n=r.global)||void 0===n?void 0:n.google)||void 0===a?void 0:a.ima)||void 0===o?void 0:o.dai)||void 0===s?void 0:s.api)||void 0===l?void 0:l.DaiSdkSettings)||void 0===c||c.setFeatureFlags({enableOmidBeta:!0});var d=new Xr(ze.DaiAd,i?$r:null);if(this.facade.registerService(d),!d.sdk)return d.destroy(),this.facade.removeService(ze.DaiAd),!1;var p=t.ad.viewabilityTracking;e&&d.setContainer(e.getElement(fi.AD_CONTAINER));var h=i?r.createSimpleVideoInterface():e.getVideo();return d.setVideoInterface(h),d.setTrackingData({pageType:p.pageType,viewGuid:p.viewGuid,partner:p.partner}),!0},i.prototype.getVideoInterface=function(e){return e.createSimpleVideoInterface()},i.prototype.getVideo=function(e,t,i){var r;return e.isWebMaf?e.webMafPlayer:t?(!1===(null===(r=i.overrides)||void 0===r?void 0:r.reuseVideoElement)&&t.recreateVideo(),t.getVideo()):null},i.prototype.createImaAdService=function(e){var t;if(this.facade.retrieveService(ze.ImaAd))return!0;var i=new xn(ze.ImaAd);this.facade.registerService(i);var r=i.sdk;if(null!==r){var n=this.facade.retrieveProxy(zt.PlayerDomProxy),a=n.getElement(fi.AD_CONTAINER),o=this.getModel(yi.PlayerOptions);!0===o.enableOm&&(null===(t=r.settings)||void 0===t||t.setFeatureFlags({enableOmidBeta:!0})),i.setContainer(a),i.adsLoaderOptions={enableOm:!0===o.enableOm,adContainer:a,adClickEl:n.getElement(fi.AD_CLICK_EL),video:n.getVideo(),sdkSettings:i.sdkSettings,adService:i};var s=e.ad.viewabilityTracking;return i.setTrackingData({pageType:s.pageType,viewGuid:s.viewGuid,partner:s.partner}),i.createAdsLoader(),!0}return this.facade.removeService(ze.ImaAd),!1},i.prototype.processAutoplaySupport=function(e,i,r){var n=r.autoplay,a=e.supportsMutedAutoplay,o=e.supportsUnmutedAutoplay,s=n===t.Autoplay.ATTEMPT_MUTED||n===t.Autoplay.ATTEMPT_UNMUTED_THEN_MUTED,l=n===t.Autoplay.ATTEMPT_UNMUTED,c=s&&!a||l&&!o;!i.isAutoplay&&c&&this.sendNotification(vi.AUTOPLAY_BLOCKED,new Error("Autoplay capability conflict."),mi.INTERNAL),i.autoplaySupport={supportsMutedAutoplay:a,supportsUnmutedAutoplay:o},i.isMuteAtPlayStart=n===t.Autoplay.ATTEMPT_MUTED&&a||n===t.Autoplay.ATTEMPT_UNMUTED_THEN_MUTED&&!o&&a,i.isAutoplay=this.shouldAutoplay(n,e)},i.prototype.isAutoplayRequested=function(e){return!C.isEmpty(e)&&e!==t.Autoplay.NONE},i.prototype.shouldAutoplay=function(e,i){if(C.isEmpty(e)||e===t.Autoplay.NONE)return!1;var r=i.supportsMutedAutoplay,n=i.supportsUnmutedAutoplay,a=e===t.Autoplay.ATTEMPT_MUTED&&r,o=e===t.Autoplay.ATTEMPT_UNMUTED&&n,s=!o&&e===t.Autoplay.ATTEMPT_UNMUTED_THEN_MUTED&&r;return a||o||s},i.prototype.checkAutoplay=function(e){var t;return this.getService(ze.AutoplayCapabilities).detectCapabilities(null===(t=e.overrides)||void 0===t?void 0:t.blankVideoUrl)},i}(Wi),Yn=function(){function e(){}return e.validate=function(e){if(C.isEmpty(e))return{error:!0,msg:ct.messages.RESOURCE_MISSING};var t=this.hasRootKeys(e);if(t.error)return t;var i=this.canAccessMedia(e,e.ad.enabled);return i.error?i:{error:!1,msg:""}},e.hasRootKeys=function(e){var t=[],i=new Ei,r=null;return Object.keys(i).forEach(function(i){i in e||t.push(i)}),t.length&&(r="One or more configuration properties not found: ".concat(t.join(", "))),{error:!!r,msg:r}},e.canAccessMedia=function(e,i){var r=!C.isEmpty(e.location.cms),n=!C.isEmpty(e.location.tokenMap)||!C.isEmpty(e.location.cmsUri),a=!C.isEmpty(e.location.mediaUrl)||e.ad.context===t.AdContext.IMA_AD_ONLY,o=!e.ad.context&&!i&&a||e.ad.context===t.AdContext.DAI_SSB&&!C.isEmpty(e.ad.dai.ssbStreamUrl),s=this.hasValidDaiSettings(e,i),l=!(o||a||r&&n),c=s.error?s.msg:l?"Media not specified":"";return{error:l&&s.error,msg:c}},e.hasValidDaiSettings=function(e,i){var r,n,a=e.ad,o=null==a?void 0:a.ssai,s=null==a?void 0:a.dai,l=null==a?void 0:a.context,c=!1,u="";if(!a)return{error:c,msg:u};var d=null,p=!1;return(null==s?void 0:s.assetKey)||(null==s?void 0:s.contentSourceId)||s.ssbStreamUrl&&l==t.AdContext.DAI_SSB?d=s:((null==o?void 0:o.assetKey)||(null==o?void 0:o.contentSourceId))&&(d=o,p=!0),i||!l?{error:c,msg:u}:(l===t.AdContext.DAI_SDK||l===t.AdContext.DAI_API?d.isLive?(c=C.isEmpty(d.assetKey),u="Missing assetKey"):(c=p&&C.isEmpty(d.videoId)||!p&&C.isEmpty(d.daiVideoId),u="Missing video id"):l===t.AdContext.DAI_SSB&&(c=!p&&C.isEmpty(d.ssbStreamUrl)&&C.isEmpty(null===(r=e.location)||void 0===r?void 0:r.mediaUrl)||p&&C.isEmpty(null===(n=e.location)||void 0===n?void 0:n.mediaUrl),u="Missing asset url for SSB"),{error:c,msg:c?u:""})},e}(),zn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){switch(e.name){case vi.PREP_RESOURCE_COLLECTION:this.prepResourceCollection(e);break;case vi.REGISTER_RESOURCE:this.registerResource(e)}},i.prototype.prepResourceCollection=function(e){if(e.body.resource){var t=new Ei(e.body.resource);this.validateResource(t)}else this.invalidResource(ct.messages.RESOURCE_MISSING)},i.prototype.validateResource=function(e){var t=Yn.validate(e);t.error?this.invalidResource(t.msg):this.facade.sendNotification(this.cmsDataRetrievalRequired(e)?vi.RETRIEVE_RESOURCE:vi.TRANSFORM_RESOURCE,{resource:e},mi.INTERNAL)},i.prototype.registerResource=function(e){var t=e.body.resource;this.facade.sendNotification(vi.PLAY_RESOURCE,t,mi.INTERNAL)},i.prototype.cmsDataRetrievalRequired=function(e){return!(C.isEmpty(e.location.cms)||C.isEmpty(e.location.tokenMap)&&C.isEmpty(e.location.cmsUri))},i.prototype.invalidResource=function(e){this.log(t.LogLevel.ERROR,ct.messages.INVALID_RESOURCE),this.facade.sendNotification(vi.RESOURCE_ERROR,{message:"".concat(ct.messages.INVALID_RESOURCE,": ").concat(e),code:t.ErrorCode.INVALID_RESOURCE_FORMAT,fatal:!0},mi.INTERNAL)},i}(Wi),$n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.execute=function(e){var t;switch(e.name){case vi.RESOURCE_COMPLETE:var i=this.getProxy(zt.Playlist);return void(i&&i.next());case vi.RESOURCE_END:case vi.RESOURCE_INTERRUPTED:this.facade.retrieveMediator(hi.TIMER_MEDIATOR).killTimer(),this.sendNotification(vi.KILL_RESOURCE_PRESENTATION);var r=this.facade.retrieveMediator(hi.UI);r&&r.resetUi();break;case vi.CONTENT_BUFFERING:case vi.AD_BUFFERING:var n=this.facade.retrieveProxy(zt.PlayerDomProxy),a=null==n?void 0:n.getMain();null==a||a.setAttribute("aria-busy",e.body.value.toString());break;case vi.AD_BREAK_START:var o=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR);null===(t=null==o?void 0:o.adapter)||void 0===t||t.clearCue()}this.sendNotification(vi.APP_EVENT,{notificationName:e.name,data:e.body})},t}(Wi),qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.execute=function(e){var t=e.name,i=e.body,r=this.facade.retrieveProxy(zt.PlayerDomProxy);if(r){var n=r.getMain();n.setAttribute("role","region");var a=n.getAttribute("tabindex")||"0";n.setAttribute("tabindex",a)}this.sendNotification(vi.APP_EVENT,{notificationName:t,data:i})},t}(Wi),Qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.execute=function(e){var t=this.getModel(yi.PresentationState),i=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR);t.suspended=!1,i.resume();var r=this.getProxy(zt.ContentPlaybackStateProxy);this.sendNotification(vi.PLAYBACK_RESUMED,{contentTime:r.model.time})},t}(Wi),Xn=function(){function e(e){var t=e.errorRecovery||null,i=null;if(e.url)this.retrieveResource(e.url,e.responseType,e.callback,t,e.timeout);else if(e.uriTemplate&&e.tokenMap){var r=this.replaceUriTokens(e.uriTemplate,e.tokenMap);this.retrieveResource(r,e.responseType,e.callback,t,e.timeout)}else i="Invalid options passed to CmsDataRetriever.";i&&e.callback&&e.callback(null,{status:0,error:!0,url:"n/a",message:i})}return e.prototype.replaceUriTokens=function(e,t){var i=e;if(t)for(var r in t)i=i.replace(r,t[r]);return i},e.prototype.retrieveResource=function(e,t,i,r,n){void 0===r&&(r=null),Ye({responseType:t,timeout:n,url:e,errorRecovery:r}).then(function(e){return null==i?void 0:i(e,null)}).catch(function(e){return null==i?void 0:i(null,e)})},e}(),Jn=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var i=this,r=e.body.resource,n=r&&r.location,a=n&&n.cms||null,o=this.getConfig(a);if(o&&(o.uriTemplate&&n.tokenMap||n.cmsUri)){var s=this.getModel(yi.PlayerOptions),l={uriTemplate:o.uriTemplate,tokenMap:n&&n.tokenMap||null,url:n&&n.cmsUri||null,responseType:o.responseType,errorRecovery:s.networkErrorRecovery,timeout:o.timeout||s.networkTimeout,callback:function(e,n){if(n)return i.log(t.LogLevel.ERROR,n.status,n.message),void i.sendNotification(vi.RESOURCE_ERROR,{code:t.ErrorCode.SELECTOR_CALL_ERROR,message:n.message,fatal:!0},mi.INTERNAL);i.sendNotification(vi.TRANSFORM_RESOURCE,{resource:r,data:e},mi.INTERNAL)}};new Xn(l)}else this.log(t.LogLevel.ERROR,"RetrieveResourceCommand: ".concat(ct.messages.UNEXPECTED_CONDITION,"; CMS config error."))},i.prototype.getConfig=function(e){var t=this.getModel(yi.PlayerOptions).dataTransformers;return e&&t&&t[e]&&t[e].objectRef&&t[e].responseType?t[e]:null},i}(Wi),Zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.execute=function(e){var t=this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR);this.sendNotification(vi.RESOURCE_START),t.start()},t}(Wi),ea=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.execute=function(e){var t=this.getModel(yi.PresentationState);this.facade.retrieveMediator(hi.PRESENTATION_MEDIATOR).suspend(),t.suspended=!0;var i=this.getProxy(zt.ContentPlaybackStateProxy);this.sendNotification(vi.PLAYBACK_SUSPENDED,{contentTime:i.model.time})},t}(Wi),ta=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return s(i,e),i.prototype.execute=function(e){var t,i,r=this,n=e.body.resource,a=e.body.data||null,o=null===(i=null===(t=this.getModel(yi.PlayerOptions).dataTransformers)||void 0===t?void 0:t[n.location.cms])||void 0===i?void 0:i.objectRef;Promise.resolve().then(function(){return o?r.transform(n,a,o):n}).then(function(e){r.sendNotification(vi.REGISTER_RESOURCE,{resource:e},mi.INTERNAL)}).catch(function(e){var t=r.getCodeForError(e),i=e.message||ct.messages.CMS_RESOURCE_UNAVAILABLE;r.sendNotification(vi.RESOURCE_ERROR,{code:t,message:i,fatal:!0},mi.INTERNAL)})},i.prototype.transform=function(e,i,r){var n,a=C.isFunction(r.transform)?r:new r,o=null===(n=a.transform)||void 0===n?void 0:n.call(a,i,e);return Promise.resolve(o).then(function(e){if(null==e?void 0:e.error)throw e.data;var i=Yn.validate(e);if(i.error){var r=new Error(i.msg);throw r.code=t.ErrorCode.INVALID_RESOURCE_FORMAT,r}return e})},i.prototype.getCodeForError=function(e){return"mpx"===e.cms?this.getCodeForMpxError(e):e.code?e.code:t.ErrorCode.RESOURCE_UNAVAILABLE},i.prototype.getCodeForMpxError=function(e){switch(e?e.exception:null){case"DomainBlocked":return t.ErrorCode.DOMAIN_BLOCKED;case"GeoLocationBlocked":return t.ErrorCode.GEO_LOCATION_BLOCKED;case"IpBlocked":return t.ErrorCode.IP_BLOCKED;case"SatelliteProviderBlocked":return t.ErrorCode.SATELLITE_PROVIDER_BLOCKED;case"Expired":return t.ErrorCode.EXPIRED;default:return t.ErrorCode.RESOURCE_UNAVAILABLE}},i}(Wi),ia=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.copyNoticeStyle="position: absolute; z-Index: 900000000; top: 0; right: 0; width: 180px; background: #fc0; color: #000; font-family: Arial, sans-serif; text-align: center; height: 64px; line-height: 64px; font-size: 32px",t}return s(t,e),t.prototype.execute=function(e){var t=e.body&&e.body.action;switch(t){case Je.DIAGNOSTIC_PLUGIN:var i=this.facade.retrieveMediator(hi.PLUGIN_MEDIATOR);i&&i.toggleDiagnosticPlugin();break;case Je.CONFIG_TO_CLIPBOARD:case Je.CONFIG_TO_TEST_PAGE:var r=t===Je.CONFIG_TO_CLIPBOARD,n=this.getSerializedData();r&&(this.copyToClipboard(n),this.displayCopyNotice());break;default:this.sendNotification(vi.APP_EVENT,{notificationName:e.name,data:e.body})}},t.prototype.displayCopyNotice=function(){var e=this.facade.retrieveProxy(zt.PlayerDomProxy).getMain(),t=document.createElement("div");t.setAttribute("style",this.copyNoticeStyle),t.innerHTML="Copied!",e.appendChild(t),setTimeout(function(){return e.removeChild(t)},2500)},t.prototype.copyToClipboard=function(e){var t=document.createElement("textarea");t.setAttribute("style","position: absolute; top: -120px;"),document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)},t.prototype.getSerializedData=function(){return this.facade.retrieveMediator(hi.APPLICATION).getConfigAsJson()},t}(Wi),ra=((Un={})[vi.DEFAULT]=null,Un[vi.BOOT_APP]=Mr,Un[vi.READY]=qn,Un[vi.PLAY_ON_USER_GESTURE]=Hr,Un[vi.PLAY]=Hr,Un[vi.PAUSE]=Hr,Un[vi.STOP]=Hr,Un[vi.SEEK]=Hr,Un[vi.SEEK_FORWARD]=Hr,Un[vi.SEEK_BACK]=Hr,Un[vi.SEEK_TO_LIVE]=Hr,Un[vi.MUTE]=Hr,Un[vi.UNMUTE]=Hr,Un[vi.VOLUME_CHANGE]=Hr,Un[vi.SWITCH_AUDIO_TRACK]=Hr,Un[vi.SWITCH_TEXT_TRACK]=Hr,Un[vi.SWITCH_TEXT_MODE]=Hr,Un[vi.PLAYBACK_STATE_CHANGE]=$n,Un[vi.SUSPEND_PLAYBACK]=ea,Un[vi.RESUME_PLAYBACK]=Qn,Un[vi.SWITCH_BITRATE]=Yi,Un[vi.SWITCH_QUALITY_CATEGORY]=Yi,Un[vi.AUTO_QUALITY_SWITCHING]=Yi,Un[vi.MIN_BITRATE]=Yi,Un[vi.MAX_BITRATE]=Yi,Un[vi.PREP_RESOURCE_COLLECTION]=zn,Un[vi.REGISTER_RESOURCE]=zn,Un[vi.REGISTER_RESOURCE]=zn,Un[vi.RETRIEVE_RESOURCE]=Jn,Un[vi.TRANSFORM_RESOURCE]=ta,Un[vi.START_PRESENTATION]=Zn,Un[vi.PLAYLIST_ADVANCED]=Kr,Un[vi.PLAYLIST_COMPLETE]=Kr,Un[vi.PLAYLIST_CLEARED]=Kr,Un[vi.PLAYLIST_CURRENT_RESOURCE_CLEARED]=Kr,Un[vi.PLAY_RESOURCE]=Wn,Un[vi.KILL_RESOURCE_PRESENTATION]=Br,Un[vi.RESOURCE_INTERRUPTED]=$n,Un[vi.VIDEO_START_ERROR]=Ur,Un[vi.VIDEO_PLAYBACK_ERROR]=Ur,Un[vi.RESOURCE_ERROR]=Ur,Un[vi.AD_ERROR]=Ur,Un[vi.AD_STALLED]=Ur,Un[vi.PLAYBACK_SUSPENDED]=$n,Un[vi.PLAYBACK_RESUMED]=$n,Un[vi.POSTER_CLICK]=$n,Un[vi.PLAYLIST_CHANGE]=$n,Un[vi.RESOURCE_START]=$n,Un[vi.VIDEO_PROGRESS]=$n,Un[vi.QUALITY_CHANGE]=$n,Un[vi.QUALITY_INFO_CHANGE]=$n,Un[vi.CDN_CHANGE]=$n,Un[vi.DRM_KEYSYSTEM_CREATED]=$n,Un[vi.PRESENTATION_SIZE_CHANGE]=$n,Un[vi.FULLSCREEN_ENTER]=$n,Un[vi.FULLSCREEN_EXIT]=$n,Un[vi.CONTENT_TIME_UPDATE]=$n,Un[vi.CONTENT_BUFFERING]=$n,Un[vi.CONTENT_START]=$n,Un[vi.CONTENT_DURATION_AVAILABLE]=$n,Un[vi.CONTENT_SEGMENT_START]=$n,Un[vi.CONTENT_PLAYING]=$n,Un[vi.CONTENT_PAUSED]=$n,Un[vi.CONTENT_SEEKING]=$n,Un[vi.CONTENT_SEEKED]=$n,Un[vi.SEEK_REDIRECT_START]=$n,Un[vi.SEEK_REDIRECT_COMPLETE]=$n,Un[vi.CONTENT_SEGMENT_END]=$n,Un[vi.CONTENT_COMPLETE]=$n,Un[vi.CONTENT_IS_LIVE_CHANGED]=$n,Un[vi.STREAM_TYPE_CHANGE]=$n,Un[vi.STREAM_METADATA]=$n,Un[vi.STREAM_ID_AVAILABLE]=$n,Un[vi.RESOURCE_END]=$n,Un[vi.RESOURCE_COMPLETE]=$n,Un[vi.AD_SEGMENT_START]=$n,Un[vi.AD_SEGMENT_END]=$n,Un[vi.AD_CUEPOINTS_AVAILABLE]=$n,Un[vi.AD_BREAK_START]=$n,Un[vi.AD_BREAK_METADATA]=$n,Un[vi.AD_BREAK_COMPLETE]=$n,Un[vi.AD_START]=$n,Un[vi.AD_PAUSED]=$n,Un[vi.AD_PLAYING]=$n,Un[vi.AD_TIME_UPDATE]=$n,Un[vi.AD_FIRST_QUARTILE]=$n,Un[vi.AD_MIDPOINT]=$n,Un[vi.AD_THIRD_QUARTILE]=$n,Un[vi.AD_COMPLETE]=$n,Un[vi.AD_BREAK_COMPLETE]=$n,Un[vi.AD_STALLED]=$n,Un[vi.AD_STALLED]=$n,Un[vi.AD_BUFFERING]=$n,Un[vi.AD_CLICK]=$n,Un[vi.AD_SKIPPED]=$n,Un[vi.VIDEO_LOAD_COMPLETE]=$n,Un[vi.METADATA_CUEPOINT]=$n,Un[vi.TEXT_CUEPOINT]=$n,Un[vi.TEXT_TRACK_DISPLAY_MODE_CHANGE]=$n,Un[vi.TEXT_TRACK_CHANGE]=$n,Un[vi.TEXT_TRACK_INFO_CHANGE]=$n,Un[vi.TEXT_TRACK_AVAILABLE]=$n,Un[vi.AUDIO_TRACK_INFO_CHANGE]=$n,Un[vi.AUDIO_TRACK_CHANGE]=$n,Un[vi.THUMBNAIL_TRACK_AVAILABLE]=$n,Un[vi.BEFORE_CONTROLS_VISIBLE]=$n,Un[vi.BEFORE_CONTROLS_HIDDEN]=$n,Un[vi.CONTROLS_VISIBLE]=$n,Un[vi.CONTROLS_HIDDEN]=$n,Un[vi.MOUSE_ENTER_PRESENTATION]=$n,Un[vi.MOUSE_LEAVE_PRESENTATION]=$n,Un[vi.USER_PAUSE]=$n,Un[vi.USER_SETTINGS_REQUEST]=$n,Un[vi.AUTOPLAY_BLOCKED]=$n,Un[vi.PLAYLIST_OUT_OF_RANGE]=$n,Un[vi.HOTKEY_ACTION]=$n,Un[vi.CHANGE_LANGUAGE]=Vr,Un[vi.LANGUAGE_CHANGE]=Vr,Un[vi.USER_KEY_COMMAND]=ia,Un[vi.METRIC]=Fr,Un),na=function(e){function i(t){var i=e.call(this,C.assign({commandMap:ra,id:t.playerOptions.id||null},t))||this;return i.pIsReady=!1,i.api=Ki({},i),i.target=i.api,i.init(),i}return s(i,e),i.prototype.initialize=function(){var e=this,i=this.modelCollectionProxy.getModel(yi.PlayerOptions),r=i.plugins||[],n=this.getApi(),a={name:vi.CHANGE_LANGUAGE,body:{value:i.language},type:mi.INTERNAL};return this.addNativePlugins(r,i),n.registerPlugins(r).then(function(){return e.localization.registerLocalizationData(i.localization),e.sendAsyncNotification(a,[t.PlayerEvent.LANGUAGE_CHANGE])}).then(function(){return e.pIsReady=!0,e.sendNotification(vi.READY,n),n}).catch(function(e){throw I.error(e),e})},i.prototype.destroy=function(){var t=this,i=e.prototype.destroy.bind(this);return this.killCurrentResource().then(function(){t.appMediator&&t.appMediator.prepForPlayerRemoval(),t.apiAccessors=null,t.apiMethods=null,i()}).catch(function(e){throw I.error(e),e})},i.prototype.getApi=function(){return this.api},i.prototype.killCurrentResource=function(){return this.appMediator.killCurrentResource()},i.prototype.hasListenerFor=function(t){return e.prototype.hasListenerFor.call(this,Ni.checkEventName(t))},i.prototype.on=function(t,i){e.prototype.on.call(this,Ni.checkEventName(t),i)},i.prototype.once=function(t,i){e.prototype.once.call(this,Ni.checkEventName(t),i)},i.prototype.off=function(t,i){e.prototype.off.call(this,Ni.checkEventName(t),i)},Object.defineProperty(i.prototype,"isReady",{get:function(){return this.pIsReady},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this.appId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this.appMediator.getDimensions()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"muted",{get:function(){return this.appMediator.getMuteState()},set:function(e){var t=e?vi.MUTE:vi.UNMUTE;this.transmitExtRequest(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this.appMediator.getVolume()},set:function(e){this.transmitExtRequest(vi.VOLUME_CHANGE,{value:e})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"language",{get:function(){return this.localization.language},set:function(e){this.transmitExtRequest(vi.CHANGE_LANGUAGE,{value:e})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentTime",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.time:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentDuration",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.duration:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"streamTime",{get:function(){return this.modelCollectionProxy.getModel(yi.PresentationState).streamTime},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"streamDuration",{get:function(){return this.modelCollectionProxy.getModel(yi.PresentationState).streamDuration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"playbackState",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.state:t.PlaybackState.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"playlist",{get:function(){var e=this.facade.retrieveProxy(zt.Playlist);return e?e.getApi():null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoQualitySwitching",{get:function(){return!!this.contentPlaybackStateProxy&&this.contentPlaybackStateProxy.qualitySwitchingMode===t.QualityMode.AUTO},set:function(e){this.contentPlaybackStateReady?this.transmitExtRequest(vi.AUTO_QUALITY_SWITCHING,{value:e}):this.log(ct.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"qualityInfo",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.qualityInfo:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bitrate",{get:function(){var e=this.qualityInfo.quality||{bitrate:NaN};return null!=e.bitrate?e.bitrate:NaN},set:function(e){this.contentPlaybackStateReady?this.transmitExtRequest(vi.SWITCH_BITRATE,{value:e}):this.log(ct.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"qualityCategory",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.userQualityCategory:null},set:function(e){this.contentPlaybackStateReady?this.transmitExtRequest(vi.SWITCH_QUALITY_CATEGORY,{value:e}):this.log(ct.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minBitrate",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.minBitrate:NaN},set:function(e){this.contentPlaybackStateReady?this.transmitExtRequest(vi.MIN_BITRATE,{value:e}):this.log(ct.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.maxBitrate:NaN},set:function(e){this.contentPlaybackStateReady?this.transmitExtRequest(vi.MAX_BITRATE,{value:e}):this.log(ct.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"audioTrackInfo",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"audioTrack",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks.track:null},set:function(e){this.contentPlaybackStateReady?this.transmitExtRequest(vi.SWITCH_AUDIO_TRACK,{value:e}):this.log(ct.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),i.prototype.attachResource=function(e){return this.appMediator.attachResource(e)},Object.defineProperty(i.prototype,"resource",{get:function(){return this.appMediator.getCurrentResource()},set:function(e){Ni.setResource(this.appMediator,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackEnabled",{get:function(){return this.facade.retrieveProxy(zt.TextTrackProxy).enabled},set:function(e){this.transmitExtRequest(vi.SWITCH_TEXT_MODE,{value:e})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrack",{get:function(){return this.textTrackInfo?this.textTrackInfo.track:null},set:function(e){this.contentPlaybackStateReady?this.transmitExtRequest(vi.SWITCH_TEXT_TRACK,{value:e}):this.log(ct.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textTrackInfo",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.textTrackInfo:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"streamType",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.streamType:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isPlayingLive",{get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return!0===(null==e?void 0:e.isPlayingLive)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveStreamUtcStart",{get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteStart:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveStreamUtcTime",{get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteTime:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"liveStreamUtcDuration",{get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteDuration:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSuspended",{get:function(){return this.appMediator.isPlaybackSuspended()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fullscreenElement",{get:function(){return this.appMediator.getFullscreenElement()},set:function(e){this.appMediator.setFullscreenElement(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pausable",{get:function(){var e;return!0===(null===(e=this.opts.playerOptions.overrides)||void 0===e?void 0:e.liveStreamPausable)||this.streamType!==t.StreamType.LIVE},enumerable:!1,configurable:!0}),i.prototype.enterFullscreen=function(){this.transmitExtRequest(vi.ENTER_FULLSCREEN_REQUEST)},i.prototype.exitFullscreen=function(){this.transmitExtRequest(vi.EXIT_FULLSCREEN_REQUEST)},i.prototype.play=function(){this.recordMetric(t.MetricType.API,t.ApiMetric.PLAY),this.appMediator.isPlaybackSuspended()&&this.transmitExtRequest(vi.RESUME_PLAYBACK);var e={name:vi.PLAY,type:mi.EXTERNAL};return this.sendAsyncNotification(e,[t.PlayerEvent.CONTENT_PLAYING,t.PlayerEvent.AD_PLAYING],[t.PlayerEvent.AUTOPLAY_BLOCKED,t.PlayerEvent.VIDEO_PLAYBACK_ERROR,t.PlayerEvent.AD_ERROR])},i.prototype.pause=function(){if(this.recordMetric(t.MetricType.API,t.ApiMetric.PAUSE),this.pausable){var e={name:vi.PAUSE,type:mi.EXTERNAL};return this.sendAsyncNotification(e,[t.PlayerEvent.CONTENT_PAUSED,t.PlayerEvent.AD_PAUSED])}return this.log(ct.messages.PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED),this.stop()},i.prototype.togglePlayPause=function(){return this.playbackState===t.PlaybackState.PLAYING?this.pause():this.play()},i.prototype.seek=function(e){var i=this.appMediator.validateSeek(e,this.contentDuration);if(null===i)return Promise.resolve();this.recordMetric(t.MetricType.API,t.ApiMetric.SEEK,e);var r={name:vi.SEEK,body:{value:i},type:mi.EXTERNAL};return this.sendAsyncNotification(r,[t.PlayerEvent.SEEK_COMPLETE],[t.PlayerEvent.VIDEO_PLAYBACK_ERROR,t.PlayerEvent.AD_ERROR])},i.prototype.getModelSnapshot=function(){return Ni.getModelSnapShot(this.appMediator)},i.prototype.getAdBreakTimes=function(){return this.appMediator.getAdBreakTimes()||[]},i.prototype.grabFrame=function(){return this.appMediator.grabFrame()},i.prototype.getThumbnail=function(e){var t;return null===(t=this.contentPlaybackStateProxy)||void 0===t?void 0:t.getThumbnail(e)},i.prototype.getContainerRect=function(){return this.appMediator.getContainerRect()},i.prototype.registerPlugins=function(e,t){var i=this;return new Promise(function(r,n){i.transmitExtRequest(vi.LOAD_PLUGINS,{plugins:e,callback:function(){"function"==typeof t&&t(),r()}})})},i.prototype.removePlugin=function(e){this.transmitExtRequest(vi.REMOVE_PLUGIN,{name:e})},i.prototype.registerAdapter=function(e){return this.adapters.registerAdapter(e)},i.prototype.retrieveAdapter=function(e){return this.adapters.retrieveAdapter(e)},i.prototype.removeAdapter=function(e){return this.adapters.removeAdapter(e)},i.prototype.registerHook=function(e,t){return this.hooks.registerHook(e,t)},i.prototype.removeHook=function(e,t){return this.hooks.removeHook(e,t)},i.prototype.getPlugin=function(e){return this.appMediator.getPlugin(e)},i.prototype.loadNativePlugin=function(e,t){return this.appMediator.loadNativePlugin(e,t).then(function(t){if(!t)throw new Error("Unable to load plugin ".concat(e));return t})},i.prototype.stop=function(){return this.appMediator.stopPresentation()},i.prototype.goLive=function(){this.streamType&&this.streamType!==t.StreamType.VOD&&(this.recordMetric(t.MetricType.API,t.ApiMetric.GO_LIVE),this.transmitExtRequest(vi.SEEK_TO_LIVE))},i.prototype.skipAd=function(){this.appMediator.skipAd()},i.prototype.focus=function(e){var t=this.dom.getMain();t&&t.focus(e)},i.prototype.blur=function(){var e=this.dom.getMain();e&&e.blur()},i.prototype.getConfigAsJson=function(e){return this.appMediator.getConfigAsJson(e)},i.prototype.getAutoplayCapabilities=function(){return this.appMediator.getAutoplayCapabilities()},i.prototype.suspendPlayback=function(){var e=this;this.appMediator.isPlaybackSuspended()||this.pause().then(function(){e.transmitExtRequest(vi.SUSPEND_PLAYBACK)})},i.prototype.resumePlayback=function(){this.appMediator.isPlaybackSuspended()&&this.transmitExtRequest(vi.RESUME_PLAYBACK)},i.prototype.recordMetric=function(e,t,i){this.sendNotification(vi.METRIC,new Ft(t,i,e))},i.prototype.sendEvent=function(e,t){this.emit(e,t)},i.prototype.sendErrorEvent=function(e){this.dispatchEvt(e)},i.prototype.addNativePlugins=function(e,t){var i=t.nativePlugins;(null==i?void 0:i.length)&&i.forEach(function(i){e.push(wi.getNativePluginConfig(i,t))})},Object.defineProperty(i.prototype,"contentPlaybackStateProxy",{get:function(){return this.facade.retrieveProxy(zt.ContentPlaybackStateProxy)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentPlaybackStateReady",{get:function(){var e;return(null===(e=this.contentPlaybackStateProxy)||void 0===e?void 0:e.isReady)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localization",{get:function(){return this.facade.retrieveProxy(zt.LocalizationProxy)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dom",{get:function(){return this.facade.retrieveProxy(zt.PlayerDomProxy)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adapters",{get:function(){return this.facade.retrieveProxy(zt.AdapterProxy)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hooks",{get:function(){return this.facade.retrieveProxy(zt.HookProxy)},enumerable:!1,configurable:!0}),i.prototype.transmitExtRequest=function(e,t){this.sendNotification(e,t,mi.EXTERNAL)},i.prototype.log=function(e,i){var r=i||t.LogLevel.DEBUG;this.facade.log(r,e)},i.prototype.init=function(){this.facade.registerProxy(new Di(zt.HookProxy));var e=this.opts.globalServices,i=this.opts.playerOptions.logLevel?this.opts.playerOptions.logLevel:t.LogLevel.OFF;this.createLoggingService(i),this.facade.log(t.LogLevel.INFO,"".concat(it.playerName,"; Ver. ").concat(it.playerVersion,"  ").concat(it.buildTime)),this.registerGlobalServices(e),this.createApplicationMediator(hi.APPLICATION),delete this.opts.globalServices,this.sendNotification(vi.BOOT_APP,{playerOptions:this.opts.playerOptions||null,app:this},mi.INTERNAL)},i.prototype.sendAsyncNotification=function(e,i,r){var n=this;return void 0===r&&(r=[]),new Promise(function(a,o){var s;r.push(t.PlayerEvent.FATAL_ERROR);var l=function(e){s=setTimeout(function(){u(),a(e)},0)},c=function(e){clearTimeout(s),u(),o(e)},u=function(){i.forEach(function(e){return n.off(e,l)}),r.forEach(function(e){return n.off(e,c)})};try{i.forEach(function(e){return n.on(e,l)}),r.forEach(function(e){return n.on(e,c)}),n.sendNotification(e.name,e.body,e.type)}catch(e){c(e)}})},u([Fi()],i.prototype,"hasListenerFor",null),u([Fi()],i.prototype,"on",null),u([Fi()],i.prototype,"once",null),u([Fi()],i.prototype,"off",null),u([Hi()],i.prototype,"isReady",null),u([Hi()],i.prototype,"id",null),u([Hi()],i.prototype,"dimensions",null),u([Hi()],i.prototype,"muted",null),u([Hi()],i.prototype,"volume",null),u([Hi()],i.prototype,"language",null),u([Hi()],i.prototype,"contentTime",null),u([Hi()],i.prototype,"contentDuration",null),u([Hi()],i.prototype,"streamTime",null),u([Hi()],i.prototype,"streamDuration",null),u([Hi()],i.prototype,"playbackState",null),u([Hi()],i.prototype,"playlist",null),u([Hi()],i.prototype,"autoQualitySwitching",null),u([Hi()],i.prototype,"qualityInfo",null),u([Hi()],i.prototype,"bitrate",null),u([Hi()],i.prototype,"qualityCategory",null),u([Hi()],i.prototype,"minBitrate",null),u([Hi()],i.prototype,"maxBitrate",null),u([Hi()],i.prototype,"audioTrackInfo",null),u([Hi()],i.prototype,"audioTrack",null),u([Fi()],i.prototype,"attachResource",null),u([Hi()],i.prototype,"resource",null),u([Hi()],i.prototype,"textTrackEnabled",null),u([Hi()],i.prototype,"textTrack",null),u([Hi()],i.prototype,"textTrackInfo",null),u([Hi()],i.prototype,"streamType",null),u([Hi()],i.prototype,"isPlayingLive",null),u([Hi()],i.prototype,"liveStreamUtcStart",null),u([Hi()],i.prototype,"liveStreamUtcTime",null),u([Hi()],i.prototype,"liveStreamUtcDuration",null),u([Hi()],i.prototype,"isSuspended",null),u([Hi()],i.prototype,"fullscreenElement",null),u([Hi()],i.prototype,"pausable",null),u([Fi()],i.prototype,"enterFullscreen",null),u([Fi()],i.prototype,"exitFullscreen",null),u([Fi()],i.prototype,"play",null),u([Fi()],i.prototype,"pause",null),u([Fi()],i.prototype,"togglePlayPause",null),u([Fi()],i.prototype,"seek",null),u([Fi()],i.prototype,"getModelSnapshot",null),u([Fi()],i.prototype,"getAdBreakTimes",null),u([Fi()],i.prototype,"grabFrame",null),u([Fi()],i.prototype,"getThumbnail",null),u([Fi()],i.prototype,"getContainerRect",null),u([Fi()],i.prototype,"registerPlugins",null),u([Fi()],i.prototype,"removePlugin",null),u([Fi()],i.prototype,"registerAdapter",null),u([Fi()],i.prototype,"retrieveAdapter",null),u([Fi()],i.prototype,"removeAdapter",null),u([Fi()],i.prototype,"registerHook",null),u([Fi()],i.prototype,"removeHook",null),u([Fi()],i.prototype,"getPlugin",null),u([Fi()],i.prototype,"loadNativePlugin",null),u([Fi()],i.prototype,"stop",null),u([Fi()],i.prototype,"goLive",null),u([Fi()],i.prototype,"skipAd",null),u([Fi()],i.prototype,"focus",null),u([Fi()],i.prototype,"blur",null),u([Fi()],i.prototype,"getConfigAsJson",null),u([Fi()],i.prototype,"getAutoplayCapabilities",null),u([Fi()],i.prototype,"suspendPlayback",null),u([Fi()],i.prototype,"resumePlayback",null),u([Fi()],i.prototype,"recordMetric",null),i}(Vi),aa=function(){function e(){}return e.createVideoPlayer=function(e,t){this.initialized?this.createVideoPlayerApp({options:e,callback:t}):(this.pendingPlayerRequests.push({options:e,callback:t}),null===this.initializing&&this.initialize(e))},e.createVideoPlayerApp=function(e){var t=e.options.container,i=!1;if((this.serviceCollection[ze.System].isWebMaf||null!=t&&(t.constructor===HTMLDivElement||"object"==typeof t&&"function"==typeof t.getBoundingClientRect||"string"==typeof t&&null!=document.querySelector(t)))&&(i=!0),!i){var r="Invalid player configuration: Missing presentation container.";I.error(r),e.callback(null,{message:r})}try{var n=new na({globalServices:this.serviceCollection,playerOptions:e.options});this.playerCollection[n.appId]=n,n.initialize().then(function(t){return e.callback(t,null)}).catch(function(t){return e.callback(null,t)})}catch(t){t.key&&(t.message='A player with id "'.concat(t.key,'" a already exists')),e.callback(null,t)}},e.retrieveVideoPlayer=function(e){var t=this.playerCollection[e];if(t)return Promise.resolve(t);var i=this.pendingPlayerDestroys[e];if(i)return i.then(function(){return null});var r=C.find(this.pendingPlayerRequests,function(t){return t.options.id==e});return r?new Promise(function(e,t){var i=r.callback;r.callback=function(r,n){i(r,n),n?t(n):e(r)}}):Promise.resolve(null)},e.removeVideoPlayer=function(e){var t=this,i=this.pendingPlayerDestroys[e];if(i)return i;var r=this.playerCollection[e];return r?(delete this.playerCollection[e],this.pendingPlayerDestroys[e]=r.destroy().then(function(){delete t.pendingPlayerDestroys[e],I.log('[Avia] Player with id "'.concat(e,'" removed.'))})):Promise.resolve()},e.createResourceConfig=function(e){return new Ei(e)},e.getSysInfoForUser=function(){if(null===this.serviceCollection)return null;var e=C.assign({},si.info),t=this.serviceCollection[ze.MediaCapabilities].capabilities;return e.hasMediaSource=t.hasMediaSource,e.supportsNativeHls=t.supportsNativeHls,e},e.getPlatformInfo=function(){return new Promise(function(e,t){var i=ui.getInstance();(null==i?void 0:i.info)?e(i.info):t(null)})},e.processPending=function(){for(var e=this.pendingPlayerRequests.length,t=0;t<e;t++)this.createVideoPlayerApp(this.pendingPlayerRequests[t]),this.pendingPlayerRequests[t]=null;this.pendingPlayerRequests=[]},e.initialize=function(e){var t=this;this.initializing=!0;var i=ui.getInstance();i.appNamespace=ha;var r=Ai.getInstance(),n=di.getInstance(),a=e.overrides,o=!0===(null==a?void 0:a.deferAutoplayDetection);return Promise.all([r.detectCapabilities(),!o&&n.detectCapabilities(null==a?void 0:a.blankVideoUrl)]).then(function(){var e;t.serviceCollection=((e={})[ze.System]=i,e[ze.MediaCapabilities]=r,e[ze.AutoplayCapabilities]=n,e),t.initialized=!0,t.initializing=!1,t.processPending()})},e.serviceCollection=null,e.playerCollection={},e.initialized=!1,e.initializing=null,e.pendingPlayerRequests=[],e.pendingPlayerDestroys={},e}();function oa(e,t){return new Promise(function(i,r){aa.createVideoPlayer(e,function(e,n){Qe.isFunction(t)&&t(e,n),null!=n?r(n):i(e)})})}function sa(e){return aa.retrieveVideoPlayer(e)}function la(e){return aa.removeVideoPlayer(e)}function ca(e){return aa.createResourceConfig(e)}function ua(){return aa.getSysInfoForUser()}function da(){return aa.getPlatformInfo()}function pa(e){return di.getInstance().detectCapabilities(e)}var ha=c(c({},Xt),{createVideoPlayer:oa,retrieveVideoPlayer:sa,removeVideoPlayer:la,createResourceConfig:ca,getSystemInfo:ua,getPlatformInfo:da,getAutoplayCapabilities:pa});Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n}),t.BaseClass=y,t.CoreEvent=v,t.Emitter=_,t.ErrorMessage=Qt,t.FileExtensionToMimeType=E,t.HookError=Wt,t.Logger=I,t.Metric=Ft,t.PlaybackAdapterBase=Vt,t.PlayerError=Yt,t.QueryString=We,t.Timer=$t,t.Util=Qe,t.WILDCARD="*",t.buildInfo=it,t.core=Ht,t.createResourceConfig=ca,t.createVideoPlayer=oa,t.getAutoplayCapabilities=pa,t.getPlatformInfo=da,t.getSystemInfo=ua,t.removeVideoPlayer=la,t.request=Ye,t.retrieveVideoPlayer=sa,t.util=qt,t.waitForEvent=dt,t.waitForTime=pt,t.waitUntil=ut,Object.defineProperty(t,"__esModule",{value:!0})}(t),Object.defineProperty(self,"cvp",{get:()=>(avia.Logger.deprecated("The cvp namespace is deprecated. Access will be completely removed April 1st, 2022"),self.avia),enumerable:!1,configurable:!1})}).call(this,i(4),i(18))},function(e,t){var i,r,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function y(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=y,n.addListener=y,n.once=y,n.off=y,n.removeListener=y,n.removeAllListeners=y,n.emit=y,n.prependListener=y,n.prependOnceListener=y,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"ActiveMode",function(){return Se}),i.d(t,"AviaAccessibility",function(){return bt}),i.d(t,"AviaActive",function(){return St}),i.d(t,"AviaAdControlBar",function(){return Ct}),i.d(t,"AviaAdProgressBar",function(){return _t}),i.d(t,"AviaButton",function(){return Pt}),i.d(t,"AviaControlBar",function(){return It}),i.d(t,"AviaControlBarCompact",function(){return Rt}),i.d(t,"AviaCurrentTime",function(){return kt}),i.d(t,"AviaDuration",function(){return Nt}),i.d(t,"AviaFullscreenToggle",function(){return Ot}),i.d(t,"AviaLiveControl",function(){return Lt}),i.d(t,"AviaMuteToggle",function(){return Dt}),i.d(t,"AviaOverlay",function(){return Mt}),i.d(t,"AviaPlayCta",function(){return wt}),i.d(t,"AviaPlayOverlay",function(){return xt}),i.d(t,"AviaPlayToggle",function(){return Ut}),i.d(t,"AviaPoster",function(){return Bt}),i.d(t,"AviaProgressBar",function(){return Vt}),i.d(t,"AviaSeekBackButton",function(){return Ft}),i.d(t,"AviaSeekForwardButton",function(){return Ht}),i.d(t,"AviaSeekIndicator",function(){return Kt}),i.d(t,"AviaSettings",function(){return Gt}),i.d(t,"AviaSettingsToggle",function(){return jt}),i.d(t,"AviaSlider",function(){return Wt}),i.d(t,"AviaSpinner",function(){return Yt}),i.d(t,"AviaText",function(){return zt}),i.d(t,"AviaTextToggle",function(){return $t}),i.d(t,"AviaTimeDisplay",function(){return qt}),i.d(t,"AviaUi",function(){return Qt}),i.d(t,"AviaUiPlugin",function(){return Ke}),i.d(t,"AviaUnmuteCta",function(){return Xt}),i.d(t,"AviaVolumeIndicator",function(){return Jt}),i.d(t,"AviaVolumeSlider",function(){return Zt}),i.d(t,"AviaWaitingOverlay",function(){return ei}),i.d(t,"LocalizationId",function(){return Ie}),i.d(t,"PreviewTimeTransform",function(){return Ve}),i.d(t,"create",function(){return je}),i.d(t,"createUi",function(){return Ge}),i.d(t,"defineCustomElements",function(){return ti}),i.d(t,"setAssetPath",function(){return se}),i.d(t,"setPlatformOptions",function(){return le});let r,n,a,o=!1,s=!1,l=!1,c=!1,u=null,d=!1;const p="undefined"!=typeof window?window:{},h=p.document||{head:{}};p.HTMLElement;const f={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},y=(()=>{let e=!1;try{h.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),v=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),m=(e,t,i,r)=>{i&&i.map(([i,r,n])=>{const a=A(e,i),o=g(t,n),s=E(i);f.ael(a,r,o,s),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>f.rel(a,r,o,s))})},g=(e,t)=>i=>{try{e.$hostElement$[t](i)}catch(e){he(e)}},A=(e,t)=>4&t?h:8&t?p:16&t?h.body:e,E=e=>y?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),T="http://www.w3.org/1999/xlink",b=new WeakMap,S=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),C={},_=e=>"object"==(e=typeof e)||"function"===e,P=(e,t,...i)=>{let r=null,n=null,a=null,o=!1,s=!1,l=[];const c=t=>{for(let i=0;i<t.length;i++)r=t[i],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((o="function"!=typeof e&&!_(r))&&(r=String(r)),o&&s?l[l.length-1].$text$+=r:l.push(o?I(null,r):r),s=o)};if(c(i),t){t.key&&(n=t.key),t.name&&(a=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter(t=>e[t]).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,k);const u=I(e,null);return u.$attrs$=t,l.length>0&&(u.$children$=l),u.$key$=n,u.$name$=a,u},I=(e,t)=>{return{$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}},R={},k={forEach:(e,t)=>e.map(N).forEach(t),map:(e,t)=>e.map(N).map(t).map(O)},N=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),O=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),P(e.vtag,t,...e.vchildren||[])}const t=I(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},L=(e,t,i,r,n,a)=>{if(i!==r){let o=pe(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,n=M(i),a=M(r);t.remove(...n.filter(e=>e&&!a.includes(e))),t.add(...a.filter(e=>e&&!n.includes(e)))}else if("style"===t){for(const t in i)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)i&&r[t]===i[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=_(r);if((o||l&&null!==r)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{let n=null==r?"":r;"list"===t?o=!1:null!=i&&e[t]==n||(e[t]=n)}}catch(e){}let c=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(T,t):e.removeAttribute(t)):(!o||4&a||n)&&!l&&(r=!0===r?"":r,c?e.setAttributeNS(T,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):pe(p,s)?s.slice(2):s[2]+t.slice(3),i&&f.rel(e,t,i,!1),r&&f.ael(e,t,r,!1)}},D=/\s/,M=e=>e?e.split(D):[],w=(e,t,i,r)=>{const n=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||C,o=t.$attrs$||C;for(r in a)r in o||L(n,r,a[r],void 0,i,t.$flags$);for(r in o)L(n,r,a[r],o[r],i,t.$flags$)},x=(e,t,i,s)=>{let u,d,p,f=t.$children$[i],y=0;if(o||(l=!0,"slot"===f.$tag$&&(r&&s.classList.add(r+"-s"),f.$flags$|=f.$children$?2:1)),null!==f.$text$)u=f.$elm$=h.createTextNode(f.$text$);else if(1&f.$flags$)u=f.$elm$=h.createTextNode("");else{if(c||(c="svg"===f.$tag$),u=f.$elm$=h.createElementNS(c?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&f.$flags$?"slot-fb":f.$tag$),c&&"foreignObject"===f.$tag$&&(c=!1),w(null,f,c),null!=r&&u["s-si"]!==r&&u.classList.add(u["s-si"]=r),f.$children$)for(y=0;y<f.$children$.length;++y)(d=x(e,f,y,u))&&u.appendChild(d);"svg"===f.$tag$?c=!1:"foreignObject"===u.tagName&&(c=!0)}return u["s-hn"]=a,3&f.$flags$&&(u["s-sr"]=!0,u["s-cr"]=n,u["s-sn"]=f.$name$||"",(p=e&&e.$children$&&e.$children$[i])&&p.$tag$===f.$tag$&&e.$elm$&&U(e.$elm$,!1)),u},U=(e,t)=>{f.$flags$|=1;const i=e.childNodes;for(let e=i.length-1;e>=0;e--){const r=i[e];r["s-hn"]!==a&&r["s-ol"]&&(K(r).insertBefore(r,H(r)),r["s-ol"].remove(),r["s-ol"]=void 0,l=!0),t&&U(r,t)}f.$flags$&=-2},B=(e,t,i,r,n,o)=>{let s,l=e["s-cr"]&&e["s-cr"].parentNode||e;for(l.shadowRoot&&l.tagName===a&&(l=l.shadowRoot);n<=o;++n)r[n]&&((s=x(null,i,n,e))&&(r[n].$elm$=s,l.insertBefore(s,H(t))))},V=(e,t,i,r,n)=>{for(;t<=i;++t)(r=e[t])&&(n=r.$elm$,$(r),s=!0,n["s-ol"]?n["s-ol"].remove():U(n,!0),n.remove())},F=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),H=e=>e&&e["s-ol"]||e,K=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,G=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,a=t.$tag$,o=t.$text$;let s;null===o?(c="svg"===a||"foreignObject"!==a&&c,"slot"===a||w(e,t,c),null!==r&&null!==n?((e,t,i,r)=>{let n,a,o=0,s=0,l=0,c=0,u=t.length-1,d=t[0],p=t[u],h=r.length-1,f=r[0],y=r[h];for(;o<=u&&s<=h;)if(null==d)d=t[++o];else if(null==p)p=t[--u];else if(null==f)f=r[++s];else if(null==y)y=r[--h];else if(F(d,f))G(d,f),d=t[++o],f=r[++s];else if(F(p,y))G(p,y),p=t[--u],y=r[--h];else if(F(d,y))"slot"!==d.$tag$&&"slot"!==y.$tag$||U(d.$elm$.parentNode,!1),G(d,y),e.insertBefore(d.$elm$,p.$elm$.nextSibling),d=t[++o],y=r[--h];else if(F(p,f))"slot"!==d.$tag$&&"slot"!==y.$tag$||U(p.$elm$.parentNode,!1),G(p,f),e.insertBefore(p.$elm$,d.$elm$),p=t[--u],f=r[++s];else{for(l=-1,c=o;c<=u;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===f.$key$){l=c;break}l>=0?((a=t[l]).$tag$!==f.$tag$?n=x(t&&t[s],i,l,e):(G(a,f),t[l]=void 0,n=a.$elm$),f=r[++s]):(n=x(t&&t[s],i,s,e),f=r[++s]),n&&K(d.$elm$).insertBefore(n,H(d.$elm$))}o>u?B(e,null==r[h+1]?null:r[h+1].$elm$,i,r,s,h):s>h&&V(t,o,u)})(i,r,t,n):null!==n?(null!==e.$text$&&(i.textContent=""),B(i,null,t,n,0,n.length-1)):null!==r&&V(r,0,r.length-1),c&&"svg"===a&&(c=!1)):(s=i["s-cr"])?s.parentNode.textContent=o:e.$text$!==o&&(i.data=o)},j=e=>{let t,i,r,n,a,o,s=e.childNodes;for(i=0,r=s.length;i<r;i++)if(1===(t=s[i]).nodeType){if(t["s-sr"])for(a=t["s-sn"],t.hidden=!1,n=0;n<r;n++)if(o=s[n].nodeType,s[n]["s-hn"]!==t["s-hn"]||""!==a){if(1===o&&a===s[n].getAttribute("slot")){t.hidden=!0;break}}else if(1===o||3===o&&""!==s[n].textContent.trim()){t.hidden=!0;break}j(t)}},W=[],Y=e=>{let t,i,r,n,a,o,l=0,c=e.childNodes,u=c.length;for(;l<u;l++){if((t=c[l])["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,n=t["s-sn"],o=r.length-1;o>=0;o--)(i=r[o])["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(z(i,n)?(a=W.find(e=>e.$nodeToRelocate$===i),s=!0,i["s-sn"]=i["s-sn"]||n,a?a.$slotRefNode$=t:W.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&W.map(e=>{z(e.$nodeToRelocate$,i["s-sn"])&&((a=W.find(e=>e.$nodeToRelocate$===i))&&!e.$slotRefNode$&&(e.$slotRefNode$=a.$slotRefNode$))})):W.some(e=>e.$nodeToRelocate$===i)||W.push({$nodeToRelocate$:i}));1===t.nodeType&&Y(t)}},z=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,$=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map($)},q=e=>e,Q=(e,t,i)=>{const r=q(e);return{emit:e=>X(r,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},X=(e,t,i)=>{const r=f.ce(t,i);return e.dispatchEvent(r),r},J=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,Te(()=>Z(e,t))),Z=(e,t)=>{const i=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),n=i;let a;return a=re(n,t?"componentWillLoad":"componentWillUpdate"),a=ne(a,()=>re(n,"componentWillRender")),r(),ne(a,()=>ee(e,n,t))},ee=async(e,t,i)=>{const r=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],i&&(e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,n=(t.$tagName$,()=>{}),a=((e,t,i,r)=>{let n=S(t,i),a=fe.get(n);if(e=11===e.nodeType?e:h,a)if("string"==typeof a){e=e.head||e;let t,i=b.get(e);i||b.set(e,i=new Set),i.has(n)||((t=h.createElement("style")).innerHTML=a,e.insertBefore(t,e.querySelector("link")),i&&i.add(n))}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return n})(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&r&&(i["s-sc"]=a,i.classList.add(a+"-h"),2&r&&i.classList.add(a+"-s")),n()})(e);const a=(e.$cmpMeta$.$tagName$,()=>{});te(e,t,r),a(),n(),ie(e)},te=(e,t,i)=>{try{u=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t)=>{const i=e.$hostElement$,c=e.$cmpMeta$,u=e.$vnode$||I(null,null),d=(p=t)&&p.$tag$===R?t:P(null,null,t);var p;if(a=i.tagName,c.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},c.$attrsToReflect$.map(([e,t])=>d.$attrs$[t]=i[e])),d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=u.$elm$=i.shadowRoot||i,r=i["s-sc"],n=i["s-cr"],o=0!=(1&c.$flags$),s=!1,G(u,d),f.$flags$|=1,l){let e,t,i,r,n,a;Y(d.$elm$);let o=0;for(;o<W.length;o++)(t=(e=W[o]).$nodeToRelocate$)["s-ol"]||((i=h.createTextNode(""))["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(o=0;o<W.length;o++)if(t=(e=W[o]).$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,n=e.$slotRefNode$.nextSibling,i=t["s-ol"];i=i.previousSibling;)if((a=i["s-nr"])&&a["s-sn"]===t["s-sn"]&&r===a.parentNode&&(!(a=a.nextSibling)||!a["s-nr"])){n=a;break}(!n&&r!==t.parentNode||t.nextSibling!==n)&&t!==n&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,n))}else 1===t.nodeType&&(t.hidden=!0)}s&&j(d.$elm$),f.$flags$&=-2,W.length=0})(e,t)}catch(t){he(t,e.$hostElement$)}return u=null,null},ie=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,re(t,"componentDidRender"),64&e.$flags$?re(t,"componentDidUpdate"):(e.$flags$|=64,re(t,"componentDidLoad"))},re=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(e){he(e)}},ne=(e,t)=>e&&e.then?e.then(t):t(),ae=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),r=e.prototype;i.map(([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(r,e,{get(){return t=e,ue(this).$instanceValues$.get(t);var t},set(i){((e,t,i,r)=>{const n=ue(e),a=e,o=n.$instanceValues$.get(t),s=n.$flags$,l=a;var c,u;if(c=i,u=r.$members$[t][0],(i=null==c||_(c)?c:4&u?"false"!==c&&(""===c||!!c):2&u?parseFloat(c):1&u?String(c):c)!==o){if(n.$instanceValues$.set(t,i),r.$watchers$&&128&s){const e=r.$watchers$[t];e&&e.map(e=>{try{l[e](i,o,t)}catch(e){he(e,a)}})}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,o,t))return;J(n,!1)}}})(this,e,i,t)},configurable:!0,enumerable:!0})});{const n=new Map;r.attributeChangedCallback=function(e,t,i){f.jmp(()=>{const t=n.get(e);this.hasOwnProperty(t)&&(i=this[t],delete this[t]),this[t]=(null!==i||"boolean"!=typeof this[t])&&i})},e.observedAttributes=i.filter(([e,t])=>15&t[0]).map(([e,i])=>{const r=i[1]||e;return n.set(r,e),512&i[0]&&t.$attrsToReflect$.push([e,r]),r})}}return e},oe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){de(this,i)},connectedCallback(){(e=>{if(0==(1&f.$flags$)){const t=ue(e),i=t.$cmpMeta$,r=(i.$tagName$,()=>{});1&t.$flags$?(m(e,t,i.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&i.$flags$&&(e=>{const t=e["s-cr"]=h.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),i.$members$&&Object.entries(i.$members$).map(([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}}),(async(e,t,i,r,n)=>{if(0==(32&t.$flags$)&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),n.style)){let r=n.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>ye.map(t=>t(e)).find(e=>!!e))(e)]);const a=S(i,t.$modeName$);if(!fe.has(a)){const e=(i.$tagName$,()=>{});((e,t,i)=>{let r=fe.get(e);v&&i?(r=r||new CSSStyleSheet).replace(t):r=t,fe.set(e,r)})(a,r,!!(1&i.$flags$)),e()}}t.$ancestorComponent$,J(t,!0)})(e,t,i)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&f.$flags$)){const t=ue(e);t.$rmListeners$&&(t.$rmListeners$.map(e=>e()),t.$rmListeners$=void 0)}})(this),n&&n.call(this)}}),e.is=i.$tagName$,ae(e,i)},se=e=>f.$resourcesUrl$=e,le=e=>Object.assign(f,e),ce=new WeakMap,ue=e=>ce.get(e),de=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return m(e,i,t.$listeners$),ce.set(e,i)},pe=(e,t)=>t in e,he=(e,t)=>(0,console.error)(e,t),fe=new Map,ye=[],ve=[],me=[],ge=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){he(e)}e.length=0},Ae=()=>{ge(ve),ge(me),(d=ve.length>0)&&f.raf(Ae)},Ee=e=>{return Promise.resolve(void 0).then(e)},Te=((e,t)=>i=>{e.push(i),d||(d=!0,t&&4&f.$flags$?Ee(Ae):f.raf(Ae))})(me,!0);var be,Se,Ce,_e,Pe,Ie;function Re(e,t){let i;return function(){clearTimeout(i);const r=Array.from(arguments);i=setTimeout(()=>e.apply(null,r),t)}}function ke(e){return null==e||""==e}function Ne(e){return ke(e)?[]:e.split(",").map(e=>e.trim())}function Oe(e,t){const i=function(e=0){(null==e||isNaN(e))&&(e=0);const t=Me(e,3600).split(":");return{hours:parseInt(t[0]),minutes:parseInt(t[1]),seconds:parseInt(t[2])}}(e),r=i.hours>0;let n="";return r&&(n+=`${i.hours} ${t[Ie.HOURS]} `),(i.minutes>0||r)&&(n+=`${i.minutes} ${t[Ie.MINUTES]} `),n+=`${i.seconds} ${t[Ie.SECONDS]}`}function Le(e){return{x:e.pageX-(window.scrollX||window.pageXOffset)||e.targetTouches[0].pageX-window.scrollX,y:e.pageY-(window.scrollY||window.pageYOffset)||e.targetTouches[0].pageY-window.scrollY}}function De(e){return t=100*e,2,Math.round(t*Math.pow(10,2))/Math.pow(10,2)+"%";var t}function Me(e,t=61){if(null==e||isNaN(e))return"00:00";let i=we((e|=0)%60);return i=we((e=e/60|0)%60)+":"+i,(e=e/60|0)>0&&(i=we(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i}function we(e){return e<10?"0"+e:e.toString()}function xe(e,t,i,r=0,n=1){return(e-t)*(n-r)/(i-t)+r}function Ue(e,t,i){return Math.max(t,Math.min(i,e))}function Be(e){e.preventDefault(),e.stopPropagation()}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self,function(){function e(e){var t=!0,i=!1,r=null,n={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function a(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function s(e){t=!1}function l(){document.addEventListener("mousemove",c),document.addEventListener("mousedown",c),document.addEventListener("mouseup",c),document.addEventListener("pointermove",c),document.addEventListener("pointerdown",c),document.addEventListener("pointerup",c),document.addEventListener("touchmove",c),document.addEventListener("touchstart",c),document.addEventListener("touchend",c)}function c(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(t=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",c),document.removeEventListener("pointermove",c),document.removeEventListener("pointerdown",c),document.removeEventListener("pointerup",c),document.removeEventListener("touchmove",c),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",c))}document.addEventListener("keydown",function(i){i.metaKey||i.altKey||i.ctrlKey||(a(e.activeElement)&&o(e.activeElement),t=!0)},!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerdown",s,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(i&&(t=!0),l())},!0),l(),e.addEventListener("focus",function(e){var i,r,s;a(e.target)&&(t||(i=e.target,r=i.type,"INPUT"===(s=i.tagName)&&n[r]&&!i.readOnly||"TEXTAREA"===s&&!i.readOnly||i.isContentEditable))&&o(e.target)},!0),e.addEventListener("blur",function(e){var t;a(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(i=!0,window.clearTimeout(r),r=window.setTimeout(function(){i=!1},100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))},!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)}(),function(e){e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e.ENTER_FULLSCREEN="enterfullscreen",e.EXIT_FULLSCREEN="exitfullscreen",e.MUTE="mute",e.UNMUTE="unmute",e.TEXT_ON="texton",e.TEXT_OFF="textoff",e.GO_TO_LIVE="gotolive",e.NONE="none",e.SEEK="seek",e.SEEK_FORWARD="seekforward",e.SEEK_BACK="seekback",e.VOLUME="volume",e.PREVIEW="preview",e.SETTINGS_ON="settingson",e.SETTINGS_OFF="settingsoff",e.LANGUAGE_SELECT="languageselect",e.QUALITY_SELECT="qualityselect",e.POSTER_PLAY="posterplay"}(be||(be={})),function(e){e.AUTO="auto",e.MANUAL="manual"}(Se||(Se={})),function(e){e.MUTE="mute",e.PLAY="play",e.FULLSCREEN="fullscreen",e.TEXT="text",e.PLAY_OVERLAY="playOverlay",e.SETTINGS="settings",e.VOLUME="volume"}(Ce||(Ce={})),function(e){e.NONE="none",e.AD="ad",e.CONTENT="content",e.COMPACT="compact"}(_e||(_e={})),function(e){e.HIDDEN="avia-ui-hidden",e.ACC_VOL_ON="avia-volume-on",e.ACC_VOL_OFF="avia-volume-off",e.SEGMENT_MARKER="avia-segment-marker",e.INDICATOR_ACTIVE="avia-indicator-active",e.ACC_VOL="avia-acc-vol",e.ACC_VOL_METER="avia-acc-vol-meter",e.ACC_VOL_OVERLAY="avia-vol-meter-overlay",e.ACC_FWD="avia-acc-fwd",e.ACC_BACK="avia-acc-back",e.ACC_ARROW="avia-acc-arrow",e.UNMUTE_CTA="avia-unmute-cta",e.CONTROLS_VISIBLE="avia-controls-vis",e.SPINNER_ACTIVE="avia-spinner",e.SPINNER_IDLE="avia-spinner-idle",e.SETTINGS_NUDGE_LEFT="avia-settings-nudge-left"}(Pe||(Pe={})),function(e){e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e.MUTE="mute",e.UNMUTE="unmute",e.VOLUME="volume",e.CLICK_TO_UNMUTE="click-to-unmute",e.TAP_TO_UNMUTE="tap-to-unmute",e.LIVE="live",e.GO_LIVE="go-live",e.SEEK="seek",e.SEEK_BACK="seek-back",e.SEEK_FORWARD="seek-forward",e.CLOSED_CAPTIONS_OFF="closed-captions-off",e.CLOSED_CAPTIONS_ON="closed-captions-on",e.FULL_SCREEN_ENTER="full-screen-enter",e.FULL_SCREEN_EXIT="full-screen-exit",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.VALUE_OF_TOTAL="value-of-total",e.UNMUTE_CTA="unmute-cta",e.SETTINGS="settings",e.LANGUAGE="language",e.QUALITY="quality",e.BACK="back",e.CAPTIONS="captions",e.AUDIO="audio",e.CLOSE="close",e.AUTO="auto",e.UNKNOWN="unknown"}(Ie||(Ie={}));const Ve={DEFAULT:e=>Me(e.contentTime),UTC_TIME:e=>new Date(e.liveStreamUtcTime).toTimeString().split(" ")[0]};var Fe;(Fe||(Fe={})).ACTION="uiaction";const He={en:{[Ie.PLAY]:"Play",[Ie.PAUSE]:"Pause",[Ie.STOP]:"Stop",[Ie.MUTE]:"Mute",[Ie.UNMUTE]:"Unmute",[Ie.VOLUME]:"Volume",[Ie.CLICK_TO_UNMUTE]:"Click to unmute",[Ie.TAP_TO_UNMUTE]:"Tap to unmute",[Ie.SEEK]:"Seek",[Ie.SEEK_BACK]:"Seek Backward",[Ie.SEEK_FORWARD]:"Seek Forward",[Ie.LIVE]:"Live",[Ie.GO_LIVE]:"Go Live",[Ie.CLOSED_CAPTIONS_OFF]:"Closed Captions Off",[Ie.CLOSED_CAPTIONS_ON]:"Closed Captions On",[Ie.FULL_SCREEN_ENTER]:"Enter Fullscreen",[Ie.FULL_SCREEN_EXIT]:"Exit Fullscreen",[Ie.HOURS]:"Hours",[Ie.MINUTES]:"Minutes",[Ie.SECONDS]:"Seconds",[Ie.VALUE_OF_TOTAL]:"{{value}} of {{total}}",[Ie.SETTINGS]:"Settings",[Ie.LANGUAGE]:"Language",[Ie.QUALITY]:"Quality",[Ie.BACK]:"Back",[Ie.CAPTIONS]:"Captions",[Ie.AUDIO]:"Audio",[Ie.CLOSE]:"Close",[Ie.AUTO]:"Auto",[Ie.UNKNOWN]:"Unknown"},es:{[Ie.PLAY]:"Reproducir",[Ie.PAUSE]:"Pausa",[Ie.STOP]:"Stop",[Ie.MUTE]:"Silencio",[Ie.UNMUTE]:"Dejar de silenciar",[Ie.VOLUME]:"Volumen",[Ie.CLICK_TO_UNMUTE]:"Haz clic para dejar de silenciar",[Ie.TAP_TO_UNMUTE]:"Toca para dejar de silenciar",[Ie.SEEK]:"Buscar",[Ie.SEEK_BACK]:"Buscar hacia atrás",[Ie.SEEK_FORWARD]:"Buscar adelante",[Ie.LIVE]:"En Vivo",[Ie.GO_LIVE]:"Ir a Vivir",[Ie.CLOSED_CAPTIONS_OFF]:"Subtítulos cerrados",[Ie.CLOSED_CAPTIONS_ON]:"Subtítulos cerrados en",[Ie.FULL_SCREEN_ENTER]:"Ir a pantalla completa",[Ie.FULL_SCREEN_EXIT]:"Salir de pantalla completa",[Ie.HOURS]:"Horas",[Ie.MINUTES]:"Minutos",[Ie.SECONDS]:"Segundos",[Ie.VALUE_OF_TOTAL]:"{{value}} de {{total}}",[Ie.SETTINGS]:"Configuraciones",[Ie.LANGUAGE]:"Lengua",[Ie.QUALITY]:"Calidad",[Ie.BACK]:"Volver",[Ie.CAPTIONS]:"Subtítulos",[Ie.AUDIO]:"Audio",[Ie.CLOSE]:"Cerrar",[Ie.AUTO]:"Auto",[Ie.UNKNOWN]:"Desconocida"}};class Ke extends class{constructor(){this.debug=!1,this.logFmt="color: #fcf; font-style: italic;",this.player=null,this.services=null,this.options=null,this.name=null,this.handlePlayerEvent=this.handlePlayerEvent.bind(this)}destroy(){this.listenToPlayer(!1,this.getEventInterests()),this.player=null,this.options=null,this.services=null,this.avia=null}handlePlayerEvent(e){}getEventInterests(){return[]}sendEvent(e){this.services.event.dispatchPluginEvent(e)}listenToPlayer(e,t){const i=!1!==e?"on":"off";t.forEach(e=>this.player[i](e,this.handlePlayerEvent))}log(e){this.debug&&(null===console||void 0===console||console.log(`%c<Plugin: ${this.name}> ${e}`,this.logFmt))}async onRegister(e,t,i){this.player=e,this.services=i,this.options=t,this.name=t.name,this.avia=i.avia,this.debug=!0===t.debug,await this.initialize(),this.listenToPlayer(!0,this.getEventInterests()),this.log("Registered "+this.name)}async initialize(){}}{constructor(){super(),this.defaultSeekInc=10,this.accIndicatorDisplayTime=1500,this.playbackStarted=!1,this.settingsEngaged=!1,this.firstProgressReceived=!1,this.defaultCompactViewBreakpoint=520,this.rootElement="avia-ui",this.previewTimeTransform=Ve.DEFAULT,this.aviaUi=null,this.hUiAction=this.hUiAction.bind(this),this.accVolUpdater=Re(e=>{this.setAccIndicatorState(e)},this.accIndicatorDisplayTime),this.accSeekUpdater=Re(e=>{this.setAccIndicatorState(e)},this.accIndicatorDisplayTime)}static async create(e,t){const i=new Ke;return await i.onRegister(e.player,t,e),i}get activeMode(){return this.aviaUi.activeMode||Se.AUTO}set activeMode(e){this.aviaUi.activeMode=e}get active(){return this.aviaUi.active}set active(e){this.setActivityState(e)}destroy(){var e;super.destroy(),null===(e=this.aviaUi)||void 0===e||e.removeEventListener(Fe.ACTION,this.hUiAction),this.aviaUi=null}hUiAction(e){const t=e.detail.action;switch(this.services.event.dispatchPluginEvent({name:this.name,action:t,value:e.detail.value||null}),t){case be.POSTER_PLAY:case be.PLAY:case be.PAUSE:case be.STOP:this.playbackStarted?this.player[t]():(this.cancelPoster(t===be.POSTER_PLAY),t!==be.STOP&&this.player.play().catch(()=>{}));break;case be.ENTER_FULLSCREEN:this.player.enterFullscreen();break;case be.EXIT_FULLSCREEN:this.player.exitFullscreen();break;case be.MUTE:this.player.muted=!0,this.aviaUi.muted=!0;break;case be.UNMUTE:this.unmute();break;case be.TEXT_ON:case be.TEXT_OFF:const i=t===be.TEXT_ON;this.player.textTrackEnabled=i,this.aviaUi.textTrackEnabled=i;break;case be.SEEK:this.playerSeek(e.detail.value);break;case be.SEEK_FORWARD:this.incrementalSeek(1);break;case be.SEEK_BACK:this.incrementalSeek(-1);break;case be.VOLUME:this.player.volume=e.detail.value;break;case be.PREVIEW:const{time:r,percent:n}=e.detail.value,{contentDuration:a,streamDuration:o,liveStreamUtcDuration:s,liveStreamUtcStart:l}=this.player,c=n*o;Promise.resolve(this.previewTimeTransform({contentTime:r,streamTime:c,liveStreamUtcTime:Math.round(1e3*c+l),contentDuration:a,streamDuration:o,liveStreamUtcDuration:s})).then(e=>{var t,i;this.aviaUi.preview={value:e,data:null===(i=null===(t=this.player)||void 0===t?void 0:t.getThumbnail(r))||void 0===i?void 0:i.data}});break;case be.SETTINGS_ON:case be.SETTINGS_OFF:this.setStateForSettings(t===be.SETTINGS_ON);break;case be.LANGUAGE_SELECT:this.selectLanguage(e.detail.value);break;case be.QUALITY_SELECT:this.selectQuality(e.detail.value);break;case be.GO_TO_LIVE:this.player.goLive()}}handlePlayerEvent(e){const{ActiveState:t,PlayerEvent:i,StreamType:r}=this.avia,n=this.player.streamType===r.LIVE,a=this.player.streamType===r.DVR,{type:o,data:s}=e;switch(o){case i.READY:this.setPlayState(),this.setPosterState();break;case i.AUTOPLAY_BLOCKED:this.setPosterState(!0);break;case i.RESOURCE_START:this.setPosterState(this.aviaUi.posterActive),this.setSegmentBreakPositions([]);break;case i.AD_CUEPOINTS_AVAILABLE:this.setSegmentBreakPositions(s.cuepoints);break;case i.AD_SEGMENT_START:!1!==this.options.showAdControlsOnAdSegmentStart&&this.setStateForAdBreakStart();break;case i.AD_START:this.setControlMode(_e.AD),this.enableControls([Ce.PLAY],!0),this.aviaUi.playing=!0;break;case i.AD_BREAK_START:this.setStateForAdBreakStart();break;case i.AD_PROGRESS:this.setAdPosition(s.currentTime,s.duration);break;case i.AD_SEGMENT_END:case i.AD_BREAK_COMPLETE:this.setControlMode(_e.NONE);break;case i.CONTENT_START:case i.CONTENT_SEGMENT_START:this.setStateForContentStart(n,a);break;case i.CONTENT_SEGMENT_END:this.firstProgressReceived=!1,this.setControlMode(_e.NONE);break;case i.CONTENT_PLAYING:this.setControlMode(_e.CONTENT),this.setPlayState();break;case i.AD_PAUSED:case i.CONTENT_PAUSED:this.aviaUi.playing=!1;break;case i.AD_PLAYING:case i.CONTENT_PLAYING:this.aviaUi.playing=!0;break;case i.CONTENT_PROGRESS:this.firstProgressReceived||(this.firstProgressReceived=!0,this.setPlayState(),this.setLiveState(n,a)),n||this.setTimeAndPosition(),(n||a)&&this.setLiveState(n,a);break;case i.FULLSCREEN_ENTER:case i.FULLSCREEN_EXIT:this.aviaUi.fullscreen=o===i.FULLSCREEN_ENTER;break;case i.TEXT_TRACK_AVAILABLE:this.enableControls(Ce.TEXT,!0),this.enableSettingsButton();break;case i.TEXT_TRACK_DISPLAY_MODE_CHANGE:this.aviaUi.textTrackEnabled=s.enabled;break;case i.LANGUAGE_CHANGE:this.setLocalizationData(s.value||"en");break;case i.MUTE_CHANGE:this.aviaUi.muted=s,this.player.muted||(this.aviaUi.unmuteCtaVisible=!1);break;case i.VOLUME_CHANGE:const e=s,r=this.player.muted;if(this.aviaUi.volume==e)break;this.aviaUi.muted?this.aviaUi.muted&&e>0&&this.unmute():this.aviaUi.muted=!Math.ceil(e),this.aviaUi.volume=e,r||(this.aviaUi.unmuteCtaVisible=!1);break;case i.HOTKEY_ACTION:this.playbackStarted&&this.setAccIndicator(s.action,s);break;case i.ACTIVE_CHANGE:this.activeMode===Se.AUTO&&(this.active=s.value===t.ACTIVE);break;case i.PRESENTATION_SIZE_CHANGE:this.respondToSizeChange();break;case i.QUALITY_CHANGE:this.setStateForSettings();break;case i.QUALITY_INFO_CHANGE:case i.AUDIO_TRACK_INFO_CHANGE:this.enableSettingsButton(),this.setStateForSettings();break;case i.RESOURCE_END:case i.RESOURCE_INTERRUPTED:this.setIdleState();break;case i.PLAYBACK_STATE_CHANGE:this.setPlayState()}}incrementalSeek(e){const t=e*(this.options.seekIncrement||this.defaultSeekInc);this.playerSeek(this.player.contentTime+t),this.player.recordMetric(this.avia.MetricType.UI,this.avia.UiMetric.SEEK_BY,t)}playerSeek(e){this.player.seek(e).then(()=>{})}unmute(){this.player.muted=!1,this.aviaUi.muted=!1}setControlMode(e){if(e===_e.CONTENT){const e=this.getContentControlMode();this.aviaUi.controlMode=e}else this.aviaUi.controlMode=e}setActivityState(e){var t,i;this.playbackStarted&&(this.options.offsetTimedTextOnControlsVisible&&this.getContainer().classList.toggle(Pe.CONTROLS_VISIBLE,e),this.aviaUi.active=this.activeMode===Se.MANUAL?e:!!(null===(i=null===(t=this.aviaUi)||void 0===t?void 0:t.settings)||void 0===i?void 0:i.active)||e)}setAccIndicator(e,t){const i={},{AccessibilityAction:r}=this.avia;switch(e){case r.INCREASE_VOLUME:case r.DECREASE_VOLUME:case r.TOGGLE_MUTE:i.volumeKey=!0,this.accVolUpdater({volumeKey:!1}),this.player.muted||(this.aviaUi.unmuteCtaVisible=!1);break;case r.SEEK_FORWARD:case r.SEEK_BACK:i.seekForward=e===r.SEEK_FORWARD,i.seekBack=e===r.SEEK_BACK,i.seekTime=(null==t?void 0:t.position)||0,this.accSeekUpdater({seekForward:!1,seekBack:!1,seekTime:null})}this.setAccIndicatorState(i)}setAccIndicatorState(e){this.aviaUi.accIndicatorState=Object.assign(Object.assign({},this.aviaUi.accIndicatorState),e)}setStateForContentStart(e,t){this.cancelPoster(!1),this.setControlMode(_e.CONTENT),this.setLiveState(e,t),this.enableControls([Ce.MUTE,Ce.PLAY,Ce.FULLSCREEN],!0),this.aviaUi.muted=this.player.muted,this.setSeekDisabled(!1),this.setStateForPlaybackStart(),this.aviaUi.volume=this.player.volume,this.enableSettingsButton()}setStateForAdBreakStart(){const e=[Ce.MUTE,Ce.PLAY];this.services.system.isDesktop?e.push(Ce.FULLSCREEN):this.enableControls([Ce.FULLSCREEN],!1),this.cancelPoster(!1),this.setControlMode(_e.AD),this.enableControls(e,!0),this.aviaUi.playing=!0,this.aviaUi.muted=this.player.muted,this.setStateForPlaybackStart()}setStateForPlaybackStart(){this.options.useUnmuteCta&&!this.playbackStarted&&this.player.muted&&(this.aviaUi.unmuteCtaVisible=!0),this.playbackStarted=!0,this.setPlayState()}setPosterState(e=this.services.playerOptions.autoplay===this.avia.Autoplay.NONE){var t;this.aviaUi.posterImageUrl=(null===(t=this.player.resource)||void 0===t?void 0:t.location.posterImageUrl)||this.options.posterImageUrl,this.aviaUi.posterActive=e}cancelPoster(e){this.aviaUi.posterActive=!1,e&&this.services.event.dispatchPluginEvent({pluginName:this.name,type:be.POSTER_PLAY})}setIdleState(){this.setControlMode(_e.NONE),this.aviaUi.unmuteCtaVisible=!1,this.enableControls([Ce.MUTE,Ce.PLAY,Ce.FULLSCREEN,Ce.TEXT],!1),this.aviaUi.active=!1,this.playbackStarted=!1}setLiveState(e,t){const i=this.player.isPlayingLive;this.aviaUi.isLiveLinear=e,this.aviaUi.isDvr=t,this.aviaUi.live=e||t&&i,this.aviaUi.pausable=this.player.pausable,t&&(this.aviaUi.seekForwardDisabled=i)}setPlayState(){const{playbackState:e}=this.player,t=e===this.avia.PlaybackState.PLAYING,i=e===this.avia.PlaybackState.WAITING;this.aviaUi.playing=!(!i&&!t),this.aviaUi.playDisabled=!t&&e!==this.avia.PlaybackState.PAUSED,this.aviaUi.waiting=i}respondToSizeChange(){const e=this.aviaUi.controlMode;e!=_e.CONTENT&&e!=_e.COMPACT||(this.aviaUi.controlMode=this.getContentControlMode())}getContentControlMode(){const{width:e}=this.player.dimensions;return e>(this.options.compactViewBreakpoint||this.defaultCompactViewBreakpoint)?_e.CONTENT:_e.COMPACT}enableSettingsButton(){var e,t,i,r;const n=this.player,a=null===(e=n.textTrackInfo)||void 0===e?void 0:e.track,o=null===(t=n.audioTrackInfo)||void 0===t?void 0:t.track,s=(null===(r=null===(i=n.qualityInfo)||void 0===i?void 0:i.qualities)||void 0===r?void 0:r.length)>1;this.aviaUi.settingsDisabled=!(a||o||s)}setStateForSettings(e=this.settingsEngaged){const t=this.player;this.services.system.browser===this.avia.Browser.FIREFOX&&e&&this.aviaUi.classList.add(Pe.SETTINGS_NUDGE_LEFT),this.aviaUi.settings={active:e,textTrackInfo:t.textTrackInfo,audioTrackInfo:t.audioTrackInfo,qualityInfo:t.qualityInfo},this.settingsEngaged=e,this.pauseOnSettings(e)}pauseOnSettings(e){if(this.options.pauseOnSettings){const t=this.player.playbackState===this.avia.PlaybackState.PLAYING;e&&t&&(this.player.pause(),this.playPendingAfterSettings=!0),!e&&this.playPendingAfterSettings&&(this.playPendingAfterSettings=!1,this.player.play())}}enableControls(e,t){const i=Array.isArray(e)?e:[e],r=this.aviaUi;i.forEach(e=>r[e+"Disabled"]=!t)}setSeekDisabled(e){this.aviaUi.seekDisabled=e,this.aviaUi.seekBackDisabled=e,this.aviaUi.seekForwardDisabled=e}setAdPosition(e,t){this.aviaUi.adPlayheadPosition=e/t}setTimeAndPosition(){if(this.aviaUi.waiting)return;const e=this.player.contentTime,t=this.player.contentDuration;this.aviaUi.timeDisplayValue=this.getTimeDisplayValue(e,t),this.aviaUi.currentTimeSeconds=e,this.aviaUi.durationSeconds=t,this.aviaUi.playheadPosition=e/t}setSegmentBreakPositions(e){const t=this.player.contentDuration;this.aviaUi.segmentBreakPositions=e.filter(e=>e>0&&e!=t).join(",")}selectLanguage(e){var t,i;const r=e.trackType,n=e.trackId;if("text"==r){const e=null===(t=this.player.textTrackInfo.tracks)||void 0===t?void 0:t.find(e=>e.id==n);e&&(this.player.textTrack=e)}else if("audio"==r){const e=null===(i=this.player.audioTrackInfo.tracks)||void 0===i?void 0:i.find(e=>e.index==n);e&&(this.player.audioTrack=e)}}selectQuality(e){var t,i;const{index:r}=e;if(-1==r)return void(this.player.autoQualitySwitching=!0);const n=null===(i=null===(t=this.player.qualityInfo.qualities)||void 0===t?void 0:t[r])||void 0===i?void 0:i.bitrate;n&&(this.player.bitrate=n)}getTimeDisplayValue(e,t){return t>86400?"":`${Me(e)} / ${Me(t)}`}setControlExclusions(){var e,t;const i=null===(t=null===(e=this.services)||void 0===e?void 0:e.system)||void 0===t?void 0:t.info,{Device:r}=this.avia;let n=[];switch(i.device){case r.ANDROID_PHONE:case r.IPHONE:case r.IPOD:case r.KINDLE:case r.IPAD:case r.MOBILE:case r.TABLET:case r.UNKNOWN:case r.WINDOWS_PHONE:n=[Ce.VOLUME,Ce.TEXT,Ce.SETTINGS];break;case r.LG_SMART_TV:case r.PLAYSTATION_4:case r.PLAYSTATION_5:case r.SAMSUNG_SMART_TV:case r.VIZIO_SMART_TV:case r.XBOX_ONE:n=[Ce.VOLUME]}this.aviaUi.excludedControls=n}createUi(){var e;return this.applyTheme(null===(e=this.options)||void 0===e?void 0:e.theme),customElements.whenDefined(this.rootElement).then(()=>{this.setControlExclusions(),this.initializeState()})}getContainer(){var e;let t=this.options.container;return t&&(t=document.querySelector(t)),t||(null===(e=this.services)||void 0===e?void 0:e.dom.main)}initializeState(){var e,t,i,r;this.aviaUi.accIndicatorState={displayTime:this.accIndicatorDisplayTime,volumeKey:!1,muted:!1,seekForward:!1,seekBack:!1,seekTime:null},this.aviaUi.qualityLabel=null===(e=this.options)||void 0===e?void 0:e.qualityLabel,(null===(t=this.options)||void 0===t?void 0:t.activeMode)&&(this.aviaUi.activeMode=this.options.activeMode),(null===(i=this.options)||void 0===i?void 0:i.previewTimeTransform)&&(this.previewTimeTransform=null===(r=this.options)||void 0===r?void 0:r.previewTimeTransform),this.aviaUi.isTouch="ontouchstart"in document.documentElement,this.aviaUi.initialized=!0}setLocalizationData(e){const t=Object.values(Ie).reduce((t,i)=>(t[i]=this.services.localization.localize(i,e),t),{});this.aviaUi.localeData=t}getEventInterests(){const e=this.avia.PlayerEvent;return Object.values(e)}async initialize(){this.services.localization.registerLocalizationData(He),await this.createUi()}applyTheme(e={}){const t=this.getContainer(),{html:i,cssVars:r}=e;let n,a=t.querySelector(this.rootElement);if(i&&a&&((n=t.removeChild(a)).removeEventListener(Fe.ACTION,this.hUiAction),a=null,this.aviaUi=null),!a){const e=i?function(e){try{const t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.children)}catch(t){throw new Error("Could not create element from string: "+e)}}(i):[document.createElement(this.rootElement)];if(!(a=e.find(e=>e.nodeName.toLowerCase()===this.rootElement)))throw new Error("Avia UI theme HTML must contain the root element "+this.rootElement);e.forEach(e=>t.appendChild(e)),n&&Object.keys(Object.getPrototypeOf(n)).forEach(e=>{"function"!=typeof n[e]&&(a[e]=n[e])})}this.aviaUi||(this.aviaUi=a,this.aviaUi.addEventListener(Fe.ACTION,this.hUiAction)),r&&function(e){const{style:t}=document.documentElement;Object.keys(e).forEach(i=>t.setProperty(i,e[i]))}(r)}}const Ge=Ke.create,je=Ke.create;var We=function(e,t,i){void 0===i&&(i=!0);var r="Function"===e.constructor.name?e.prototype:e,n=r.componentWillLoad;r.componentWillLoad=function(){var e,r=this,a=q(this),o={promise:new Promise(function(t){e=t}),resolve:e},s=new CustomEvent("openWormhole",{bubbles:!0,composed:!0,detail:{consumer:this,fields:t,updater:function(e,t){(e in a?a:r)[e]=t},onOpen:o}});a.dispatchEvent(s);var l=function(){if(n)return n.call(r)};return i?o.promise.then(function(){return l()}):l()}},Ye=new Map,ze=function(e,t){var i=e.fields,r=e.updater;i.forEach(function(e){r(e,t[e])})},$e=function(e,t){var i=e.state,r=u;if(Ye.has(r)){var n=Ye.get(r);n.state=i,n.wormholes.forEach(function(e){ze(e,i)})}return t};let qe=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.adPlayheadPosition=0,this.isLiveLinear=!1}adPlayheadPositionHandler(e){!this.pbar||null==e||isNaN(e)||e<0||(this.pbar.style.width=100*e+"%")}render(){return P("div",{class:"avia-ad-prog-bar",ref:e=>this.pbar=e})}static get watchers(){return{adPlayheadPosition:["adPlayheadPositionHandler"]}}static get style(){return"avia-ad-progress-bar{display:block;position:absolute;background:var(--avia-ad-progress-track-color);position:absolute;height:3px;bottom:0;left:0;right:0;user-select:none}.avia-ad-prog-bar{height:3px;user-select:none;background-color:var(--avia-ad-progress-color);width:0%}"}};We(qe,["adPlayheadPosition","isLiveLinear"]);let Qe=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.actionEvent=Q(this,"action",7),this.toggled=!1,this.compact=!1,this.icon=!1,this.variant=!1,this.actions="",this.ids="",this.disabled=!1,this.focused=!1,this.TAP_THRESHOLD=300,this.isTouch="ontouchstart"in document.documentElement}onClick(e){this.isTouch?Be(e):this.execAction()}onTouchStart(e){Be(e),this.touchStartStamp=e.timeStamp}onTouchEnd(e){this.touchStartStamp&&e.timeStamp-this.touchStartStamp<=this.TAP_THRESHOLD&&(this.touchStartStamp=null,this.execAction())}onFocus(){this.element.classList.contains("focus-visible")&&(this.focused=!0)}onBlur(){this.focused&&(this.focused=!1)}onKeyDown(e){switch(e.key){case"Enter":case" ":return this.element.click(),void Be(e)}}getCsvValue(e,t=+this.toggled){return Ne(e)[t]}execAction(){const e=this.getCsvValue(this.actions);e&&this.actionEvent.emit({action:e})}render(){var e;const t=this.getCsvValue(this.ids)||this.locId,i=null===(e=this.localeData)||void 0===e?void 0:e[t],r={"aria-label":i};return!this.focused&&i&&(r.title=i),P(R,Object.assign({disabled:this.disabled,tabIndex:0},r),P("slot",null))}get element(){return this}static get style(){return"avia-button{display:inline-block;background-color:transparent;height:var(--avia-control-bar-btn-height);width:var(--avia-control-bar-btn-width);color:var(--avia-control-bar-btn-text-color);border:var(--avia-control-bar-btn-border);border-width:var(--avia-control-bar-btn-border-width);border-radius:var(--avia-control-bar-btn-border-radius);outline:var(--avia-control-bar-btn-border-outline);cursor:var(--avia-control-bar-btn-border-cursor);pointer-events:all}avia-button:hover{color:var(--avia-control-bar-btn-text-color-hover)}avia-button[disabled]{cursor:var(--avia-control-bar-btn-disabled-cursor);opacity:var(--avia-control-bar-btn-disabled-opacity);pointer-events:none}avia-button[icon]{padding:0;margin:0;background-position:center;background-size:var(--avia-icon-btn-bg-size);background-repeat:no-repeat;user-select:none}avia-button[compact]{width:var(--avia-compact-button-width);height:var(--avia-compact-button-height);border-radius:var(--avia-compact-button-border-radius);background-color:var(--avia-compact-button-background-color)}"}};We(Qe,["localeData"]);let Xe=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.isLiveLinear=!1,this.controlMode=_e.NONE}async getHeight(){return this.el.getBoundingClientRect().height}render(){return P(R,{class:this.isLiveLinear?"avia-live-linear":""},P("slot",{name:"top"},this.isLiveLinear?"":P("avia-progress-bar",null)),P("div",{class:"avia-control-container"},P("div",{class:"avia-control-group-left"},P("slot",{name:"left"},P("avia-play-toggle",null),P("avia-mute-toggle",null),P("avia-volume-slider",null))),P("div",{class:"avia-control-group-center"},P("slot",{name:"center"})),P("div",{class:"avia-control-group-right"},P("slot",{name:"right"},P("avia-time-display",null),P("avia-live-control",null),P("avia-text-toggle",null),P("avia-settings-toggle",null),P("avia-fullscreen-toggle",null)))))}get el(){return this}static get style(){return'avia-control-bar{box-sizing:border-box;position:absolute;bottom:0;left:0;width:100%;height:var(--avia-control-bar-height);padding:0 var(--avia-default-spacing);background:var(--avia-control-bar-bg);display:none;transition:var(--avia-active-transition-in)}avia-control-bar.avia-live-linear{padding-top:var(--avia-live-padding-top)}avia-ui[control-mode="content"] avia-control-bar{display:block}avia-ui:not([active]) avia-control-bar{opacity:0;transition:var(--avia-active-transition-out)}.avia-control-container{display:flex;justify-content:space-between;align-items:center;height:var(--avia-control-bar-btn-height);flex-wrap:nowrap}.avia-control-container avia-button{height:var(--avia-control-bar-btn-height)}avia-control-bar.avia-layout-c-30 .avia-control-group-left,avia-control-bar.avia-layout-c-30 .avia-control-group-right{width:35%}avia-control-bar.avia-layout-c-30 .avia-control-group-center{width:30%}avia-control-bar.avia-layout-c-40 .avia-control-group-left,avia-control-bar.avia-layout-c-40 .avia-control-group-right{width:30%}avia-control-bar.avia-layout-c-40 .avia-control-group-center{width:40%}avia-control-bar.avia-layout-c-50 .avia-control-group-left,avia-control-bar.avia-layout-c-50 .avia-control-group-right{width:25%}avia-control-bar.avia-layout-c-50 .avia-control-group-center{width:50%}avia-control-bar.avia-layout-c-60 .avia-control-group-left,avia-control-bar.avia-layout-c-60 .avia-control-group-right{width:20%}avia-control-bar.avia-layout-c-60 .avia-control-group-center{width:60%}avia-control-bar.avia-layout-c-70 .avia-control-group-left,avia-control-bar.avia-layout-c-70 .avia-control-group-right{width:15%}avia-control-bar.avia-layout-c-70 .avia-control-group-center{width:70%}avia-control-bar[avia-layout=default] .avia-control-group-left,avia-control-bar[avia-layout=default] .avia-control-group-right{display:flex;height:var(--avia-control-bar-btn-height);flex-basis:auto}avia-control-bar[avia-layout=default] .avia-control-group-left{flex-grow:1}.avia-control-group-left,.avia-control-group-right,.avia-control-group-center,.avia-control-group-left>*,.avia-control-group-right>*,.avia-control-group-center>*{display:flex;height:var(--avia-control-bar-btn-height);flex-basis:auto;align-items:center}.avia-control-group-center>*{flex-grow:1}.avia-control-group-right,.avia-control-group-right>*{justify-content:flex-end}.avia-control-group-left>*{justify-content:flex-start}.avia-control-group-center>*{justify-content:space-evenly}.avia-control-group-left>*>*{margin-right:var(--avia-half-spacing)}.avia-control-group-right>*>*{margin-left:var(--avia-half-spacing)}avia-control-bar>avia-progress-seek:empty{display:none}.avia-control-group-left>*:empty,.avia-control-group-right>*:empty,.avia-control-group-center>*:empty{display:none}'}};We(Xe,["isLiveLinear","controlMode"]);let Je=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.isLiveLinear=!1,this.isDvr=!1}render(){if(this.isLiveLinear||this.isDvr)return"";const e=this.currentTimeSeconds||0,t=this.localeData?Oe(e,this.localeData):"";return P("div",{class:"avia-current-time","aria-label":t,title:t},Me(e))}static get style(){return":host{display:inline-block}.avia-current-time{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-current-time{text-align:right}"}};We(Je,["currentTimeSeconds","localeData","isLiveLinear","isDvr"]);let Ze=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.isLiveLinear=!1,this.isDvr=!1}render(){if(this.isLiveLinear||this.isDvr)return"";const e=this.durationSeconds||0,t=this.localeData?Oe(e,this.localeData):"";return P("div",{class:"avia-duration","aria-label":t,title:t},Me(this.durationSeconds||0))}static get style(){return":host{display:inline-block}.avia-duration{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-duration{text-align:right}"}};We(Ze,["durationSeconds","localeData","isLiveLinear","isDvr"]);let et=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.fullscreen=!1,this.fullscreenDisabled=!0,this.compact=!1}render(){return P("avia-button",{ids:`${Ie.FULL_SCREEN_ENTER}, ${Ie.FULL_SCREEN_EXIT}`,actions:`${be.ENTER_FULLSCREEN}, ${be.EXIT_FULLSCREEN}`,disabled:this.fullscreenDisabled,toggled:this.fullscreen,compact:this.compact,icon:!0})}static get style(){return"avia-fullscreen-toggle{display:inline-block}avia-fullscreen-toggle avia-button{background-image:var(--avia-fs-icon)}avia-fullscreen-toggle avia-button:hover{background-image:var(--avia-fs-icon-hover)}avia-fullscreen-toggle avia-button[toggled]{background-image:var(--avia-fs-exit-icon)}avia-fullscreen-toggle avia-button[toggled]:hover{background-image:var(--avia-fs-exit-icon-hover)}"}};We(et,["fullscreen","fullscreenDisabled"]);let tt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.isLiveLinear=!1,this.isDvr=!1,this.live=!1}render(){if(!this.isLiveLinear&&!this.isDvr)return;const e=this.live||this.isLiveLinear,t=e?Ie.LIVE:Ie.GO_LIVE;return P("avia-button",{actions:`${be.NONE}, ${be.GO_TO_LIVE}`,toggled:this.live,disabled:e},P("avia-text",{"loc-id":t}))}static get style(){return"avia-live-control{display:inline-block;margin-right:var(--avia-default-spacing)}avia-live-control avia-button{width:auto;height:auto !important;font-size:0.9em;text-align:right;overflow:hidden}avia-live-control avia-button[disabled]{opacity:1;cursor:default}avia-live-control avia-button::before,avia-live-control avia-button[disabled]::before{content:'• ';color:red;font-size:0.9em}"}};We(tt,["isLiveLinear","live","isDvr"]);let it=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.muted=!1,this.muteDisabled=!0,this.compact=!1}render(){return P("avia-button",{ids:`${Ie.MUTE}, ${Ie.UNMUTE}`,actions:`${be.MUTE}, ${be.UNMUTE}`,toggled:this.muted,disabled:this.muteDisabled,compact:this.compact,icon:!0})}static get style(){return"avia-mute-toggle{display:inline-block}avia-mute-toggle avia-button{background-image:var(--avia-unmuted-icon)}avia-mute-toggle avia-button:hover{background-image:var(--avia-unmuted-icon-hover)}avia-mute-toggle avia-button[toggled]{background-image:var(--avia-mute-icon)}avia-mute-toggle avia-button[toggled]:hover{background-image:var(--avia-mute-icon-hover)}"}};We(it,["muted","muteDisabled"]);let rt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.actionEvent=Q(this,"action",7),this.playing=!1,this.controlMode=_e.NONE,this.playDisabled=!0,this.pausable=!0,this.isTouch=!1}onClick(){const e=this.playing?be.PAUSE:be.PLAY;this.actionEvent.emit({action:e})}render(){const e=!this.playing;if((e||!this.isTouch)&&!this.playDisabled&&this.pausable&&this.controlMode===_e.CONTENT)return P("avia-overlay",{centered:!0},e&&P("avia-play-cta",null))}static get style(){return"avia-play-overlay{background-color:var(--avia-play-overlay-bg-color)}avia-play-overlay.focus-visible avia-play-cta{box-shadow:var(--avia-focus-box-shadow-inner)}"}};We(rt,["playing","playDisabled","pausable","controlMode","isTouch"]);let nt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.playing=!1,this.playDisabled=!0,this.compact=!1}render(){const e=!this.playing,t=[Ie.PLAY,this.pausable?Ie.PAUSE:Ie.STOP],i=[be.PLAY,this.pausable?be.PAUSE:be.STOP],r=e?this.pausable?Ie.PAUSE:Ie.STOP:Ie.PLAY;return P("avia-button",{ids:t.join(","),actions:i.join(","),disabled:this.playDisabled,"loc-id":r,toggled:this.playing,compact:this.compact,variant:!this.pausable,icon:!0})}static get style(){return"avia-play-toggle{display:inline-block}avia-play-toggle avia-button{background-image:var(--avia-play-icon)}avia-play-toggle avia-button:hover{background-image:var(--avia-play-icon-hover)}avia-play-toggle avia-button[toggled]{background-image:var(--avia-pause-icon)}avia-play-toggle avia-button[toggled]:hover{background-image:var(--avia-pause-icon-hover)}avia-play-toggle avia-button[toggled][variant]{background-image:var(--avia-stop-icon)}avia-play-toggle avia-button[toggled][variant]:hover{background-image:var(--avia-stop-icon-hover)}"}};We(nt,["playing","playDisabled","pausable"]);let at=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.actionEvent=Q(this,"action",7),this.posterActive=!1}handleAction(e){this.actionEvent.emit({action:be.POSTER_PLAY}),Be(e)}render(){if(this.posterActive)return P("avia-overlay",null,ke(this.posterImageUrl)?"":P("img",{src:this.posterImageUrl}),P("div",{class:""},P("slot",null)),P("avia-overlay",{centered:!0},P("avia-play-cta",null)))}static get style(){return"avia-poster img{width:100%;height:auto}"}};We(at,["posterActive","posterImageUrl"]);let ot=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.actionEvent=Q(this,"action",7),this.increment=15,this.hoverDelay=250,this.hovering=!1,this.cursor=0,this.imgElement=document.createElement("img"),this.dragging=!1}onMouseEnter(e){clearTimeout(this.hoverTimeoutHandle),this.hoverTimeoutHandle=setTimeout(()=>{this.hovering=!0,this.onMouseMove(e)},this.hoverDelay)}onMouseLeave(){clearTimeout(this.hoverTimeoutHandle),this.hovering=!1}onMouseMove(e){if(!this.active)return;const t=this.sliderElement.getBoundingClientRect(),i=Le(e).x-t.left,r=Ue(i/t.width,0,1);this.actionEvent.emit({action:"preview",value:{time:r*this.durationSeconds,percent:r}}),this.cursor=Ue(i,0,t.width)}get active(){return this.hovering||this.dragging}onChange(e){this.actionEvent.emit({action:"seek",value:e.detail.value})}onDragging(e){this.dragging=e.detail.value}componentDidRender(){if(!this.preview)return;const e=this.preview.data,t=this.sliderElement,i=t.offsetWidth;if(e){const t=this.imgElement;t.src!=e.url&&(t.src=e.url);const r=this.canvasElement,n=.25,a=Math.min(i*n/e.width,1),o=r.getContext("2d"),s=e.width*a,l=e.height*a;r.width=s,r.height=l,o.drawImage(t,e.x,e.y,e.width,e.height,0,0,s,l)}const r=this.previewElement,n=r.offsetWidth/2,a=i-n,o=this.cursor<n?n-this.cursor:this.cursor>a?a-this.cursor:0;r.style.marginLeft=o-n+"px",r.style.top=`-${r.offsetHeight+t.offsetHeight/2}px`}render(){var e,t;const i=this.localeData?function(e,t,i){const r=Oe(e,i),n=Oe(t,i);return function(e,t,i="{{",r="}}"){if(!e)return e;const n=new RegExp(`${i}((?:(?!(${i}|${r})).)+)${r}`,"g");return e.replace(n,(e,i)=>void 0!==t[i]?t[i]:e)}(i[Ie.VALUE_OF_TOTAL],{value:r,total:n})}(this.currentTimeSeconds,this.durationSeconds,this.localeData):"",r=Ne(this.segmentBreakPositions).map(e=>({value:parseFloat(e)}));return P("avia-slider",{ref:e=>this.sliderElement=e,"loc-id":Ie.SEEK,"aria-valuetext":i,list:r,value:this.currentTimeSeconds,max:this.durationSeconds,increment:this.increment,onChange:e=>this.onChange(e),onDragging:e=>this.onDragging(e)},P("div",{ref:e=>this.previewElement=e,class:"avia-progress-preview",style:{visibility:this.active?"visible":"hidden",left:this.cursor+"px"}},P("canvas",{ref:e=>this.canvasElement=e,class:"avia-progress-img",style:{display:(null===(e=this.preview)||void 0===e?void 0:e.data)?"block":"none"}}),P("div",{ref:e=>this.textElement=e,class:"avia-progress-text"},null===(t=this.preview)||void 0===t?void 0:t.value)))}static get style(){return":root{--avia-progress-preview-height:24px;--avia-progress-preview-width:50px;--avia-progress-preview-line-height:24px;--avia-progress-preview-top:-34px;--avia-progress-preview-bg-color:rgba(44, 44, 44, 0.7);--avia-progress-preview-color:rgb(220, 220, 220);--avia-progress-preview-font-size:13px;--avia-progress-preview-border-radius:4px}.avia-progress-preview{position:absolute;line-height:var(--avia-progress-preview-line-height);background:var(--avia-progress-preview-bg-color);color:var(--avia-progress-preview-color);font-size:var(--avia-progress-preview-font-size);text-align:center;border-radius:var(--avia-progress-preview-border-radius);user-select:none;overflow:hidden}.avia-progress-text{padding:0 0.5em 0 0.5em;white-space:nowrap}"}};We(ot,["currentTimeSeconds","durationSeconds","localeData","seekDisabled","segmentBreakPositions","preview"]);let st=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.seekBackDisabled=!1,this.isLiveLinear=!1}render(){return this.isLiveLinear?"":P("avia-button",{actions:be.SEEK_BACK,disabled:this.seekBackDisabled,"loc-id":Ie.SEEK_BACK,icon:!0})}static get style(){return"avia-seek-back-button{display:inline-block}avia-seek-back-button avia-button{background-image:var(--avia-seek-back-icon)}avia-seek-back-button avia-button:hover{background-image:var(--avia-seek-back-icon-hover)}"}};We(st,["seekBackDisabled","isLiveLinear"]);let lt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.seekForwardDisabled=!1,this.isLiveLinear=!1}render(){return this.isLiveLinear?"":P("avia-button",{actions:be.SEEK_FORWARD,disabled:this.seekForwardDisabled,"loc-id":Ie.SEEK_FORWARD,icon:!0})}static get style(){return"avia-seek-forward-button{display:inline-block}avia-seek-forward-button avia-button{background-image:var(--avia-seek-forward-icon)}avia-seek-forward-button avia-button:hover{background-image:var(--avia-seek-forward-icon-hover)}"}};We(lt,["seekForwardDisabled","isLiveLinear"]);let ct=class extends HTMLElement{constructor(){super(),this.__registerHost()}componentDidRender(){!this.debouncer&&this.accIndicatorState.displayTime>0&&(this.debouncer=Re(()=>{var e;null===(e=this.el)||void 0===e||e.classList.remove(Pe.INDICATOR_ACTIVE),this.visible=!1},this.accIndicatorState.displayTime)),this.visible&&(setTimeout(()=>this.el.classList.add(Pe.INDICATOR_ACTIVE),0),this.debouncer&&this.debouncer())}render(){const e=this.accIndicatorState;if(!e.seekForward&&!e.seekBack)return this.visible=!1,"";this.visible=!0;const t=this.accIndicatorState.seekTime,i=this.durationSeconds;let r="";if(i&&!isNaN(i)){const e=Me(i);!isNaN(t)&&t>=0&&(r=Me(t)+" / "+e)}return P(R,{class:e.seekForward?Pe.ACC_FWD:Pe.ACC_BACK},P("span",null,r),P("div",{class:"avia-acc-arrow"}))}get el(){return this}static get style(){return"avia-seek-indicator{position:absolute;display:inline-block;box-sizing:border-box;border-radius:var(--avia-seek-indicator-border-radius);background-color:var(--avia-seek-indicator-background-color);color:var(--avia-seek-indicator-color);height:var(--avia-seek-indicator-height);font-size:var(--avia-seek-indicator-font-size);font-family:var(--avia-seek-indicator-font-family);line-height:var(--avia-seek-indicator-line-height);top:calc(50% - 24px);opacity:0;transition-property:opacity;transition-duration:300ms;transition-timing-function:ease-in}avia-seek-indicator.avia-indicator-active{opacity:1}avia-seek-indicator:empty{opacity:0}.avia-acc-fwd{right:12px;padding-left:48px;padding-right:12px;text-align:right}.avia-acc-back{left:12px;padding-right:48px;padding-left:12px}avia-seek-indicator .avia-acc-arrow{width:24px;height:18px;position:absolute;top:calc(50% - 9px);background-image:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2017.81%2024%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22Layer_2%22%20data-name%3D%22Layer%202%22%3E%3Cg%20id%3D%22Layer_2-2%22%20data-name%3D%22Layer%202%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M0%2C6.55V17.79a.54.54%2C0%2C0%2C0%2C.54.54l5.15-.08a.54.54%2C0%2C0%2C1%2C.54.54v4.67a.54.54%2C0%2C0%2C0%2C.92.38l10.51-11.2a.56.56%2C0%2C0%2C0%2C0-.76L7.25.17a.54.54%2C0%2C0%2C0-.93.37V5.39a.54.54%2C0%2C0%2C1-.54.54L.54%2C6A.54.54%2C0%2C0%2C0%2C0%2C6.55Z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');background-repeat:no-repeat;background-size:24px 18px}.avia-acc-fwd .avia-acc-arrow{left:12px}.avia-acc-back .avia-acc-arrow{transform:rotate(180deg);right:12px}"}};var ut,dt;We(ct,["durationSeconds","accIndicatorState"]),function(e){e.AB="Abkhaz",e.AE="Avesta",e.AF="Afrikaans",e.AK="Akan",e.AM="አማርኛ",e.AN="Aragonés",e.AR="العربية",e.AV="Aвар мацӀ",e.AY="Aymar aru",e.AZ="azərbaycan dili",e.BA="башҡорт теле",e.BE="беларуская мова",e.BG="български език",e.BH="भोजपुरी",e.BI="Bislama",e.BM="Bamanankan",e.BN="বাংলা",e.BO="བོད་ཡིག",e.BR="Brezhoneg",e.BS="Bosanski jezik",e.CA="català",e.CE="нохчийн мотт",e.CH="Chamoru",e.CO="Corsu",e.CR="ᓀᐦᐃᔭᐍᐏᐣ",e.CS="čeština",e.CU="ѩзыкъ словѣньскъ",e.CV="чӑваш чӗлхи",e.CY="Cymraeg",e.DA="Dansk",e.DE="Deutsch",e.DZ="རྫོང་ཁ",e.EE="Eʋegbe",e.EL="ελληνικά",e.EN="English",e.EO="Esperanto",e.ES="Español",e.ET="Eesti",e.EU="Euskara",e.FA="فارسی",e.FF="Fulfulde",e.FI="Suomi",e.FJ="Vosa Vakaviti",e.FO="Føroyskt",e.FR="Français",e.FY="Frysk",e.GA="Gaeilge",e.GD="Gàidhlig",e.GL="Galego",e.GN="Avañe'ẽ",e.GU="ગુજરાતી",e.GV="Gaelg",e.HA="(Hausa) هَوُسَ",e.HE="עברית",e.HI="हिन्दी",e.HO="Hiri Motu",e.HR="hrvatski jezik",e.HT="Kreyòl ayisyen",e.HU="Magyar",e.HY="Հայերեն",e.HZ="Otjiherero",e.IA="Interlingua",e.ID="Bahasa Indonesia",e.IE="Interlingue",e.IG="Asụsụ Igbo",e.II="ꆈꌠ꒿ Nuosuhxop",e.IK="Iñupiaq",e.IO="Ido",e.IS="Íslenska",e.IT="Italiano",e.IU="ᐃᓄᒃᑎᑐᑦ",e.JA="日本人",e.JV="Basa Jawa",e.KA="ქართული",e.KG="Kikongo",e.KI="Gĩkũyũ",e.KJ="Kuanyama",e.KK="қазақ тілі",e.KL="kalaallisut",e.KM="ខ្មែរ",e.KN="ಕನ್ನಡ",e.KO="한국어",e.KR="Kanuri",e.KS="कश्मीरी,",e.KU="Kurdî‎",e.KV="коми кыв",e.KW="Kernewek",e.KY="Кыргызча",e.LA="Latine",e.LB="Lëtzebuergesch",e.LG="Luganda",e.LI="Limburgs",e.LN="Lingála",e.LO="ພາສາລາວ",e.LT="Lietuvių kalba",e.LU="Kiluba",e.LV="latviešu valoda",e.MG="fiteny malagasy",e.MH="Kajin M̧ajeļ",e.MI="te reo Māori",e.MK="македонски јазик",e.ML="മലയാളം",e.MN="Монгол хэл",e.MR="मराठी",e.MS="Bahasa Melayu‎",e.MT="Malti",e.MY="ဗမာစာ",e.NA="Dorerin Naoero",e.NB="Norsk Bokmål",e.NE="नेपाली",e.NG="Owambo",e.NL="Nederlands",e.NN="Norsk Nynorsk",e.NO="Norsk",e.NR="IsiNdebele",e.NV="Diné bizaad",e.NY="ChiCheŵa",e.OC="Occitan",e.OJ="ᐊᓂᔑᓈᐯᒧᐎᓐ",e.OM="Afaan Oromoo",e.OR="ଓଡ଼ିଆ",e.OS="ирон æвзаг",e.PA="ਪੰਜਾਬੀ",e.PI="पालि, पाळि",e.PL="Język polski",e.PS="پښتو",e.PT="Português",e.QU="Runa Simi",e.RM="Rumantsch Grischun",e.RN="Ikirundi",e.RO="Română",e.RU="русский",e.RW="Ikinyarwanda",e.SA="संस्कृतम्",e.SC="sardu",e.SD="सिन्धी‎",e.SE="Davvisámegiella",e.SG="Yângâ tî sängö",e.SI="සිංහල",e.SK="Slovenčina",e.SL="Slovenski jezik",e.SM="Gagana fa'a Samoa",e.SN="chiShona",e.SO="Soomaaliga",e.SQ="Shqip",e.SR="српски језик",e.SS="SiSwati",e.ST="Sesotho",e.SU="Basa Sunda",e.SV="Svenska",e.SW="Kiswahili",e.TA="தமிழ்",e.TE="తెలుగు",e.TG="тоҷикӣ‎",e.TH="ไทย",e.TI="ትግርኛ",e.TK="Türkmen",e.TL="Wikang Tagalog",e.TN="Setswana",e.TO="Faka Tonga",e.TR="Türkçe",e.TS="Xitsonga",e.TT="татар теле",e.TW="Twi",e.TY="Reo Tahiti",e.UG="ئۇيغۇرچە‎",e.UK="Українська",e.UR="اردو",e.UZ="Oʻzbek‎",e.VE="Tshivenḓa",e.VI="Tiếng Việt",e.VO="Volapük",e.WA="Walon",e.WO="Wollof",e.XH="IsiXhosa",e.YI="ייִדיש",e.YO="Yorùbá",e.ZA="Saɯ cueŋƅ",e.ZH="中文 (Zhōngwén)",e.ZU="IsiZulu"}(ut||(ut={})),function(e){e.MAIN="main",e.LANGUAGE="language",e.QUALITY="quality",e.NONE="none"}(dt||(dt={}));let pt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.actionEvent=Q(this,"action",7),this.settings=null,this.localeData=null,this.qualityLabel=0,this.menuState=dt.NONE,this.menuButtonClass="avia-menu-button",this.menuButtonSelector=".avia-menu-button:not([disabled])",this.qualityIndex=-1}onClick(e){const t=e.target,i=t.dataset.action,r=t.dataset.key,n=t.dataset.value;i&&(this.menuState=i),r&&this.selectListItem(t),r&&n&&("quality"==r&&(this.qualityIndex=parseInt(n)),this.actionEvent.emit({action:"quality"==r?be.QUALITY_SELECT:be.LANGUAGE_SELECT,value:"quality"==r?{index:n}:{trackType:r,trackId:n}}))}onKeyDown(e){var t,i,r;if(!(null===(t=this.settings)||void 0===t?void 0:t.active)||this.menuState==dt.NONE)return;const n=document.activeElement,a=n.closest(".avia-list");if(!a)return;const o=Array.from(a.querySelectorAll(this.menuButtonSelector));if(!o)return;const s=(e,t,i=(e=>e))=>{const r=e.findIndex(e=>e===t)+1;return[...e.slice(r),...e.slice(0,r)].find(e=>i(e))},l=e.key;switch(l){case"Escape":this.close();break;case"ArrowUp":const e=s(o.reverse(),n);null==e||e.focus();break;case"ArrowDown":const t=s(o,n);null==t||t.focus();break;case"ArrowLeft":if(null===(i=a.previousElementSibling)||void 0===i?void 0:i.classList.contains("avia-list")){const e=a.previousElementSibling.querySelector(this.menuButtonSelector);return void(null==e||e.focus())}const c=document.querySelector(".avia-settings-back");(null==c?void 0:c.dataset.action)&&(this.menuState=c.dataset.action);break;case"ArrowRight":if(null===(r=a.nextElementSibling)||void 0===r?void 0:r.classList.contains("avia-list")){const e=a.nextElementSibling.querySelector(this.menuButtonSelector);return void(null==e||e.focus())}n.dataset.action&&(this.menuState=n.dataset.action);break;default:if(/^[A-Za-z0-9]$/.test(l)){const e=new RegExp("^"+l,"i"),t=s(o,n,t=>e.test(null==t?void 0:t.textContent));null==t||t.focus()}}}async close(){this.actionEvent.emit({action:be.SETTINGS_OFF}),this.menuState=dt.NONE}componentWillRender(){var e;(null===(e=this.settings)||void 0===e?void 0:e.active)&&this.menuState===dt.NONE&&(this.menuState=dt.MAIN)}disconnectedCallback(){clearTimeout(this.timeout)}render(){var e;const t=this.menuState;if((null===(e=this.settings)||void 0===e?void 0:e.active)&&t!==dt.NONE&&this.localeData)switch(this.menuState){case dt.MAIN:return this.getMainMenu();case dt.LANGUAGE:return this.getLangMenu();case dt.QUALITY:return this.getQualityMenu()}}createDataAttributes(e){return Object.entries(e).reduce((e,t)=>(e["data-"+t[0]]=t[1],e),{})}renderSubMenuItem({label:e,data:t={},disabled:i=!1}){return P("button",Object.assign({class:this.menuButtonClass,type:"button",disabled:i,role:"menuitem","aria-haspopup":"true"},this.createDataAttributes(t)),e)}renderListItem({label:e,data:t={},selected:i=!1,disabled:r=!1}){return P("button",Object.assign({class:this.menuButtonClass,type:"button",disabled:r,role:"menuitemradio","aria-checked":String(i)},this.createDataAttributes(t)),e)}renderList(e,t,i,r){return P("div",{class:`avia-list avia-${e}-list`},t&&P("div",{class:"avia-list-title"},t),P("div",{class:"avia-list-container"},i.map(e=>r(e))))}renderMenu(e,t,i){return clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const t=document.querySelector(`.avia-${e}-menu`),i=null==t?void 0:t.querySelector(this.menuButtonSelector);null==i||i.focus()},0),P("div",{class:`avia-settings-menu avia-${e}-menu`,role:"menu"},P("div",{class:"avia-settings-menu-header"},e!==dt.MAIN&&P("avia-button",{"loc-id":Ie.BACK,class:"avia-settings-back",disabled:!1,"data-action":dt.MAIN,icon:!0}),P("span",null,t),P("span",{class:"avia-spacer"}),P("avia-button",{"loc-id":Ie.CLOSE,class:"avia-menu-close",actions:be.SETTINGS_OFF,disabled:!1,icon:!0})),P("div",{class:"avia-menu-content"},i))}getMainMenu(){var e,t,i,r;const n=[{label:this.localeData[Ie.LANGUAGE],data:{action:dt.LANGUAGE},haspopup:!0,disabled:!((null===(e=this.settings.textTrackInfo)||void 0===e?void 0:e.track)||(null===(t=this.settings.audioTrackInfo)||void 0===t?void 0:t.track))},{label:this.localeData[Ie.QUALITY],data:{action:dt.QUALITY},haspopup:!0,disabled:!((null===(r=null===(i=this.settings.qualityInfo)||void 0===i?void 0:i.qualities)||void 0===r?void 0:r.length)>0)}];return this.renderMenu(dt.MAIN,this.localeData[Ie.SETTINGS],this.renderList("settings",null,n,this.renderSubMenuItem.bind(this)))}getLangMenu(){const e=this.settings.textTrackInfo,t=this.settings.audioTrackInfo,i=null==t?void 0:t.track,r=null==e?void 0:e.track,n=null==t?void 0:t.tracks,a=null==e?void 0:e.tracks,o=null==r?void 0:r.id,s=null==i?void 0:i.index,l=this.renderListItem.bind(this),c=[];return a&&a.length&&c.push(this.renderList("text",this.localeData[Ie.CAPTIONS],a.map(e=>({selected:e.id===o,disabled:1===a.length,label:this.getLangLabel(e),data:{key:"text",value:e.id}})),l)),n&&n.length&&c.push(this.renderList("audio",this.localeData[Ie.AUDIO],n.map(e=>({selected:e.index===s,disabled:1===n.length,label:this.getLangLabel(e),data:{key:"audio",value:e.index,description:"description"===e.type}})),l)),this.renderMenu(dt.LANGUAGE,this.localeData[Ie.LANGUAGE],c)}getQualityMenu(){const e=this.settings.qualityInfo.qualities.reduce((e,t)=>{const i=this.getQualityLabel(t),r=e.find(e=>e.label==i);return r?t.bitrate>r.data.bitrate&&(r.data.value=t.index,r.data.bitrate=t.bitrate):e.push({label:i,data:{key:"quality",value:t.index,bitrate:t.bitrate}}),e},[]),t=1===e.length,i=e.map(e=>Object.assign(Object.assign({},e),{selected:t||e.data.index===this.qualityIndex,disabled:t})).sort((e,t)=>t.data.bitrate-e.data.bitrate);if(i.length>1){const e=this.getQualityLabel(this.settings.qualityInfo.quality);i.unshift({selected:-1===this.qualityIndex,disabled:!1,label:`${this.localeData[Ie.AUTO]} (${e})`,data:{key:"quality",value:-1}})}return this.renderMenu(dt.QUALITY,this.localeData[Ie.QUALITY],this.renderList("quality",null,i,this.renderListItem.bind(this)))}getLangLabel(e){const t=(e.language||e.lang||"").split("-").shift().slice(0,2).toUpperCase();return ut[t]||this.localeData[Ie.UNKNOWN]}getQualityLabel(e){var t;if(null===(t=e.category)||void 0===t?void 0:t.length)return e.category[this.qualityLabel||0]}selectListItem(e){const t=e.parentElement.querySelector("[aria-checked=true]");t&&t.setAttribute("aria-checked",!1),e.setAttribute("aria-checked",!0)}get el(){return this}static get style(){return":root{--avia-chevron-right:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22white%22%3E%3Cpath%20id%3D%22Arrow_2_1%22%20d%3D%22M0%2C24L14.4%2C11.556%2C0%2C0%2C6.74%2C0%2C24%2C11.556%2C6.74%2C24Z%22%2F%3E%3C%2Fsvg%3E');--avia-x-symbol:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2012%2012%22%20width%3D%2212%22%20height%3D%2212%22%3E%3Cstyle%3Etspan%20%7B%20white-space%3Apre%20%7D%3C%2Fstyle%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M0.07%202.19L2.26%200L5.91%203.65L9.56%200L11.75%202.19L8.1%205.84L11.75%209.49L9.56%2011.68L5.91%208.03L2.26%2011.68L0.07%209.49L3.72%205.84L0.07%202.19Z%22%20%2F%3E%3C%2Fsvg%3E');--avia-menu-text-color:var(--avia-text-color);--avia-menu-text-color-hover:var(--avia-text-color-hover)}avia-settings{display:block;position:absolute;pointer-events:none}avia-settings>*{pointer-events:auto}.avia-settings-menu{min-width:180px;height:auto;background-color:rgba(0, 0, 0, 0.65);position:absolute;bottom:64px;right:var(--avia-default-spacing);display:flex;flex-direction:column;max-height:calc(100% - 1em - var(--avia-control-bar-height));border-radius:0.25em;overflow:hidden}avia-ui.avia-settings-nudge-left .avia-settings-menu{right:calc(var(--avia-default-spacing) + 48px)}.avia-settings-menu-header{padding:0.5em 0.25em 0.5em 0.75em;color:var(--avia-accent-color);background-color:black;border-bottom:1px solid #444;display:flex;align-items:center;justify-content:center;font-weight:bold}.avia-menu-button{background-color:transparent;border:none;outline:none;cursor:pointer;width:100%;text-align:left;color:var(--avia-menu-text-color);padding:1em;font-size:1em;background-position:right center;background-repeat:no-repeat;background-size:20% 20%;margin:0}.avia-menu-button:hover{color:var(--avia-menu-text-color-hover);background-color:rgba(0, 0, 0, 0.65)}.avia-menu-button[aria-haspopup=true]{background-image:var(--avia-chevron-right)}.avia-menu-button[disabled]{cursor:default;opacity:0.75}.avia-menu-button[disabled]:hover{background-color:transparent;color:var(--avia-menu-text-color)}.avia-menu-close{width:1.75em;height:2em;background-image:var(--avia-x-symbol);background-repeat:no-repeat;padding:0px}.avia-settings-back{width:1.75em;height:1.75em;background-image:var(--avia-chevron-right);background-repeat:no-repeat;background-size:100% 100%;transform:rotate(180deg);margin-right:1em}.avia-spacer{flex-grow:1}.avia-settings-menu.avia-language-menu{min-width:180px}.avia-menu-content{display:flex;flex-direction:row;overflow:hidden}.avia-menu-content>div{width:180px;color:var(--avia-menu-text-color)}.avia-menu-content>div:first-child{border-right:1px solid #888}.avia-menu-content>div:only-child{border-right:none}.avia-list{display:flex;flex-direction:column;font-size:0.95em}.avia-list-title{padding-left:1em;color:var(--avia-accent-color);font-size:0.9em;font-weight:bold;height:2em;line-height:2em;background-color:black;border-bottom:1px solid #444}.avia-list .avia-menu-button[aria-checked=true]{font-weight:bold;cursor:default;background-position:94% center;background-repeat:no-repeat;background-size:0.9em;background-image:var(--avia-selected-icon)}.avia-list .avia-list-container{overflow:scroll}.avia-settings-menu.avia-quality-menu{max-width:180px}.avia-menu-button[data-description]:after{content:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAACG0lEQVQ4jZ2Vz0tVQRTHP89QKJ9lm6ikzN6zJAlxJ1E8CJO27oo2IdKmRdBWwRZhkH9A4kJoI7ppIUWkibRsERpILpQCF9lPLPpBQc+vTJ0Lh+lduc8Dw8z9zJlz5sw5MzcniR1IAegDDgJrwCjwvqKZ4CBDa5VUkrTf6YbNnZc0JemHpHFJtbGtrBF0AOeAI8AxYAp44OYvAo+BT0AJeFVtBEnbI2lI/+RZtOPDxsuSmnwEd4FG4E+06xxQa2c8DSy6uSKwYufeBnwxfgGYAZaBU0kEWeWJpONux822bjWK8qHx63+PX9J6FU5+SWp3xm4av+PYSWMh8XXhiNat3IIMA5+BGqAM1ANX7BgSCfotwG/T+wrkgV3AptMJNrviCNKSOxlF0ufm7hu77NiIsVs1UWJbUsr0EvDBffe48YL1JcdeW98bO9hO5lI28tb63Y6VrS9U48Dn4Z0b563fdCyX6MUONlKMXwU63fdzNy5Y/8axpGgexUnukLRPUqOkvZKKkgYqlOtRl9AlY82OLRvrjh38lPTdavhbyl245gy1G1t07IDTzWNvR1a5EZXviq1rdeyesZHkJr+QtLZNeylpzG6oNz5R4U4UjYXo6xIH1bYGSfNmqD9a+9H42YRlNV4v6bSkQUkLkp5KanPzh5zxXr82i/HwXoX3vdsS3Bm9qLetKEI1ndjpHy2W8P84Y09GEzAGzP6nBWwBc7kMbCgO6BoAAAAASUVORK5CYII=');left:0.4em;top:0.25em;position:relative}"}};We(pt,["settings","localeData","qualityLabel"]);let ht=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.settingsDisabled=!0,this.excludedControls=null}render(){var e,t;if(null===(e=this.excludedControls)||void 0===e?void 0:e.includes(Ce.SETTINGS))return;const i=!0===(null===(t=this.settings)||void 0===t?void 0:t.active);return P("avia-button",{actions:`${be.SETTINGS_ON},${be.SETTINGS_OFF}`,disabled:this.settingsDisabled,"loc-id":Ie.SETTINGS,"aria-haspopup":"true","aria-expanded":i?"true":"false",toggled:i,icon:!0})}static get style(){return"avia-settings-toggle{display:inline-block;position:relative}avia-settings-toggle avia-button{background-image:var(--avia-settings-icon)}avia-settings-toggle avia-button:hover{background-image:var(--avia-settings-icon-hover)}"}};We(ht,["settings","settingsDisabled","excludedControls"]);let ft=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.changeEvent=Q(this,"change",7),this.inputEvent=Q(this,"input",7),this.draggingEvent=Q(this,"dragging",7),this.min=0,this.max=1,this.value=1,this.list=[],this.increment=.1,this.valueInternal=this.value,this.dragging=!1,this.focused=!1}onValueChange(e){this.dragging||(e<this.min?this.value=this.min:e>this.max?this.value=this.max:this.valueInternal=e)}onMinChange(e){this.value=xe(this.value,0,1,e,this.max)}onMaxChange(e){this.value=xe(this.value,0,1,this.min,e)}onListChange(e){e||(this.list=[])}onMouseDown(e){e.which>1||e.button>0||(Be(e),this.dragging=!0,this.draggingEvent.emit({value:!0}),this.move(e))}onMouseMove(e){this.dragging&&(Be(e),this.move(e))}onMouseUp(e){this.dragging&&(Be(e),this.dragging=!1,this.draggingEvent.emit({value:!1}),this.move(e),this.change(this.valueInternal))}onFocus(){this.el.classList.contains("focus-visible")&&(this.focused=!0)}onBlur(){this.focused&&(this.focused=!1)}onKeydown(e){const t=t=>{const i=this.value+=t;this.input(i),this.change(i),Be(e)};switch(e.keyCode){case 38:case 39:case 33:t(this.increment);break;case 37:case 40:case 34:t(-this.increment)}}onKeyup(e){const t=e.keyCode;-1!=[33,34,37,38,39,40].indexOf(t)&&Be(e)}move(e){const t=this.el.getBoundingClientRect(),i=xe(Ue((Le(e).x-t.left)/t.width,0,1),0,1,this.min,this.max);this.input(i)}toPercent(e){return De(xe(e,this.min,this.max))}input(e){const t=this.valueInternal,i=Ue(e,this.min,this.max);this.valueInternal=i,this.inputEvent.emit({value:i,previous:t})}change(e){const t=this.value,i=Ue(e,this.min,this.max);this.valueInternal=i,this.value=i,this.changeEvent.emit({value:i,previous:t})}render(){var e;const t=this.toPercent(this.valueInternal),i=null===(e=this.localeData)||void 0===e?void 0:e[this.locId];return P(R,{className:"avia-slider",role:"slider","aria-label":i,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.value,"aria-valuetext":this.ariaValuetext||t,tabIndex:0},P("div",{class:"avia-slider-track"}),P("div",{class:"avia-slider-value",style:{width:t}}),P("div",{class:"avia-slider-list"},this.list.map(e=>P("div",{class:"avia-slider-list-item",style:{left:this.toPercent(e.value)}}))),P("slot",null),P("button",{class:"avia-slider-handle",type:"button",style:{left:t},tabIndex:-1}))}get el(){return this}static get watchers(){return{value:["onValueChange"],min:["onMinChange"],max:["onMaxChange"],list:["onListChange"]}}static get style(){return":root{--avia-slider-height:12px;--avia-slider-color:var(--avia-accent-color);--avia-slider-handle-color:var(--avia-accent-color);--avia-slider-track-color:#444;--avia-slider-track-radius:2px;--avia-slider-value-height:4px;--avia-slider-handle-width:12px;--avia-slider-handle-height:12px;--avia-slider-handle-radius:12px}avia-slider{display:block;height:var(--avia-slider-height);cursor:pointer;position:relative}.avia-slider-track{position:absolute;width:100%;height:var(--avia-slider-value-height);top:calc( (var(--avia-slider-height) - var(--avia-slider-value-height)) * 0.5);background:var(--avia-slider-track-color);border-radius:var(--avia-slider-track-radius)}.avia-slider-value{position:absolute;height:var(--avia-slider-value-height);top:calc( (var(--avia-slider-height) - var(--avia-slider-value-height)) * 0.5);background-color:var(--avia-slider-color);border-radius:var(--avia-slider-track-radius)}.avia-slider-handle{position:absolute;top:calc((var(--avia-slider-handle-height) - var(--avia-slider-height)) / -2);width:var(--avia-slider-handle-width);height:var(--avia-slider-handle-height);margin-left:calc(var(--avia-slider-handle-width) / -2);background-color:var(--avia-slider-handle-color);border-radius:var(--avia-slider-handle-radius);cursor:pointer;border:0;padding:0;outline:none}.avia-slider-list{position:absolute;width:100%;height:var(--avia-slider-value-height);top:calc( (var(--avia-slider-height) - var(--avia-slider-value-height)) * 0.5);background:transparent}.avia-slider-list-item{background-color:var(--avia-segment-marker-color);width:var(--avia-segment-marker-width);height:var(--avia-segment-marker-height);position:absolute;top:0}avia-slider:focus,avia-slider.focus-visible{outline:none}avia-slider.focus-visible .avia-slider-handle{box-shadow:var(--avia-focus-box-shadow)}avia-slider:focus,avia-slider .focus-visible{box-shadow:none}"}};We(ft,["localeData"]);let yt=class extends HTMLElement{constructor(){super(),this.__registerHost()}render(){var e;return P(R,null,null===(e=this.localeData)||void 0===e?void 0:e[this.locId])}static get style(){return"avia-text{color:var(--avia-control-bar-btn-text-color)}"}};We(yt,["localeData"]);let vt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.textTrackEnabled=!1,this.textDisabled=!0,this.excludedControls=null}render(){var e;if(!(null===(e=this.excludedControls)||void 0===e?void 0:e.includes(Ce.TEXT)))return P("avia-button",{ids:`${Ie.CLOSED_CAPTIONS_ON}, ${Ie.CLOSED_CAPTIONS_OFF}`,actions:`${be.TEXT_ON}, ${be.TEXT_OFF}`,disabled:this.textDisabled,toggled:this.textTrackEnabled,icon:!0})}static get style(){return"avia-text-toggle{display:inline-block}avia-text-toggle avia-button{background-image:var(--avia-text-on-icon)}avia-text-toggle avia-button:hover{background-image:var(--avia-text-on-icon-hover)}avia-text-toggle avia-button[toggled]{background-image:var(--avia-text-off-icon)}avia-text-toggle avia-button[toggled]:hover{background-image:var(--avia-text-off-icon-hover)}"}};We(vt,["textTrackEnabled","textDisabled","excludedControls"]);let mt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.isLiveLinear=!1,this.isDvr=!1}render(){return this.isLiveLinear||this.isDvr?"":P("div",{class:"avia-time-display"},this.timeDisplayValue)}static get style(){return"avia-time-display{display:inline-block;margin-right:var(--avia-default-spacing)}.avia-time-display{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-time-display{text-align:right}"}};We(mt,["timeDisplayValue","currentTimeSeconds","durationSeconds","isLiveLinear","isDvr"]);let gt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.muteState=!1,this.unmuteCtaVisible=!1}render(){return this.unmuteCtaVisible&&this.muteState?P("avia-button",{actions:be.UNMUTE},P("avia-text",{"loc-id":Ie.CLICK_TO_UNMUTE})):""}static get style(){return"avia-unmute-cta{box-sizing:border-box;display:inline-block;position:absolute;top:64px;height:var(--avia-control-bar-btn-height);left:var(--avia-default-spacing);pointer-events:auto;background-color:rgba(0, 0, 0, 0.415);border-radius:4px;opacity:1}avia-unmute-cta avia-button{background-image:var(--avia-mute-icon);background-position:-31px center;background-repeat:no-repeat;background-size:60% 45%;line-height:var(--avia-control-bar-btn-height);padding-right:var(--avia-default-spacing);padding-left:50px;font-size:1.1em;text-align:left;width:auto;height:var(--avia-control-bar-btn-height);color:white;cursor:pointer;opacity:0.85}avia-unmute-cta avia-button:hover{background-image:var(--avia-mute-icon-hover)}"}};We(gt,["muteState","unmuteCtaVisible"]);let At=class extends HTMLElement{constructor(){super(),this.__registerHost()}componentDidRender(){var e;!this.debouncer&&this.accIndicatorState.displayTime>0&&(this.debouncer=Re(()=>{var e;null===(e=this.el)||void 0===e||e.classList.remove(Pe.INDICATOR_ACTIVE),this.visible=!1},this.accIndicatorState.displayTime)),this.visible&&(setTimeout(()=>this.el.classList.add(Pe.INDICATOR_ACTIVE),0),null===(e=this.debouncer)||void 0===e||e.call(this))}render(){var e;const t=this.accIndicatorState;if(!t.volumeKey)return null===(e=this.el)||void 0===e||e.classList.remove(Pe.INDICATOR_ACTIVE),this.visible=!1,"";this.visible=!0;const i=0===this.volume?0:Ue(this.volume,0,1);return P(R,{class:t.muted||0==this.volume?Pe.ACC_VOL_OFF:Pe.ACC_VOL_ON},P("div",{class:Pe.ACC_VOL},P("div",{class:Pe.ACC_VOL_METER,style:{width:De(i)}}),P("div",{class:Pe.ACC_VOL_OVERLAY})))}get el(){return this}static get style(){return"avia-volume-indicator{position:absolute;display:block;box-sizing:border-box;border-radius:var(--avia-volume-indicator-border-radius);background-color:var(--avia-volume-indicator-background-color);width:0;height:0;right:var(--avia-volume-indicator-right);bottom:var(--avia-volume-indicator-bottom);visibility:hidden;padding-top:48px;opacity:0;transition-property:opacity;transition-duration:300ms;transition-timing-function:ease-in;box-shadow:0px 0px 1px 1px rgba(0, 0, 0, 0.3)}avia-volume-indicator:empty{opacity:0}.avia-acc-vol{width:48px;margin:0 auto;background-color:black;height:4px;position:relative}.avia-acc-vol-meter{height:4px;background-color:#fff}.avia-vol-meter-overlay{position:absolute;top:0;left:0;height:4px;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAFElEQVQImWNAA/+Z0EUICDAwMAAANNwBBuf8FlcAAAAASUVORK5CYII=');width:100%}avia-volume-indicator.avia-indicator-active{width:var(--avia-volume-indicator-width);height:var(--avia-volume-indicator-height);opacity:1.0}avia-volume-indicator.avia-volume-on::before,avia-volume-indicator.avia-volume-off::before{content:\"\";position:absolute;top:0px;right:0px;bottom:0px;left:0px;opacity:0.85;background-repeat:no-repeat;background-position:center 12px;background-size:40% 30%}avia-volume-indicator.avia-volume-on::before{background-image:var(--avia-unmuted-icon)}avia-volume-indicator.avia-volume-on::before:hover{background-image:var(--avia-unmuted-icon-hover)}avia-volume-indicator.avia-volume-off::before{background-image:var(--avia-mute-icon)}avia-volume-indicator.avia-volume-off::before:hover{background-image:var(--avia-mute-icon-hover)}"}};We(At,["volume","accIndicatorState"]);let Et=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.changeEvent=Q(this,"action",7),this.excludedControls=null}onInput(e){this.changeEvent.emit({action:be.VOLUME,value:e.detail.value})}onDragging(e){!0===e.detail.value&&this.changeEvent.emit({action:be.UNMUTE,value:!0})}render(){var e;if(!(null===(e=this.excludedControls)||void 0===e?void 0:e.includes(Ce.VOLUME)))return P("avia-slider",{"loc-id":Ie.VOLUME,value:this.volume,onInput:e=>this.onInput(e),onDragging:e=>this.onDragging(e)})}static get style(){return"avia-volume-slider{display:flex;width:100px;margin-left:var(--avia-default-spacing)}avia-volume-slider avia-slider{width:100%;margin-top:-4px}"}};We(Et,["volume","excludedControls"]);let Tt=class extends HTMLElement{constructor(){super(),this.__registerHost(),this.waiting=!1}render(){if(this.waiting)return P("avia-overlay",{centered:!0},P("avia-spinner",null))}static get style(){return"avia-waiting-overlay{display:block;justify-content:center;align-items:center;display:flex}avia-waiting-overlay slot-fb:not(:empty)~avia-spinner{display:none}"}};We(Tt,["waiting"]);const bt=oe(class extends HTMLElement{constructor(){super(),this.__registerHost()}render(){return P(R,null,P("avia-volume-indicator",null),P("avia-seek-indicator",null))}static get style(){return"avia-accessibility{display:block}"}},[0,"avia-accessibility"]),St=oe(class extends HTMLElement{constructor(){super(),this.__registerHost()}render(){return P(R,null,P("slot",null))}static get style(){return"avia-active{display:block;transition:var(--avia-active-transition-in)}avia-ui:not([active]) avia-active{opacity:0;transition:var(--avia-active-transition-out)}"}},[4,"avia-active"]),Ct=oe(class extends HTMLElement{constructor(){super(),this.__registerHost()}render(){return P(R,null,P("div",{class:"avia-ad-control-container"},P("avia-mute-toggle",null),P("avia-play-toggle",null),P("avia-fullscreen-toggle",null)),P("avia-ad-progress-bar",null))}static get style(){return'avia-ad-control-bar{position:absolute;height:56px;width:100%;left:0;bottom:0;right:0;pointer-events:none;flex-direction:row;justify-content:center;display:none;transition:var(--avia-active-transition-in)}avia-ui[control-mode="ad"] avia-ad-control-bar{display:flex}.avia-ad-control-container{pointer-events:auto;display:flex;width:calc(3 * var(--avia-control-bar-btn-width) + (2 * var(--avia-default-spacing)));height:var(--avia-control-bar-btn-height);justify-content:space-between;background-color:var(--avia-ad-control-bg-color);border-radius:var(--avia-ad-control-border-radius)}avia-ui:not([active]) avia-ad-control-bar{opacity:0;transition:var(--avia-active-transition-out)}'}},[0,"avia-ad-control-bar"]),_t=oe(qe,[0,"avia-ad-progress-bar",{adPlayheadPosition:[2,"ad-playhead-position"],isLiveLinear:[4,"is-live-linear"]}]),Pt=oe(Qe,[4,"avia-button",{locId:[513,"loc-id"],toggled:[516],compact:[516],icon:[516],variant:[516],actions:[1],ids:[513],disabled:[4],localeData:[16],focused:[32]},[[0,"click","onClick"],[1,"touchstart","onTouchStart"],[1,"touchend","onTouchEnd"],[0,"focus","onFocus"],[0,"blur","onBlur"],[0,"keyup","onKeyDown"]]]),It=oe(Xe,[4,"avia-control-bar",{isLiveLinear:[4,"is-live-linear"],controlMode:[1,"control-mode"]}]),Rt=oe(class extends HTMLElement{constructor(){super(),this.__registerHost()}render(){return P(R,null,P("slot",null,P("avia-mute-toggle",{compact:!0}),P("avia-play-toggle",{compact:!0}),P("avia-fullscreen-toggle",{compact:!0})))}static get style(){return'avia-control-bar-compact{display:none;position:absolute;top:50%;left:50%;width:var(--avia-compact-control-bar-width);height:var(--avia-compact-button-height);border-radius:var(--avia-compact-button-border-radius);margin-left:var(--avia-compact-control-bar-margin-left);margin-top:var(--avia-compact-control-bar-margin-top)}avia-control-bar-compact avia-mute-toggle,avia-control-bar-compact avia-play-toggle{margin-right:var(--avia-default-spacing)}avia-ui[control-mode="compact"][active] avia-control-bar-compact,avia-ui[control-mode="compact"][active] avia-control-bar-compact>*{display:block}'}},[4,"avia-control-bar-compact"]),kt=oe(Je,[0,"avia-current-time",{currentTimeSeconds:[2,"current-time-seconds"],localeData:[16],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),Nt=oe(Ze,[0,"avia-duration",{durationSeconds:[2,"duration-seconds"],localeData:[16],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),Ot=oe(et,[0,"avia-fullscreen-toggle",{fullscreen:[4],fullscreenDisabled:[4,"fullscreen-disabled"],compact:[516]}]),Lt=oe(tt,[0,"avia-live-control",{isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"],live:[4]}]),Dt=oe(it,[0,"avia-mute-toggle",{muted:[4],muteDisabled:[4,"mute-disabled"],compact:[516]}]),Mt=oe(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.centered=!1}render(){return P(R,{centered:this.centered},P("slot",null))}static get style(){return"avia-overlay{background:transparent;position:absolute;width:100%;height:100%;top:0;left:0;border:none;padding:0;margin:0}avia-overlay[centered]{justify-content:center;align-items:center;display:flex;cursor:pointer}"}},[4,"avia-overlay",{centered:[516]}]),wt=oe(class extends HTMLElement{constructor(){super(),this.__registerHost()}render(){return P("avia-button",{disabled:!1,"loc-id":Ie.PLAY})}static get style(){return"avia-play-cta avia-button{width:var(--avia-play-cta-width);height:var(--avia-play-cta-height);border-radius:var(--avia-play-cta-border-radius);background-image:var(--avia-play-cta-bg-image);background-color:var(--avia-play-cta-bg-color);background-repeat:no-repeat;background-position-x:calc(var(--avia-play-cta-bg-position) + 6%);background-position-y:var(--avia-play-cta-bg-position);background-size:var(--avia-play-cta-bg-size);cursor:pointer}"}},[0,"avia-play-cta"]),xt=oe(rt,[0,"avia-play-overlay",{playing:[4],controlMode:[1,"control-mode"],playDisabled:[4,"play-disabled"],pausable:[4],isTouch:[4,"is-touch"]},[[2,"click","onClick"]]]),Ut=oe(nt,[0,"avia-play-toggle",{playing:[4],playDisabled:[4,"play-disabled"],pausable:[4],compact:[516]}]),Bt=oe(at,[4,"avia-poster",{posterActive:[4,"poster-active"],posterImageUrl:[1,"poster-image-url"]},[[2,"click","handleAction"]]]),Vt=oe(ot,[0,"avia-progress-bar",{currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],localeData:[16],segmentBreakPositions:[1,"segment-break-positions"],preview:[16],increment:[2],hovering:[32],cursor:[32]},[[1,"mouseenter","onMouseEnter"],[1,"mouseleave","onMouseLeave"],[9,"mousemove","onMouseMove"]]]),Ft=oe(st,[0,"avia-seek-back-button",{seekBackDisabled:[4,"seek-back-disabled"],isLiveLinear:[4,"is-live-linear"]}]),Ht=oe(lt,[0,"avia-seek-forward-button",{seekForwardDisabled:[4,"seek-forward-disabled"],isLiveLinear:[4,"is-live-linear"]}]),Kt=oe(ct,[0,"avia-seek-indicator",{durationSeconds:[2,"duration-seconds"],accIndicatorState:[16]}]),Gt=oe(pt,[0,"avia-settings",{settings:[16],localeData:[16],qualityLabel:[2,"quality-label"],menuState:[32]},[[0,"click","onClick"],[4,"keydown","onKeyDown"]]]),jt=oe(ht,[0,"avia-settings-toggle",{settings:[16],settingsDisabled:[4,"settings-disabled"],excludedControls:[16]}]),Wt=oe(ft,[4,"avia-slider",{locId:[513,"loc-id"],min:[2],max:[2],value:[1026],list:[16],ariaValuetext:[1,"aria-valuetext"],increment:[2],localeData:[16],valueInternal:[32]},[[1,"touchstart","onMouseDown"],[0,"mousedown","onMouseDown"],[8,"touchmove","onMouseMove"],[8,"mousemove","onMouseMove"],[9,"touchend","onMouseUp"],[8,"mouseup","onMouseUp"],[0,"focus","onFocus"],[0,"blur","onBlur"],[0,"keydown","onKeydown"],[0,"keyup","onKeyup"]]]),Yt=oe(class extends HTMLElement{constructor(){super(),this.__registerHost()}render(){return P(R,null)}static get style(){return"avia-spinner{display:block;width:var(--avia-spinner-diameter);height:var(--avia-spinner-diameter);overflow:visible;background-size:var(--avia-spinner-diameter);background-repeat:no-repeat;background-image:var(--avia-spinner-image);animation:avia-rotate 2s linear infinite}@keyframes avia-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}"}},[0,"avia-spinner"]),zt=oe(yt,[0,"avia-text",{locId:[513,"loc-id"],localeData:[16]}]),$t=oe(vt,[0,"avia-text-toggle",{textTrackEnabled:[4,"text-track-enabled"],textDisabled:[4,"text-disabled"],excludedControls:[16]}]),qt=oe(mt,[0,"avia-time-display",{timeDisplayValue:[1,"time-display-value"],currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),Qt=oe(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.actionEvent=Q(this,"uiaction",7),this.controlMode=_e.NONE,this.fullscreen=!1,this.active=null,this.activeMode=Se.AUTO,this.excludedControls=null,this.fullscreenDisabled=!0,this.muted=!1,this.muteDisabled=!0,this.volume=1,this.playing=!1,this.playDisabled=!0,this.textTrackEnabled=!1,this.textDisabled=!0,this.timeDisplayValue="",this.isLiveLinear=!1,this.isDvr=!1,this.live=!1,this.playheadPosition=0,this.durationSeconds=0,this.currentTimeSeconds=0,this.seekDisabled=!0,this.seekBackDisabled=!0,this.seekForwardDisabled=!0,this.settingsDisabled=!0,this.adPlayheadPosition=0,this.localeData=null,this.preview=null,this.unmuteCtaVisible=!1,this.settings=null,this.posterActive=!1,this.posterImageUrl="",this.qualityLabel=0,this.waiting=!1,this.initialized=!1,this.pausable=!0,this.isTouch=!1}handleAction(e){this.actionEvent.emit(e.detail)}componentWillLoad(){!function(e,t){var i=q(e),r=new Map,n={wormholes:r,state:t};Ye.set(e,n);var a=e.connectedCallback;e.connectedCallback=function(){Ye.set(e,n),a&&a.call(e)};var o=e.disconnectedCallback;e.disconnectedCallback=function(){Ye.delete(e),o&&o.call(e)},i.addEventListener("openWormhole",function(e){e.stopPropagation();var t=e.detail,i=t.consumer,a=t.onOpen;if(!r.has(i)){if("symbol"!=typeof i){var o=i.connectedCallback,s=i.disconnectedCallback;i.connectedCallback=function(){r.set(i,e.detail),o&&o.call(i)},i.disconnectedCallback=function(){r.delete(i),s&&s.call(i)}}r.set(i,e.detail),ze(e.detail,n.state),null==a||a.resolve(function(){r.delete(i)})}}),i.addEventListener("closeWormhole",function(e){var t=e.detail;r.delete(t)})}(this,this)}render(){if(this.initialized)return P(R,null,P($e,{state:this},P("div",{class:"avia-layer"},P("slot",{name:"underlay"})),P("slot",{name:"play-overlay"},P("avia-play-overlay",null)),P("slot",{name:"waiting-overlay"},P("avia-waiting-overlay",null)),P("slot",{name:"unmute-cta"},P("avia-unmute-cta",null)),P("slot",{name:"accessibility"},P("avia-accessibility",null)),P("slot",{name:"settings"},P("avia-settings",null)),P("slot",{name:"poster"},P("avia-poster",null)),P("slot",{name:"control-bar"},P("avia-control-bar",null)),P("slot",{name:"ad-control-bar"},P("avia-ad-control-bar",null)),P("slot",{name:"compact-control-bar"},P("avia-control-bar-compact",null)),P("div",{class:"avia-layer"},P("slot",{name:"overlay"}))))}static get style(){return":root{--avia-accent-color:#3aacff;--avia-text-color:#dedede;--avia-text-color-hover:#ffffff;--avia-font-family:Arial, sans-serif;--avia-control-bar-bg:linear-gradient(to top, rgba(2,0,36,0.8) 0%, rgba(1,0,10,0.5029586834733894) 62%, rgba(0,0,0,0) 100%);--avia-control-bar-height:64px;--avia-default-spacing:12px;--avia-half-spacing:6px;--avia-live-padding-top:12px;--avia-compact-button-width:48px;--avia-compact-button-height:48px;--avia-compact-button-border-radius:calc(var(--avia-compact-button-width) / 2);--avia-compact-button-background-color:rgba(64, 64, 64, 0.5);--avia-compact-control-bar-width:calc( (var(--avia-compact-button-width) * 3) + (var(--avia-default-spacing) * 2));--avia-compact-control-bar-margin-left:calc(var(--avia-compact-control-bar-width) / -2);--avia-compact-control-bar-margin-top:calc(var(--avia-compact-button-height) / -2);--avia-play-overlay-bg-color:rgba(0, 0, 0, 0.35);--avia-play-cta-width:66px;--avia-play-cta-height:66px;--avia-play-cta-border-radius:calc(var(--avia-play-cta-width) / 2);--avia-play-cta-bg-image:var(--avia-play-icon);--avia-play-cta-bg-position:50%;--avia-play-cta-bg-color:rgba(64, 64, 64, 0.5);--avia-play-cta-bg-size:calc(var(--avia-play-cta-width) / 2) calc(var(--avia-play-cta-height) / 2);--avia-control-bar-btn-height:48px;--avia-control-bar-btn-width:48px;--avia-control-bar-btn-text-color:var(--avia-text-color);--avia-control-bar-btn-text-color-hover:var(--avia-text-color-hover);--avia-control-bar-btn-border:none;--avia-control-bar-btn-border-width:0;--avia-control-bar-btn-border-radius:0;--avia-control-bar-btn-border-outline:none;--avia-control-bar-btn-border-cursor:pointer;--avia-control-bar-btn-disabled-cursor:not-allowed;--avia-control-bar-btn-disabled-opacity:0.5;--avia-icon-btn-bg-width:50%;--avia-icon-btn-bg-height:37.5%;--avia-icon-btn-bg-size:var(--avia-icon-btn-bg-width) var(--avia-icon-btn-bg-height);--avia-fs-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M1%207a1%201%200%200%201-1-1V1a1%201%200%200%201%201-1h5a1%201%200%200%201%200%202H2.5a.5.5%200%200%200-.5.5V6a1%201%200%200%201-1%201zM6%2018H1a1%201%200%200%201-1-1v-5a1%201%200%200%201%202%200v3.5a.5.5%200%200%200%20.5.5H6a1%201%200%200%201%200%202zM23%2018h-5a1%201%200%200%201%200-2h3.5a.5.5%200%200%200%20.5-.5V12a1%201%200%200%201%202%200v5a1%201%200%200%201-1%201zM23%207a1%201%200%200%201-1-1V2.5a.5.5%200%200%200-.5-.5H18a1%201%200%200%201%200-2h5a1%201%200%200%201%201%201v5a1%201%200%200%201-1%201z%22%2F%3E%3C%2Fsvg%3E');--avia-fs-icon-hover:var(--avia-fs-icon);--avia-fs-exit-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M4%206H1a1%201%200%200%201%200-2h2.5a.5.5%200%200%200%20.5-.5V1a1%201%200%200%201%202%200v3a2%202%200%200%201-2%202zM23%206h-4a1%201%200%200%201-1-1V1a1%201%200%200%201%202%200v2.5a.5.5%200%200%200%20.5.5H23a1%201%200%200%201%200%202zM19%2018a1%201%200%200%201-1-1v-3a2%202%200%200%201%202-2h3a1%201%200%200%201%200%202h-2.5a.5.5%200%200%200-.5.5V17a1%201%200%200%201-1%201zM5%2018a1%201%200%200%201-1-1v-2.5a.5.5%200%200%200-.5-.5H1a1%201%200%200%201%200-2h3a2%202%200%200%201%202%202v3a1%201%200%200%201-1%201z%22%2F%3E%3C%2Fsvg%3E');--avia-fs-exit-icon-hover:var(--avia-fs-exit-icon);--avia-play-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EPlay%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M19%2010L6.84%2017.81a1.19%201.19%200%200%201-1.84-1V1.19a1.19%201.19%200%200%201%201.83-1L19%208a1.19%201.19%200%200%201%200%202z%22%2F%3E%3C%2Fsvg%3E');--avia-play-icon-hover:var(--avia-play-icon);--avia-pause-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EPause%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Crect%20x%3D%226%22%20width%3D%224%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3Crect%20x%3D%2214%22%20width%3D%224%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3C%2Fsvg%3E');--avia-pause-icon-hover:var(--avia-pause-icon);--avia-stop-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EStop%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Crect%20x%3D%223%22%20width%3D%2218%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3C%2Fsvg%3E');--avia-stop-icon-hover:var(--avia-stop-icon);--avia-mute-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M3.58%206H2a1%201%200%200%200-1%201v4a1%201%200%200%200%201%201h1.58a1%201%200%200%201%20.72.3l5%205a1%201%200%200%200%201.7-.74V1.44A1%201%200%200%200%209.27.73l-5%205a1%201%200%200%201-.69.27zM19.77%209.33a.5.5%200%200%201%200-.71l.94-.94a1%201%200%200%200%200-1.41%201%201%200%200%200-1.42%200l-.94.94a.5.5%200%200%201-.7%200l-.94-.94a1%201%200%200%200-1.42%200%201%201%200%200%200%200%201.41l.94.94a.5.5%200%200%201%200%20.71l-.94.94a1%201%200%200%200%200%201.41%201%201%200%200%200%201.42%200l.94-.94a.5.5%200%200%201%20.7%200l.94.94a1%201%200%200%200%201.42%200%201%201%200%200%200%200-1.41z%22%2F%3E%3C%2Fsvg%3E');--avia-mute-icon-hover:var(--avia-mute-icon);--avia-unmuted-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M3.59%206H2a1%201%200%200%200-1%201v4a1%201%200%200%200%201%201h1.59a1%201%200%200%201%20.7.29l5%205a1%201%200%200%200%201.71-.7V1.41a1%201%200%200%200-1.71-.7l-5%205a1%201%200%200%201-.7.29zM14%2018a1%201%200%200%201%200-2%207%207%200%200%200%200-14%201%201%200%200%201%200-2%209%209%200%200%201%200%2018z%22%2F%3E%3Cpath%20d%3D%22M14%2014a1%201%200%200%201%200-2%203%203%200%200%200%200-6%201%201%200%200%201%200-2%205%205%200%200%201%200%2010z%22%2F%3E%3C%2Fsvg%3E');--avia-unmuted-icon-hover:var(--avia-unmuted-icon);--avia-text-on-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1zm-1%2011a1%201%200%2001-1%201H9a1%201%200%2000-.71.29L6%2014.59V13a1%201%200%2000-1-1H3a1%201%200%2001-1-1V3a1%201%200%20011-1h18a1%201%200%20011%201z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-text-on-icon-hover:var(--avia-text-on-icon);--avia-text-off-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23231f20%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-text-off-icon-hover:var(--avia-text-off-icon);--avia-text-icon-disabled:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1zm-1%2011a1%201%200%2001-1%201H9a1%201%200%2000-.71.29L6%2014.59V13a1%201%200%2000-1-1H3a1%201%200%2001-1-1V3a1%201%200%20011-1h18a1%201%200%20011%201z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-seek-forward-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2015.52%2017.29%22%3E%3Cpath%20d%3D%22M14.69%2C1.16%2C14%2C1.8A8.76%2C8.76%2C0%2C0%2C0%2C1.81%2C3.37%2C8.59%2C8.59%2C0%2C0%2C0%2C3.39%2C15.49a8.77%2C8.77%2C0%2C0%2C0%2C11.5-.74A1%2C1%2C0%2C0%2C0%2C15%2C13.4a1%2C1%2C0%2C0%2C0-1.36-.11l-.11.11a6.81%2C6.81%2C0%2C0%2C1-9.58%2C0%2C6.69%2C6.69%2C0%2C0%2C1-.06-9.51%2C6.82%2C6.82%2C0%2C0%2C1%2C8.73-.77L11.8%2C4a.47.47%2C0%2C0%2C0%2C0%2C.67.5.5%2C0%2C0%2C0%2C.37.15H15a.49.49%2C0%2C0%2C0%2C.49-.48V1.49a.47.47%2C0%2C0%2C0-.83-.33Z%22%20style%3D%22fill%3A%23fff%22%2F%3E%3C%2Fsvg%3E');--avia-seek-forward-icon-hover:var(--avia-seek-forward-icon);--avia-seek-back-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2015.52%2017.29%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22Layer_2%22%20data-name%3D%22Layer%202%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M.46%2C1A.48.48%2C0%2C0%2C0%2C0%2C1.49V4.33a.49.49%2C0%2C0%2C0%2C.48.48h2.9a.51.51%2C0%2C0%2C0%2C.37-.15.48.48%2C0%2C0%2C0%2C0-.67L2.9%2C3.17a6.82%2C6.82%2C0%2C0%2C1%2C8.73.77%2C6.69%2C6.69%2C0%2C0%2C1-.05%2C9.51A6.82%2C6.82%2C0%2C0%2C1%2C2%2C13.4a.52.52%2C0%2C0%2C0-.1-.11%2C1%2C1%2C0%2C0%2C0-1.37.11%2C1%2C1%2C0%2C0%2C0%2C.11%2C1.35%2C8.76%2C8.76%2C0%2C0%2C0%2C11.49.74A8.59%2C8.59%2C0%2C0%2C0%2C13.7%2C3.37%2C8.76%2C8.76%2C0%2C0%2C0%2C1.48%2C1.8L.82%2C1.16A.45.45%2C0%2C0%2C0%2C.46%2C1Z%22%20transform%3D%22translate(0%200)%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E');--avia-seek-back-icon-hover:var(--avia-seek-back-icon);--avia-settings-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M20.43%2010.4l-.93-.53a1%201%200%200%201%200-1.74l.93-.53a1%201%200%200%200%20.36-1.37l-2-3.46a1%201%200%200%200-1.36-.37l-.93.54a1%201%200%200%201-1.5-.87V1a1%201%200%200%200-1-1h-4a1%201%200%200%200-1%201v1.07a1%201%200%200%201-1.5.87l-.93-.54a1%201%200%200%200-1.36.37l-2%203.46a1%201%200%200%200%20.36%201.37l.93.53a1%201%200%200%201%200%201.74l-.93.53a1%201%200%200%200-.36%201.37l2%203.46a1%201%200%200%200%201.36.37l.93-.54a1%201%200%200%201%201.5.87V17a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1.07a1%201%200%200%201%201.5-.87l.93.54a1%201%200%200%200%201.36-.37l2-3.46a1%201%200%200%200-.36-1.37zM12%2012a3%203%200%201%201%203-3%203%203%200%200%201-3%203z%22%2F%3E%3C%2Fsvg%3E');--avia-settings-icon-hover:var(--avia-settings-icon);--avia-selected-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22white%22%3E%3Cpath%20d%3D%22M20.285%202l-11.285%2011.567-5.286-5.011-3.714%203.716%209%208.728%2015-15.285z%22%2F%3E%3C%2Fsvg%3E');--avia-time-height:48px;--avia-time-width:86px;--avia-time-line-height:48px;--avia-time-font-size:13px;--avia-time-color:var(--avia-text-color);--avia-time-font-family:var(--avia-font-family);--avia-segment-marker-color:var(--avia-text-color);--avia-segment-marker-height:4px;--avia-segment-marker-width:2px;--avia-ad-progress-color:#ffe83a;--avia-ad-progress-track-color:transparent;--avia-ad-control-bg-color:rgba(0, 0, 0, 0.7);--avia-ad-control-border-radius:4px;--avia-seek-indicator-border-radius:4px;--avia-seek-indicator-background-color:rgba(0, 0, 0, 0.5);--avia-seek-indicator-color:var(--avia-text-color);--avia-seek-indicator-height:48px;--avia-seek-indicator-font-size:20px;--avia-seek-indicator-font-family:var(--avia-font-family);--avia-seek-indicator-line-height:48px;--avia-volume-indicator-border-radius:6px;--avia-volume-indicator-background-color:rgba(0, 0, 0, 0.5);--avia-volume-indicator-width:64px;--avia-volume-indicator-height:64px;--avia-volume-indicator-right:12px;--avia-volume-indicator-bottom:72px;--avia-focus-box-shadow:0 0 2px 3px rgba(247, 228, 85, 0.85);--avia-focus-box-shadow-inner:inset 0 0 2px 3px rgba(247, 228, 85, 0.85);--avia-spinner-image:url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"white\" stroke-width=\"1\" width=\"40\" height=\"40\" fill=\"white\" viewBox=\"0 0 37.84 41\"><path d=\"M18,39.61V32.09a.93.93,0,0,1,.26-.66.85.85,0,0,1,.64-.27.83.83,0,0,1,.63.27.89.89,0,0,1,.26.66v7.52a.91.91,0,0,1-.89.89.85.85,0,0,1-.64-.27.87.87,0,0,1-.26-.62Zm-6.4-10.27a.89.89,0,0,1,.59-.37.82.82,0,0,1,.65.16.79.79,0,0,1,.36.59.94.94,0,0,1-.15.69L8.8,36.47a.8.8,0,0,1-.57.38,1,1,0,0,1-.67-.16.84.84,0,0,1-.36-.59,1,1,0,0,1,.16-.7ZM1.13,25.53,8,23.21a.92.92,0,0,1,.67.05.93.93,0,0,1,.4,1.23,1,1,0,0,1-.52.47L1.64,27.27A.87.87,0,0,1,1,27.22a.82.82,0,0,1-.43-.53,1,1,0,0,1,0-.72.81.81,0,0,1,.54-.44Zm.51-11.8L8.56,16a1,1,0,0,1,.52.47.93.93,0,0,1-.4,1.23.92.92,0,0,1-.67.05L1.13,15.47A.81.81,0,0,1,.59,15a1,1,0,0,1,0-.72A.82.82,0,0,1,1,13.78a.87.87,0,0,1,.67,0ZM8.8,4.53l4.27,6.06a.94.94,0,0,1,.15.69.79.79,0,0,1-.36.59.82.82,0,0,1-.65.16.89.89,0,0,1-.59-.37L7.36,5.6a1,1,0,0,1-.16-.7.84.84,0,0,1,.36-.59,1,1,0,0,1,.67-.16.8.8,0,0,1,.57.38Zm11-3.14V8.91a.89.89,0,0,1-.26.66.83.83,0,0,1-.63.27.85.85,0,0,1-.64-.27A.93.93,0,0,1,18,8.91V1.39a.87.87,0,0,1,.26-.62A.85.85,0,0,1,18.92.5a.83.83,0,0,1,.63.27.83.83,0,0,1,.26.62ZM30.48,5.6l-4.27,6.06a.87.87,0,0,1-.58.37.85.85,0,0,1-.66-.16.86.86,0,0,1-.36-.59,1,1,0,0,1,.16-.69L29,4.53a.76.76,0,0,1,.56-.38.94.94,0,0,1,.67.16.86.86,0,0,1,.37.59,1,1,0,0,1-.16.7Zm6.23,9.87-6.88,2.32a.91.91,0,0,1-.67-.05.93.93,0,0,1-.4-1.23,1,1,0,0,1,.52-.47l6.91-2.31a.87.87,0,0,1,.67,0,.83.83,0,0,1,.44.53,1,1,0,0,1-.06.72.79.79,0,0,1-.53.44Zm-.52,11.8L29.28,25a1,1,0,0,1-.52-.47.93.93,0,0,1,.4-1.23.91.91,0,0,1,.67-.05l6.88,2.32a.79.79,0,0,1,.53.44,1,1,0,0,1,.06.72.83.83,0,0,1-.44.53.87.87,0,0,1-.67.05ZM29,36.47l-4.27-6.06a1,1,0,0,1-.16-.69.86.86,0,0,1,.36-.59.85.85,0,0,1,.66-.16.87.87,0,0,1,.58.37l4.27,6.06a1,1,0,0,1,.16.7.86.86,0,0,1-.37.59.94.94,0,0,1-.67.16.76.76,0,0,1-.56-.38Z\"/></svg>');--avia-spinner-diameter:48px;--avia-active-transition-in:opacity 0.5s ease 0s;--avia-active-transition-out:opacity 0.5s ease 0s}avia-ui{color:var(--avia-text-color);font-family:var(--avia-font-family)}avia-ui>*{pointer-events:auto;-webkit-user-select:none;user-select:none}avia-ui,avia-ui avia-accessibility,avia-ui avia-settings,.avia-layer{pointer-events:none;position:absolute;top:0;left:0;bottom:0;right:0}slot-fb[hidden]{display:none}.avia-ui-hidden{display:none}img.avia-poster-img{width:100%;height:auto}.avia-container,avia-ui:focus,avia-ui button:focus{outline:none}avia-ui.focus-visible,avia-ui .focus-visible{box-shadow:var(--avia-focus-box-shadow)}avia-ui.focus-visible .avia-menu-button,avia-ui .focus-visible.avia-menu-button{box-shadow:var(--avia-focus-box-shadow-inner)}avia-ui:not([active])[fullscreen]{cursor:none}.avia-container.avia-controls-vis video::-webkit-media-text-track-container{bottom:calc(var(--avia-control-bar-height) + 4px);height:auto}"}},[4,"avia-ui",{controlMode:[513,"control-mode"],fullscreen:[516],active:[516],activeMode:[513,"active-mode"],excludedControls:[16],fullscreenDisabled:[4,"fullscreen-disabled"],muted:[4],muteDisabled:[4,"mute-disabled"],volume:[2],playing:[4],playDisabled:[4,"play-disabled"],textTrackEnabled:[4,"text-track-enabled"],textDisabled:[4,"text-disabled"],timeDisplayValue:[1,"time-display-value"],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"],live:[4],playheadPosition:[2,"playhead-position"],durationSeconds:[2,"duration-seconds"],currentTimeSeconds:[2,"current-time-seconds"],seekDisabled:[4,"seek-disabled"],seekBackDisabled:[4,"seek-back-disabled"],seekForwardDisabled:[4,"seek-forward-disabled"],settingsDisabled:[4,"settings-disabled"],adPlayheadPosition:[2,"ad-playhead-position"],segmentBreakPositions:[1,"segment-break-positions"],localeData:[16],preview:[16],accIndicatorState:[16],unmuteCtaVisible:[4,"unmute-cta-visible"],settings:[16],posterActive:[4,"poster-active"],posterImageUrl:[1,"poster-image-url"],qualityLabel:[2,"quality-label"],waiting:[4],initialized:[4],pausable:[4],isTouch:[4,"is-touch"]},[[0,"action","handleAction"]]]),Xt=oe(gt,[0,"avia-unmute-cta",{muteState:[4,"mute-state"],unmuteCtaVisible:[4,"unmute-cta-visible"]}]),Jt=oe(At,[0,"avia-volume-indicator",{volume:[2],accIndicatorState:[16]}]),Zt=oe(Et,[0,"avia-volume-slider",{volume:[2],excludedControls:[16]}]),ei=oe(Tt,[0,"avia-waiting-overlay",{waiting:[4]}]),ti=e=>{"undefined"!=typeof customElements&&[bt,St,Ct,_t,Pt,It,Rt,kt,Nt,Ot,Lt,Dt,Mt,wt,xt,Ut,Bt,Vt,Ft,Ht,Kt,Gt,jt,Wt,Yt,zt,$t,qt,Qt,Xt,Jt,Zt,ei].forEach(t=>{customElements.get(t.is)||customElements.define(t.is,t,e)})};ti()}.call(this,i(4))},function(e,t,i){var r;void 0===(r=function(){"use strict";i(0).tag2("metadata",'<span class="card__label card__label--type-short card__label--type-time-duration">{(opts.isplaying && playerState) ? nowPlayingLabel : label}</span><span class="card__label card__label--type-long card__label--type-time-duration">{(opts.isplaying && playerState) ? nowPlayingLabel : liveLabelLong}</span><span class="card__label card__label--type-relative">{riot.mixin(\'formatter\').getRelativeTime(item.timestamp)}</span><span if="{item.type == \'playlist\'}" class="card__label card__label--type-count">{label} video{label !== 1 ? \'s\' : \'\'}</span>',"","",function(e){this.item=e.item,this.label="",this.liveLabelLong="",this.nowPlayingLabel="now playing",this.playerState=!!window.istouch||null,this.parent.parent.root.classList.contains("carousel--slug-ott-live")&&(this.nowPlayingLabel="playing"),this.on("mount",()=>{this.getLabel(this.item)}),this.dispatch.on("player:video:state",e=>{this.playerState=!0,this.update()}),this.getLabel=function(e){if("live"==e.type){var t=new Date;this.label=this.formatTime(t)}else"vod"==e.type||"dvr"==e.type?this.label=e.durationLabel:"playlist"==e.type?this.label=e.meta.totalCount:"listing"!=e.type&&"channel"!=e.type||(this.liveLabelLong="live: "+e.title,this.label="live");this.update()}.bind(this),this.formatTime=function(e,t){if(t);else e=new Date(e);if(e.getHours()>12)var i=e.getHours()-12;else i=e.getHours();if(e.getHours()<12)var r="am";else r="pm";return i+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+" "+r}.bind(this)})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r;void 0===(r=function(){"use strict";i(0).tag2("thumbnail",'<span class="{opts.class}-img img"><img if="{type != \'channel\'}" data-srcset="{opts.images.sd} 1x, {opts.images.hd} 2x" riot-src="{opts.images.sd}" srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEAAAAALAAAAAABAAEAAAI=" alt="{opts.alt}" class="lazyload"><svg if="{type === \'channel\'}" viewbox="0 0 32 32" aria-hidden="true"><use xlink:href="#icon-live-{slug}"></use></svg></span><svg viewbox="0 0 32 32" class="{opts.class}--icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-video"></use></svg>',"","",function(e){this.type=e.type,this.slug=e.slug})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r;void 0===(r=function(){"use strict";var e=i(0);e.tag2("card",'<a ref="anchor" if="{item.type.indexOf(\'html\') === -1}" class="card__container" href="{item.url}" target="_blank" rel="{relData}"><thumbnail if="{item.images.sd || item.images.hd}" class="card__thumb" images="{item.images}" alt="{title}" slug="{item.slug}" type="{item.type}"></thumbnail><div class="card__heading-wrapper"><h3 if="{title}" class="card__title">{title}</h3></div><span class="card__link" if="{item.linkText}" href="{item.linkUrl}" aria-label="{item.linkText}">{item.linkText}</span><metadata isplaying="{isPlaying}" class="label" component="card" item="{item}" type="{item.type}" relativetime="true"></metadata></a>',"","class=\"card card--type-{item.type} card--type-{imposter} card--type-{opts.classes} card--slug-{item.slug} {'card--is-playing': isPlaying} {'card--is-active': isActive}\"",function(t){this.item=t.item,this.title=t.item.title,this.dataIs=null,this.isActive=!1,this.isPlaying=!1,this.relData,1==this.item.isImposter&&(this.imposter="is-imposter"),1==this.item.isExternal&&(this.relData="noopener nofollow"),this.isSheAnAd=function(e){return e.type.indexOf("html")>-1}.bind(this),this.changeOttLiveTitle=function(){if(this.item.items){var e=this.item.items.find(e=>"live"===e.type);e&&this.update({title:e.title})}}.bind(this),"ott-live"===this.parent.playlist.slug&&this.item.items&&this.changeOttLiveTitle(),this.dispatch.on("video:video:changed:type-live:"+this.item.id,e=>{this.title!==e.video.title&&this.update({title:e.video.title})}),this.dispatch.on("url:load",e=>{this.update({isActive:e.video&&e.video.id===this.item.id||"live"===e.video.type&&e.video.mpxRefId===this.item.mpxRefId})}),this.dispatch.on("player:video:state",e=>{this.update({isPlaying:("live"===e.video.type&&e.video.mpxRefId===this.item.mpxRefId||"live"!==e.video.type&&e.video.id===this.item.id)&&"PLAYING"===e.playbackState})}),this.on("update",e=>{"current"==t.type&&(this.item=t.item),this.refs.anchor&&(this.refs.anchor.payload=this.item)}),this.on("mount",()=>{if(this.isSheAnAd(this.item)){var t="html"+Date.now(),i=e.tag(t,this.item.body.replace(/({|})/g,"\\$1"),null,'class="html-container"'),r=document.createElement(i);this.root.appendChild(r),e.mount(i)}else this.refs.anchor&&(this.refs.anchor.payload=this.item);"related"===this.parent.opts.component&&this.update({isActive:this.item.id===CBSNEWS.defaultPayload.items[0].id})})})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r,n;r=[i(24)],void 0===(n=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t},i(0).tag2("carousel",'<h2 if="{playlistItems.length && playlist.title}" class="carousel__title" aria-label="{playlist.title}"> {playlist.title} </h2><ad display="{opts.type === \'playlist\' && opts.component === \'hero\'}" slot="sponsor-playlist-logo" categoryslug="{playlist.slug}"></ad><div class="show_{rowsVisible} card__wrapper" ref="list"><card if="{playlistItems.length}" each="{item, i in playlistItems}" item="{item}" index="{i}" ref="card"></card></div><button if="{playlistItems.length && playlist.id}" aria-role="button" class="carousel__button" ref="loadmore" aria-label="more {playlist.title}" onclick="{handleLoadMore}"> More + </button>',"","id=\"{playlist.slug}\" class=\"carousel carousel--slug-{playlist.slug} carousel--component-{opts.component} carousel--view-{playlist.meta.view} carousel--type-{playlist.type} {'carousel--empty ': isEmpty} {dupe ? 'carousel--is-playing' : ''}\" tabindex=\"0\"",function(t){window.addEventListener("resize",(0,e.default)(e=>this.dispatch.trigger("window:resize"),250)),this.playlist={id:null,type:t.type,title:null,items:[],meta:{view:null}},this.playlistItems=[],this.defaultRowsVisible=2,this.rowsVisible=parseInt(t.rowsvisible)||2,this.dupe=!1,this.isLoadMoreHidden=!0,this.registerComponent=function(){(t.plid||t.slug)&&t.type&&this.playlist.id!==t.plid&&this.dispatch.trigger("register:component",t.playlist)}.bind(this),this.scrollToShelf=function(){if(this.playlist.slug&&CBSNEWS.originalUrl&&CBSNEWS.originalUrl.hash&&window===window.top){var e=CBSNEWS.originalUrl.hash.replace(/^#/,""),t=document.querySelector(CBSNEWS.originalUrl.hash);t&&e===this.playlist.slug&&t.scrollIntoView({behavior:"smooth"})}}.bind(this),this.showHideLoadMore=function(){if(this.playlist.id&&this.refs.list&&!(this.refs.list.childElementCount<=0)){var e=!1,t=this.refs.list.getElementsByClassName("card");if(t&&t.length>0)for(var i of t)if(0===i.offsetWidth&&0===i.offsetHeight){if(i.classList.contains("card--type-html-native-ad")||i.classList.contains("card--is-playing")||i.classList.contains("card--type-is-imposter"))continue;e=!0;break}this.refs.loadmore&&(e?this.refs.loadmore.classList.remove("carousel__button--hidden"):this.refs.loadmore.classList.add("carousel__button--hidden"))}}.bind(this),this.isDuplicate=function(e){e.video.playlist.id==t.plid!==this.dupe&&this.update({dupe:e.video.playlist.id==t.plid})}.bind(this),this.dispatch.on("player:ad:start",this.isDuplicate),this.dispatch.on("player:content:start",this.isDuplicate),this.dispatch.on("url:load",this.isDuplicate),this.dispatch.on("window:resize",this.showHideLoadMore),this.dispatch.on("video:data:changed",e=>{if(e.playlist.id===t.plid){var i={};this.playlist.id&&t.plid===this.playlist.id||(i=this.setDefaultRowsVisible(e.playlist.meta.view)),i.playlist=e.playlist,i.playlistItems=this.getItems(e.playlist),this.isEmpty=e.playlist.emptyPlaylist,this.update(i)}}),this.on("mount",this.registerComponent),this.on("update",this.registerComponent),this.on("updated",this.showHideLoadMore),this.on("updated",this.scrollToShelf),this.on("updated",()=>{this.dispatch.trigger("video:data:rendered",{playlist:this.playlist,playlistItems:this.playlistItems})}),this.handleLoadMore=function(e){e.preventUpdate=!0;var t=this.rowsVisible;this.rowsVisible<8&&"all"!=this.rowsVisible?t+=this.defaultRowsVisible:t="all",this.update({rowsVisible:t})}.bind(this),this.setDefaultRowsVisible=function(e){var i={};return"playlists"===e?(i.defaultRowsVisible=1,i.rowsVisible=1):"slider"==t.component?i.rowsVisible="all":(i.defaultRowsVisible=2,i.rowsVisible=2),i}.bind(this),this.getItems=function(e){return"slider"===t.component||"hero"===t.component?e.items.filter(e=>-1===e.type.indexOf("html")).filter(e=>!0!==e.isImposter):e.items.filter(e=>!0!==e.isImposter)}.bind(this)})}.apply(t,r))||(e.exports=n)},function(e,t){e.exports=function(e,t){var i=null;return function(){clearTimeout(i);var r=arguments,n=this;i=setTimeout(function(){e.apply(n,r)},t)}}},function(e,t,i){var r;void 0===(r=function(){"use strict";i(0).tag2("slider",'<button hide="{lessThanLimit}" class="slider__controls slider__controls--prev" onclick="{previous}" ref="prevBtn"><svg width="47" height="47" viewbox="0 0 47 47" xmlns="http://www.w3.org/2000/svg"><title>buttons/button-playertray-right</title><g fill="none" fill-rule="evenodd"><path d="M0 4.007C0 1.794 1.785 0 4.007 0H47v47H4.007C1.794 47 0 45.215 0 42.993V4.007z" fill="#F5F5F5"></path><path stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 17l7 6.776L22 30"></path></g></svg></button><button hide="{lessThanLimit}" class="slider__controls slider__controls--next" onclick="{next}" ref="nextBtn"><svg width="47" height="47" viewbox="0 0 47 47" xmlns="http://www.w3.org/2000/svg"><title>buttons/button-playertray-right</title><g fill="none" fill-rule="evenodd"><path d="M0 4.007C0 1.794 1.785 0 4.007 0H47v47H4.007C1.794 47 0 45.215 0 42.993V4.007z" fill="#F5F5F5"></path><path stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 17l7 6.776L22 30"></path></g></svg></button><carousel ref="slider" if="{playlist.id}" component="{opts.component}" plid="{playlist.id}" slug="{playlist.slug}" type="{playlist.type}" playlist="{playlist}"></carousel>',"",'class="slider slider--slug-{playlist.slug}"',function(e){this.playlist={id:null,slug:"live-channels",items:[]},this.limit=parseInt(e.limit),this.margin=parseInt(e.margin),this.lessThanLimit=!0,"related"===e.component&&this.update({playlist:CBSNEWS.defaultPayload}),window.isembed?(this.dispatch.trigger("register:component",{api:"/video/xhr/collection/component/live-channels/",slug:"live-channels",type:"component"}),this.dispatch.on("video:data:changed:live-channels",e=>this.playlist=e.playlist)):(this.dispatch.on("url:load",e=>{this.update({playlist:e.video.playlist})}),this.dispatch.on("url:change",e=>{if(this.playlist.id){var t=this.refs.slider.refs.list;this.scrollToCard(t,e.video.slug)}})),this.dispatch.on("player:player:fullscreen",()=>{if(this.playlist.id){var e=this.refs.slider.refs.list;this.scrollOver(e,id,this.playlist.items.length,this.isFullScreen())}}),this.dispatch.on("video:data:changed",e=>{if(!this.playlist||this.playlist.id===e.playlist.id){this.update({playlist:e.playlist,lessThanLimit:this.playlist.items.length<=this.limit});var t=this.playlist.id;if(t){var i=this.refs.slider.refs.list;this.scrollOver(i,t,e.playlist.items.length,this.isFullScreen())}}}),this.isFullScreen=function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}.bind(this),this._getTranslateValue=function(e){var t=getComputedStyle(e).transform;return"none"===t?"none":+t.split("(")[1].split(")")[0].split(",")[4]}.bind(this),this.on("updated",()=>{this.playlist&&this.refs.slider&&this.tags.carousel.on("updated",()=>{if(this.refs.slider.refs.list&&this.root.querySelector(".card")){var e=this.refs.slider.root.querySelectorAll(".card__wrapper .card");Math.round(this.root.querySelector(".card").offsetWidth),this.margin;e.length,this.limit,this.playlist.id;try{Math.round(this.root.querySelector(".card").offsetWidth),this.wrapper=this.refs.slider.root.querySelector(".card__wrapper")}catch(e){}}})}),this.scrollToCard=function(e,t){if(e&&t){var i=e.querySelector(".card--slug-"+t);if(i){this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden"),e.style.transform="translateX(-"+i.offsetLeft+"px)";var r=parseInt(i.getAttribute("index"))+1;this.playlist.items.length-r<=this.limit&&this.refs.nextBtn.classList.add("slider__controls--hidden"),1===r&&this.refs.prevBtn.classList.add("slider__controls--hidden")}}}.bind(this),this.scrollOver=function(e,t,i,r=!1){if(e){var n=this.root.querySelector(".card");if(n)var a=Math.round(n.offsetWidth)+this.margin;else a=335;var o=document.body.offsetWidth,s=a*i,l=s-a*this.limit;if(this._getTranslateValue(e),this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden"),this.update({lessThanLimit:r&&s<o}),0===t.indexOf("fusion-")){r&&(l=s-document.body.offsetWidth);try{e.style.transform="translateX(-"+l+"px)",this.refs.nextBtn.classList.add("slider__controls--hidden")}catch(e){}}else try{e.style.transform="translateX(0)",this.refs.prevBtn.classList.add("slider__controls--hidden")}catch(e){}}}.bind(this),this.scrollTo=function(e,t){var i=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,r=this.refs.slider.root.querySelectorAll(".card__wrapper .card"),n=Math.round(this.root.querySelector(".card").offsetWidth)+this.margin,a=n*r.length,o=this._getTranslateValue(e),s=0;this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden");var l=a+o-n*this.limit;i&&(l=a+o-i.offsetWidth);var c=Math.abs(o);"previous"==t?(Math.abs(o)<450?(s=n-Math.abs(o),i&&c<=n&&(this.refs.prevBtn.classList.add("slider__controls--hidden"),s=0),c===n&&this.refs.prevBtn.classList.add("slider__controls--hidden")):Math.abs(o)<1005?(s=2*n-Math.abs(o),i&&c<=2*n&&(this.refs.prevBtn.classList.add("slider__controls--hidden"),s=0),c===2*n&&this.refs.prevBtn.classList.add("slider__controls--hidden")):(s=3*n-Math.abs(o),c===3*n&&this.refs.prevBtn.classList.add("slider__controls--hidden")),e.style.transform="translateX("+s+"px)"):(l<400?(s=n-o,i&&l<450&&(this.refs.nextBtn.classList.add("slider__controls--hidden"),s=c+l),l===n&&this.refs.nextBtn.classList.add("slider__controls--hidden")):l<1005?(s=2*n-o,i&&l<1005&&(this.refs.nextBtn.classList.add("slider__controls--hidden"),s=c+l),l===2*n&&this.refs.nextBtn.classList.add("slider__controls--hidden")):(s=3*n-o,l===3*n&&this.refs.nextBtn.classList.add("slider__controls--hidden")),e.style.transform="translateX(-"+s+"px)")}.bind(this),this.whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}.bind(this),this.previous=function(){var e=this.whichTransitionEvent(),t=this;this.refs.prevBtn.classList.add("slider__controls--disable"),this.wrapper.addEventListener(e,function(){t.refs.prevBtn.classList.remove("slider__controls--disable")}),this.scrollTo(this.wrapper,"previous")}.bind(this),this.next=function(){var e=this.whichTransitionEvent(),t=this;this.refs.nextBtn.classList.add("slider__controls--disable"),this.wrapper.addEventListener(e,function(){t.refs.nextBtn.classList.remove("slider__controls--disable")}),this.scrollTo(this.wrapper,"next")}.bind(this)})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r;void 0===(r=function(){"use strict";i(0).tag2("inline-overlay",'<a if="{video}" class="overlay" ref="overlay" href="{video.url}" draggable="false" ondragstart="return false;" data-stay-inside-embed><div class="overlay__preview"><video-preview type="{video.type}" poster="{video.images.hd}" preview="{video.previewUrl}"></video-preview></div><div class="overlay__gradient"></div><div class="overlay__wrapper"><div class="overlay__play"><svg viewbox="0 0 32 32" aria-hidden="true" class="icon icon--play"><use xlink:href="#icon-video"></use></svg><svg viewbox="0 0 32 32" aria-hidden="true" class="icon icon--unmute"><use xlink:href="#icon-unmute"></use></svg></div><h3 class="overlay__hed" data-is="overlay-headline" title="{video.title}" slug="{video.slug}" type="{video.type}"> {video.title} </h3><span class="overlay__metadata"><span if="{video.type !== \'live\'}" class="overlay__timestamp"> {riot.mixin(\'formatter\').getRelativeTime(video.timestamp)} </span><span hide="{video.type === \'live\'}" class="overlay__duration"><span class="icon icon--video"><svg viewbox="0 0 32 32" aria-hidden="true"><use xlink:href="#icon-video"></use></svg></span> {video.durationLabel} </span></span></div></a><button class="overlay__button overlay__button--close" aria-label="Stop video and close player" onclick="{closePlayer}"><svg viewbox="0 0 32 32" class="overlay__button--icon overlay__button--icon-close"><use xlink:href="#icon-close"></use></svg></button>',"","",function(e){this.video,this.liveStreamTitle="CBS News Live",this.closePlayer=function(){this.dispatch.trigger("player:video:pause",{video:this.video}),this.dispatch.trigger("player:player:closed",{video:this.video})}.bind(this),this.resetPreview=function(){this.update({video:null})}.bind(this),this.updatePreview=function(e){this.update({video:e.video}),this.refs.overlay.payload=e.video}.bind(this),this.on("mount",e=>{this.updatePreview({video:CBSNEWS.defaultPayload.items[0]})}),this.dispatch.on("url:change",this.resetPreview),this.dispatch.on("player:content:start",this.resetPreview),this.dispatch.on("player:ad:start",this.resetPreview),this.dispatch.on("url:load",this.updatePreview),this.dispatch.on("player:livestream:stop",this.updatePreview),this.dispatch.on("player:ad:paused",this.updatePreview),this.dispatch.on("player:content:paused",this.updatePreview)})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r;void 0===(r=function(){"use strict";i(0).tag2("overlay-headline","<virtual> {headline} </virtual>","","",function(e){this.headline=e.title,this.slug=e.slug,this.type=e.type,this.onLiveItemChange=function(e){this.update({headline:e.video.title})}.bind(this),this.on("mount",()=>{"live"==this.type&&this.dispatch.on("video:video:changed:type-live",this.onLiveItemChange)})})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r;void 0===(r=function(){"use strict";i(0).tag2("raw","<span></span>","","",function(e){this.root.innerHTML=e.html||"",this.on("update",function(){this.root.innerHTML=e.html||""})})}.apply(t,[]))||(e.exports=r)},function(e,t,i){var r;void 0===(r=function(){"use strict";i(0).tag2("video-preview",'<video class="lazyload" muted="{true}" autoplay playsinline data-poster="{opts.poster}" loop="{opts.type === \'vod\'}" data-hls-wrapper data-preview-url="{opts.preview}"><source type="{opts.type == \'live\' ? \'application/vnd.apple.mpegURL\' : \'video/mp4\'}"></video>',"","",function(e){})}.apply(t,[]))||(e.exports=r)},function(e,t,i){e.exports=i(31)},function(e,t,i){var r,n;r=[i(1),i(0),i(5),i(6),i(8),i(16),i(20),i(21),i(22),i(23),i(25),i(26),i(27),i(28),i(29)],void 0===(n=function(e,t,i,r,n,a,o,s,l,c,u,d,p,h,f){"use strict";function y(e){return e&&e.__esModule?e:{default:e}}e=y(e),t=y(t);var v=CBSNEWS.defaultPayload,m=v.items[0],g=1==hashParams.autoplay,A=0==hashParams.autoplay,E=1==hashParams.isCollapsible,T=!(!v.meta||!v.meta.view),b=T&&/^video_shelf/.test(CBSNEWS.defaultPayload.meta.view),S=/^(60-minutes|48-hours)/.test(m.topic.slug),C="live"==m.type;new r.VideoStore,C||(new i.VideoFeedAdapter,S&&A||T&&!b||g&&E||e.default.trigger("feed:request:playlist",v)),(0,n.beforeInitialTagMount)(),t.default.mount("inline-overlay"),t.default.mount("aviajs"),hashParams.tracking.articleType&&"content_article"===hashParams.tracking.articleType&&"lead"===hashParams.tracking.mediaPositionType&&t.default.mount("slider",{component:"related",limit:4,margin:20}),E&&document.body.classList.add("has-collapsible-header")}.apply(t,r))||(e.exports=n)}])}),require(["version!fly/managers/debug"],function(e){var t=e.init("optimizelyExp");if(CBSNEWS.frameElement)return Object.defineProperty(CBSNEWS.tracking,"optimizelyExp",{get:function(){return window.parent.CBSNEWS.tracking.optimizelyExp},set:function(){},configurable:!0,enumerable:!0}),void t.log("from parent",CBSNEWS.tracking.optimizelyExp);function i(e){return e.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_")}function r(e){let r=CBSNEWS.features.weightedFeatures.filter((e,t,i)=>""!==e&&i.indexOf(e)===t).map(e=>e+"="+CBSNEWS.features.getFeatureValue(e)).sort();if(e){let e=window.optimizely.get("state").getExperimentStates();for(let t in e){let n=e[t];n.isActive&&!n.isInExperimentHoldback&&r.push(`${i(n.experimentName)}(${n.id}):${i(n.variation.name)}(${n.variation.id})`)}}CBSNEWS.tracking.optimizelyExp=r.join("|");let n={type:"trackingDataUpdate",data:{optimizelyExp:CBSNEWS.tracking.optimizelyExp,pageViewGuid:CBSNEWS.tracking.pageViewGuid}};t.log("message",n),window.webkit?window.webkit.messageHandlers.jsHandler.postMessage(n):window.Android?Android.postMessage(JSON.stringify(n)):window!==window.parent&&window.parent.postMessage(n,"*")}window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"initialized"},handler:r}),r(!1)}),define("utils/optimizely-exp",function(){}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("libs/web-vitals/base",["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).webVitals=e.webVitals||{})}(this,function(e){"use strict";var t=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},i=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var i=new PerformanceObserver(function(e){return e.getEntries().map(t)});return i.observe({type:e,buffered:!0}),i}}catch(e){}},r=function(e,t){var i=function i(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",i,!0),removeEventListener("pagehide",i,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)},n=function(e){addEventListener("pageshow",function(t){t.persisted&&e(t)},!0)},a=function(e,t,i){var r;return function(n){t.value>=0&&(n||i)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},o=-1,s=function(){r(function(e){var t=e.timeStamp;o=t},!0)},l=function(){return o<0&&((o=window.webVitals.firstHiddenTime)===1/0&&s(),n(function(){setTimeout(function(){o="hidden"===document.visibilityState?0:1/0,s()},0)})),{get firstHiddenTime(){return o}}},c=function(e,r){var o,s=l(),c=t("FCP"),u=function(e){"first-contentful-paint"===e.name&&(p&&p.disconnect(),e.startTime<s.firstHiddenTime&&(c.value=e.startTime,c.entries.push(e),o(!0)))},d=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],p=d?null:i("paint",u);(d||p)&&(o=a(e,c,r),d&&u(d),n(function(i){c=t("FCP"),o=a(e,c,r),requestAnimationFrame(function(){requestAnimationFrame(function(){c.value=performance.now()-i.timeStamp,o(!0)})})}))},u=!1,d=-1,p={};e.getCLS=function(e,o){u||(c(function(e){d=e.value}),u=!0);var s,l=function(t){d>-1&&e(t)},p=t("CLS",0),h=0,f=[],y=function(e){if(!e.hadRecentInput){var t=f[0],i=f[f.length-1];h&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(h+=e.value,f.push(e)):(h=e.value,f=[e]),h>p.value&&(p.value=h,p.entries=f,s())}},v=i("layout-shift",y);v&&(s=a(l,p,o),r(function(){v.takeRecords().map(y),s(!0)}),n(function(){h=0,d=-1,p=t("CLS",0),s=a(l,p,o)}))},e.getFCP=c,e.getFID=function(e,o){var s,c=l(),u=t("FID"),d=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),s(!0))},p=i("first-input",d);s=a(e,u,o),p&&r(function(){p.takeRecords().map(d),p.disconnect()},!0),p||window.webVitals.firstInputPolyfill(d),n(function(){u=t("FID"),s=a(e,u,o),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(d)})},e.getLCP=function(e,o){var s,c=l(),u=t("LCP"),d=function(e){var t=e.startTime;t<c.firstHiddenTime&&(u.value=t,u.entries.push(e)),s()},h=i("largest-contentful-paint",d);if(h){s=a(e,u,o);var f=function(){p[u.id]||(h.takeRecords().map(d),h.disconnect(),p[u.id]=!0,s(!0))};["keydown","click"].forEach(function(e){addEventListener(e,f,{once:!0,capture:!0})}),r(f,!0),n(function(i){u=t("LCP"),s=a(e,u,o),requestAnimationFrame(function(){requestAnimationFrame(function(){u.value=performance.now()-i.timeStamp,p[u.id]=!0,s(!0)})})})}},e.getTTFB=function(e){var i,r=t("TTFB");i=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var i in e)"navigationStart"!==i&&"toJSON"!==i&&(t[i]=Math.max(e[i]-e.navigationStart,0));return t}();if(r.value=r.delta=t.responseStart,r.value<0||r.value>performance.now())return;r.entries=[t],e(r)}catch(e){}},"complete"===document.readyState?setTimeout(i,0):addEventListener("pageshow",i)},Object.defineProperty(e,"__esModule",{value:!0})}),define("utils/performance-timing",["libs/web-vitals/base","version!fly/managers/debug"],function(e,t){var i=t.init("performance");if("performance"in window&&!CBSNEWS.features.isFeatureDisabled("performance-timing")){CBSNEWS.performance={mapping:{event200:"counter",event201:"unloadEventStart",event202:"unloadEventEnd",event203:"navigationType",event204:"redirectStart",event205:"redirectEnd",event206:"fetchStart",event207:"domainLookupStart",event208:"domainLookupEnd",event209:"connectStart",event210:"secureConnectionStart",event211:"connectEnd",event212:"requestStart",event213:"responseStart",event214:"responseEnd",event215:"domInteractive",event216:"domContentLoadedEventStart",event217:"domContentLoadedEventEnd",event218:"domComplete",event219:"loadEventStart",event220:"loadEventEnd",event221:"workerStart",event222:"FCP",event223:"FID",event224:"LCP",event225:"CLS",event226:"timeSinceStart"},metrics:{counter:"1"}};var r={navigate:0,reload:1,back_forward:2};CBSNEWS.performance.read=function(){i.log("Read performance metrics");var e=performance.getEntriesByType("navigation")[0]||function(){i.log("Using performanceNavigationTiming polyfill");var e=performance.timing,t={duration:e.loadEventEnd-e.navigationStart,entryType:"navigation",initiatorType:"navigation",name:window.location.href,redirectCount:performance.navigation.redirectCount,type:{0:"navigate",1:"reload",2:"back_forward"}[performance.navigation.type],startTime:0,workerStart:0};return["unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"].forEach(function(i){t[i]=Math.max(e[i]-e.navigationStart,0)}),t}();CBSNEWS.performance.navigationType=e.type,CBSNEWS.performance.metrics=Object.assign(CBSNEWS.performance.metrics,{navigationType:r[e.type]||255,startTime:n(e.startTime),unloadEventStart:n(e.unloadEventStart),unloadEventEnd:n(e.unloadEventEnd),redirectStart:n(e.redirectStart),redirectEnd:n(e.redirectEnd),fetchStart:n(e.fetchStart),domainLookupStart:n(e.domainLookupStart),domainLookupEnd:n(e.domainLookupEnd),connectStart:n(e.connectStart),secureConnectionStart:n(e.secureConnectionStart),connectEnd:n(e.connectEnd),requestStart:n(e.requestStart),responseStart:n(e.responseStart),responseEnd:n(e.responseEnd),domInteractive:n(e.domInteractive),domContentLoadedEventStart:n(e.domContentLoadedEventStart),domContentLoadedEventEnd:n(e.domContentLoadedEventEnd),domComplete:n(e.domComplete),loadEventStart:n(e.loadEventStart),loadEventEnd:n(e.loadEventEnd),workerStart:n(e.workerStart),timeSinceStart:n(Date.now()-Math.min(performance.timing.navigationStart||CBSNEWS.date))})},"complete"===document.readyState&&setTimeout(CBSNEWS.performance.read,0),addEventListener("pageshow",CBSNEWS.performance.read),addEventListener("load",function(){setTimeout(CBSNEWS.performance.read,0)}),e.getCLS(a,!0),e.getFCP(a),e.getFID(a),e.getLCP(a,!0)}else i.error("Performance metrics not supported or disabled");function n(e,t){if(!(null==e||e<0))return t=void 0!==t?t:3,(+(Math.round(`${e}e+3`)+`e-${t}`)).toFixed(t)}function a(e){i.log("Web Vitals metric",e.name,e.value),CBSNEWS.performance.metrics[e.name]=n(e.value,"CLS"===e.name?0:3)}}),require(["fly/libs/uuid.v4"],function(){CBSNEWS.frameElement?CBSNEWS.tracking.pageViewGuid=window.parent.CBSNEWS.tracking.pageViewGuid:CBSNEWS.tracking.pageViewGuid=uuid.v4()}),require(["common/lazysizes"]),require(["video/common","video/main-embed"]),require(["utils/optimizely-exp"]),require(["utils/performance-timing"]),define("main.video-embed",function(){});