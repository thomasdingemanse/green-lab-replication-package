/**
 * mux-embed
 * @version 3.2.1
 * @copyright 2020 Mux, Inc
 */
!function(){var e,t;e="undefined"!=typeof self?self:this,t=function(){return function(e){function t(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}([function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(t,r(6))},function(e,t){function r(e,t){var r=x(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&s(e)}(e)&&v.call(e,"callee")&&(!y.call(e,"callee")||m.call(e)==c)}(e)?function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}(e.length,String):[],a=r.length,n=!!a;for(var o in e)!t&&!v.call(e,o)||n&&("length"==o||i(o,a))||r.push(o);return r}function a(e,t,r){var a=e[t];v.call(e,t)&&o(a,r)&&(void 0!==r||t in e)||(e[t]=r)}function i(e,t){return!!(t=null==t?d:t)&&("number"==typeof e||h.test(e))&&e>-1&&e%1==0&&e<t}function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_)}function o(e,t){return e===t||e!=e&&t!=t}function s(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}(e.length)&&!function(e){var t=u(e)?m.call(e):"";return t==f||t==p}(e)}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return s(e)?r(e):function(e){if(!n(e))return b(e);var t=[];for(var r in Object(e))v.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}var d=9007199254740991,c="[object Arguments]",f="[object Function]",p="[object GeneratorFunction]",h=/^(?:0|[1-9]\d*)$/,_=Object.prototype,v=_.hasOwnProperty,m=_.toString,y=_.propertyIsEnumerable,b=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),g=Math.max,w=!y.call({valueOf:1},"valueOf"),x=Array.isArray,S=function(e){return function(e,t){return t=g(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=g(r.length-t,0),n=Array(i);++a<i;)n[a]=r[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=r[a];return o[t]=n,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(function(t,r){var a=-1,n=r.length,l=n>1?r[n-1]:void 0,d=n>2?r[2]:void 0;for(l=e.length>3&&"function"==typeof l?(n--,l):void 0,d&&function(e,t,r){if(!u(r))return!1;var a=typeof t;return!!("number"==a?s(r)&&i(t,r.length):"string"==a&&t in r)&&o(r[t],e)}(r[0],r[1],d)&&(l=n<3?void 0:l,n=1),t=Object(t);++a<n;){var c=r[a];c&&e(t,c)}return t})}(function(e,t){if(w||n(t)||s(t))!function(e,t,r,i){r||(r={});for(var n=-1,o=t.length;++n<o;){var s=t[n],u=i?i(r[s],e[s],s,r,e):void 0;a(r,s,void 0===u?e[s]:u)}}(t,l(t),e);else for(var r in t)v.call(t,r)&&a(e,r,t[r])});e.exports=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){r=void 0===r?1:r,e[t]=e[t]||0,e[t]+=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),i={now:function(){var e=a.default.performance,t=e&&e.timing;return t&&"number"==typeof t.navigationStart&&"function"==typeof e.now?t.navigationStart+e.now():Date.now()}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(20)),i=a.default.methodFactory;a.default.methodFactory=function(e,t,r){var a=i(e,t,r);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);a.apply(void 0,e)}},a.default.setLevel(a.default.getLevel()),t.default=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){if("string"!=typeof e||""===e)return["localhost"];var t=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4],r=void 0;return t&&(r=(t.match(/[^\.]+\.[^\.]+$/)||[])[0]),[t,r]};t.extractHostnameAndDomain=a,t.extractHostname=function(e){return a(e)[0]},t.extractDomain=function(e){return a(e)[1]}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.generateShortID=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=(e=e||"").match(/[^\r\n]+/g)||[];for(var t={},r=0;r<e.length;r++){var a=e[r].split(/\s*:\s*(.+)/);3===a.length&&(t[a[0]]=a[1])}return t}},function(e,t,r){"use strict";var a=Object.prototype.hasOwnProperty,i=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var a=[],n=0;n<r.length;++n)void 0!==r[n]&&a.push(r[n]);t.obj[t.prop]=a}}},s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)void 0!==e[a]&&(r[a]=e[a]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],a=0;a<t.length;++a)for(var i=t[a],n=i.obj[i.prop],s=Object.keys(n),u=0;u<s.length;++u){var l=s[u],d=n[l];"object"==typeof d&&null!==d&&-1===r.indexOf(d)&&(t.push({obj:n,prop:l}),r.push(d))}return o(t),e},decode:function(e,t,r){var a=e.replace(/\+/g," ");if("iso-8859-1"===r)return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch(e){return a}},encode:function(e,t,r){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",o=0;o<a.length;++o){var s=a.charCodeAt(o);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=a.charAt(o):s<128?i+=n[s]:s<2048?i+=n[192|s>>6]+n[128|63&s]:s<55296||s>=57344?i+=n[224|s>>12]+n[128|s>>6&63]+n[128|63&s]:(o+=1,s=65536+((1023&s)<<10|1023&a.charCodeAt(o)),i+=n[240|s>>18]+n[128|s>>12&63]+n[128|s>>6&63]+n[128|63&s])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],a=0;a<e.length;a+=1)r.push(t(e[a]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!a.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var o=t;return i(t)&&!i(r)&&(o=s(t,n)),i(t)&&i(r)?(r.forEach(function(r,i){if(a.call(t,i)){var o=t[i];o&&"object"==typeof o&&r&&"object"==typeof r?t[i]=e(o,r,n):t.push(r)}else t[i]=r}),t):Object.keys(r).reduce(function(t,i){var o=r[i];return a.call(t,i)?t[i]=e(t[i],o,n):t[i]=o,t},o)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findMediaElement=t.getMuxPlayerId=void 0;var a=r(7),i=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||(0,a.generateShortID)()),e.muxId):e};t.getMuxPlayerId=i,t.findMediaElement=function(e){var t=void 0;return e&&void 0!==e.nodeName?e=i(t=e):t=document.querySelector(e),[t,e,t&&t.nodeName?t.nodeName.toLowerCase():""]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"1"===(a.default.doNotTrack||a.default.navigator&&(a.default.navigator.doNotTrack||a.default.navigator.msDoNotTrack))};var a=function(e){return e&&e.__esModule?e:{default:e}}(r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),i={exists:function(){var e=a.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=a.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=a.default.performance,t=e&&e.timing;return t&&t.navigationStart}};t.default=i},function(e,t,r){(function(t){var a,i=void 0!==t?t:"undefined"!=typeof window?window:{},n=r(23);"undefined"!=typeof document?a=document:(a=i["__GLOBAL_DOCUMENT_CACHE@4"])||(a=i["__GLOBAL_DOCUMENT_CACHE@4"]=n),e.exports=a}).call(t,r(6))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var a=r(42),i=r(43),n=r(16);e.exports={formats:n,parse:i,stringify:a}},function(e,t,r){"use strict";var a=String.prototype.replace,i=/%20/g,n=r(9),o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=n.assign({default:o.RFC3986,formatters:{RFC1738:function(e){return a.call(e,i,"+")},RFC3986:function(e){return String(e)}}},o)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={},r={};return Object.keys(e).forEach(function(a){var i=!1;if(e.hasOwnProperty(a)&&void 0!==e[a]){var o=a.split("_"),l=o[0],d=s[l];d||(n.default.info("Data key word `"+o[0]+"` not expected in "+a),d=l+"_"),o.splice(1).forEach(function(e){"url"===e&&(i=!0),u[e]?d+=u[e]:(n.default.info("Data key word `"+e+"` not expected in "+a),d+="_"+e+"_")}),i?r[d]=e[a]:t[d]=e[a]}}),(0,o.default)(t,r)};var n=a(r(4)),o=a(r(1)),s=i({a:"env",b:"beacon",d:"ad",e:"event",f:"experiment",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),u=i({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cd:"code",cg:"category",ch:"changed",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",du:"duration",dv:"device",ec:"encoding",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",fi:"first",fm:"family",ft:"format",fq:"frequency",fr:"frame",fs:"fullscreen",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mx:"mux",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",po:"poster",pr:"preload",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"})},function(e,t,r){"use strict";e.exports=r(19).default},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=a(r(0)),o=r(10),s=a(r(4)),u=a(r(11)),l=a(r(3)),d=a(r(21)),c=a(r(50)),f=a(r(51)),p={},h=function e(t){var r=arguments;"string"==typeof t?e.hasOwnProperty(t)?n.default.setTimeout(function(){r=Array.prototype.splice.call(r,1),e[t].apply(null,r)},0):s.default.warn("`"+t+"` is an unknown task"):"function"==typeof t?n.default.setTimeout(function(){t(e)},0):s.default.warn("`"+t+"` is invalid.")};h.loaded=l.default.now(),h.VERSION="3.2.1",h.API_VERSION="2.1",h.PLAYER_TRACKED=!1,h.monitor=function(e,t){return(0,c.default)(h,e,t)},h.destroyMonitor=function(e){var t=(0,o.findMediaElement)(e),r=i(t,1)[0];r&&r.mux&&"function"==typeof r.mux.destroy?r.mux.destroy():s.default.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},h.addHLSJS=function(e,t){var r=(0,o.getMuxPlayerId)(e);p[r]?p[r].addHLSJS(t):s.default.error("A monitor for `"+r+"` has not been initialized.")},h.addDashJS=function(e,t){var r=(0,o.getMuxPlayerId)(e);p[r]?p[r].addDashJS(t):s.default.error("A monitor for `"+r+"` has not been initialized.")},h.removeHLSJS=function(e){var t=(0,o.getMuxPlayerId)(e);p[t]?p[t].removeHLSJS():s.default.error("A monitor for `"+t+"` has not been initialized.")},h.removeDashJS=function(e){var t=(0,o.getMuxPlayerId)(e);p[t]?p[t].removeDashJS():s.default.error("A monitor for `"+t+"` has not been initialized.")},h.init=function(e,t){(0,u.default)()&&t&&t.respectDoNotTrack&&s.default.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=(0,o.getMuxPlayerId)(e);p[r]=new d.default(h,r,t)},h.emit=function(e,t,r){var a=(0,o.getMuxPlayerId)(e);p[a]?(p[a].emit(t,r),"destroy"===t&&delete p[a]):s.default.error("A monitor for `"+a+"` has not been initialized.")},void 0!==n.default&&"function"==typeof n.default.addEventListener&&n.default.addEventListener("unload",function(){h.WINDOW_UNLOADING=!0},!1),h.checkDoNotTrack=u.default,h.log=s.default,h.utils=f.default,t.default=h},function(e,t,r){var a,i;!function(n,o){"use strict";a=function(){function e(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function t(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(r){return"debug"===r&&(r="log"),typeof console!==u&&("trace"===r&&l?t:void 0!==console[r]?e(console,r):void 0!==console.log?e(console,"log"):s)}function a(e,t){for(var r=0;r<d.length;r++){var a=d[r];this[a]=r<e?s:this.methodFactory(a,e,t)}this.log=this.debug}function i(e,t,r){return function(){typeof console!==u&&(a.call(this,t,r),this[e].apply(this,arguments))}}function n(e,t,a){return r(e)||i.apply(this,arguments)}function o(e,t,r){function i(){var e;if(typeof window!==u){try{e=window.localStorage[l]}catch(e){}if(typeof e===u)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(l)+"=");-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}var o,s=this,l="loglevel";e&&(l+=":"+e),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=r||n,s.getLevel=function(){return o},s.setLevel=function(t,r){if("string"==typeof t&&void 0!==s.levels[t.toUpperCase()]&&(t=s.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(o=t,!1!==r&&function(e){var t=(d[e]||"silent").toUpperCase();if(typeof window!==u){try{return void(window.localStorage[l]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+t+";"}catch(e){}}}(t),a.call(s,t,e),typeof console===u&&t<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){i()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var c=i();null==c&&(c=null==t?"WARN":t),s.setLevel(c,!1)}var s=function(){},u="undefined",l=typeof window!==u&&typeof window.navigator!==u&&/Trident\/|MSIE /.test(window.navigator.userAgent),d=["trace","debug","info","warn","error"],c=new o,f={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new o(e,c.getLevel(),c.methodFactory)),t};var p=typeof window!==u?window.log:void 0;return c.noConflict=function(){return typeof window!==u&&window.log===c&&(window.log=p),c},c.getLoggers=function(){return f},c},void 0!==(i="function"==typeof a?a.call(t,r,t,e):a)&&(e.exports=i)}()},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=a(r(4)),o=a(r(1)),s=r(7),u=r(5),l=a(r(0)),d=a(r(12)),c=a(r(2)),f=a(r(22)),p=r(25),h=r(26),_=a(r(27)),v=a(r(28)),m=a(r(29)),y=a(r(30)),b=a(r(31)),g=a(r(32)),w=a(r(33)),x=a(r(34)),S=a(r(35)),E=a(r(36)),T=a(r(37)),k=a(r(38)),O=a(r(39)),P=a(r(40)),M=a(r(49)),D=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],q=function(e,t,r){var a=this;this.DOM_CONTENT_LOADED_EVENT_END=d.default.domContentLoadedEventEnd(),this.NAVIGATION_START=d.default.navigationStart();this.mux=e,this.id=t,(r=(0,o.default)({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,errorTranslator:function(e){return e}},r)).data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),n.default.setLevel(r.debug?"debug":"warn"),this.getPlayheadTime=r.getPlayheadTime,this.getStateData=r.getStateData||function(){},this.getAdData=r.getAdData||function(){},this.minimumRebufferDuration=r.minimumRebufferDuration,this.sustainedRebufferThreshold=r.sustainedRebufferThreshold,this.playbackHeartbeatTime=r.playbackHeartbeatTime,this.errorTranslator=r.errorTranslator,this.playbackEventDispatcher=new P.default(e,r.data.env_key,r),this.data={player_instance_id:(0,s.generateUUID)(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconDomain},this.data.view_sequence_number=1,this.data.player_sequence_number=1,this.oldEmit=this.emit,this.emit=function(e,t){t=(0,o.default)({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var i=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(this);this.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),(0,o.default)(this.data,t),this._initializeViewData(),this.one("play",i),this.one("adbreakstart",i)});var u=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(this);this.on("videochange",function(e,t){u(t)}),this.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),u((0,o.default)(t,{view_program_changed:!0})),i()}),this.on("destroy",this.destroy);var c=this.destroy.bind(this);void 0!==l.default&&"function"==typeof l.default.addEventListener&&l.default.addEventListener("unload",c,!1),this.on("destroy",function(){void 0!==l.default&&"function"==typeof l.default.removeEventListener&&l.default.removeEventListener("unload",c)}),this.on("playerready",function(e,t){(0,o.default)(this.data,t)}),D.forEach(function(e){a.on(e,function(t,r){0!==e.indexOf("ad")&&this._updateStateData(),(0,o.default)(this.data,r),this._sanitizeData()}),a.on("after"+e,function(){("error"!==e||this.viewErrored)&&this.send(e)})}),this.on("viewend",function(e,t){(0,o.default)(a.data,t)});this.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),m.default.apply(this),O.default.apply(this),E.default.apply(this),g.default.apply(this),v.default.apply(this),S.default.apply(this),y.default.apply(this),b.default.apply(this),T.default.apply(this),w.default.apply(this),x.default.apply(this),k.default.apply(this),M.default.apply(this),r.hlsjs&&this.addHLSJS(r),r.dashjs&&this.addDashJS(r),this.emit("viewinit",r.data)};(0,o.default)(q.prototype,_.default.prototype),(0,o.default)(q.prototype,g.default.prototype),(0,o.default)(q.prototype,E.default.prototype),(0,o.default)(q.prototype,v.default.prototype),(0,o.default)(q.prototype,y.default.prototype),(0,o.default)(q.prototype,b.default.prototype),(0,o.default)(q.prototype,T.default.prototype),(0,o.default)(q.prototype,w.default.prototype),(0,o.default)(q.prototype,x.default.prototype),q.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),l.default.clearTimeout(this._heartBeatTimeout))},q.prototype.send=function(e){var t=(0,o.default)({},this.data);if(1===t.player_error_code&&(delete t.player_error_code,delete t.player_error_message),t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var r=(0,u.extractHostnameAndDomain)(t.video_source_url),a=i(r,2),n=a[0],s=a[1];t.video_source_domain=s,t.video_source_hostname=n}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat()},q.prototype._updateStateData=function(){(0,o.default)(this.data,this.getStateData()),this.getPlayheadTime&&(this.data.player_playhead_time=this.getPlayheadTime()),this._sanitizeData()},q.prototype._sanitizeData=function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var r=parseInt(e.data[t],10);e.data[t]=isNaN(r)?void 0:r}),["player_source_url","video_source_url"].forEach(function(t){e.data[t]&&0===e.data[t].toLowerCase().indexOf("data:")&&(e.data[t]="MSE style URL")})},q.prototype._resetVideoData=function(e,t){var r=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("video_")&&delete r.data[e]})},q.prototype._resetViewData=function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1},q.prototype._resetErrorData=function(e,t){delete this.data.player_error_code,delete this.data.player_error_message},q.prototype._initializeViewData=function(){var e=this,t=this.data.view_id=(0,s.generateUUID)();this.data.video_id||(this.data.video_id=(0,f.default)(this.data.player_source_url));var r=function(){t===e.data.view_id&&(0,c.default)(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",r):r()},q.prototype._restartHeartBeat=function(){var e=this;l.default.clearTimeout(this._heartBeatTimeout),this.viewErrored||(this._heartBeatTimeout=l.default.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4))},q.prototype.addHLSJS=function(e){return e.hlsjs?this.hlsjs?void this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,void(0,p.monitorHlsJs)(this.mux,this.id,e.hlsjs,{},e.Hls||l.default.Hls)):void this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")},q.prototype.removeHLSJS=function(){this.hlsjs&&((0,p.stopMonitoringHlsJs)(this.hlsjs),this.hlsjs=void 0)},q.prototype.addDashJS=function(e){return e.dashjs?this.dashjs?void this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,void(0,h.monitorDashJS)(this.mux,this.id,e.dashjs)):void this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")},q.prototype.removeDashJS=function(){this.dashjs&&((0,h.stopMonitoringDashJS)(this.dashjs),this.dashjs=void 0)},t.default=q},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.createElement("a");t.href=e;var r=t.pathname.replace(/\.[^\/.]+$/,"");return n.default.encode(t.host+r).split("=")[0]};var i=a(r(13)),n=a(r(24))},function(e,t){},function(e,t,r){(function(e,a){var i;!function(a){"object"==typeof e&&e&&e.exports;var n=function(e){this.message=e};(n.prototype=new Error).name="InvalidCharacterError";var o=function(e){throw new n(e)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,l={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,a,i,n=e.length%3,u="",l=-1,d=e.length-n;++l<d;)t=e.charCodeAt(l)<<16,r=e.charCodeAt(++l)<<8,a=e.charCodeAt(++l),u+=s.charAt((i=t+r+a)>>18&63)+s.charAt(i>>12&63)+s.charAt(i>>6&63)+s.charAt(63&i);return 2==n?(t=e.charCodeAt(l)<<8,r=e.charCodeAt(++l),u+=s.charAt((i=t+r)>>10)+s.charAt(i>>4&63)+s.charAt(i<<2&63)+"="):1==n&&(i=e.charCodeAt(l),u+=s.charAt(i>>2)+s.charAt(i<<4&63)+"=="),u},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var r,a,i=0,n="",l=-1;++l<t;)a=s.indexOf(e.charAt(l)),r=i%4?64*r+a:a,i++%4&&(n+=String.fromCharCode(255&r>>(-2*i&6)));return n},version:"0.1.0"};void 0!==(i=function(){return l}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(14)(e),r(6))},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringHlsJs=t.monitorHlsJs=void 0;var i=a(r(8)),n=a(r(12)),o=r(5),s=function(e){if(!e)return{};var t=n.default.navigationStart();return{bytesLoaded:e.total,requestStart:Math.round(t+e.trequest),responseStart:Math.round(t+e.tfirst),responseEnd:Math.round(t+e.tload)}},u=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return(0,i.default)(e.getAllResponseHeaders())};t.monitorHlsJs=function(e,t,r){var a=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments[4]),i=e.log;if(n.default.exists()){var l=function(r,a){return e.emit(t,r,a)},d=function(e,t){var r=t.levels,a=t.audioTracks,i=t.url,n=t.stats,d=t.networkDetails,c={},f={};r.forEach(function(e,t){c[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),a.forEach(function(e,t){f[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var p=s(n),h=p.bytesLoaded,_=p.requestStart,v=p.responseStart,m=p.responseEnd;l("requestcompleted",{request_event_type:e,request_bytes_loaded:h,request_start:_,request_response_start:v,request_response_end:m,request_type:"manifest",request_hostname:(0,o.extractHostname)(i),request_response_headers:u(d),request_rendition_lists:{media:c,audio:f,video:{}}})};r.on(a.Events.MANIFEST_LOADED,d);var c=function(e,t){var r=t.details,a=t.level,i=t.networkDetails,n=t.stats,d=s(n),c=d.bytesLoaded,f=d.requestStart,p=d.responseStart,h=d.responseEnd;l("requestcompleted",{request_event_type:e,request_bytes_loaded:c,request_start:f,request_response_start:p,request_response_end:h,request_current_level:a,request_type:"manifest",request_hostname:(0,o.extractHostname)(r.url),request_response_headers:u(i)})};r.on(a.Events.LEVEL_LOADED,c);var f=function(e,t){var r=t.details,a=t.networkDetails,i=t.stats,n=s(i),d=n.bytesLoaded,c=n.requestStart,f=n.responseStart,p=n.responseEnd;l("requestcompleted",{request_event_type:e,request_bytes_loaded:d,request_start:c,request_response_start:f,request_response_end:p,request_type:"manifest",request_hostname:(0,o.extractHostname)(r.url),request_response_headers:u(a)})};r.on(a.Events.AUDIO_TRACK_LOADED,f);var p=function(e,t){var a=t.stats,i=t.networkDetails,n=t.frag,d=s(a),c={request_event_type:e,request_bytes_loaded:d.bytesLoaded,request_start:d.requestStart,request_response_start:d.responseStart,request_response_end:d.responseEnd,request_hostname:i?(0,o.extractHostname)(i.responseURL):void 0,request_response_headers:u(i),request_media_duration:n.duration};"main"===n.type?(c.request_type="media",c.request_current_level=n.level,c.request_video_width=(r.levels[n.level]||{}).width,c.request_video_height=(r.levels[n.level]||{}).height):c.request_type=n.type,l("requestcompleted",c)};r.on(a.Events.FRAG_LOADED,p);var h=function(e,t){var r=t.details,i=t.response,n=t.context,s=t.frag;if(r===a.ErrorDetails.MANIFEST_LOAD_ERROR||r===a.ErrorDetails.MANIFEST_LOAD_TIMEOUT||r===a.ErrorDetails.FRAG_LOAD_ERROR||r===a.ErrorDetails.FRAG_LOAD_TIMEOUT||r===a.ErrorDetails.LEVEL_LOAD_ERROR||r===a.ErrorDetails.LEVEL_LOAD_TIMEOUT){var u=s&&s.url||n&&n.url||"";l("requestfailed",{request_error:r,request_url:u,request_hostname:(0,o.extractHostname)(u),request_type:r===a.ErrorDetails.FRAG_LOAD_ERROR||r===a.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":"manifest",request_error_code:i&&i.code,request_error_text:i&&i.text})}};r.on(a.Events.ERROR,h);var _=function(e,t){var r=t.frag,a=r&&r._url||"";l("requestcanceled",{request_cancel:e,request_url:a,request_type:"media",request_hostname:(0,o.extractHostname)(a)})};r.on(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,_);var v=function(e,t){var a=t.level,n=r.levels.find(function(e){return e.level===a});if(n&&n.attrs.BANDWIDTH){var o=n.attrs.BANDWIDTH;o?l("renditionchange",{video_source_bitrate:o,video_source_width:n.width,video_source_height:n.height}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(a.Events.LEVEL_SWITCHED,v),r._stopMuxMonitor=function(){r.off(a.Events.MANIFEST_LOADED,d),r.off(a.Events.LEVEL_LOADED,c),r.off(a.Events.AUDIO_TRACK_LOADED,f),r.off(a.Events.FRAG_LOADED,p),r.off(a.Events.ERROR,h),r.off(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,_),r.off(a.Events.LEVEL_SWITCHED,v),r.off(a.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(a.Events.DESTROYING,r._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")},t.stopMonitoringHlsJs=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringDashJS=t.monitorDashJS=void 0;var i=a(r(0)),n=a(r(8)),o=r(5),s=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var r=e.getRequests({state:"executed"});if(0===r.length)return{};var a=r[r.length-1],i=(0,o.extractHostname)(a.url),s=a.bytesLoaded,u=new Date(a.requestStartDate).getTime(),l=new Date(a.firstByteDate).getTime(),d=new Date(a.requestEndDate).getTime(),c=isNaN(a.duration)?0:a.duration,f="function"==typeof t.getMetricsFor?t.getMetricsFor(a.mediaType).HttpList:t.getDashMetrics().getHttpRequests(a.mediaType),p=void 0;return f.length>0&&(p=(0,n.default)(f[f.length-1]._responseHeaders||"")),{requestStart:u,requestResponseStart:l,requestResponseEnd:d,requestBytesLoaded:s,requestResponseHeaders:p,requestMediaDuration:c,requestHostname:i}};t.monitorDashJS=function(e,t,r){var a=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],e.log);if(r&&r.on){var n=function(r,a){return e.emit(t,r,a)},u=function(e){var t=e.type,r=(e.data||{}).url;n("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:(0,o.extractHostname)(r)})};r.on("manifestLoaded",u);var l={},d=function(e){var t=e.type,a=e.fragmentModel,i=(e.chunk||{}).mediaInfo||{},o=i.type,u=i.bitrateList,d={};(u=u||[]).forEach(function(e,t){d[t]={},d[t].width=e.width,d[t].height=e.height,d[t].bitrate=e.bandwidth,d[t].attrs={}}),"video"===o?l.video=d:"audio"===o?l.audio=d:l.media=d;var c=s(a,r),f=c.requestStart,p=c.requestResponseStart,h=c.requestResponseEnd,_=c.requestResponseHeaders,v=c.requestMediaDuration,m=c.requestHostname;n("requestcompleted",{request_event_type:t,request_start:f,request_response_start:p,request_response_end:h,request_bytes_loaded:-1,request_type:o+"_init",request_response_headers:_,request_hostname:m,request_media_duration:v,request_rendition_lists:l})};r.on("initFragmentLoaded",d);var c=function(e){var t=e.type,a=e.fragmentModel,i=e.chunk||{},o=i.mediaInfo,u=i.start,l=(o||{}).type,d=s(a,r),c=d.requestStart,f=d.requestResponseStart,p=d.requestResponseEnd,h=d.requestBytesLoaded,_=d.requestResponseHeaders,v=d.requestMediaDuration,m=d.requestHostname,y=function(e,t){var r=t.getQualityFor(e),a=t.getCurrentTrackFor(e).bitrateList;return a?{currentLevel:r,renditionWidth:a[r].width||null,renditionHeight:a[r].height||null,renditionBitrate:a[r].bandwidth}:{}}(l,r),b=y.currentLevel,g=y.renditionWidth,w=y.renditionHeight,x=y.renditionBitrate;n("requestcompleted",{request_event_type:t,request_start:c,request_response_start:f,request_response_end:p,request_bytes_loaded:h,request_type:l,request_response_headers:_,request_hostname:m,request_media_start_time:u,request_media_duration:v,request_current_level:b,request_labeled_bitrate:x,request_video_width:g,request_video_height:w})};r.on("mediaFragmentLoaded",c);var f={video:void 0,audio:void 0,totalBitrate:void 0},p=function(e,t,i){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=r.getBitrateInfoListFor(o).find(function(t){return t.qualityIndex===e.newQuality});if(!s||"number"!=typeof s.bitrate)return void a.warn("missing bitrate info for "+o);f[o]=s;var u=function(){if(f.video&&"number"==typeof f.video.bitrate){if(!f.video.width||!f.video.height)return void a.warn("have bitrate info for video but missing width/height");var e=f.video.bitrate;return f.audio&&"number"==typeof f.audio.bitrate&&(e+=f.audio.bitrate),e!==f.totalBitrate?(f.totalBitrate=e,{video_source_bitrate:e,video_source_height:f.video.height,video_source_width:f.video.width}):void 0}}();u&&n("renditionchange",u)}}else a.warn("missing evt.newQuality in qualityChangeRendered event",e)};r.on("qualityChangeRendered",p);var h=function(e){var t=e.error,r=e.event,a=(r=r||{}).request||{},s=i.default.event&&i.default.event.currentTarget||{};n("requestfailed",{request_error:t+"_"+r.id+"_"+a.type,request_url:r.url,request_hostname:(0,o.extractHostname)(r.url),request_type:a.mediaType,request_error_code:s.status,request_error_type:s.statusText})};r.on("error",h),r._stopMuxMonitor=function(){r.off("manifestLoaded",u),r.off("initFragmentLoaded",d),r.off("mediaFragmentLoaded",c),r.off("qualityChangeRendered",p),r.off("error",h),delete r._stopMuxMonitor}}else a.warn("Invalid dash.js player reference. Monitoring blocked.")},t.stopMonitoringDashJS=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){},i=0;a.prototype.on=function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++i,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t},a.prototype.off=function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(e,a){e._eventEmitterGuid===t._eventEmitterGuid&&r.splice(a,1)})},a.prototype.one=function(e,t,r){var a=this;t._eventEmitterGuid=t._eventEmitterGuid||++i;var n=function i(){a.off(e,i),t.apply(r||this,arguments)};n._eventEmitterGuid=t._eventEmitterGuid,this.on(e,n)},a.prototype.emit=function(e,t){var r=this;if(this._listeners){t=t||{};var a=this._listeners["before*"]||[],i=this._listeners[e]||[],n=this._listeners["after"+e]||[],o=function(t,a){(t=t.slice()).forEach(function(t){t.call(r,{type:e},a)})};o(a,t),o(i,t),o(n,t)}},t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),i=function(){this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,this.on("playing",function(){this._playheadShouldBeProgressing=!0}),this.on("play",this._startPlaybackHeartbeatInterval),this.on("playing",this._startPlaybackHeartbeatInterval),this.on("adbreakstart",this._startPlaybackHeartbeatInterval),this.on("adplay",this._startPlaybackHeartbeatInterval),this.on("adplaying",this._startPlaybackHeartbeatInterval),this.on("seeking",this._startPlaybackHeartbeatInterval),this.on("devicewake",this._startPlaybackHeartbeatInterval),this.on("viewstart",this._startPlaybackHeartbeatInterval),this.on("pause",this._stopPlaybackHeartbeatInterval),this.on("ended",this._stopPlaybackHeartbeatInterval),this.on("viewend",this._stopPlaybackHeartbeatInterval),this.on("error",this._stopPlaybackHeartbeatInterval),this.on("aderror",this._stopPlaybackHeartbeatInterval),this.on("adpause",this._stopPlaybackHeartbeatInterval),this.on("adended",this._stopPlaybackHeartbeatInterval),this.on("adbreakend",this._stopPlaybackHeartbeatInterval),this.on("seeked",function(){this.data.player_is_paused?this._stopPlaybackHeartbeatInterval():this._startPlaybackHeartbeatInterval()}),this.on("timeupdate",function(){null!==this._playbackHeartbeatInterval&&this.emit("playbackheartbeat")}),this.on("devicesleep",function(e,t){null!==this._playbackHeartbeatInterval&&(a.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend",{viewer_time:t.viewer_time}),this._playbackHeartbeatInterval=null)})};i.prototype._startPlaybackHeartbeatInterval=function(){var e=this;null===this._playbackHeartbeatInterval&&(this.emit("playbackheartbeat"),this._playbackHeartbeatInterval=a.default.setInterval(function(){e.emit("playbackheartbeat")},this.playbackHeartbeatTime))},i.prototype._stopPlaybackHeartbeatInterval=function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(a.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)},t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",function(){e.viewErrored=!1}),this.on("error",function(){try{var t=e.errorTranslator({player_error_code:e.data.player_error_code,player_error_message:e.data.player_error_message});t?(e.data.player_error_code=t.player_error_code,e.data.player_error_message=t.player_error_message,e.viewErrored=!0):(delete e.data.player_error_code,delete e.data.player_error_message)}catch(t){e.mux.log.warn("Exception in error translator callback.",t),e.viewErrored=!0}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(2)),i=function(){this._watchTimeTrackerLastCheckedTime=null,this.on("playbackheartbeat",this._updateWatchTime),this.on("playbackheartbeatend",this._clearWatchTimeState)};i.prototype._updateWatchTime=function(e,t){var r=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=r),(0,a.default)(this.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r},i.prototype._clearWatchTimeState=function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null},t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(2)),i=function(){this._playbackTimeTrackerLastPlayheadPosition=-1,this.on("playbackheartbeat",this._updatePlaybackTime),this.on("playbackheartbeatend",this._clearPlaybackTimeState),this.on("seeking",this._clearPlaybackTimeState)};i.prototype._updatePlaybackTime=function(){var e=this.data.player_playhead_time;if(this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition){var t=e-this._playbackTimeTrackerLastPlayheadPosition;t<=1e3&&(0,a.default)(this.data,"view_content_playback_time",t)}this._playbackTimeTrackerLastPlayheadPosition=e},i.prototype._clearPlaybackTimeState=function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1},t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){this.on("playbackheartbeat",this._updatePlayheadTime),this.on("playbackheartbeatend",this._updatePlayheadTime),this.on("timeupdate",this._updatePlayheadTime),this.on("destroy",function(){this.off("timeupdate",this._updatePlayheadTime)})};a.prototype._updatePlayheadTime=function(e,t){if(t.player_playhead_time)this.data.player_playhead_time=t.player_playhead_time;else if(this.getPlayheadTime){var r=this.getPlayheadTime();void 0!==r&&(this.data.player_playhead_time=r)}},t.default=a},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3)),n=a(r(2)),o=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,this.on("playbackheartbeat",this._checkIfRebuffering),this.on("playbackheartbeatend",this._cleanupRebufferTracker),this.on("seeking",function(){this._cleanupRebufferTracker(null,{viewer_time:i.default.now()})})};o.prototype._checkIfRebuffering=function(e,t){if(this.isSeeking||this.isAdBreak||!this._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else{if(null===this._lastCheckedTime)return this._prepareRebufferTrackerState(t.viewer_time),void this._updateRebufferMetrics();if(this._lastPlayheadTime===this.data.player_playhead_time){var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;r>=this.sustainedRebufferThreshold&&(this._rebuffering?this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime):(this._rebuffering=!0,(0,n.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(r),this.emit("rebufferstart"))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0)}},o.prototype._clearRebufferTrackerState=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null},o.prototype._prepareRebufferTrackerState=function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e},o.prototype._cleanupRebufferTracker=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime),this.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return void this._updateRebufferMetrics();var a=this.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;a>0&&i-a>this.minimumRebufferDuration?((0,n.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(i-a),this.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-a})):this._updateRebufferMetrics()}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()},o.prototype._updateRebufferMetrics=function(e){e>0&&(0,n.default)(this.data,"view_rebuffer_duration",e),this.data.view_watch_time>=0&&this.data.view_rebuffer_count>0&&(this.data.view_rebuffer_frequency=this.data.view_rebuffer_count/this.data.view_watch_time,this.data.view_rebuffer_percentage=this.data.view_rebuffer_duration/this.data.view_watch_time)},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(r(3)),i=function(){this.on("viewinit",function(){var e=this.data,t=e.view_id;if(!e.view_program_changed){var r=function(e,r){var i=r.viewer_time;"playing"===e.type&&void 0===this.data.view_time_to_first_frame?this.calculateTimeToFirstFrame(i||a.default.now(),t):"adplaying"!==e.type||void 0!==this.data.view_time_to_first_frame&&!this.inPrerollPosition()||this.calculateTimeToFirstFrame(i||a.default.now(),t)};this.one("playing",r),this.one("adplaying",r),this.one("viewend",function(){this.off("playing",r),this.off("adplaying",r)})}})};i.prototype.calculateTimeToFirstFrame=function(e,t){t===this.data.view_id&&(this._updateWatchTime(null,{viewer_time:e}),this.data.view_time_to_first_frame=this.data.view_watch_time,(this.data.player_autoplay_on||this.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.data.view_aggregate_startup_time=this.data.view_start+this.data.view_watch_time-this.NAVIGATION_START))},t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.on("viewinit",function(){this._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach(function(t){e.on(t,function(){if(this._lastPlayheadPosition>=0&&this.data.player_playhead_time>=0&&this._lastPlayerWidth>=0&&this._lastSourceWidth>0&&this._lastPlayerHeight>=0&&this._lastSourceHeight>0){var e=this.data.player_playhead_time-this._lastPlayheadPosition;if(e<0)return void(this._lastPlayheadPosition=-1);var t=Math.min(this._lastPlayerWidth/this._lastSourceWidth,this._lastPlayerHeight/this._lastSourceHeight),r=Math.max(0,t-1),i=Math.max(0,1-t);this.data.view_max_upscale_percentage=Math.max(this.data.view_max_upscale_percentage||0,r),this.data.view_max_downscale_percentage=Math.max(this.data.view_max_downscale_percentage||0,i),(0,a.default)(this.data,"view_total_content_playback_time",e),(0,a.default)(this.data,"view_total_upscaling",r*e),(0,a.default)(this.data,"view_total_downscaling",i*e)}this._lastPlayheadPosition=-1})}),["playing","hb"].forEach(function(t){e.on(t,function(){this._lastPlayheadPosition=this.data.player_playhead_time,this._lastPlayerWidth=this.data.player_width,this._lastPlayerHeight=this.data.player_height,this._lastSourceWidth=this.data.video_source_width,this._lastSourceHeight=this.data.video_source_height})})};var a=function(e){return e&&e.__esModule?e:{default:e}}(r(2))},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.isSeeking=!1,this.on("seeking",function(e,t){(0,o.default)(this.data,t),this._lastSeekingTime=i.default.now(),!1===this.isSeeking&&(this.isSeeking=!0,this.send("seeking"))}),this.on("seeked",function(){this.isSeeking=!1;var e=this._lastSeekingTime||i.default.now(),t=i.default.now()-e;(0,n.default)(this.data,"view_seek_count",1),(0,n.default)(this.data,"view_seek_duration",t);var r=this.data.view_max_seek_time||0;this.data.view_max_seek_time=Math.max(r,t)}),this.on("viewend",function(){this.isSeeking=!1})};var i=a(r(3)),n=a(r(2)),o=a(r(1))},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=a(r(2)),o=r(5),s=a(r(1)),u=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},l=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],d=function(){var e=this;this.on("viewinit",function(){this.isAdBreak=!1,this._currentAdRequestNumber=0,this._currentAdResponseNumber=0,this._adRequests=[],this._adResponses=[],this._adHasPlayed=!1,this._wouldBeNewAdPlay=!0,this._prerollPlayTime=void 0}),l.forEach(function(t){return e.on(t,e._updateAdData)});var t=function(){e.isAdBreak=!1};this.on("adbreakstart",function(){this.isAdBreak=!0}),this.on("play",t),this.on("playing",t),this.on("viewend",t),this.on("adrequest",function(e,t){t=(0,s.default)({ad_request_id:"generatedAdRequestId"+this._currentAdRequestNumber++},t),u(this._adRequests,t),(0,n.default)(this.data,"view_ad_request_count"),this.inPrerollPosition()&&(this.data.view_preroll_requested=!0,this._adHasPlayed||(0,n.default)(this.data,"view_preroll_request_count"))}),this.on("adresponse",function(e,t){t=(0,s.default)({ad_request_id:"generatedAdRequestId"+this._currentAdResponseNumber++},t),u(this._adResponses,t);var r=this.findAdRequest(t.ad_request_id);r&&(0,n.default)(this.data,"view_ad_request_time",Math.max(0,t.viewer_time-r.viewer_time))}),this.on("adplay",function(e,t){this._adHasPlayed=!0,this._wouldBeNewAdPlay&&(this._wouldBeNewAdPlay=!1,(0,n.default)(this.data,"view_ad_played_count")),this.inPrerollPosition()&&!this.data.view_preroll_played&&(this.data.view_preroll_played=!0,this._adRequests.length>0&&(this.data.view_preroll_request_time=Math.max(0,t.viewer_time-this._adRequests[0].viewer_time)),this.data.view_start&&(this.data.view_startup_preroll_request_time=Math.max(0,t.viewer_time-this.data.view_start)),this._prerollPlayTime=t.viewer_time)}),this.on("adplaying",function(e,t){this.inPrerollPosition()&&void 0===this.data.view_preroll_load_time&&void 0!==this._prerollPlayTime&&(this.data.view_preroll_load_time=t.viewer_time-this._prerollPlayTime,this.data.view_startup_preroll_load_time=t.viewer_time-this._prerollPlayTime)}),this.on("adended",function(){this._wouldBeNewAdPlay=!0}),this.on("aderror",function(){this._wouldBeNewAdPlay=!0})};d.prototype.inPrerollPosition=function(){return void 0===this.data.view_content_playback_time||this.data.view_content_playback_time<=1e3},d.prototype.findAdRequest=function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]},d.prototype._updateAdData=function(e,t){if(this.inPrerollPosition()){if(!this.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=(0,o.extractHostnameAndDomain)(t.ad_tag_url),a=i(r,2),n=a[0],s=a[1];this.data.view_preroll_ad_tag_domain=s,this.data.view_preroll_ad_tag_hostname=n}if(!this.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var u=(0,o.extractHostnameAndDomain)(t.ad_asset_url),l=i(u,2),d=l[0],c=l[1];this.data.view_preroll_ad_asset_domain=c,this.data.view_preroll_ad_asset_hostname=d}}},t.default=d},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this,t=void 0,r=void 0,a=function(){t&&((0,n.default)(e.data,"view_waiting_rebuffer_duration",i.default.now()-t),t=!1,window.clearInterval(r))},o=!1,s=function(){o=!1,a()};this.on("waiting",function(){o&&((0,n.default)(e.data,"view_waiting_rebuffer_count",1),t=i.default.now(),r=window.setInterval(function(){if(t){var r=i.default.now();(0,n.default)(e.data,"view_waiting_rebuffer_duration",r-t),t=r}},250))}),this.on("playing",function(){a(),o=!0}),this.on("pause",s),this.on("seeking",s)};var i=a(r(3)),n=a(r(2))},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.one("playbackheartbeat",o),this.on("playbackheartbeatend",function(){e.off("before*",s),e.one("playbackheartbeat",o)})};var i=a(r(1)),n=a(r(3)),o=function(){this.lastWallClockTime=n.default.now(),this.on("before*",s)},s=function(e){var t=n.default.now(),r=this.lastWallClockTime;this.lastWallClockTime=t,t-r>3e4&&(this.emit("devicesleep",{viewer_time:r}),(0,i.default)(this.data,{viewer_time:r}),this.send("devicesleep"),this.emit("devicewake",{viewer_time:t}),(0,i.default)(this.data,{viewer_time:t}),this.send("devicewake"))}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=a(r(0)),o=r(41),s=a(r(4)),u=a(r(45)),l=a(r(11)),d=a(r(17)),c=a(r(46)),f=a(r(48)),p=a(r(1)),h=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],_=["viewstart","error","ended","viewend"],v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mux=e,this.envKey=t,this.eventQueue=new c.default((0,u.default)(t,r.beaconDomain)),this.previousBeaconData=null,this.lastEventTime=null,this.sampleRate=r.sampleRate,this.disableCookies=r.disableCookies,this.respectDoNotTrack=r.respectDoNotTrack;var a=(0,p.default)(f.default,r.platform||{});this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed_version:this.mux.VERSION,viewer_application_name:a.name,viewer_application_version:a.version,viewer_application_engine:a.layout,viewer_device_name:a.product,viewer_device_category:"",viewer_device_manufacturer:a.manufacturer,viewer_os_family:a.os&&a.os.family,viewer_os_architecture:a.os&&a.os.architecture,viewer_os_version:a.os&&a.os.version},void 0!==n.default&&n.default.location&&n.default.location.href&&(this.pageLevelData.page_url=n.default.location.href),this.viewerData=this.disableCookies?{}:(0,o.getAndUpdateViewerData)()};v.prototype.send=function(e,t){if(e){if(this.respectDoNotTrack&&(0,l.default)())return s.default.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==(void 0===t?"undefined":i(t)))return s.default.error("A data object was expected in send() but was not provided");var r=this.disableCookies?{}:(0,o.getAndUpdateSessionData)(),a={};(0,p.default)(a,this.pageLevelData),(0,p.default)(a,t),(0,p.default)(a,r),(0,p.default)(a,this.viewerData),a.event=e,a.env_key=this.envKey,a.user_id&&(a.viewer_user_id=a.user_id,delete a.user_id);var n=a.mux_sample_number>=this.sampleRate,u=this._deduplicateBeaconData(e,a),c=(0,d.default)(u);if(this.lastEventTime=this.mux.utils.now(),n)return s.default.info("Not sending event due to sample rate restriction",e,a,c);if(!this.envKey)return s.default.info("Not sending event due to missing environment key",e,a,c);if(!this.rateLimited)if(s.default.info("Sending event",e,a,c),this.rateLimited=!this.eventQueue.queueEvent(e,c),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(_.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return a.event="eventrateexceeded",c=(0,d.default)(a),this.eventQueue.queueEvent(a.event,c),s.default.error("Beaconing disabled due to rate limit.")}},v.prototype.destroy=function(){this.eventQueue.destroy(!1)};var m=function(e,t,r,a){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===(void 0===r?"undefined":i(r))&&"object"===(void 0===a?"undefined":i(a))&&Object.keys(r||{}).length===Object.keys(a||{}).length)};v.prototype._deduplicateBeaconData=function(e,t){var r=this,a={},i=t.view_id;if(!i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)a=(0,p.default)({},t),i&&(this.previousBeaconData=a),i&&"viewend"===e&&(this.previousBeaconData=null);else{var n=0===e.indexOf("request");Object.keys(t).forEach(function(i){var o=t[i];(o!==r.previousBeaconData[i]||h.indexOf(i)>-1||m(n,i,o,r.previousBeaconData[i])||function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")}(e,i))&&(a[i]=o,r.previousBeaconData[i]=o)})}return a},t.default=v},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAndUpdateSessionData=t.getAndUpdateViewerData=void 0;var i=a(r(15)),n=a(r(44)),o=r(7),s=a(r(3)),u=function(){var e=void 0;try{e=i.default.parse(n.default.get("muxData")||"")}catch(t){e={}}return e},l=function(e){n.default.set("muxData",i.default.stringify(e),{expires:7300})};t.getAndUpdateViewerData=function(){var e=u();return e.mux_viewer_id=e.mux_viewer_id||(0,o.generateUUID)(),e.msn=e.msn||Math.random(),l(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},t.getAndUpdateSessionData=function(){var e=u(),t=s.default.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=(0,o.generateUUID)(),e.sst=t),e.sex=t+15e5,l(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}},function(e,t,r){"use strict";var a=r(9),i=r(16),n=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,u=Array.prototype.push,l=function(e,t){u.apply(e,s(t)?t:[t])},d=Date.prototype.toISOString,c=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,format:c,formatter:i.formatters[c],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,r,i,n,o,u,d,c,p,h,_,v,m){var y=t;if("function"==typeof d?y=d(r,y):y instanceof Date?y=h(y):"comma"===i&&s(y)&&(y=a.maybeMap(y,function(e){return e instanceof Date?h(e):e}).join(",")),null===y){if(n)return u&&!v?u(r,f.encoder,m,"key"):r;y=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(y)||a.isBuffer(y))return u?[_(v?r:u(r,f.encoder,m,"key"))+"="+_(u(y,f.encoder,m,"value"))]:[_(r)+"="+_(String(y))];var b,g=[];if(void 0===y)return g;if(s(d))b=d;else{var w=Object.keys(y);b=c?w.sort(c):w}for(var x=0;x<b.length;++x){var S=b[x],E=y[S];if(!o||null!==E){var T=s(y)?"function"==typeof i?i(r,S):r:r+(p?"."+S:"["+S+"]");l(g,e(E,T,i,n,o,u,d,c,p,h,_,v,m))}}return g},h=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!n.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var a=i.formatters[r],o=f.filter;return("function"==typeof e.filter||s(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:o,formatter:a,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}};e.exports=function(e,t){var r,a=e,i=h(t);"function"==typeof i.filter?a=(0,i.filter)("",a):s(i.filter)&&(r=i.filter);var n,u=[];if("object"!=typeof a||null===a)return"";n=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var d=o[n];r||(r=Object.keys(a)),i.sort&&r.sort(i.sort);for(var c=0;c<r.length;++c){var f=r[c];i.skipNulls&&null===a[f]||l(u,p(a[f],f,d,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var _=u.join(i.delimiter),v=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),_.length>0?v+_:""}},function(e,t,r){"use strict";var a=r(9),i=Object.prototype.hasOwnProperty,n=Array.isArray,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:a.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},u=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t){var r,l={},d=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,f=d.split(t.delimiter,c),p=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<f.length;++r)0===f[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[r]?h="utf-8":"utf8=%26%2310003%3B"===f[r]&&(h="iso-8859-1"),p=r,r=f.length);for(r=0;r<f.length;++r)if(r!==p){var _,v,m=f[r],y=m.indexOf("]="),b=-1===y?m.indexOf("="):y+1;-1===b?(_=t.decoder(m,o.decoder,h,"key"),v=t.strictNullHandling?null:""):(_=t.decoder(m.slice(0,b),o.decoder,h,"key"),v=a.maybeMap(u(m.slice(b+1),t),function(e){return t.decoder(e,o.decoder,h,"value")})),v&&t.interpretNumericEntities&&"iso-8859-1"===h&&(v=s(v)),m.indexOf("[]=")>-1&&(v=n(v)?[v]:v),i.call(l,_)?l[_]=a.combine(l[_],v):l[_]=v}return l},d=function(e,t,r,a){for(var i=a?t:u(t,r),n=e.length-1;n>=0;--n){var o,s=e[n];if("[]"===s&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,d=parseInt(l,10);r.parseArrays||""!==l?!isNaN(d)&&s!==l&&String(d)===l&&d>=0&&r.parseArrays&&d<=r.arrayLimit?(o=[])[d]=i:o[l]=i:o={0:i}}i=o}return i},c=function(e,t,r,a){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(n),u=s?n.slice(0,s.index):n,l=[];if(u){if(!r.plainObjects&&i.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var c=0;r.depth>0&&null!==(s=o.exec(n))&&c<r.depth;){if(c+=1,!r.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+n.slice(s.index)+"]"),d(l,t,r,a)}},f=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||a.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}};e.exports=function(e,t){var r=f(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var i="string"==typeof e?l(e,r):e,n=r.plainObjects?Object.create(null):{},o=Object.keys(i),s=0;s<o.length;++s){var u=o[s],d=c(u,i[u],r,"string"==typeof e);n=a.merge(n,d,r)}return a.compact(n)}},function(e,t,r){"use strict";var a,i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){var s=!1;if(void 0!==(i="function"==typeof(a=o)?a.call(t,r,t,e):a)&&(e.exports=i),s=!0,"object"===n(t)&&(e.exports=o(),s=!0),!s){var u=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=u,l}}}(function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var a in r)t[a]=r[a]}return t};return function t(r){function a(t,i,n){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(n=e({path:"/"},a.defaults,n)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*n.expires),n.expires=s}try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(t){}return i=r.write?r.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}t||(o={});for(var u=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var c=u[d].split("="),f=c.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var p=c[0].replace(l,decodeURIComponent);if(f=r.read?r.read(f,p):r(f,p)||f.replace(l,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(t){}if(t===p){o=f;break}t||(o[p]=f)}catch(t){}}return o}}return a.set=a,a.get=function(e){return a.call(a,e)},a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(t,r){a(t,"",e(r,{expires:-1}))},a.withConverter=t,a}(function(){})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t=t||"litix.io",(e=e||"").match(/^[a-z0-9]+$/)?"https://"+e+"."+t:"https://img.litix.io/a.gif"}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(0)),n=a(r(4)),o=a(r(47)),s=a(r(1)),u=a(r(17)),l=!!i.default.XMLHttpRequest&&"withCredentials"in new i.default.XMLHttpRequest,d={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:5e3},c=function(e,t){this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=(0,s.default)({},d,t)};c.prototype.queueEvent=function(e,t){var r=(0,s.default)({},t);return l?(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):(o.default.send(this._beaconUrl,r),!0)},c.prototype.flushEvents=function(){l&&(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},c.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),i.default.clearTimeout(this._sendTimeout)},c.prototype._clearBeaconQueue=function(){var e=i.default.navigator,t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,r=this._eventQueue.slice(t);if(t>0&&(0,s.default)(r[r.length-1],(0,u.default)({mux_view_message:"event queue truncated"})),e.sendBeacon)e.sendBeacon(this._beaconUrl,JSON.stringify({events:r}));else if(i.default.XMLHttpRequest){var a=new i.default.XMLHttpRequest;a.open("POST",this._beaconUrl),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify({events:r}))}else o.default.send(this._beaconUrl,r[r.length-1])},c.prototype._sendBeaconQueue=function(){var e=this;if(i.default.XMLHttpRequest&&!this._postInFlight){var t=new i.default.XMLHttpRequest,r=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0,t.onreadystatechange=function(){4===t.readyState&&(200!==t.status?(e._eventQueue=r.concat(e._eventQueue),e._failureCount+=1,n.default.info("Error sending beacon: "+t.status),n.default.info(t.responseText)):e._failureCount=0,e._postInFlight=!1)},t.open("POST",this._beaconUrl),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({events:r}))}},c.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},c.prototype._startBeaconSending=function(){var e=this;i.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=i.default.setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},t.default=c},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(15)),n=a(r(0)),o={send:function(e,t){function r(){a.src=s+(o?"&rc="+o:"")}var a=new Image,o=0,s=e+"?"+i.default.stringify(t);return a.addEventListener("error",function(){o>3||n.default.setTimeout(function(){o++,r()},5e3*o)}),r(),a}};t.default=o},function(e,t,r){(function(e,a){var i;(function(){"use strict";function n(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function o(e){return e=c(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:n(e)}function s(e,t){for(var r in e)g.call(e,r)&&t(e[r],r,e)}function u(e){return null==e?n(e):w.call(e).slice(8,-1)}function l(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function d(e,t){var r=null;return function(e,t){var r=-1,a=e?e.length:0;if("number"==typeof a&&a>-1&&a<=m)for(;++r<a;)t(e[r],r,e);else s(e,t)}(e,function(a,i){r=t(r,a,i,e)}),r}function c(e){return String(e).replace(/^ +| +$/g,"")}var f={function:!0,object:!0},p=f[typeof window]&&window||this,h=f[typeof t]&&t,_=f[typeof e]&&e&&!e.nodeType&&e,v=h&&_&&"object"==typeof a&&a;!v||v.global!==v&&v.window!==v&&v.self!==v||(p=v);var m=Math.pow(2,53)-1,y=/\bOpera/,b=Object.prototype,g=b.hasOwnProperty,w=b.toString,x=function e(t){function r(e){return d(e,function(e,r){var a=r.pattern||l(r);return!e&&(e=RegExp("\\b"+a+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+a+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+a+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(r.label&&!RegExp(a,"i").test(r.label)?r.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),r=r.label||r,e=o(e[0].replace(RegExp(a,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function a(e){return d(e,function(e,r){return e||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}var i=p,n=t&&"object"==typeof t&&"String"!=u(t);n&&(i=t,t=null);var f=i.navigator||{},h=f.userAgent||"";t||(t=h);var _,v,m=n?!!f.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(w.toString()),b=n?"Object":"ScriptBridgingProxyObject",g=n?"Object":"Environment",x=n&&i.java?"JavaPackage":u(i.java),S=n?"Object":"RuntimeObject",E=/\bJava/.test(x)&&i.java,T=E&&u(i.environment)==g,k=E?"a":"Î±",O=E?"b":"Î²",P=i.document||{},M=i.operamini||i.opera,D=y.test(D=n&&M?M["[[Class]]"]:u(M))?D:M=null,q=t,A=[],R=null,j=t==h,I=j&&M&&"function"==typeof M.version&&M.version(),L=d([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,r){return e||RegExp("\\b"+(r.pattern||l(r))+"\\b","i").exec(t)&&(r.label||r)}),C=d(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,r){return e||RegExp("\\b"+(r.pattern||l(r))+"\\b","i").exec(t)&&(r.label||r)}),N=r([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),H=d({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},function(e,r,a){return e||(r[N]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(N)]||RegExp("\\b"+l(a)+"(?:\\b|\\w*\\d)","i").exec(t))&&a}),B=d(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,r){var a=r.pattern||l(r);return!e&&(e=RegExp("\\b"+a+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,r){var a={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(a=a[/[\d.]+$/.exec(e)])&&(e="Windows "+a),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),o(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,a,r.label||r)),e});if(L&&(L=[L]),/\bAndroid\b/.test(B)&&!N&&(_=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(N=c(_[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),H&&!N?N=r([H]):H&&N&&(N=N.replace(RegExp("^("+l(H)+")[-_.\\s]","i"),H+" ").replace(RegExp("^("+l(H)+")[-_.]?(\\w)","i"),H+" $2")),(_=/\bGoogle TV\b/.exec(N))&&(N=_[0]),/\bSimulator\b/i.test(t)&&(N=(N?N+" ":"")+"Simulator"),"Opera Mini"==C&&/\bOPiOS\b/.test(t)&&A.push("running in Turbo/Uncompressed mode"),"IE"==C&&/\blike iPhone OS\b/.test(t)?(H=(_=e(t.replace(/like iPhone OS/,""))).manufacturer,N=_.product):/^iP/.test(N)?(C||(C="Safari"),B="iOS"+((_=/ OS ([\d_]+)/i.exec(t))?" "+_[1].replace(/_/g,"."):"")):"Konqueror"==C&&/^Linux\b/i.test(B)?B="Kubuntu":H&&"Google"!=H&&(/Chrome/.test(C)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(N))||/\bAndroid\b/.test(B)&&/^Chrome/.test(C)&&/\bVersion\//i.test(t)?(C="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==C?(/\bMobi/i.test(t)||(B="Android",A.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&A.unshift("accelerated")):"UC Browser"==C&&/\bUCWEB\b/.test(t)?A.push("speed mode"):"PaleMoon"==C&&(_=/\bFirefox\/([\d.]+)\b/.exec(t))?A.push("identifying as Firefox "+_[1]):"Firefox"==C&&(_=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(B||(B="Firefox OS"),N||(N=_[1])):!C||(_=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(C))?(C&&!N&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(_+"/")+8))&&(C=null),(_=N||H||B)&&(N||H||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(C=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:_)+" Browser")):"Electron"==C&&(_=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&A.push("Chromium "+_),I||(I=a(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",l(C),"(?:Firefox|Minefield|NetFront)"])),(_=("iCab"==L&&parseFloat(I)>3?"WebKit":/\bOpera\b/.test(C)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(L)&&"WebKit"||!L&&/\bMSIE\b/i.test(t)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==L&&/\bPlayStation\b(?! Vita\b)/i.test(C)&&"NetFront")&&(L=[_]),"IE"==C&&(_=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(C+=" Mobile",B="Windows Phone "+(/\+$/.test(_)?_:_+".x"),A.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(C="IE Mobile",B="Windows Phone 8.x",A.unshift("desktop mode"),I||(I=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=C&&"Trident"==L&&(_=/\brv:([\d.]+)/.exec(t))&&(C&&A.push("identifying as "+C+(I?" "+I:"")),C="IE",I=_[1]),j){if(function(e,t){var r=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!e[t])}(i,"global"))if(E&&(q=(_=E.lang.System).getProperty("os.arch"),B=B||_.getProperty("os.name")+" "+_.getProperty("os.version")),T){try{I=i.require("ringo/engine").version.join("."),C="RingoJS"}catch(t){(_=i.system)&&_.global.system==i.system&&(C="Narwhal",B||(B=_[0].os||null))}C||(C="Rhino")}else"object"==typeof i.process&&!i.process.browser&&(_=i.process)&&("object"==typeof _.versions&&("string"==typeof _.versions.electron?(A.push("Node "+_.versions.node),C="Electron",I=_.versions.electron):"string"==typeof _.versions.nw&&(A.push("Chromium "+I,"Node "+_.versions.node),C="NW.js",I=_.versions.nw)),C||(C="Node.js",q=_.arch,B=_.platform,I=(I=/[\d.]+/.exec(_.version))?I[0]:null));else u(_=i.runtime)==b?(C="Adobe AIR",B=_.flash.system.Capabilities.os):u(_=i.phantom)==S?(C="PhantomJS",I=(_=_.version||null)&&_.major+"."+_.minor+"."+_.patch):"number"==typeof P.documentMode&&(_=/\bTrident\/(\d+)/i.exec(t))?(I=[I,P.documentMode],(_=+_[1]+4)!=I[1]&&(A.push("IE "+I[1]+" mode"),L&&(L[1]=""),I[1]=_),I="IE"==C?String(I[1].toFixed(1)):I[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(C)&&(A.push("masking as "+C+" "+I),C="IE",I="11.0",L=["Trident"],B="Windows");B=B&&o(B)}if(I&&(_=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(I)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(j&&f.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(R=/b/i.test(_)?"beta":"alpha",I=I.replace(RegExp(_+"\\+?$"),"")+("beta"==R?O:k)+(/\d+\+?/.exec(_)||"")),"Fennec"==C||"Firefox"==C&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(B))C="Firefox Mobile";else if("Maxthon"==C&&I)I=I.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(N))"Xbox 360"==N&&(B=null),"Xbox 360"==N&&/\bIEMobile\b/.test(t)&&A.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(C)&&(!C||N||/Browser|Mobi/.test(C))||"Windows CE"!=B&&!/Mobi/i.test(t))if("IE"==C&&j)try{null===i.external&&A.unshift("platform preview")}catch(t){A.unshift("embedded")}else(/\bBlackBerry\b/.test(N)||/\bBB10\b/.test(t))&&(_=(RegExp(N.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||I)?(B=((_=[_,/BB10/.test(t)])[1]?(N=null,H="BlackBerry"):"Device Software")+" "+_[0],I=null):this!=s&&"Wii"!=N&&(j&&M||/Opera/.test(C)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==C&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==C&&(B&&!/^Win/.test(B)&&I>5.5||/\bWindows XP\b/.test(B)&&I>8||8==I&&!/\bTrident\b/.test(t)))&&!y.test(_=e.call(s,t.replace(y,"")+";"))&&_.name&&(_="ing as "+_.name+((_=_.version)?" "+_:""),y.test(C)?(/\bIE\b/.test(_)&&"Mac OS"==B&&(B=null),_="identify"+_):(_="mask"+_,C=D?o(D.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(_)&&(B=null),j||(I=null)),L=["Presto"],A.push(_));else C+=" Mobile";(_=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(_=[parseFloat(_.replace(/\.(\d)$/,".0$1")),_],"Safari"==C&&"+"==_[1].slice(-1)?(C="WebKit Nightly",R="alpha",I=_[1].slice(0,-1)):I!=_[1]&&I!=(_[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(I=null),_[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==_[0]&&537.36==_[2]&&parseFloat(_[1])>=28&&"WebKit"==L&&(L=["Blink"]),j&&(m||_[1])?(L&&(L[1]="like Chrome"),_=_[1]||((_=_[0])<530?1:_<532?2:_<532.05?3:_<533?4:_<534.03?5:_<534.07?6:_<534.1?7:_<534.13?8:_<534.16?9:_<534.24?10:_<534.3?11:_<535.01?12:_<535.02?"13+":_<535.07?15:_<535.11?16:_<535.19?17:_<536.05?18:_<536.1?19:_<537.01?20:_<537.11?"21+":_<537.13?23:_<537.18?24:_<537.24?25:_<537.36?26:"Blink"!=L?"27":"28")):(L&&(L[1]="like Safari"),_=(_=_[0])<400?1:_<500?2:_<526?3:_<533?4:_<534?"4+":_<535?5:_<537?6:_<538?7:_<601?8:_<602?9:_<604?10:_<606?11:_<608?12:"12"),L&&(L[1]+=" "+(_+="number"==typeof _?".x":/[.+]/.test(_)?"":"+")),"Safari"==C&&(!I||parseInt(I)>45)?I=_:"Chrome"==C&&/\bHeadlessChrome/i.test(t)&&A.unshift("headless")),"Opera"==C&&(_=/\bzbov|zvav$/.exec(B))?(C+=" ",A.unshift("desktop mode"),"zvav"==_?(C+="Mini",I=null):C+="Mobile",B=B.replace(RegExp(" *"+_+"$"),"")):"Safari"==C&&/\bChrome\b/.exec(L&&L[1])?(A.unshift("desktop mode"),C="Chrome Mobile",I=null,/\bOS X\b/.test(B)?(H="Apple",B="iOS 4.3+"):B=null):/\bSRWare Iron\b/.test(C)&&!I&&(I=a("Chrome")),I&&0==I.indexOf(_=/[\d.]+$/.exec(B))&&t.indexOf("/"+_+"-")>-1&&(B=c(B.replace(_,""))),B&&-1!=B.indexOf(C)&&!RegExp(C+" OS").test(B)&&(B=B.replace(RegExp(" *"+l(C)+" *"),"")),L&&!/\b(?:Avant|Nook)\b/.test(C)&&(/Browser|Lunascape|Maxthon/.test(C)||"Safari"!=C&&/^iOS/.test(B)&&/\bSafari\b/.test(L[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(C)&&L[1])&&(_=L[L.length-1])&&A.push(_),A.length&&(A=["("+A.join("; ")+")"]),H&&N&&N.indexOf(H)<0&&A.push("on "+H),N&&A.push((/^on /.test(A[A.length-1])?"":"on ")+N),B&&(_=/ ([\d.+]+)$/.exec(B),v=_&&"/"==B.charAt(B.length-_[0].length-1),B={architecture:32,family:_&&!v?B.replace(_[0],""):B,version:_?_[1]:null,toString:function(){var e=this.version;return this.family+(e&&!v?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(_=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(q))&&!/\bi686\b/i.test(q)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+_),"")),C&&(/\bWOW64\b/i.test(t)||j&&/\w(?:86|32)$/.test(f.cpuClass||f.platform)&&!/\bWin64; x64\b/i.test(t))&&A.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==C&&parseFloat(I)>=39&&(B.architecture=64),t||(t=null);var F={};return F.description=t,F.layout=L&&L[0],F.manufacturer=H,F.name=C,F.prerelease=R,F.product=N,F.ua=t,F.version=C&&I,F.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}},F.parse=e,F.toString=function(){return this.description||""},F.version&&A.unshift(I),F.name&&A.unshift(C),B&&C&&(B!=String(B).split(" ")[0]||B!=C.split(" ")[0]&&!N)&&A.push(N?"("+B+")":"on "+B),A.length&&(F.description=A.join(" ")),F}();p.platform=x,void 0!==(i=function(){return x}.call(t,r,t,e))&&(e.exports=i)}).call(this)}).call(t,r(14)(e),r(6))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0,t=0,r=0,a=0,i=0,n=0,o=0;this.on("requestcompleted",function(n,o){var s=o.request_start,u=o.request_response_start,l=o.request_response_end,d=o.request_bytes_loaded;a++;var c=void 0,f=void 0;if(u?(c=u-s,f=l-u):f=l-s,f>0&&d>0){var p=d/f*8e3;i++,t+=d,r+=f,this.data.view_min_request_throughput=Math.min(this.data.view_min_request_throughput||1/0,p),this.data.view_average_request_throughput=t/r*8e3,this.data.view_request_count=a,c>0&&(e+=c,this.data.view_max_request_latency=Math.max(this.data.view_max_request_latency||0,c),this.data.view_average_request_latency=e/i)}}),this.on("requestfailed",function(e,t){a++,n++,this.data.view_request_count=a,this.data.view_request_failed_count=n}),this.on("requestcanceled",function(e,t){a++,o++,this.data.view_request_count=a,this.data.view_request_canceled_count=o})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e,t,r){var l=(0,o.findMediaElement)(t),d=i(l,3),c=d[0],f=d[1],p=d[2],h=e.log,_=e.utils.getComputedStyle,v=e.utils.secondsToMs;return c?"video"!==p&&"audio"!==p?h.error("The element of `"+f+"` was not a media element."):((r=(0,n.default)({automaticErrorTracking:!0},r)).data=(0,n.default)({player_software:"HTML5 Video Element",player_software_version:"No Versions",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:"3.2.1"},r.data),r.getPlayheadTime=function(){return v(c.currentTime)},r.getStateData=function(){var e=this.hlsjs&&this.hlsjs.url,t=this.dashjs&&a("function"===this.dashjs.getSource)&&this.dashjs.getSource();return{player_is_paused:c.paused,player_playhead_time:v(c.currentTime),player_width:parseInt(_(c,"width")),player_height:parseInt(_(c,"height")),player_autoplay_on:c.autoplay,player_preload_on:c.preload,video_poster_url:c.poster,video_source_url:e||t||c.currentSrc,video_source_duration:v(c.duration),video_source_height:c.videoHeight,video_source_width:c.videoWidth}},c.mux=c.mux||{},c.mux.emit=function(t,r){e.emit(f,t,r)},c.mux.destroy=function(){Object.keys(c.mux.listeners).forEach(function(e){c.removeEventListener(e,c.mux.listeners[e],!1)}),delete c.mux.listeners,e.emit(f,"destroy")},c.mux.swapElement=function(t){var r=(0,o.findMediaElement)(t),a=i(r,3),s=a[0],u=a[1],l=a[2];return s?"video"!==l&&"audio"!==l?e.log.error("The element of `"+u+"` was not a media element."):(s.muxId=c.muxId,delete c.muxId,s.mux=s.mux||{},s.mux.listeners=(0,n.default)({},c.mux.listeners),delete c.mux.listeners,Object.keys(s.mux.listeners).forEach(function(e){c.removeEventListener(e,s.mux.listeners[e],!1),s.addEventListener(e,s.mux.listeners[e],!1)}),s.mux.swapElement=c.mux.swapElement,s.mux.destroy=c.mux.destroy,delete c.mux,void(c=s)):e.log.error("No element was found with the `"+u+"` query selector.")},c.mux.addHLSJS=function(t){e.addHLSJS(f,t)},c.mux.addDashJS=function(t){e.addDashJS(f,t)},c.mux.removeHLSJS=function(){e.removeHLSJS(f)},c.mux.removeDashJS=function(){e.removeDashJS(f)},e.init(f,r),e.emit(f,"playerready"),c.paused||(e.emit(f,"play"),c.readyState>2&&e.emit(f,"playing")),c.mux.listeners={},void s.forEach(function(t){("error"!==t||r.automaticErrorTracking)&&(c.mux.listeners[t]=function(){var r={};"error"===t&&(r.player_error_code=c.error&&c.error.code,r.player_error_message=c.error&&u[c.error.code]),e.emit(f,t,r)},c.addEventListener(t,c.mux.listeners[t],!1))})):h.error("No element was found with the `"+f+"` query selector.")};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),o=r(10),s=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],u={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(52)),n=a(r(2)),o=a(r(53)),s=a(r(54)),u=a(r(1)),l=a(r(8)),d=r(5),c=a(r(3)),f={};f.safeCall=i.default,f.safeIncrement=n.default,f.getComputedStyle=o.default,f.secondsToMs=s.default,f.assign=u.default,f.headersStringToObject=l.default,f.extractHostnameAndDomain=d.extractHostnameAndDomain,f.extractHostname=d.extractHostname,f.now=c.default.now,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,i){var n=i;if(e&&"function"==typeof e[t])try{n=e[t].apply(e,r)}catch(e){a.default.info("safeCall error",e)}return n};var a=function(e){return e&&e.__esModule?e:{default:e}}(r(4))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a.default.defaultView&&a.default.defaultView.getComputedStyle)return a.default.defaultView.getComputedStyle(e,null).getPropertyValue(t)};var a=function(e){return e&&e.__esModule?e:{default:e}}(r(13))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.floor(1e3*e)}}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"object"==typeof exports?exports.mux=t():e.mux=t()}();