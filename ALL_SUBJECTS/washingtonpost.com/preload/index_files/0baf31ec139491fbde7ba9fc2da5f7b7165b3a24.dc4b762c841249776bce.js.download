(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{Cdwm:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n("HALo"),o=n("cpVT"),i=n("xvhg"),a=n("rg98"),s=n("o0o1"),c=n.n(s),u=n("q1tI"),l=n.n(u),p=(n("7a4r"),n("20a2"));function d(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var b={};d(b,"SSRProvider",(()=>m)),d(b,"useSSRSafeId",(()=>w)),d(b,"useIsSSR",(()=>v));const g={prefix:String(Math.round(1e10*Math.random())),current:0},h=l.a.createContext(g);function m(e){let t=Object(u.useContext)(h),n=Object(u.useMemo)((()=>({prefix:t===g?"":`${t.prefix}-${++t.current}`,current:0})),[t]);return l.a.createElement(h.Provider,{value:n},e.children)}let f=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);function w(e){let t=Object(u.useContext)(h);return t!==g||f||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),Object(u.useMemo)((()=>e||`react-aria${t.prefix}-${++t.current}`),[e])}function v(){let e=Object(u.useContext)(h)!==g,[t,n]=Object(u.useState)(e);return"undefined"!==typeof window&&e&&Object(u.useLayoutEffect)((()=>{n(!1)}),[]),t}var y=n("mUIY"),O=n("VO36"),S=n("9JwM"),j=n("Nduc"),_=n("P105"),k=n("CdpF"),I=n("wN+7"),C=n("yDJ3"),P=n.n(C),x=n("eaM2"),N=function(e){var t=e.pageName,n=void 0===t?"":t,r=e.isFront,o=void 0!==r&&r,i=e.isJsonApp;if(n){var a=function(){return n.includes("/")?n.slice(1,n.length-1).replace(/\//," - "):n};return void 0!==i&&i?"".concat(n.includes("front -")||!o?"":"front - ").concat(a()):a()}return null},U=n("3fCt"),$=function(e,t){return{canonicalUrl:P()(e,"site.path_fusion"),commercial_node:P()(e,"_admin.commercial_node")||P()(e,"_admin.tracking_node"),contentType:t?"homepage":"front",description:P()(e,"site.site_description"),keywords:P()(e,"site.site_keywords"),pageName:N({pageName:P()(e,"site.tracking_page_name")||P()(e,"site.site_url_section"),isFront:!t,isJsonApp:!1}),pageType:t?void 0:"front",section:P()(e,"site.tracking_section"),social_share_image:Object(U.b)(P()(e,"site.social_share_image","https://www.washingtonpost.com/pb/resources/img/twp-social-share.png"),{w:1484}),subsection:P()(e,"site.tracking_subsection"),tagline:P()(e,"site.site_tagline"),title:P()(e,"site.site_title")}},A=n("52Hz");function D(e){var t="/".concat(e?"/"===e[0]?e.slice(1):e:"");switch(e){case"tokyo-summer-games":case"tokyo-summer-olympics":t="/sports/olympics";break;case"infrastructure":t="/topics/infrastructure";break;case"9-11-20-year-anniversary":t="/topics/september-11";break;case"home-you-own":t="/home/home-you-own";break;case"police-america":t="/national/investigations/policing-in-america";break;case"race-america":t="/topics/floyd-protests";break;case"joe-biden-46th-president":t="/topics/biden-transfer";break;case"inspired-life":t="/lifestyle/inspired-life";break;case"coronavirus":t="/topics/coronavirus";break;case"personal-tech":t="/technology/consumer-tech"}return t}var T=n("A9OI"),L=n("UIs6"),E=n("JJBo"),M={getContent:function(){return null},setContent:function(){}};var J=l.a.createElement;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t){return Object(S.d)(Object(k.d)("/render/".concat(t?"ezproxy/":"").concat(e)))}var B=null,F=M;function V(e,t){return G.apply(this,arguments)}function G(){return(G=Object(a.a)(c.a.mark((function e(t,n){var r,o,i,a,s,u,l,p,d,b,g,h,m,f,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(null===t||void 0===t||null===(r=t.query)||void 0===r?void 0:r.slug)||"homepage",s=null===t||void 0===t||null===(o=t.query)||void 0===o?void 0:o.version,u=null===t||void 0===t||null===(i=t.query)||void 0===i?void 0:i.env,l=t.query,p=t.AppTree,e.next=6,F.getContent(a);case 6:if(d=e.sent,!s||"null"===s){e.next=13;break}return e.next=10,Object(k.c)(s,u).catch((function(){return null}));case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=null;case 14:if(!(b=e.t0)){e.next=19;break}e.t1={rendering:b},e.next=22;break;case 19:return e.next=21,Object(k.b)(a);case 21:e.t1=e.sent;case 22:if(g=e.t1,h=g.rendering,m=g.timestamp,!d||s){e.next=28;break}return d.rendering=h||d.rendering,e.abrupt("return",d);case 28:return e.prev=28,f=z(a,n.disableLazyLoading),e.next=32,Object(S.f)(J(p,{pageProps:q(q({},n),{},{tree:h,timestamp:m,contentCache:f,outputType:l.outputType||"default",slug:a})}),f);case 32:return w={contentState:f.extract(),tree:h,slug:a},F.setContent(a,w),e.abrupt("return",w);case 37:return e.prev=37,e.t2=e.catch(28),e.abrupt("return",q({error:e.t2,slug:a},t));case 40:case"end":return e.stop()}}),e,null,[[28,37]])})))).apply(this,arguments)}var W=Object(E.a)();function H(e,t){var n=function(e){var n=Object(p.useRouter)(),o=l.a.useState(I.a.default),a=Object(i.a)(o,2),s=a[0],c=a[1],d=l.a.useState(e.tree),b=Object(i.a)(d,1)[0],g=l.a.useState(e.contentState||{}),h=Object(i.a)(g,1)[0],f="/render/".concat(t?"ezproxy/":"").concat(e.slug),w=s===I.a.compacted,v=l.a.useCallback((function(e){Object.values(I.a).includes(e||"")&&c((function(){return e}))}),[]),C=Object(y.useWindowSize)({wait:300}).width,N=l.a.useMemo((function(){return Object(T.a)(!0)}),[]);Object(u.useEffect)((function(){C>O.sm&&w&&v(I.a.default)}),[C]),Object(u.useEffect)((function(){if(W&&Object(L.a)()&&C<=O.sm&&!w){var e=I.a.compacted;v(e)}n.beforePopState(k.e)}),[]);var U,E=l.a.useMemo((function(){var t=Object(k.d)(f,h,"".concat(A.external,"/api"));return e.contentCache||Object(S.d)(t)}),[h]),M=function(e){var t=A.external?"".concat(A.external,"/api"):"https://www.washingtonpost.com/prism/api",n=D(e),r="homepage"===e,o=Object(x.b)({source:"site-service-section",query:{section:n},url:t,headers:A.headers});return $(P()(o,"q_results[0]"),r)}(e.slug),R={metaValue:(U=M,function(e){return U?U[e]||"undefined":"homepage"}),siteProperties:q(q({},j),{},{disableLazyLoading:t||!1}),apiUrl:_.a,globalContent:e.globalContent||{}},z=n.asPath,B=e.isMobile,F=e.isNoNav;return z="".concat(n.asPath.replace(/\?.+/,""),"?variant=").concat(window.assemblerVariant),B=window.isMobile,F=window.isNoNav,J(k.a.Provider,{value:{EditableProperty:S.b,EditableArt:S.a,isMobile:B,isNoNav:F,isQuickView:s===I.a.compacted,setLayout:v,hasLocalStorage:W,lastPublishedTimestamp:b&&b.lastPublishedActualTimestamp||(new Date).getTime()}},J(m,null,J(S.c,Object(r.a)({key:b&&b.lastPublishedActualTimestamp},e,{tree:b,additionalContext:R,contentCache:E,components:N,requestUri:z}))))};return n.getInitialProps=function(){var e=Object(a.a)(c.a.mark((function e(n){var r,o,i,a,s,u,l,p,d,b,g,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={disableLazyLoading:t},e.prev=1,i=n.query,a=n.res,s=n.req,!B){e.next=6;break}return e.next=6,B.apply(s,a);case 6:return e.abrupt("return",{});case 8:return u=i.outputType||"default",e.next=11,V(n,r);case 11:return l=e.sent,p=n&&n.query&&n.query.slug,d=n&&n.query&&n.query.isMobile||0,b=1===Number(d),g="true"===(null===n||void 0===n||null===(o=n.query)||void 0===o?void 0:o.no_nav),h=q(q({},l),{},{contentState:q({},l.contentState),requestUri:"/".concat(p),outputType:u,isMobile:b,isNoNav:g}),n.pageProps=h,e.abrupt("return",q(q(q({},r),h),{},{outputType:u}));case 21:return e.prev=21,e.t0=e.catch(1),n.res&&(n.res.statusCode=500,n.res.end(JSON.stringify({error:500}))),e.abrupt("return",q(q({},r),{},{error:e.t0.toString?e.t0.toString():e.t0.message}));case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),n}},UIs6:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return g})),n.d(t,"f",(function(){return h}));var r=n("Xhn/"),o="wp_compact_mode_optin",i="wp_compact_notification_dismissal",a="wp_compact_feedback",s=function(e){var t=Object(r.a)(e);return null===t||Number.isNaN(Number(t))?null:Number(t)},c=function(e){try{var t=localStorage.getItem(e);return null===t||Number.isNaN(Number(t))?null:Number(t)}catch(n){return 0}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{localStorage.setItem(e,t?1:0)}catch(n){}},l=function(){return function(){var e=s(o),t=c(o),n=t;return"number"!==typeof t&&"number"===typeof e?(u(o,e),n=e):("number"===typeof t&&"number"!==typeof e||"number"===typeof t&&t!==e)&&Object(r.d)(o,t,30),n}()},p=function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u(o,e),Object(r.d)(o,e,30)}(e)},d=function(){var e=localStorage.getItem(i);return!("true"===e||!0===e||"1"===e||1===e)},b=function(e){u(i,e)},g=function(){return!function(e){var t=s(e),n=c(e),o=n;return"number"!==typeof n&&"number"===typeof t&&(u(e,t),o=t),Object(r.b)(e),o}(a)},h=function(e){u(a,e)}},VO36:function(e,t,n){var r,o=Object.create,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&d(e,n,t[n]);if(c)for(var n of c(t))p.call(t,n)&&d(e,n,t[n]);return e},g=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))!l.call(e,o)&&o!==n&&i(e,o,{get:()=>t[o],enumerable:!(r=a(t,o))||r.enumerable});return e},h={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(h,{NotSmallScreen:()=>ee,addToList:()=>q,domain:()=>ne,getAddToListBtnDetails:()=>J,getClasses:()=>m.getClasses,getCookie:()=>C,getEnv:()=>B,getGiftShareCountAndURL:()=>H,getIdentityUrl:()=>A,getNewGiftShareURL:()=>Q,handleEmailClick:()=>S,handleFacebookClick:()=>w,handleLinkedInClick:()=>O,handlePinterestClick:()=>y,handleTwitterClick:()=>v,headerLoginUrl:()=>ie,isAuthenticated:()=>N,isMobileDevice:()=>te,isSubscriber:()=>$,lg:()=>Z,loginUrl:()=>oe,logoutUrl:()=>ae,md:()=>K,profileUrl:()=>se,removeFromMyList:()=>z,setCookie:()=>P,sm:()=>Y,subscribeUrl:()=>re,synchSavedStoriesBtn:()=>R,urlSearchParams:()=>X}),e.exports=(r=h,g(i({},"__esModule",{value:!0}),r));var m=n("sdEF"),f=({evtOverride:e,category:t,action:n,label:r,additionalParams:o})=>{if(typeof window>"u"||!window.dataLayer)return;let i=b({event:null==e?`site-${n}`:e,category:t,action:n,label:r},o);o&&o.event&&(i.event=o.event),window.dataLayer.push(i)};var w=({event:e,url:t})=>{e.preventDefault(),window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"share_facebook","width=658, height=354, scrollbars=no"),f({category:"social",action:"social-share",label:"social-share-facebook"})},v=({event:e,headline:t,shortUrl:n})=>{e.preventDefault(),window.open(`https://twitter.com/share?url=${encodeURIComponent(n)}%3Ftid=ss_tw&text=${encodeURIComponent(t)}`,"share_twitter","width=550, height=350, scrollbars=no"),f({category:"social",action:"social-share",label:"social-share-twitter"})},y=({event:e,headline:t,url:n})=>{e.preventDefault(),window.open(`https://pinterest.com/pin/create/button/?url=${encodeURIComponent(n)}&description=${encodeURIComponent(t)}`,"share_pintrest","width=550, height=350, scrollbars=no"),f({category:"social",action:"social-share",label:"social-share-pinterest"})},O=({event:e,headline:t,url:n})=>{e.preventDefault(),window.open(`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(n)}&title=${encodeURIComponent(t)}`,"share_linkedin","width=550, height=550, scrollbars=no"),f({category:"social",action:"social-share",label:"social-share-linkedin"})},S=({event:e,headline:t,url:n})=>{e.preventDefault(),window.location=`mailto:?subject=${encodeURIComponent(`[The Washington Post] ${t}`)}&body=${encodeURIComponent(n)}`,f({category:"social",action:"social-share",label:"social-share-email"})},j=e=>new Promise((t=>e.json().then((n=>t({status:e.status,ok:e.ok,json:n}))))),_=e=>{if(!e.ok)throw e.json||e;return e.json},k={Accept:"application/json","Content-Type":"application/json"},I=(e,t={method:"GET"})=>{let n=t;return n.headers=b(b({},t.headers),k),fetch(e,n).then(j).then(_)},C=(((e,t,n)=>{n=null!=e?o(u(e)):{},g(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)})(n("yDJ3")),e=>{if(typeof window>"u")return;let t=document.cookie.match(`(^|;) ?${e}=([^;]*)(;|$)`);return t?t[2]:null}),P=(e,t,n=!1)=>{document.cookie=`${e}=${t};`+(n&&`domain=.${window.origin.split(".").slice(-2).join(".")}; path=/;`)},x=C;function N(){let e=x("wapo_login_id"),t=x("wapo_secure_login_id");return e&&t}var U=()=>({wapoSecureID:x("wapo_secure_login_id"),wapoLoginID:x("wapo_login_id"),userAgent:typeof window<"u"?window.navigator.userAgent:void 0});function $(){if(N()){let e=x("wapo_actmgmt");return e&&-1!==e.indexOf("isub:1")}return!1}var A={dev:"https://id.digitalink.com/identity",sandbox:"https://idstg.washingtonpost.com/identity",prod:"https://login.washingtonpost.com/identity"},D="wapo_saved_stories",T=null,L=async(e,t)=>{if(!T){let n=U(),r={Accept:"application/json","Content-Type":"application/json",loginId:n.wapoLoginID,Authorization:`Bearer ${n.wapoSecureID}`,"Cache-Control":"no-cache",currentUrl:`${t}`,"Client-App":"fusion"};T=I(`${e}/pref/saved_stories/preference`,{headers:r})}return await T};function E(){try{let e=(new Date).toString();window.sessionStorage.setItem(e,e);let t=window.sessionStorage.getItem(e)===e;return window.sessionStorage.removeItem(e),t}catch{return!1}}var M=(e,t)=>{if(E())try{let n=sessionStorage.getItem(D),r=JSON.parse(n);r[e]&&(r[e].state=t,sessionStorage.setItem(D,JSON.stringify(r)))}catch{}},J=async(e,t)=>{let n=E();try{let r=!1,o=null,i=n?sessionStorage.getItem(D):null;if(i){let e=JSON.parse(localStorage.getItem("wapo_identity")||"{}");if(o=JSON.parse(i),o[t]&&e.wapo_login_id===o[t].loginId)return o[t];if(o[t]&&(sessionStorage.removeItem(D),r=!0),!o[t]){let t=Object.values(o);e.wapo_login_id!==t[0].loginId&&(sessionStorage.removeItem(D),r=!0)}}let a=await L(e,t);return n&&a.loginId&&a.state&&["saved","notsaved"].includes(a.state)&&(r||!o?sessionStorage.setItem(D,JSON.stringify({[t]:a})):sessionStorage.setItem(D,JSON.stringify(b({[t]:a},o)))),a}catch{return sessionStorage.removeItem(D),L()}},R=(e,t,n)=>{let r=U(),o={Accept:"application/json","Content-Type":"application/json",loginId:r.wapoLoginID,Authorization:`Bearer ${r.wapoSecureID}`,limit:1,"Client-App":"fusion"},i=[{canonicalURL:`${t}`,isDeleted:n,lastUpdated:(new Date).toISOString(),limit:1}];return I(`${e}/pref/saved_stories/sync`,{method:"POST",headers:o,body:JSON.stringify({transactions:i})})},q=(e,t)=>(function(e,t,n,r){if(typeof window>"u"||!window.dataLayer)return;let o=b({event:`site-${e}`,category:t,action:e,label:n},r);r&&r.event&&(o.event=r.event),window.dataLayer.push(o)}("add-to-list","onpage","article-add-to-list"),R(e,t,!1).then((e=>!!e.isActive&&(M(t,"saved"),"saved"))).catch((e=>(console.error("there is an error in button api response",e),e)))),z=(e,t)=>R(e,t,!0).then((e=>!!e.isActive&&(M(t,"notsaved"),"notsaved"))).catch((e=>(console.error("there is an error in button api response",e),e))),B=()=>{let e=typeof window>"u"?"":window.location&&window.location.href||"",t="prod";return/(sandbox\.|.preview.now.washingtonpost.com|localhost.washingtonpost.com)/.test(e)?t="sandbox":/dev\.washpost|localhost|digitalink\.com/.test(e)&&(t="dev"),t},F={dev:"https://subscribe.digitalink.com",sandbox:"https://subs-stage.washingtonpost.com",prod:"https://subscribe.washingtonpost.com"}[B()],V=`${F}/subscriptionapi/v2/subscriptions/current/gift-articles`,G=`${F}/subscriptionapi/v2/subscriptions/current/gift-articles/remaining-count`,W=(e,{canonicalUrl:t,isDebug:n}={})=>Promise.race([I(e?V:G,{body:JSON.stringify({articleUrl:t}),credentials:"include",method:"POST"}),new Promise(((t,n)=>setTimeout((()=>n(new Error("timeout"))),e?5e3:3e3)))]).then((({hasSharedArticle:t=!1,status:r,state:o,remainingCount:i=null,url:a=""})=>{let s={hasSharedArticle:!1,error:!1,errorState:null,remainingCount:null,url:null};return"SUCCESS"!==r&&(n&&console.log(`Gift Share API Status ${r} ${o}`),s.errorState=o,s.error=!0),0!==a.length?s.url=a:0===a.length&&e&&(s.errorState=0,s.error=!0),Number.isInteger(i)&&(s.remainingCount=i),t&&(s.hasSharedArticle=!0),s})).catch((e=>(n&&(console.log("Gift Share API Error"),console.log(e)),{error:!0,errorState:10,remainingCount:null,url:null}))),H=(e,t)=>W(!1,{canonicalUrl:e,isDebug:t}),Q=(e,t)=>W(!0,{canonicalUrl:e,isDebug:t}),X=e=>{let t=[],n=e;e.includes("?")&&(n=e.slice(1)),n.split("&").forEach((e=>{let[n=!1,r=!1]=e.split("=");t.push({name:n,val:r})}));let r=e=>{try{return t.find((t=>t.name===e))}catch(n){console.error(n)}};return{get:e=>{let t=r(e);return!!t&&t.val},has:e=>{let t=r(e);return!!t&&e===t.name}}},Y=767,K=1023,Z=1440,ee=({children:e})=>typeof window<"u"&&window.innerWidth>767?e:null,te=()=>!!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)),ne={dev:"https://subscribe.digitalink.com",sandbox:"https://subs-stage.washingtonpost.com",prod:"https://subscribe.washingtonpost.com"},re={dev:"https://subscribe.digitalink.com",sandbox:"https://subs-stage.washingtonpost.com",prod:"https://subscribe.washingtonpost.com"},oe={dev:"https://subscribe.digitalink.com/signin",sandbox:"https://subs-stage.washingtonpost.com/signin",prod:"https://www.washingtonpost.com/subscribe/signin"},ie={dev:"https://subscribe.digitalink.com/signin?",sandbox:"https://subs-stage.washingtonpost.com/signin?",prod:"https://www.washingtonpost.com/subscribe/signin?"},ae={dev:"https://subscribe.digitalink.com/signin/?action=signout&",sandbox:"https://subs-stage.washingtonpost.com/signin?action=signout&",prod:"https://www.washingtonpost.com/subscribe/signin/?action=signout&"},se={dev:"https://subscribe.digitalink.com/profile/#",sandbox:"https://subs-stage.washingtonpost.com/profile/#",prod:"https://subscribe.washingtonpost.com/profile/#"}}}]);
//# sourceMappingURL=0baf31ec139491fbde7ba9fc2da5f7b7165b3a24.dc4b762c841249776bce.js.map