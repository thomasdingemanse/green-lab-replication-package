"use strict";(()=>{function a(){const{navCls:a}=y;let b=!1;const{globalNav:c=!0,globalNavInsert:d=!1}=HFSconfig.header||{};c?(d&&(a.add("show-global"),a.add("has-global-insert")),w.add(({position:a,down:c})=>{600<a&&(c&&!b?y.eventDispatch(r("global","stash")):!c&&b&&y.eventDispatch(r("global","reveal")))})):(a.add("hide-global"),a.rem("show-global")),y.eventListenAdd(q.global.stash,()=>{b=!0,a.add("stash-global")}),y.eventListenAdd(q.global.reveal,()=>{b=!1,a.rem("stash-global")})}function b(){const a=y.QS(".shortcuts-list-item--dd");if(!a)return;let b,c,d;const f=m.querySelectorAll(".shortcuts-dropdown-item-link"),g=(a,b)=>`${a.textContent.trim().replace(/\s+/g,"-").toLowerCase()}-${b}`,h=(a,b)=>{const c=b.querySelector("a"),d=g(c,"dropdown");b.setAttribute("aria-controls",d),a.setAttribute("id",d)},i=a=>{const e=a.querySelector("a"),f=document.getElementById(a.getAttribute("aria-controls")),g=a.querySelector(".shortcuts-dropdown-list"),h=g.querySelectorAll("a");"true"===e.getAttribute("aria-expanded")?(h.forEach(a=>a.setAttribute("tabindex","-1")),e.setAttribute("aria-expanded",!1),f.setAttribute("aria-hidden",!0),a.classList.remove("shortcuts-dropdown-open"),clearTimeout(c),clearTimeout(d),f.style.maxHeight="0px",b=!1):(h.forEach(a=>{a.setAttribute("tabindex","0")}),e.setAttribute("aria-expanded",!0),f.setAttribute("aria-hidden",!1),a.classList.add("shortcuts-dropdown-open"),c=setTimeout(()=>{f.style.maxHeight=`${g.offsetHeight}px`},300),d=setTimeout(()=>{y.eventDispatch(r("dropdown","open",{menuName:e.dataset.trackMenuName}))},1e3),b=a)},j=a=>{const c=a.target.closest(".shortcuts-list-item");b&&c!==b&&i(b),i(c)},k=a=>{const b=a.querySelector("a"),c=b.getAttribute("href"),d=a.querySelector(".shortcuts-dropdown-list"),e=d.querySelector(".shortcuts-dropdown-item"),f=e.querySelector("a"),h=e.cloneNode(!0),i=h.querySelector("a");i.setAttribute("href",c),i.innerHTML=b.innerHTML;const j=h.getAttribute("id");if(null===j){const a=g(b,"added-top-item");h.setAttribute("id",a),d.prepend(h),i.focus()}else f.focus()},l=a=>{const b="ArrowLeft"===a.key,c="ArrowRight"===a.key,d="ArrowUp"===a.key,e="ArrowDown"===a.key;if(!(b||c||d||e))return;a.preventDefault();const f=a.target.closest(".shortcuts-list-item"),g=a.target.closest(".shortcuts-dropdown-item"),h=f&&f.previousSibling,i=f&&f.nextSibling,j=g&&g.previousSibling,k=g&&g.nextSibling;b&&h&&(()=>h.querySelector("a").focus())(),c&&i&&(()=>i.querySelector("a").focus())(),d&&j&&(()=>j.querySelector("a").focus())(),e&&k&&(()=>k.querySelector("a").focus())()},n=a=>{const c="Escape"===a.key,d="ArrowLeft"===a.key,e="ArrowRight"===a.key,f="Tab"===a.key,g=a.shiftKey;(c||d||e||f)&&(!f&&a.target.closest(".shortcuts-dropdown-open")&&(j(a),c&&a.target.closest(".shortcuts-list-item").nextSibling&&a.target.closest(".shortcuts-list-item").nextSibling.querySelector("a").focus()),a.target.classList.contains("shortcuts-dropdown-item-link")&&f&&!(g&&f)&&b&&document.activeElement===a.target.closest(".shortcuts-dropdown-list").lastChild.querySelector("a")&&i(b))},o=a=>{const b="Enter"===a.key,c=" "===a.key;(b||c)&&(a.preventDefault(),k(a.target.parentNode),j(a))};document.addEventListener("click",a=>{b&&!a.target.closest(".shortcuts-dropdown-open")&&i(b)}),y.QS(".shortcuts-list").addEventListener("keydown",a=>{(a.target.classList.contains("shortcuts-list-item-link")||a.target.classList.contains("shortcuts-dropdown-item-link"))&&(l(a),n(a)),a.target.classList.contains("shortcuts-list-item-link")&&o(a),a.target.classList.contains("shortcuts-dropdown-item-link")&&("Enter"===a.key&&a.stopPropagation()," "===a.key&&(a.preventDefault(),window.location.href=a.target.getAttribute("href")))}),u(".shortcuts-list-item",a=>{const b=a.querySelector(".shortcuts-dropdown");h(b,a),a.addEventListener("mouseenter",b=>{a.classList.contains("shortcuts-dropdown-open")||j(b),a.querySelector("a").blur(),f.forEach(a=>a.blur()),document.querySelectorAll("[id*=\"-added-top-item\"]").forEach(a=>a.remove())}),a.addEventListener("mouseleave",j)});const p=a=>a.target.closest(".shortcuts-list-item-link"),q=a=>a.target.closest(".shortcuts-dropdown-item-link");y.QS(".shortcuts-list").addEventListener("click",a=>{const b=p(a)&&"Main"||q(a)&&"Sublink",c=p(a)&&a.target.dataset.menuName||q(a)&&a.target.dataset.trackMenuName;(p(a)||q(a))&&y.eventDispatch(r("dropdown","click",{menuType:b,menuName:c}))})}function c(){const{navCls:a}=y,{pageView:b}=HFSconfig,c=!document.cookie.includes("nbcnews_geolocation=us");if(c)return;if(!a.has("show-identity"))return;const d=y.QS(".js-login-wrapper"),e=y.QS(".js-auth-options"),f=y.QS(".js-sign-in"),g=y.QS(".js-sign-out"),h=y.QS(".js-tooltip"),i=y.QS(".hamburger.js-menu-toggle"),j=y.QS(".js-authenticated"),k=y.QS(".js-unauthenticated");let n;const o="login-open",s="login-close",t=()=>{a.has(o)&&(a.add(s),setTimeout(()=>{a.rem(s)},500),a.rem(o))};y.eventListenAdd(q.local.active,()=>{t()}),y.eventListenAdd(q.share.open,()=>{t()});const u=()=>{a.has(o)?t():a.add(o)},v=()=>{clearTimeout(n),a.add(o)},w=()=>{n=setTimeout(()=>{t()},500)},x=()=>{a.add("tooltip-hovered"),h.classList.add("tooltip-show"),h.classList.remove("tooltip-hide");let c="Create your free profile or log in to save articles and videos";["article","video"].includes(b)&&(c=`Create your free profile or log in to save this ${b}`),h.innerHTML=`<span>${c}</span>`},z=()=>{h.classList.remove("tooltip-hide"),h.classList.remove("tooltip-show"),a.rem("tooltip-hovered"),h.innerHTML=""},A=()=>{clearTimeout(n),a.add(o)},B=()=>{n=setTimeout(()=>{t()},500)},C=()=>{g.addEventListener("click",u),g.removeEventListener("mouseenter",v),g.removeEventListener("mouseleave",w),e.removeEventListener("mouseenter",A),e.removeEventListener("mouseleave",B)},D=()=>{g.addEventListener("mouseenter",v),g.addEventListener("mouseleave",w),e.addEventListener("mouseenter",A),e.addEventListener("mouseleave",B),g.removeEventListener("click",u)},{_HFS:{identity:E={}}={}}=l,{appKey:F="nbcnewsweb",options:G={}}=E;G.debug=/dev|stage/.test(G.env);const H=a=>{y.eventDispatch(r("id","error",{error:a}))},I=()=>{const b=b=>{if(b.matches){f.removeEventListener("mouseenter",x),f.removeEventListener("mouseleave",z);const{state:b}=l.Identity;a.has("active")||"unauthenticated"!==b?z():x(),l.addEventListener("click",z),l.addEventListener("scroll",z)}else f.addEventListener("mouseenter",x),f.addEventListener("mouseleave",z),i.removeEventListener("click",z),a.has("active")||z(),l.removeEventListener("click",z),l.removeEventListener("scroll",z)};b(p),p.addEventListener("change",b)},J=a=>{const{Identity:b}=l;y.eventDispatch(r("id","init",{init:a})),d.style.opacity="1",f.addEventListener("click",()=>{b.authenticate(),z(),y.eventDispatch(r("id","click"))});const c=a=>{t(),a.matches?C():D()};c(p),p.addEventListener("change",c)},K=b=>{y.eventDispatch(r("id","state",{state:b})),I(),"authenticated"===b?(j.style.display="flex",k.style.display="none",f.classList.add("h-dn"),g.classList.remove("h-dn")):(j.style.display="none",k.style.display="flex",f.classList.remove("h-dn"),g.classList.add("h-dn"),a.has(o)&&t())},L=a=>{y.eventDispatch(r("id","result",{result:a})),I()};let M="id.nbcnews.com";G.env&&"production"!==G.env&&(M=`stage-${M}`);const N=`https://${M}/sdk/v7.4.5/identity.min.js`,O=m.getElementsByTagName("head")[0],P=m.createElement("script");P.setAttribute("type","text/javascript"),P.setAttribute("src",N),O.addEventListener("load",a=>{try{if("SCRIPT"===a.target.nodeName&&a.target.getAttribute("src")===N){const{Identity:a}=l;K(a.state),L(a.result),a.getHealth(G.env).then(b=>{b&&(a.initialize(F,G).then(J).catch(H),a.on("state",K),a.on("result",L))}).catch(H)}}catch(a){H(a)}},!0),O.appendChild(P)}function d(){const a=y.QS(".menu"),b=y.QS(".hamburger.js-menu-toggle"),c=a.querySelectorAll("input, button, [href]"),d=c[1],f=c[c.length-1];c.forEach(a=>a.setAttribute("tabindex","-1"));const g=a=>{const b="Tab"===a.key;b&&(a.shiftKey?document.activeElement===d&&(f.focus(),a.preventDefault()):document.activeElement===f&&(d.focus(),a.preventDefault()))};y.QS(".js-menu-toggle").addEventListener("click",C),y.eventListenAdd(q.menu.open,()=>{y.eventListenAdd("transitionend",function a(){d.focus({preventScroll:!0}),y.eventListenRem("transitionend",a)}),y.navCls.add("menu-open"),0>=y.nav.getBoundingClientRect().top&&y.navCls.add("stuck"),a.scrollTop=0,l.dispatchEvent(s),b.setAttribute("aria-expanded","true"),c.forEach(a=>a.setAttribute("tabindex","0")),a.addEventListener("keydown",g)}),y.eventListenAdd(q.menu.close,()=>{y.navCls.has("menu-open")&&b.focus(),y.navCls.rem("stuck"),y.navCls.rem("menu-open"),a.removeAttribute("style"),b.setAttribute("aria-expanded","false"),c.forEach(a=>a.setAttribute("tabindex","-1")),a.removeEventListener("keydown",g)})}function e(){y.eventListenAdd(q.menu.close,x.enable),y.eventListenAdd(q.menu.open,()=>{x.disable(".js-menu-selector")}),y.eventListenAdd(q.search.close,x.enable),y.eventListenAdd(q.search.open,x.disable),y.eventListenAdd(q.share.close,x.enable),y.eventListenAdd(q.share.open,()=>{758>=l.innerWidth&&x.disable(".js-share-selector")})}function f(){const a=y.QS(".global");a&&(y.QS(".js-search-open").addEventListener("click",()=>{y.navCls.add("search-open"),y.eventDispatch(r("search","open",{isOpen:!0}))}),y.QS(".js-search-close").addEventListener("click",()=>{y.navCls.rem("search-open"),y.navCls.has("menu-open")||y.eventDispatch(r("search","close",{isOpen:!1}))}),u(".js-search-form",a=>{a.addEventListener("submit",a=>{a.preventDefault();const b=a.target;"post"===b.method.toLowerCase()&&(b.action+=encodeURI(b.querySelector("input[type=\"search\"]").value)),b.submit()})}),u(".js-search-input",a=>{a.addEventListener("focus",a=>{t(a.target.form).add("active")}),a.addEventListener("blur",a=>{a.target.value.length||t(a.target.form).rem("active")})}))}function g(){const{navCls:a}=y,b=()=>{a.add("share-close"),a.rem("share-open"),setTimeout(()=>{a.rem("share-close")},500)},c=y.QS(".js-share-toggle");c&&(c.addEventListener("click",()=>{a.has("share-open")?y.eventDispatch(r("share","close",{isOpen:!1})):y.eventDispatch(r("share","open",{isOpen:!0}))}),y.eventListenAdd(q.share.open,()=>{a.rem("share-close"),a.add("share-open")}),y.eventListenAdd(q.share.close,b),y.eventListenAdd(q.menu.open,b),y.eventListenAdd(q.search.open,b),y.eventListenAdd(q.local.inactive,()=>{y.navCls.rem("share-open")}))}function h(){const{nav:a,navCls:b}=y,c=({position:c,force:d=!1})=>{const e=b.has("stuck"),{top:f}=y.sel.getBoundingClientRect();if(A){const g=c>f+l.pageYOffset-A;(d||!e)&&g?(b.add("stuck"),a.style.top=`${A}px`):(d||e)&&!g&&(b.rem("stuck"),a.style.top="")}else b.toggle("stuck",c>f+l.pageYOffset),a.style.top=""},d=new MutationObserver(()=>{B(),c({position:l.pageYOffset,force:!0}),l.dispatchEvent(s)});for(({previousSibling:z}=y.sel);null!==z;){if(-1<["DIV"].indexOf(z.nodeName)){const{position:a}=l.getComputedStyle(z);("fixed"===a||"sticky"===a)&&d.observe(z,{attributes:!0,attributeFilter:["class"],characterData:!1})}({previousSibling:z}=z)}B(),w.add(c),c({position:l.pageYOffset,force:!0})}function i(){const a=l.$t||function(){const b=function(...c){return 1<=c.length&&"getSaves"!==c[0]&&b.e.push(c),"getSaves"===c[0]?b.e:""};return b.e=[],b.stub="2.0",b}(),b={hmbClick:"mbt_navbar_hamburgerClick",idClick:"hfs_identity_iconClick",idError:"hfs_identity_error",idInit:"hfs_identity_init",idResult:"hfs_identity_result",idState:"hfs_identity_state",shrClick:"mbt_navbar_shareClick",ddHover:"hfs_navbar_submenu_hover",ddClick:"hfs_navbar_submenu_click"},c=Object.values(b),d=document.querySelectorAll("[data-track-event]");for(let b=0;b<d.length;b+=1){const{trackEvent:e,trackKey:f,trackValue:g}=d[b].dataset;e&&(-1===c.indexOf(e)&&c.push(e),f&&g&&d[b].addEventListener("click",()=>{a("track",e,{[f]:g})}))}a("register",c),y.eventListenAdd(q.dropdown.open,c=>{a("track",b.ddHover,c.detail)}),y.eventListenAdd(q.dropdown.click,c=>{a("track",b.ddClick,c.detail)}),y.eventListenAdd(q.share.open,c=>{a("track",b.shrClick,c.detail)}),y.eventListenAdd(q.share.close,c=>{a("track",b.shrClick,c.detail)}),y.eventListenAdd(q.menu.open,c=>{a("track",b.hmbClick,c.detail)}),y.eventListenAdd(q.menu.close,c=>{a("track",b.hmbClick,c.detail)});const{navCls:e}=y;e.has("show-identity")&&(y.eventListenAdd(q.id.click,c=>{a("track",b.idClick,c.detail)}),y.eventListenAdd(q.id.error,c=>{a("track",b.idError,c.detail)}),y.eventListenAdd(q.id.init,c=>{a("track",b.idInit,c.detail)}),y.eventListenAdd(q.id.result,c=>{a("track",b.idResult,c.detail)}),y.eventListenAdd(q.id.state,c=>{a("track",b.idState,c.detail)}))}function j(){function a(){y.eventDispatch(r("menu","close",{isOpen:!1})),m.querySelector("#queryly_query").focus()}const b=y.QS(".js-hmb-queryly-search");b&&b.addEventListener("click",()=>{setTimeout(a,1e3)})}function k(){const{useSmallNav:u=!1,setDuration:v=null,shortcuts:x=!0,activeAt:k,primary:n,social:p,theme:q,url:s}=HFSconfig.header||{};y.sel=m.getElementById("hfs-header"),y.QS=y.sel.querySelector.bind(y.sel),y.nav=y.QS("nav.hfsh");const z=t(y.nav);y.navCls=z,z.has("init")||z.add("init"),q&&-1!==o.indexOf(q)&&z.add(q),u&&z.add("small"),x&&z.add("show-shortcuts"),w.add(({position:a})=>{z.toggle("scrolled",0<a)}),k&&(w.add(({position:a})=>{!z.has("active")&&a>=k?y.activate():z.has("active")&&a<k&&y.deactivate()}),null!==v&&-1<v&&y.nav.style.setProperty("--hfs-local-duration",`${v}s`)),a(),e(),h(),d(),g(),f(),i(),c(),D(),j(),b(),y.updateHeadline(n),y.updateSocial(s,p),m.addEventListener("keyup",a=>{a.key&&"Escape"===a.key&&(y.eventDispatch(r("search","close",{isOpen:!1})),y.eventDispatch(r("menu","close",{isOpen:!1})),y.eventDispatch(r("share","close",{isOpen:!1})))}),l.HFSapi=y,y.eventDispatch(r("init","done"))}const l=window,m=document,n=(a,b)=>/iPad|iPhone|iPod/.test(a)&&!b,o=["vertical","dark","transparent","transparentLight"],p=l.matchMedia("(max-width: 999px)"),q={init:{done:"HFS.init.done"},global:{reveal:"HFS.global.reveal",stash:"HFS.global.stash"},id:{error:"HFS.identity.error",init:"HFS.identity.init",result:"HFS.identity.result",state:"HFS.identity.state",click:"HFS.identity.click"},local:{active:"HFS.local.active",inactive:"HFS.local.inactive"},menu:{close:"HFS.menu.close",open:"HFS.menu.open"},search:{close:"HFS.search.close",open:"HFS.search.open"},share:{close:"HFS.share.close",open:"HFS.share.open"},dropdown:{open:"HFS.dropdown.open",click:"HFS.dropdown.click"}},r=(a,b,c=null)=>new CustomEvent(q[a][b],{detail:c}),s=new CustomEvent("HFS.recalculateHeight"),t=a=>({add(b){return a.classList&&a.classList.add(b),this},rem(b){return a.classList&&a.classList.remove(b),this},toggle(a,b=null){const c=this.has(a);return"boolean"==typeof b?b&&!c?this.add(a):!b&&c&&this.rem(a):this[c?"rem":"add"](a),this},has(b){return!!a.classList&&a.classList.contains(b)}}),u=(a,b)=>{const c=m.querySelectorAll(a);for(let d=0;d<c.length;d+=1)b.call(void 0,c[d])};class v{constructor(a){this.cb=[],this.on=!1,this.type=a}run(){this.cb.forEach(a=>{a()}),this.on=!1}listen(){this.on||(this.on=!0,l.requestAnimationFrame?l.requestAnimationFrame(()=>{this.run.call(this)}):setTimeout(this.run,66))}add(a){return this.cb.length||l.addEventListener(this.type,()=>{this.listen.call(this)}),!!a&&this.cb.push(a)}}const w=new class a extends v{constructor(){super("scroll")}run(){this.cb.forEach(a=>{a({position:this.lastPosition,down:this.scrollDown})}),this.on=!1}listen(){this.scrollDown=l.pageYOffset>this.lastPosition,this.lastPosition=l.pageYOffset,super.listen()}},x={selector:null,allow:!0,originalEvent:null,toggle:a=>{x[x.allow?"disable":"enable"](a)},isDescendant:(a,b)=>{for(let c=b.parentNode;null!=c;){if(c===a)return!0;c=c.parentNode}return!1},iosHandler:a=>{const b=m.querySelector(x.selector);x.isDescendant(b,a.target)||a.preventDefault(),x.originalEvent&&x.originalEvent.target===a.target||(x.originalEvent=a),a.pageY<x.originalEvent.pageY&&0>=b.scrollHeight-b.scrollTop-b.clientHeight?a.preventDefault():a.pageY>x.originalEvent.pageY&&0>=b.scrollTop&&a.preventDefault()},disable:a=>{const b=n(navigator.userAgent,l.MSStream);x.selector=a||null,x.allow=!1,x.selector&&b?(l.addEventListener("wheel",x.iosHandler,{passive:!1}),l.addEventListener("touchmove",x.iosHandler,{passive:!1})):m.querySelector("body").style.overflow="hidden"},enable:()=>{const a=n(navigator.userAgent,l.MSStream);x.allow=!0,a?(l.removeEventListener("wheel",x.iosHandler,{passive:!1}),l.removeEventListener("touchmove",x.iosHandler,{passive:!1})):m.querySelector("body").style.overflow=null}},y={sel:null,navCls:null,QS:null,eventDispatch(a){this.sel&&this.sel.dispatchEvent(a)},eventListenAdd(a,b){this.sel&&this.sel.addEventListener(a,b)},eventListenRem(a,b){this.sel&&this.sel.removeEventListener(a,b)},updateHeadline(a){let b=null;a&&(b=a);const c=this.QS(".js-headline-text");c&&(c.innerHTML=b),HFSconfig.header.primary=b},updateSocial(a,b){let c=null;a&&/^https?:\/\/[^ "]+$/.test(a)&&(c=a);let d="";b&&"string"==typeof b&&(d=encodeURIComponent(b.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,"\""))),u(".js-hfs-share",a=>{const{key:b,template:e}=a.dataset,f=n(navigator.userAgent,l.MSStream);let g=e.replace(/URL/,decodeURI(c));g=g.replace(/HEADLINE/,d),g=g.replace(/VIA/,l._HFS&&l._HFS.social?l._HFS.social:""),"sms"===b&&f&&(g=g.replace("?body","&body")),a.setAttribute("href",g)}),HFSconfig.header.url=c,HFSconfig.header.social=decodeURIComponent(d)},updateTheme(a){this.navCls&&(o.forEach(a=>{this.navCls.rem(a)}),-1<o.indexOf(a)&&this.navCls.add(a))},activate(){this.eventDispatch(r("local","active")),this.navCls.add("active")},deactivate(){this.eventDispatch(r("local","inactive")),this.navCls.rem("active")},enableGlobalInsert(){this.navCls.add("has-global-insert")},disableGlobalInsert(){this.navCls.rem("has-global-insert")},enableLocalInsert(){this.navCls.add("has-local-insert")},disableLocalInsert(){this.navCls.rem("has-local-insert")}};let z,A=0;const B=()=>{for(({previousSibling:z}=y.sel),A=0;null!==z;){if(-1<["DIV"].indexOf(z.nodeName)){const{position:a,display:b}=l.getComputedStyle(z),{height:c}=z.getBoundingClientRect();("fixed"===a||"sticky"===a)&&"none"!==b&&0<c&&(A+=c)}({previousSibling:z}=z)}},C=()=>{y.navCls.has("menu-open")?y.eventDispatch(r("menu","close",{isOpen:!1})):y.eventDispatch(r("menu","open",{isOpen:!0}))},D=()=>{const a=m.querySelectorAll(".search-button-trigger");a&&a.forEach(a=>{a.addEventListener("keyup",a=>{const b=m.getElementById("queryly_toggle");b&&("Enter"===a.key||" "===a.key)&&(b.checked=!0,b.dispatchEvent(new Event("change")))})})};l.addEventListener(s.type,()=>{const a=y.QS(".menu");if(a){const{navCls:b}=y,c=y.QS(".global"),{height:d=0}=c&&c.getBoundingClientRect()||{};let e=!1;if(A&&b.has("stuck"))e=A,b.has("stash-global")||(e+=d);else if(!b.has("stuck")){const{top:a=0}=y.sel.getBoundingClientRect();e=a+d}b.has("small")&&(e+=60),e?a.setAttribute("style",`height: calc(100vh - ${e}px)`):a.removeAttribute("style")}}),m.addEventListener("DOMContentLoaded",k),l.addEventListener("HFS.ready",a=>{"header"===a.detail&&k()})})();