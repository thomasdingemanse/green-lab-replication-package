require=function n(s,l,o){function u(r,e){if(!l[r]){if(!s[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(d)return d(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var a=l[r]={exports:{}};s[r][0].call(a.exports,function(e){var t=s[r][1][e];return u(t||e)},a,a.exports,n,s,l,o)}return l[r].exports}for(var d="function"==typeof require&&require,e=0;e<o.length;e++)u(o[e]);return u}({364:[function(e,t,r){"use strict";e("./lib/google-ads/videojs-google-ads"),e("./videojs-plugins/closed-captions/videojs-closed-captions-control"),e("./videojs-plugins/youbora/videojs-youbora"),e("./videojs-plugins/hls/videojs-hls-bridge"),e("./videojs-plugins/hls/videojs-recover-hls-error"),e("./videojs-plugins/share-control-js/videojs-share-control"),e("./videojs-plugins/share-control-js/videojs-share-overlay"),e("./videojs-plugins/videojs-activity-override"),e("./videojs-plugins/videojs-comscore-stream-sense"),e("./videojs-plugins/videojs-moat-ad-viewability"),e("./videojs-plugins/videojs-parsely"),e("./videojs-plugins/videojs-persist-listeners"),e("./videojs-plugins/videojs-playback-outro"),e("./videojs-plugins/videojs-poster"),e("./videojs-plugins/videojs-smooth-scrubbing"),e("./videojs-plugins/videojs-stream-watchdog"),e("./videojs-plugins/videojs-title-bar"),e("./videojs-plugins/tracking/google-tag-manager"),e("./videojs-plugins/triton/TritonSidebandMetadataPlugin"),e("./videojs-plugins/triton/TritonCompanionAdPlugin"),e("./videojs-plugins/ResizePlayer"),e("./videojs-plugins/AutoplayBrowsers"),e("./videojs-plugins/VideoMidroll"),e("./videojs-plugins/InitialOverlay"),e("./videojs-plugins/VideoWatchedTimeUpdate"),e("./videojs-plugins/videojs-fence"),e("./videojs-plugins/RegUIPopUp"),e("./videojs-plugins/ChromeCast"),e("./videojs-plugins/AudioBars"),e("./videojs-plugins/DaiPlugin"),e("./videojs-plugins/videojs-moat-dai-ad-viewability.ts"),e("./videojs-plugins/NonInteractiveProgressBar"),e("./videojs-plugins/CustomBufferingComponent"),e("./videojs-plugins/ClosedCaptionsApiPlugin"),e("./videojs-plugins/PlayPauseOverlay"),e("./videojs-plugins/transcript/TranscriptPlugin"),e("./videojs-plugins/viewability/ViewabilityPlugin"),e("./videojs-plugins/viewability/ViewableAdImpressionPlugin"),e("./videojs-plugins/theater-mode/TheaterModePlugin"),e("./videojs-plugins/player-tout/PlayerToutPlugin"),e("./videojs-plugins/fullscreen-control/FullscreenAccessibilityPlugin"),e("./videojs-plugins/content-overlay/ContentOverlayPlugin"),e("./components/live-display/BloombergLiveDisplay"),window._V_=window.videojs,window.BPlayer&&(window.BPlayer.BloombergVideoPlayer=window.BPlayer.BloombergVideoPlayer||e("./lib/bloomberg-video-player"),window.BPlayer.EmbedStrategy=window.BPlayer.EmbedStrategy||e("./strategy/EmbedStrategy"),window.BPlayer.ScriptTagStrategy=window.BPlayer.ScriptTagStrategy||e("./strategy/ScriptTagStrategy"))},{"./components/live-display/BloombergLiveDisplay":371,"./lib/bloomberg-video-player":387,"./lib/google-ads/videojs-google-ads":410,"./strategy/EmbedStrategy":438,"./strategy/ScriptTagStrategy":439,"./videojs-plugins/AudioBars":474,"./videojs-plugins/AutoplayBrowsers":475,"./videojs-plugins/ChromeCast":476,"./videojs-plugins/ClosedCaptionsApiPlugin":477,"./videojs-plugins/CustomBufferingComponent":478,"./videojs-plugins/DaiPlugin":479,"./videojs-plugins/InitialOverlay":480,"./videojs-plugins/NonInteractiveProgressBar":481,"./videojs-plugins/PlayPauseOverlay":482,"./videojs-plugins/RegUIPopUp":483,"./videojs-plugins/ResizePlayer":484,"./videojs-plugins/VideoMidroll":485,"./videojs-plugins/VideoWatchedTimeUpdate":486,"./videojs-plugins/closed-captions/videojs-closed-captions-control":487,"./videojs-plugins/content-overlay/ContentOverlayPlugin":489,"./videojs-plugins/fullscreen-control/FullscreenAccessibilityPlugin":490,"./videojs-plugins/hls/videojs-hls-bridge":493,"./videojs-plugins/hls/videojs-recover-hls-error":496,"./videojs-plugins/player-tout/PlayerToutPlugin":497,"./videojs-plugins/share-control-js/videojs-share-control":499,"./videojs-plugins/share-control-js/videojs-share-overlay":500,"./videojs-plugins/theater-mode/TheaterModePlugin":501,"./videojs-plugins/tracking/google-tag-manager":502,"./videojs-plugins/transcript/TranscriptPlugin":503,"./videojs-plugins/triton/TritonCompanionAdPlugin":507,"./videojs-plugins/triton/TritonSidebandMetadataPlugin":508,"./videojs-plugins/videojs-activity-override":509,"./videojs-plugins/videojs-comscore-stream-sense":510,"./videojs-plugins/videojs-fence":511,"./videojs-plugins/videojs-moat-ad-viewability":512,"./videojs-plugins/videojs-moat-dai-ad-viewability.ts":513,"./videojs-plugins/videojs-parsely":514,"./videojs-plugins/videojs-persist-listeners":515,"./videojs-plugins/videojs-playback-outro":516,"./videojs-plugins/videojs-poster":517,"./videojs-plugins/videojs-smooth-scrubbing":518,"./videojs-plugins/videojs-stream-watchdog":519,"./videojs-plugins/videojs-title-bar":520,"./videojs-plugins/viewability/ViewabilityPlugin":521,"./videojs-plugins/viewability/ViewableAdImpressionPlugin":522,"./videojs-plugins/youbora/videojs-youbora":524}],524:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-descriptors"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/defineProperty")),n=i(e("app/utils/log")),o=e("build/shims"),u=i(e("app/utils/datetime-utils")),d=i(e("app/events/player-events")),p=i(e("app/utils/projector-utils")),c=i(e("app/utils/cookies")),h=i(e("app/utils/error-report")),f=i(e("./CustomAdapter")),m=i(e("uuid/v4"));function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}var v=new n.default("Youbora"),y=["_onPlay","_onSubscriberStatusChange","_onFatalError","_onDispose"],g={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",UNKNOWN:"unknown"},_=function(){function n(e){var t=this;if((0,s.default)(this,n),(0,l.default)(this,"_willPlay",function(){t._initFired||(window.youboraPlugin.getAdapter().fireInit(),t._initFired=!0)}),this._initFired=!1,e.options_.use_youbora)if(p.default.isHlsSupported()){y.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))}),this.player=e,this.options=this.player.options_,this.isLive=Boolean(+this.options.metadata.live);var r=this.options.metadata.id,i=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach(function(e){(0,l.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},function(e,t,r){var i=e.ad_tag_cust_params_preroll||{},a=e.original_user_options,n=e.metadata;return Object.assign({},a.analyticsParams,{"content.customDimension.1":o.version,"content.customDimension.2":Boolean(a.autoplay).toString(),"content.customDimension.3":function(e){var t=e?new Date(e):new Date;return u.default.formatForReporting(t)}(n.bb_pub_d),"content.customDimension.4":function(e){if(e.live)return"long-form";if(e.form_type)return e.form_type;return"short-form"}(n),"content.customDimension.5":function(e){return e.show_name?e.show_name:"N/A"}(n),"content.customDimension.6":function(){var e=window.location;return"".concat(e.host).concat(e.pathname)}(),"content.customDimension.7":t,"content.customDimension.8":r,"content.customDimension.9":function(){var e=window._fence;if(e)try{return e.isBBGSubscriber?g.SUBSCRIBED:g.UNSUBSCRIBED}catch(e){h.default.recordGenericError(v,"Error accessing window._fence",e)}return g.UNKNOWN}(),"content.customDimension.11":"WEB","content.customDimension.15":(0,m.default)(),"content.customDimension.16":i.template,"content.customDimension.17":i.location,"content.customDimension.18":a.client,"content.customDimension.19":a.userId,"content.customDimension.20":n.contentCategory})}(this.options,r,this.player.currentSrc()),{},function(e,t,r){return{"content.enableAnalytics":!0,"content.isLive":e,"content.title":t,"content.duration":function(e){var t=e.metadata.duration;if(t)return Math.floor(+t/1e3);return 0}(r)}}(this.isLive,function(e){var t="";e.metadata.title&&(t+=e.metadata.title);return t}(this.options),this.options),{username:c.default.get("session_id"),properties:function(e,t){var r=t?new Date(t):null,i=r?r.getFullYear():"";return{content_id:e,year:i}}(r,function(e,t){return e?void 0:t.createdate}(this.isLive,this.options.metadata))});if(window.youboraPlugin.setOptions(i),window.youboraPlugin.setAdapter(this._getVideoJsAdapter()),this._addListeners(),this.options.log_debug){var a=window.YouboraLib.Log;a.logLevel=a.Level.DEBUG}}else v.warn("Plugin not enabled for non-Html5 techs.");else v.info("plugin disabled")}return(0,a.default)(n,[{key:"_getVideoJsAdapter",value:function(){return new f.default(this.player)}},{key:"_addListeners",value:function(){this.player.on(d.default.WILL_PLAY,this._willPlay),this.player.on(d.default.PLAY,this._onPlay),this.player.on(d.default.SUBSCRIBER_STATUS_CHANGE,this._onSubscriberStatusChange),this.player.on(d.default.FATAL_ERROR,this._onFatalError),this.player.on(d.default.DISPOSE,this._onDispose)}},{key:"_onDispose",value:function(){window.youboraPlugin.removeAdapter()}},{key:"_onPlay",value:function(){this.player&&window.youboraPlugin&&this._sendChangedEntity("content.customDimension.8",this.player.currentSrc())}},{key:"_onSubscriberStatusChange",value:function(e){var t=e.data,r=(void 0===t?{}:t).isBBGSubscriber?g.SUBSCRIBED:g.UNSUBSCRIBED;this._sendChangedEntity("content.customDimension.9",r)}},{key:"_sendChangedEntity",value:function(e,t){this.player&&window.youboraPlugin&&window.youboraPlugin.setOptions((0,l.default)({},e,t))}},{key:"_onFatalError",value:function(e){this.player&&window.youboraPlugin&&window.youboraPlugin.fireFatalError(e.error)}}],[{key:"init",value:function(){new n(this)}}]),n}();r.default=_,videojs.registerPlugin("YouboraIntegration",_.init)},{"./CustomAdapter":523,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/cookies":452,"app/utils/datetime-utils":455,"app/utils/error-report":457,"app/utils/log":464,"app/utils/projector-utils":466,"build/shims":2,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.filter":194,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.get-own-property-descriptor":210,"core-js/modules/es.object.get-own-property-descriptors":211,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.regexp.to-string":223,"core-js/modules/es.symbol":235,"core-js/modules/web.dom-collections.for-each":243,"uuid/v4":277}],523:[function(e,t,r){"use strict";e("core-js/modules/es.regexp.flags"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=window.YouboraLib.adapters.Videojs.extend({playListener:function(){this.flags.isStarted||(this.lastSrc=this.getResource(),this._startEvent())}});r.default=i},{"core-js/modules/es.regexp.flags":222}],522:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("@babel/runtime/helpers/classCallCheck")),s=a(e("@babel/runtime/helpers/createClass")),l=a(e("@babel/runtime/helpers/defineProperty")),o=a(e("app/utils/log")),u=a(e("app/events/player-events")),d=a(e("app/events/ad-events")),p=i(e("app/utils/ViewabilityMonitor")),c=new o.default("ViewableAdImpressionPlugin"),h=function(){function r(e){var t=this;(0,n.default)(this,r),(0,l.default)(this,"_playerOptions",void 0),(0,l.default)(this,"_viewabilityMonitor",void 0),(0,l.default)(this,"_currentTimer",null),(0,l.default)(this,"_isAdPlaying",void 0),(0,l.default)(this,"_isViewable",!1),this._playerOptions=e.options_,this._viewabilityMonitor=new p.default(e.el_,.5),this._isViewable=this._viewabilityMonitor.isViewable(),this._viewabilityMonitor.on(p.Events.Viewable,function(){t._isViewable=!0,!t._playerOptions.passedViewableAdImpressionCheck&&t._isAdPlaying&&t._startViewabilityTimer()}),this._viewabilityMonitor.on(p.Events.Unviewable,function(){t._isViewable=!1,t._stopViewabilityTimer()}),e.on(u.default.DISPOSE,function(){return t._viewabilityMonitor.dispose()}),e.on(d.default.AD_STARTED,function(){t._playerOptions.passedViewableAdImpressionCheck=!1,t._isAdPlaying=!0,t._isViewable&&t._startViewabilityTimer()}),e.on([d.default.AD_COMPLETED,u.default.ADS_TIMEOUT_ERROR,u.default.DISPOSE],function(){t._playerOptions.passedViewableAdImpressionCheck=!1,t._isAdPlaying=!1,t._stopViewabilityTimer()})}return(0,s.default)(r,[{key:"_startViewabilityTimer",value:function(){var e=this;this._currentTimer||(this._currentTimer=window.setTimeout(function(){c.info("Passed veiwable Ad impression check"),e._playerOptions.passedViewableAdImpressionCheck=!0,e._currentTimer=null},2200))}},{key:"_stopViewabilityTimer",value:function(){this._currentTimer&&(c.info("Viewable Ad impression check stopped"),window.clearTimeout(this._currentTimer),this._currentTimer=null)}}],[{key:"register",value:function(){if(this.options_.useViewableAdImpressionPlugin)return new r(this);c.info("Plugin disabled")}}]),r}();r.default=h,videojs.registerPlugin("ViewableAdImpressionPlugin",h.register)},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/ViewabilityMonitor":449,"app/utils/log":464}],521:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r._TEST_VIEWABILITY_CONFIG=void 0;var n=a(e("@babel/runtime/helpers/classCallCheck")),s=a(e("@babel/runtime/helpers/createClass")),l=a(e("@babel/runtime/helpers/defineProperty")),o=a(e("app/utils/log")),u=i(e("app/utils/ViewabilityMonitor")),d=a(e("app/events/player-events")),p=new o.default("ViewabilityPlugin"),c={livephoenix:0},h=c;r._TEST_VIEWABILITY_CONFIG=h;var f=function(){function i(e,t){var r=this;(0,n.default)(this,i),(0,l.default)(this,"_viewabilityMonitor",void 0),(0,l.default)(this,"dispose",function(){r._viewabilityMonitor.dispose()}),e.on(d.default.DISPOSE,this.dispose),this._viewabilityMonitor=new u.default(e.el_,t),e.options_.isViewable=this._viewabilityMonitor.isViewable(),this._viewabilityMonitor.on(u.Events.Viewable,function(){p.info("Player becomes viewable"),e.options_.isViewable=!0,e.trigger(d.default.VIEWABLE)}),this._viewabilityMonitor.on(u.Events.Unviewable,function(){p.info("Player becomes unviewable"),e.options_.isViewable=!1,e.trigger(d.default.UNVIEWABLE)})}return(0,s.default)(i,null,[{key:"register",value:function(){var e=(this.options_.ad_tag_cust_params_preroll||{}).location,t=c[e];if((t=isNaN(t)?.5:t)<=0)p.info("Plugin disabled for location: ",e);else{if(this.options_.useViewabilityPlugin)return new i(this,t);p.info("Plugin disabled")}}}]),i}();r.default=f,videojs.registerPlugin("ViewabilityPlugin",f.register)},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"app/events/player-events":381,"app/utils/ViewabilityMonitor":449,"app/utils/log":464}],449:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Events=void 0;var n=a(e("@babel/runtime/helpers/classCallCheck")),s=a(e("@babel/runtime/helpers/createClass")),l=a(e("@babel/runtime/helpers/possibleConstructorReturn")),o=a(e("@babel/runtime/helpers/getPrototypeOf")),u=a(e("@babel/runtime/helpers/assertThisInitialized")),d=a(e("@babel/runtime/helpers/inherits")),p=a(e("@babel/runtime/helpers/defineProperty")),c=a(e("app/utils/log"));e("intersection-observer");var h=a(e("./event-target")),f=i(e("./VisibilityMonitor")),m=new c.default("ViewabilityMonitor"),b={Viewable:"viewable",Unviewable:"unviewable"};r.Events=b;var v=function(e){function a(e,t){var r;(0,n.default)(this,a),r=(0,l.default)(this,(0,o.default)(a).call(this)),(0,p.default)((0,u.default)(r),"_threshold",void 0),(0,p.default)((0,u.default)(r),"_targetElement",void 0),(0,p.default)((0,u.default)(r),"_observer",void 0),(0,p.default)((0,u.default)(r),"_visibilityMonitor",void 0),(0,p.default)((0,u.default)(r),"_isInViewport",!1),(0,p.default)((0,u.default)(r),"_isElementViewable",r._calculateViewability()),(0,p.default)((0,u.default)(r),"_detectChange",function(){var e=r._calculateViewability();e!==r._isElementViewable&&(r._isElementViewable=e,r.trigger(r._isElementViewable?b.Viewable:b.Unviewable))}),(0,p.default)((0,u.default)(r),"_observerCallback",function(e){e.forEach(function(e){e.target===r._targetElement&&(r._isInViewport=e.intersectionRatio>=r._threshold,r._detectChange())})}),m.info("Initializing with threshold: ",t),r._threshold=t,r._targetElement=e;var i={root:null,threshold:t};return r._observer=a._createIntersectionObserver(r._observerCallback,i),r._observer.POLL_INTERVAL=250,r._observer.observe(r._targetElement),r._visibilityMonitor=new f.default,r._visibilityMonitor.on(f.EVENTS.VISIBLE,r._detectChange),r._visibilityMonitor.on(f.EVENTS.INVISIBLE,r._detectChange),r}return(0,d.default)(a,e),(0,s.default)(a,[{key:"isViewable",value:function(){return this._isElementViewable}},{key:"dispose",value:function(){this._observer.disconnect(),this._visibilityMonitor.dispose()}},{key:"_calculateViewability",value:function(){return f.default.isPageVisible()&&this._isInViewport}}],[{key:"_createIntersectionObserver",value:function(e,t){return new IntersectionObserver(e,t)}}]),a}(h.default);r.default=v},{"./VisibilityMonitor":450,"./event-target":458,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/log":464,"core-js/modules/web.dom-collections.for-each":243,"intersection-observer":255}],520:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/events/player-events")),c=i(e("app/events/ad-events")),h=new(i(e("app/utils/log")).default)("TitleBarComponent"),f=videojs.getComponent("Component"),m=["onAllAdsCompleted","onAdLoaded","onFinishedPlaying","onPause","onPlay","onUserActive","onUserInactive"],b="bvp-title-bar__visible",v=function(e){function r(e){var t;return(0,a.default)(this,r),t=(0,s.default)(this,(0,u.default)(r).call(this,e)),m.forEach(function(e){t[e]=t[e].bind((0,l.default)(t))}),t.isAdPlaying=!1,t.isEmpty=!e.options_.title,t.isActive=!1,t.setTitle(e.options_.title),e.on([c.default.ALL_ADS_COMPLETED,p.default.ADS_TIMEOUT_ERROR],t.onAllAdsCompleted),e.on(c.default.AD_LOADED,t.onAdLoaded),e.on(p.default.ENDED,t.onFinishedPlaying),e.on(p.default.PAUSE,t.onPause),e.on(p.default.PLAY,t.onPlay),e.on(p.default.USER_ACTIVE,t.onUserActive),e.on(p.default.USER_INACTIVE,t.onUserInactive),t}return(0,d.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,o.default)((0,u.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-title-bar",innerHTML:'<div class="bvp-title-bar__text"></div>'})}},{key:"setTitle",value:function(e){this.$(".bvp-title-bar__text").textContent=e}},{key:"show",value:function(){this.addClass(b)}},{key:"hide",value:function(){this.removeClass(b)}},{key:"onAdLoaded",value:function(){this.isAdPlaying=!0,this.hide()}},{key:"onAllAdsCompleted",value:function(){this.isAdPlaying=!1}},{key:"onPause",value:function(){this.isEmpty||this.player_.ended()||this.show()}},{key:"onPlay",value:function(){this.isEmpty||this.isActive||this.hide()}},{key:"onUserActive",value:function(){this.isActive=!0,this.isEmpty||this.player_.ended()||this.isAdPlaying||this.show()}},{key:"onUserInactive",value:function(){this.isActive=!1,this.player_.paused()||this.hide()}},{key:"onFinishedPlaying",value:function(){this.hide()}}],[{key:"init",value:function(){this.options_.use_title_bar?videojs.registerComponent("TitleBar",r):h.info("plugin disabled")}}]),r}(f);videojs.registerPlugin("TitleBarPlugin",v.init);var y=v;r.default=y},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/log":464}],519:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/defineProperty")),l=i(e("app/events/player-events")),o=i(e("app/utils/VisibilityMonitor")),u=i(e("app/utils/log")),d=e("app/utils/Constant"),p=i(e("app/utils/projector-utils")),c=["startCountdown","stopCountdown","onTimeUpdate","onSeekEnd","reloadPlayer","dispose"],h=new u.default("StreamWatchdog"),f=function(){function i(e,t){var r=this;(0,a.default)(this,i),(0,s.default)(this,"isLive",void 0),(0,s.default)(this,"options",void 0),(0,s.default)(this,"pastTime",void 0),(0,s.default)(this,"player",void 0),(0,s.default)(this,"timeout",void 0),(0,s.default)(this,"videoTag",void 0),(0,s.default)(this,"countdownId",void 0),this.countdownId=null,this.isLive=Boolean(e.options_.original_user_options.live),this.options=t,this.pastTime=null,this.player=e,this.timeout=this.isLive?this.options.liveStreamTimeout:this.options.vodStreamTimeout,c.forEach(function(e){r[e]=r[e].bind(r)})}return(0,n.default)(i,[{key:"start",value:function(){p.default.isMobile()||p.default.isSafariDesktop()||(o.default.isPageVisible()&&this.player.on(l.default.PLAY,this.startCountdown),this.player.on(l.default.TIMEUPDATE,this.onTimeUpdate),this.player.on(l.default.DISPOSE,this.dispose),this.player.on([l.default.ENDED,l.default.PAUSE,l.default.ERROR],this.stopCountdown),this.videoTag=this.player.tech_.el(),this.videoTag.addEventListener("seeked",this.onSeekEnd))}},{key:"onTimeUpdate",value:function(){var e=this.player.currentTime(),t=this.player.paused(),r=this.player.seeking(),i=this.player.scrubbing();t||r||i||e&&this.pastTime!==e&&(this.pastTime=e,this.startCountdown())}},{key:"onSeekEnd",value:function(){this.pastTime=null}},{key:"reloadPlayer",value:function(){if(this.player.techName_!==d.CHROMECAST_TECH_NAME){h.warn("Stream playback stalled, triggering a reload request"),this.stopCountdown();var e={type:"watchdog-reload",details:"Playback stalled for ".concat(this.timeout,"s")};this.player.trigger({type:l.default.WATCHDOG_RELOAD,data:e})}}},{key:"startCountdown",value:function(){window.clearTimeout(this.countdownId),this.countdownId=window.setTimeout(this.reloadPlayer,this.timeout)}},{key:"stopCountdown",value:function(){window.clearTimeout(this.countdownId)}},{key:"dispose",value:function(){this.stopCountdown(),this.videoTag.removeEventListener("seeked",this.onSeekEnd),this.player=this.options=this.videoTag=null}}]),i}();videojs.registerPlugin("StreamWatchdogPlugin",function(e){var t=this;if(t.options_.use_stream_watchdog){var r=new f(t,e);t.on(l.default.READY,function(){t.tech_&&r.start()})}else h.info("plugin disabled")});var m=f;r.default=m},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/Constant":441,"app/utils/VisibilityMonitor":450,"app/utils/log":464,"app/utils/projector-utils":466}],518:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=new(i(e("app/utils/log")).default)("SmoothScrubbingPlugin"),p=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,n.default)(t,[{key:"handleMouseMove",value:function(e){(0,l.default)((0,o.default)(t.prototype),"handleMouseMove",this).call(this,e),this.player_.trigger("timeupdate")}}]),t}(videojs.getComponent("SeekBar"));function c(){var r=this;if(r.options_.use_smooth_scrub){var i=r.currentTime.bind(r);r.currentTime=function(e){var t=i(e);return void 0!==e&&(r.cache_.currentTime=e),t},videojs.registerComponent("SeekBar",p)}else d.info("plugin disabled")}videojs.registerPlugin("SmoothScrubbingPlugin",c);var h=c;r.default=h},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/log":464}],517:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/projector-utils")),l=i(e("app/events/player-events")),o=new(i(e("app/utils/log")).default)("PosterPlugin"),u=["onPlayerReady","onPlayerEnded"],d=function(){function r(e){var t=this;(0,a.default)(this,r),this.player=e,this.autoplay=e.options_.original_user_options.autoplay,this.posterUrl=e.options_.posterUrl,this.showPosterSlate=e.options_.poster_as_slate,this.hasLoadedPoster=!1,u.forEach(function(e){t[e]=t[e].bind(t)}),e.on(l.default.READY,this.onPlayerReady),e.on(l.default.ENDED,this.onPlayerEnded)}return(0,n.default)(r,[{key:"onPlayerReady",value:function(){if(this.showPosterSlate)return s.default.isMobile()||this.player.addClass("blvs-poster-as-slate"),void this.loadPoster();this.autoplay||this.loadPoster()}},{key:"onPlayerEnded",value:function(){this.loadPoster(),this.player.hasStarted(!1)}},{key:"loadPoster",value:function(){this.hasLoadedPoster||(s.default.isMobile()?this.player.el_.setAttribute("poster",this.posterUrl):this.player.poster(this.posterUrl),this.hasLoadedPoster=!0)}}],[{key:"init",value:function(){this.options_.use_poster_slate?new r(this):o.info("plugin disabled")}}]),r}();videojs.registerPlugin("PosterPlugin",d.init);var p=d;r.default=p},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464,"app/utils/projector-utils":466}],516:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/assertThisInitialized")),u=i(e("@babel/runtime/helpers/get")),d=i(e("@babel/runtime/helpers/getPrototypeOf")),p=i(e("@babel/runtime/helpers/inherits")),c=i(e("app/events/player-events")),h=i(e("../lib/google-ads/ad-utils")),a=new(i(e("app/utils/log")).default)("PlaybackOutroComponent"),f=videojs.getComponent("Component"),m=["onFinishedPlaying","onStartedPlaying","onReplayClick"],b=function(e){function a(e,t){var r;(0,n.default)(this,a),(r=(0,l.default)(this,(0,d.default)(a).call(this,e))).disabled=!1,r.hide(),m.forEach(function(e){r[e]=r[e].bind((0,o.default)(r))}),e.on(c.default.ENDED,r.onFinishedPlaying),e.on(c.default.PLAY,r.onStartedPlaying);var i=e.options_.title||t.message;return r.setMessage(i),r.on(r.el(),"click",r.onReplayClick),r}return(0,p.default)(a,e),(0,s.default)(a,[{key:"createEl",value:function(){return(0,u.default)((0,d.default)(a.prototype),"createEl",this).call(this,"div",{className:"bvp-playback-outro",innerHTML:'<div class="bvp-playback-outro__message"></div>\n        <button class="bvp-playback-outro__replay-button" aria-label="Replay" title="Replay" aria-live="polite"/>'})}},{key:"setMessage",value:function(e){e&&(this.$(".bvp-playback-outro__message").textContent=e)}},{key:"onFinishedPlaying",value:function(){this.disabled||this.show()}},{key:"onStartedPlaying",value:function(){this.disabled||this.hide()}},{key:"onReplayClick",value:function(){var e=this.player_.options_.plugins.GoogleAdsPlugin,t=h.default.canDisplayAds(e)&&h.default.hasPreroll(e);if(this.player_.trigger(c.default.REPLAY),t)return this.hide(),void this.player_.trigger(c.default.PLAY_PREROLL);this.player_.play()}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}}]),a}(f);videojs.registerPlugin("PlaybackOutroPlugin",function(){this.options_.use_playback_outro?videojs.registerComponent("PlaybackOutro",b):a.info("plugin disabled")});var v=b;r.default=v},{"../lib/google-ads/ad-utils":399,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381,"app/utils/log":464}],515:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.parse-float"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("app/utils/persist-controls")),n=i(e("app/events/player-events")),s=i(e("app/utils/log")),l=i(e("app/utils/projector-utils")),o=new s.default("PersistListeners");function u(){var t=this;t.options_.use_persist_listeners?t.on(n.default.READY,function(){var e=a.default.get("volume");void 0!==e&&t.volume(parseFloat(e)),t.on(n.default.VOLUME_CHANGE,function(){a.default.set("volume",t.volume()),l.default.isRadioPlayer(t.options_)||a.default.set("muted",t.muted())})}):o.info("plugin disabled")}videojs.registerPlugin("PersistListeners",u);var d=u;r.default=d},{"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464,"app/utils/persist-controls":465,"app/utils/projector-utils":466,"core-js/modules/es.parse-float":214}],514:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/events/ad-events")),l=i(e("app/events/player-events")),o=new(i(e("app/utils/log")).default)("ParselyPlugin"),u=["_trackPlay","_trackPause"],d=["VIDUSDIGI","VIDASDIGI","VIDUKDIGI"],p=function(){function i(e,t){var r=this;(0,a.default)(this,i),this.player=e,this.originalBaseUrl="",this.parsely=t,u.forEach(function(e){r[e]=r[e].bind(r)}),this.player.on([s.default.AD_STARTED,s.default.AD_RESUMED,l.default.PLAY],this._trackPlay),this.player.on([l.default.ENDED,l.default.PAUSE,l.default.DISPOSE,s.default.AD_PAUSED],this._trackPause)}return(0,n.default)(i,[{key:"_trackPlay",value:function(){if(this.parsely.videoPlaying=!0,this.parsely.video){this.originalBaseUrl=this.originalBaseUrl||this._getParselyOverrideUrl()||this._getPageLocation();var e=this._playerMetaData(),t=this._getParselyMetadata(e);this.parsely.video.trackPlay(e.id,t,this._getBaseUrl())}}},{key:"_getParselyMetadata",value:function(e){return{title:e.title,section:function(e,t){if(t&&0<t.length){if(t.some(function(e){return 0<=d.indexOf(e)}))return"Digital Originals"}return e}(e.show_name,e.ni_codes),tags:function(e){return[e.ni_codes,e.keywords,e.peoples].reduce(function(e,t){return t?e.concat(t):e},[])}(e),image_url:e.poster,pub_date_tmsp:function(e){return new Date(e).getTime()}(e.createdate)}}},{key:"_trackPause",value:function(e){if(this.parsely.videoPlaying=!1,this.parsely.video){var t=this._playerMetaData(),r=this._getParselyMetadata(t);this.parsely.video.trackPause(t.id,r,this._getBaseUrl()),e&&e.type===l.default.ENDED&&this.parsely.video.reset(t.id)}}},{key:"_playerMetaData",value:function(){return this.player.options_.metadata}},{key:"_getBaseUrl",value:function(){return this._isPrimaryVideo()?this.originalBaseUrl:""}},{key:"_isPrimaryVideo",value:function(){var e=this.player.options_;return void 0===e.playlistIndex||0===e.playlistIndex}},{key:"_getParselyOverrideUrl",value:function(){return this.player.options_.original_user_options.parselyPageUrl}},{key:"_getPageLocation",value:function(){return window.location.href}}],[{key:"init",value:function(){this.options_.live?o.info("Cannot track: tracking disabled for live player"):window.PARSELY?this.options_.use_parsely?new i(this,window.PARSELY):o.info("plugin disabled"):o.info("Cannot track: missing window.PARSELY")}}]),i}();videojs.registerPlugin("ParselyPlugin",p.init);var c=p;r.default=c},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.index-of":197}],513:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/events/ad-events")),g=i(e("app/events/moat-ad-events")),l=i(e("app/utils/log")),o=i(e("app/utils/error-report")),u=i(e("video.js")),_=new l.default("MoatDaiAdViewabilityPlugin"),C="bloombergdaivideo974580554737",d=function(){function t(e){(0,a.default)(this,t),this.player=e,this.player.on(s.default.AD_STARTED,this._onAdStart.bind(this)),this.player.on(s.default.AD_PAUSED,this._trackMoat.bind(this,g.default.AdPaused)),this.player.on(s.default.AD_FIRST_QUARTILE,this._trackMoat.bind(this,g.default.AdVideoFirstQuartile)),this.player.on(s.default.AD_MIDPOINT,this._trackMoat.bind(this,g.default.AdVideoMidpoint)),this.player.on(s.default.AD_THIRD_QUARTILE,this._trackMoat.bind(this,g.default.AdVideoThirdQuartile)),this.player.on(s.default.AD_COMPLETED,this._trackMoat.bind(this,g.default.AdVideoComplete)),this.player.on(s.default.AD_RESUMED,this._trackMoat.bind(this,g.default.AdPlaying)),this.player.on(s.default.AD_VOLUME_CHANGE,this._trackMoat.bind(this,g.default.AdVolumeChange))}return(0,n.default)(t,[{key:"_onAdStart",value:function(e){var t,r;if(e.data&&e.data.isDai){var i=e.data,a=i.dfpLineItemId,n=i.dfpCreativeId,s=i.duration,l=i.impressionId,o=i.channelId,u=(null===(t=this.player)||void 0===t?void 0:null===(r=t.options_)||void 0===r?void 0:r.ad_tag_cust_params_midroll)||{},d=u.platform,p=void 0===d?"":d,c=u.location,h=void 0===c?"":c,f=u.autoplay,m=void 0===f?"":f,b=u.template,v=void 0===b?"":b,y={level3:a,level4:n,slicer1:document.location.href,zMoatII:l,zMoatAdUnitPath:o,zMoatAP:m?"true":"false",zMoatLC:h,zMoatTT:v,zMoatPF:p};_.info("Moat Ad tracking: ",y),this.moatApiReference=window.initDaiMoatTracking(this.player.tech_.el(),y,s,C),this._trackMoat(g.default.AdVideoStart,e)}}},{key:"_trackMoat",value:function(e,t){if((1<arguments.length&&void 0!==t?t:{data:{}}).data.isDai){var r=this.player.muted()?0:this.player.volume();this.moatApiReference.dispatchEvent({type:e,adVolume:r})}}}],[{key:"init",value:function(){if(this.options_.useMoatDai){if(window.initDaiMoatTracking)return new t(this);o.default.recordGenericError(_,"Cannot initialize plugin: missing window.initDaiMoatTracking")}else _.info("plugin disabled")}}]),t}();u.default.registerPlugin("MoatDaiAdViewabilityPlugin",d.init),d.__DAI_PARTNER_CODE=C;var p=d;r.default=p},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/moat-ad-events":380,"app/utils/error-report":457,"app/utils/log":464,"video.js":278}],380:[function(e,t,r){"use strict";t.exports={AdVideoStart:"AdVideoStart",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdVolumeChange:"AdVolumeChange",AdStopped:"AdStopped"}},{}],512:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("app/events/ad-events")),u=i(e("app/utils/cookies")),n=i(e("app/utils/log")),d=i(e("app/utils/error-report")),p=i(e("app/utils/query-string")),c=new n.default("MoatAdViewabilityPlugin"),h="bloombergjsvideo915507035426";function s(){this.options_.use_moat?this.on(a.default.AD_LOADED,l):c.info("plugin disabled")}function l(e){var t,r,i,a,n=e.data,s=void 0===n?{}:n;if(window.initMoatTracking){if(!s.isDai){var l={partnerCode:h,viewMode:s.viewMode,slicer1:document.location.href,zMoatCP:"{".concat(p.default.toQueryString(s.custParams),"}"),zMoatAT:s.adType,zMoatST:s.isLive?"live":"vod",zMoatII:s.impressionId,zMoatAdUnitPath:s.channelId,zMoatAP:(null==s?void 0:null===(t=s.custParams)||void 0===t?void 0:t.autoplay)?"true":"false",zMoatLC:null==s?void 0:null===(r=s.custParams)||void 0===r?void 0:r.location,zMoatTT:null==s?void 0:null===(i=s.custParams)||void 0===i?void 0:i.template,zMoatPF:null==s?void 0:null===(a=s.custParams)||void 0===a?void 0:a.platform},o=u.default.get("session_id")||null;o&&(l.zMoatKI=o),c.info("Moat Ad tracking: ",l),window.initMoatTracking(s.adsManager,l,s.adContainer)}}else d.default.recordGenericError(c,"Cannot track ads: missing window.initMoatTracking")}videojs.registerPlugin("MoatAdViewabilityPlugin",s),s.__PARTNER_CODE=h;var o=s;r.default=o},{"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/utils/cookies":452,"app/utils/error-report":457,"app/utils/log":464,"app/utils/query-string":467}],511:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/events/player-events")),o=i(e("../components/fence/FenceComponent")),u=new s.default("FencePlugin"),d=["_onSubscribe","_onRender","_checkSubscriptionStatusChange","_onPlay","_start","_onDispose"],p=function(){function i(e,t){var r=this;(0,a.default)(this,i),this.player=e,this.fence=t,this._isBBGSubscriber=!1,d.forEach(function(e){r[e]=r[e].bind(r)}),e.ready(function(){t.ready(function(){r.fence=window._fence,r._start()})})}return(0,n.default)(i,[{key:"_start",value:function(){if(this.fence.addEventListener){if(this.fence.addEventListener("onStoreChange",this._checkSubscriptionStatusChange),this.player.options_.enableFence&&(this.fence.addEventListener("onRender",this._onRender),this.fence.addEventListener("onSubscribe",this._onSubscribe),this.player.on(l.default.PLAY,this._onPlay),this._isPauseTriggeredByFence=!1,this.fence.enableRender)){var e=this.player.getChild("FenceComponent");this.fence.enableRender({liveSubscribeRendererId:e.selector})}this.player.on(l.default.DISPOSE,this._onDispose)}this._checkSubscriptionStatusChange()}},{key:"_onRender",value:function(e){e&&e.detail&&e.detail.showLivePageWall&&(this._isPauseTriggeredByFence=!0,this.player.trigger(l.default.PAY_WALL_PAUSE))}},{key:"_onSubscribe",value:function(e){e&&e.detail&&this.fence.isBBGSubscriber&&this.player.paused()&&this._isPauseTriggeredByFence&&this.player.trigger(l.default.PAY_WALL_PLAY)}},{key:"_checkSubscriptionStatusChange",value:function(){var e=!!this.fence.isBBGSubscriber;this._isBBGSubscriber!=e&&(this._isBBGSubscriber=e,this.player.trigger({type:l.default.SUBSCRIBER_STATUS_CHANGE,data:{isBBGSubscriber:e}}))}},{key:"_onPlay",value:function(){this._isPauseTriggeredByFence=!1}},{key:"_onDispose",value:function(){this.player.options_.enableFence&&(this.fence.removeEventListener("onRender",this._onRender),this.fence.removeEventListener("onSubscribe",this._onSubscribe)),this.fence.removeEventListener("onStoreChange",this._checkSubscriptionStatusChange)}}],[{key:"init",value:function(){var e=window._fence;if(e&&e.ready)return videojs.registerComponent("FenceComponent",o.default),new i(this,e);u.info("no fence library available on page")}}]),i}();videojs.registerPlugin("FencePlugin",p.init);var c=p;r.default=c},{"../components/fence/FenceComponent":369,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464}],369:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,n.default)(t,[{key:"createEl",value:function(){return this.selector="bvp-fence-subscribe-".concat(Math.floor(1e4*Math.random())),(0,l.default)((0,o.default)(t.prototype),"createEl",this).call(this,"div",{className:"bvp-fence-subscribe",id:this.selector})}}]),t}(videojs.getComponent("Component"));r.default=d},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],510:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.parse-int"),e("core-js/modules/es.string.starts-with"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),n=i(e("app/events/ad-events")),o=i(e("app/events/player-events")),s=i(e("app/utils/log")),u=i(e("app/utils/error-report")),d=new s.default("ComscoreStreamSensePlugin"),p={bb_pub_d:"bb_pub_d",bss_ni_codes:"ni_codes",c5:"c5",ns_st_ci:"id",ns_st_ct:!0,ns_st_dt:"createdate",ns_st_ep:"title",ns_st_li:"live",ns_st_pr:"show_name",ns_st_ty:"form_type"},c=function(){function e(){(0,l.default)(this,e)}return(0,a.default)(e,null,[{key:"ns_st_dt",value:function(e,t){return e[t]?e[t]:1===e.live?"N/A":void 0}},{key:"bss_ni_codes",value:function(e,t){if(e[t])return e[t].reduce(function(e,t,r){return"".concat(e).concat(0<r?" ":"").concat(t)},"")}},{key:"ns_st_ct",value:function(e){return this.isInAd?this.isLive?"va21":"va11":this.isLive?"vc13":"short-form"===e.form_type?"vc11":"vc12"}}]),e}(),h=["dispose","onAdClip","onAdCompleted","onAdLoading","onAdPaused","onAdPlayError","onAdResumed","onAdStarted","onAdTimeout","onBuffer","onContentChange","onDurationChange","onEnded","onError","onFullScreenChange","onPause","onPlay","onRetry","onShare","onShareAction","onTrackInfo","onVolumeChange"],f=function(){function s(e,t,r){var i=this;(0,l.default)(this,s),this.autoplayValues=t.autoplayReportingValues.comscore,this.clipDuration=0,this.clips={},this.clipsCount=0,this.currentClipId=null,this.initialClipId=null,this.isAsync=Boolean(t.ns_async),this.isInAd=!1,this.isLive=!1,this.player=r,this.playlistContentType=null,this.playlistDuration=0,this.playlistIndex=0,this.playlistTitle=null,this.lastRecordedTime=0,h.forEach(function(e){i[e]=i[e].bind(i)});var a=this.getBaseLabels(e,t),n=("https:"===window.location.protocol?"https://s":"http://")+"b.scorecardresearch.com/p?c1=2&c2="+("mini"===t.playerType?"6961552":"3005059");this.streamSense=new ns_.StreamSense(a,n),this.isAsync||this.initializePlaylist(),this.streamSense.setPauseOnBufferingInterval(0),this.streamSense.setKeepAliveInterval(6e5),this.startPositionPoll()}return(0,a.default)(s,[{key:"addDuration",value:function(e){0<e&&(this.playlistDuration+=e,this.streamSense.getPlaylist().setLabel("ns_st_ca",this.playlistDuration))}},{key:"getBaseLabels",value:function(e,t){var r=this.getDataFromClipMetadata(t.metadata);if(Object.assign(r,{bss_iframe:window!==window.top?1:0,c6:"*null",c7:window.location.href,c8:document.title,ns_st_mp:"BPlayer",ns_st_mv:t.metadata.version,ns_st_pu:"Bloomberg"},e),e.title&&(this.playlistTitle=e.title,delete r.title),e.page_level_tags)if(delete r.page_level_tags,function(e){return"string"==typeof e&&e.startsWith("javascript:")}(e.page_level_tags)){var i=function(e){var t=e.indexOf("("),r=-1!==t?e.slice(11,t).trim():null;if(r&&"function"==typeof window[r])return function(){try{return window[r]()}catch(e){u.default.recordGenericError(d,"Unable to execute page level tags:",e)}}}(e.page_level_tags);i&&Object.assign(r,i())}else Object.assign(r,e.page_level_tags);return r.bss_auto_play=this.autoplayValues.bss_auto_play,r.bss_cont_play=this.autoplayValues.bss_cont_play,r}},{key:"getDataFromClipMetadata",value:function(a){var n=this;if(!a)return{};var s={};return this.isLive=Boolean(a.live),a.form_type!==this.playlistContentType&&(this.playlistContentType=a.form_type,this.streamSense&&this.streamSense.getPlaylist().setLabel("bss_vid_type",this.playlistContentType)),a.title&&(this.isInAd||this.playlistTitle||(this.playlistTitle=a.title,this.streamSense&&this.streamSense.getPlaylist().setLabel("ns_st_pl",a.title))),a.duration&&!this.streamSense&&(this.playlistDuration=parseInt(a.duration,10),this.initialClipId=a.id),Object.keys(p).forEach(function(e){var t=p[e];if(c[e]){var r=c[e].call(n,a,t);void 0!==r&&(s[e]=r)}else{var i=a[t];void 0!==i&&(s[e]=i)}}),s}},{key:"getPosition",value:function(){if(this.isLive)return 0;try{return Math.round(1e3*this.player.currentTime())}catch(e){return this.lastRecordedTime}}},{key:"getDuration",value:function(){return this.isLive?0:this.player.duration()}},{key:"getFullScreen",value:function(){return this.player.isFullscreen()?"full":"norm"}},{key:"startPositionPoll",value:function(){var e=this;this.pollIntervalId=setInterval(function(){e.lastRecordedTime=e.getPosition()},750)}},{key:"stopPositionPoll",value:function(){clearInterval(this.pollIntervalId),this.pollIntervalId=null}},{key:"shareNotify",value:function(e,t,r){var i=this.streamSense.getPlaylist().getLabel("ns_st_pl")||window.location.href;this.streamSense.customNotify({social_network:e,social_url:i,social_action:t,social_position:"video-controlbar"},r)}},{key:"isUserAction",value:function(){return this.player.userActive()}},{key:"initializePlaylist",value:function(){var e={};e.ns_st_pl=this.playlistTitle||"",e.ns_st_ca=this.playlistDuration||0,e.bss_vid_type=this.playlistContentType||"",e.bss_pl_num=this.playlistIndex,this.streamSense.setPlaylist(e)}},{key:"toggleHeartbeat",value:function(){this.streamSense.setHeartbeatIntervals([{playingtime:6e4,interval:this.isInAd?1e9:1e4},{playingtime:null,interval:this.isInAd?1e9:1e6}])}},{key:"onAdCompleted",value:function(){this.isInAd=!1,this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:1},this.getPosition())}},{key:"onAdPaused",value:function(){var e=this.isUserAction()?1:0;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PAUSE,{bss_user_action:e},this.getPosition())}},{key:"onAdResumed",value:function(){var e=this.isUserAction()?1:0;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onAdStarted",value:function(){var e=this.isUserAction()?1:0;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onAdClip",value:function(e){if(e.data){var t,r="none";this.currentClipId=e.data.clip.contentId,this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{},this.getPosition()),this.isInAd=e.data.type&&0===e.data.type.indexOf("ad-"),this.isInAd?(this.clipDuration=1e3*e.data.duration,this.currentClipId||(this.currentClipId="ad_clip_"+this.clipsCount)):this.clipDuration=this.getDuration(),e.data.url&&(r=e.data.url),this.clips[this.currentClipId]?(this.clips[this.currentClipId].part++,t=this.clips[this.currentClipId]):(this.currentClipId!==this.initialClipId&&this.addDuration(this.clipDuration),this.clipsCount++,this.streamSense.getPlaylist().setLabel("ns_st_cp",this.clipsCount),(t=this.getDataFromClipMetadata(e.data.metadata)).ns_st_cu=r,t.clip_num=this.clipsCount,t.part=1,this.clips[this.currentClipId]=t),this.isInAd?(this.isLive&&(t.ns_st_li=1),t.ns_st_ad=1,t.ns_st_ty=e.data.type.substring(3)):t.bss_precision=0,t.ns_st_cn=this.clips[this.currentClipId].clip_num,t.ns_st_ci=this.currentClipId,t.ns_st_cl=this.clipDuration,t.ns_st_pn=this.clips[this.currentClipId].part,t.ns_st_tp=0,t.ns_st_cs=this.player.width()+"x"+this.player.height(),t.bss_stream_url=r,t.bss_tech_name=this.player.techName_,this.streamSense.setClip(t)}}},{key:"onAdLoading",value:function(){0===this.clipsCount&&this.streamSense.notify(ns_.StreamSense.PlayerEvents.BUFFER,{},this.getPosition())}},{key:"onAdPlayError",value:function(e,t){var r={bss_aderror:"adsplayerror",ns_st_adtype:t||""};this.streamSense.customNotify(r,this.getPosition())}},{key:"onAdTimeout",value:function(e){var t,r=e&&e.data&&e.data.originalEvent,i=r&&r.type||"";switch(i){case n.default.MAX_RETRIES_REACHED:t="adsloadtimeout";break;case n.default.AD_PLAYBACK_TIMED_OUT:t="adsplaytimeout";break;case n.default.AD_LOAD_TIMED_OUT:t="adsloadtimeout"}var a={bss_aderror:t,ns_st_adtype:i};this.streamSense.customNotify(a,this.getPosition())}},{key:"onBuffer",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.BUFFER,{},this.getPosition())}},{key:"onVolumeChange",value:function(){var e=this.player.muted()?0:this.player.volume();this.streamSense.setLabel("ns_st_vo",e)}},{key:"onContentChange",value:function(e){e.data&&(this.playlistIndex++,this.playlistTitle="",this.playlistDuration=0,this.playlistContentType="",e.data.title&&(this.playlistTitle=e.data.title),e.data.duration&&(this.playlistDuration=parseInt(e.data.duration)),e.data.form_type&&(this.playlistContentType=e.data.form_type),this.initializePlaylist())}},{key:"onDurationChange",value:function(){var e=this.getDuration();this.clipDuration||this.isInAd&&!(this.isInAd&&e<=60)||(this.clipDuration=1e3*e,this.currentClipId!==this.initialClipId&&this.addDuration(this.clipDuration),this.streamSense.getClip().setLabel("ns_st_cl",this.clipDuration))}},{key:"onEnded",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:1},this.getPosition())}},{key:"onError",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:1,ns_st_er:"Error"},this.getPosition())}},{key:"onFullScreenChange",value:function(){var e=this.getFullScreen();this.streamSense.setLabel("ns_st_ws",e),this.streamSense.customNotify({ns_st_ev:"wstate"},this.getPosition())}},{key:"onPause",value:function(){var e=this.isUserAction()?1:0;this.toggleHeartbeat(),this.streamSense.notify(ns_.StreamSense.PlayerEvents.PAUSE,{bss_user_action:e},this.getPosition())}},{key:"onPlay",value:function(){var e=this.isUserAction()?1:0;this.toggleHeartbeat(this.streamSense),this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onRetry",value:function(e){if(!this.isInAd){var t=e.data&&e.data.url?e.data.url:"none";this.streamSense.getClip().setLabel("bss_stream_url",t),this.streamSense.customNotify({bss_stream_url:t},this.getPosition())}}},{key:"onShare",value:function(){this.shareNotify("share-menu","share",this.getPosition())}},{key:"onShareAction",value:function(e){var t=e.data.shareType;if(t){var r=this.getPosition();"embed-copy"!==t&&"embed-text"!==t?this.shareNotify(t,"share",r):this.shareNotify(t,"embed",r)}}},{key:"onTrackInfo",value:function(e){this.isAsync&&this.initializePlaylist(),e.data&&e.data.referrer&&(this.streamSense.setLabel("c9",e.data.referrer),this.streamSense.notify("c9",e.data.referrer))}},{key:"dispose",value:function(){this.stopPositionPoll(),this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:1},this.getPosition()),this.streamSense.setClip(null),this.streamSense=null,this.player=null}}],[{key:"init",value:function(e){var t=this,r=t.options_;if(r.use_comscore&&ns_){var i=new s(e,r,t);t.on(n.default.AD_COMPLETED,i.onAdCompleted),t.on(n.default.AD_PAUSED,i.onAdPaused),t.on(n.default.AD_RESUMED,i.onAdResumed),t.on(n.default.AD_STARTED,i.onAdStarted),t.on(n.default.CLIP,i.onAdClip),t.on(o.default.AD_LOADING,i.onAdLoading),t.on(o.default.ADS_PLAY_ERROR,i.onAdPlayError),t.on(o.default.ADS_TIMEOUT_ERROR,i.onAdTimeout),t.on(o.default.BUFFER,i.onBuffer),t.on(o.default.VOLUME_CHANGE,i.onVolumeChange),t.on(o.default.CONTENT_CHANGE,i.onContentChange),t.on(o.default.DURATION_CHANGE,i.onDurationChange),t.on(o.default.ENDED,i.onEnded),t.on(o.default.ERROR,i.onError),t.on(o.default.FULL_SCREEN_CHANGE,i.onFullScreenChange),t.on(o.default.PAUSE,i.onPause),t.on(o.default.PLAY,i.onPlay),t.on(o.default.RETRY,i.onRetry),t.on(o.default.SHARE_ACTION,i.onShareAction),t.on(o.default.TRACK_INFO,i.onTrackInfo),t.on(o.default.DISPOSE,function(){i.dispose(),i=null})}else d.info("plugin disabled")}}]),s}();videojs.registerPlugin("ComscoreStreamSensePlugin",f.init);var m=f;r.default=m},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/error-report":457,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.index-of":197,"core-js/modules/es.array.slice":202,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.keys":212,"core-js/modules/es.parse-int":215,"core-js/modules/es.string.starts-with":231,"core-js/modules/es.string.trim":232,"core-js/modules/web.dom-collections.for-each":243}],509:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("app/utils/log")),o=i(e("lodash.debounce")),u=new a.default("ActivityOverridePlugin"),d="mousemove";function n(){var i=this;if(i.options_.use_activity_out){var a=(0,o.default)(function(){l||i.userActive(!1)}.bind(i),5e3),r=function(e){var t=e.screenX,r=e.screenY;t===n&&r===s||(n=t,s=r,i.userActive(!0));a()}.bind(i),e=i.reportUserActivity.bind(i),n=null,s=null,l=!1;i.listenForUserActivity_=function(){var t=i.$(".vjs-control-bar");i.on("mouseover",function(e){i.on(d,r),l=e.target!==t&&t.contains(e.target),a()}),i.on("mouseleave",function(){i.off(d,r),i.userActive(!1),l=!1}),i.on("play",a),i.on("mousedown",e),i.on("mouseup",e),i.on("keydown",e),i.on("keyup",e)}}else u.info("plugin disabled")}videojs.registerPlugin("ActivityOverridePlugin",n);var s=n;r.default=s},{"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464,"lodash.debounce":261}],508:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("@babel/runtime/helpers/classCallCheck")),s=a(e("@babel/runtime/helpers/createClass")),l=a(e("app/utils/log")),o=a(e("app/events/player-events")),u=e("app/utils/Constant"),d=i(e("./SidebandMetadataConnection")),p=i(e("./SidebandMetadataQueue")),c=i(e("./SidebandMetadataMonitor")),h=new l.default("TritonSidebandMetadataPlugin"),f=["_initializeSBMSrcMonitor","_processQueue","_onSBMMessage","_connectToNewSBM"],m=function(){function r(e){var t=this;(0,n.default)(this,r),this.player=e,this.sbmSrcMonitorStarted=!1,this.sbmDelayTimer=null,this.sbmConnection=null,this.sbmMonitor=null,this.sbmQueue=new p.default,f.forEach(function(e){return t[e]=t[e].bind(t)}),this.sbmQueue.on(p.QUEUE_MESSAGE,this._onSBMMessage),e.on([o.default.LOADED_METADATA],this._initializeSBMSrcMonitor),e.on(o.default.TIMEUPDATE,this._processQueue)}return(0,s.default)(r,[{key:"dispose",value:function(){this.sbmDelayTimer&&(clearTimeout(this.sbmDelayTimer),this.sbmDelayTimer=null),this.sbmConnection&&(this.sbmConnection.dispose(),this.sbmConnection=null),this.sbmMonitor&&(this.sbmMonitor.dispose(),this.sbmMonitor=null),this.sbmQueue&&(this.sbmQueue.dispose(),this.sbmQueue=null)}},{key:"_processQueue",value:function(){var e=1e3*this.player.currentTime();this.sbmQueue.processQueue(e)}},{key:"_onSBMMessage",value:function(e){h.debug("COMPANION_AD",e.detail),this.player.trigger({type:o.default.COMPANION_AD,data:e.detail})}},{key:"_connectToNewSBM",value:function(e){var t=this,r=this._findSBMUrlForCurrentStream(e);r?(this._closeExistingSBMConnection(),h.debug("Connecting to new SBM: ",r),this.sbmQueue.reset(),this.sbmConnection=new d.default(r),this.sbmConnection.on(d.MESSAGE,function(e){return t.sbmQueue.enqueue(e.detail)})):h.warn("Can't find sbmUrl for current url: ",e)}},{key:"_closeExistingSBMConnection",value:function(){this.sbmConnection&&(this.sbmConnection.dispose(),this.sbmConnection=null)}},{key:"_initializeSBMSrcMonitor",value:function(){var t=this;this.sbmSrcMonitorStarted||(this.sbmSrcMonitorStarted=!0,this.sbmDelayTimer=setTimeout(function(){t.sbmDelayTimer=null,t.sbmMonitor=new c.default(t.player),t.sbmMonitor.on(c.SRC_CHANGE,function(e){return t._connectToNewSBM(e.detail)})},500))}},{key:"_findSBMUrlForCurrentStream",value:function(e){for(var t=this.player.options_.streams,r=0;r<t.length;r++){var i=t[r];if(i.url===e)return i.sbmUrl}}}],[{key:"init",value:function(){var e=this.options_.metadata;if((void 0===e?{}:e).streamProvider===u.TRITON_PROVIDER_NAME){h.debug("plugin enabled.");var t=new r(this);this.on(o.default.DISPOSE,function(){t.dispose()})}}}]),r}();videojs.registerPlugin("TritonSidebandMetadataPlugin",m.init);var b=m;r.default=b},{"./SidebandMetadataConnection":504,"./SidebandMetadataMonitor":505,"./SidebandMetadataQueue":506,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"app/events/player-events":381,"app/utils/Constant":441,"app/utils/log":464}],506:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.function.name"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.QUEUE_MESSAGE=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/utils/event-target")),c=new(i(e("app/utils/log")).default)("SidebandMetadataQueue"),h=["enqueue","processQueue"],f=function(e){function r(){var t;return(0,a.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this))).queue=[],h.forEach(function(e){return t[e]=t[e].bind((0,l.default)(t))}),t}return(0,d.default)(r,e),(0,n.default)(r,[{key:"enqueue",value:function(e){!function(e){return"ad"===e.name&&e.parameters&&(e.parameters.ad_vast||e.parameters.ad_vast_url||e.parameters.ad_url)}(e)||(c.debug("Enqueue: ",e),this.queue.push(e))}},{key:"reset",value:function(){this.queue.length=0}},{key:"processQueue",value:function(e){for(var t=this.queue[0];t&&t.timestamp<=e;)this.queue.shift(),c.debug("Queue Message: ",t),this.trigger(m,t),t=this.queue[0]}},{key:"dispose",value:function(){(0,o.default)((0,u.default)(r.prototype),"dispose",this).call(this),this.queue.length=0}}]),r}(p.default);var m="QUEUE_MESSAGE";r.QUEUE_MESSAGE=m;var b=f;r.default=b},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/event-target":458,"app/utils/log":464,"core-js/modules/es.function.name":205}],505:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.SRC_CHANGE=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/utils/event-target")),c=new(i(e("app/utils/log")).default)("SidebandMetadataMonitor"),h=function(e){function r(e){var t;return(0,a.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this)))._checkPlayerSrc=t._checkPlayerSrc.bind((0,l.default)(t)),t.player=e,t.previousPlayerSrc=null,t.checkTimer=setInterval(t._checkPlayerSrc,2e3),t.initialCheckTimer=setTimeout(t._checkPlayerSrc,0),t}return(0,d.default)(r,e),(0,n.default)(r,[{key:"dispose",value:function(){(0,o.default)((0,u.default)(r.prototype),"dispose",this).call(this),this.initialCheckTimer&&(clearTimeout(this.initialCheckTimer),this.initialCheckTimer=null),this.checkTimer&&(clearInterval(this.checkTimer),this.checkTimer=null)}},{key:"_checkPlayerSrc",value:function(){var e=this.player.currentSrc();this.previousPlayerSrc!==e&&(this.previousPlayerSrc=e,c.debug("New player src detected: ",e),this.trigger(f,e))}}]),r}(p.default),f="SRC_CHANGE";r.SRC_CHANGE=f;var m=h;r.default=m},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/event-target":458,"app/utils/log":464}],504:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.MESSAGE=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/utils/RetryController")),c=i(e("app/utils/event-target")),h=["connect","disconnectSidebandMetadata","_onMessage"],f=function(e){function r(e){var t;return(0,a.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this))).sbmUrl=e,t.eventSource=null,h.forEach(function(e){return t[e]=t[e].bind((0,l.default)(t))}),t.retryController=new p.default({name:"Sideband Metadata",tryCallback:t.connect,cleanupCallback:t.disconnectSidebandMetadata,maxRetryDelay:6e4}),t.retryController.retry(),t}return(0,d.default)(r,e),(0,n.default)(r,[{key:"connect",value:function(){this.eventSource=this._createEventSource(this.sbmUrl),this.eventSource.addEventListener("open",this.retryController.resetRetryDelay),this.eventSource.addEventListener("error",this.retryController.retry),this.eventSource.addEventListener("message",this._onMessage)}},{key:"disconnectSidebandMetadata",value:function(){this.eventSource&&(this.eventSource.close(),this.eventSource.removeEventListener("open",this.retryController.resetRetryDelay),this.eventSource.removeEventListener("error",this.retryController.retry),this.eventSource.removeEventListener("message",this._onMessage),this.eventSource=null)}},{key:"dispose",value:function(){(0,o.default)((0,u.default)(r.prototype),"dispose",this).call(this),this.retryController.dispose()}},{key:"_createEventSource",value:function(e){return new EventSource(e)}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);this.trigger(m,t)}}]),r}(c.default),m="MESSAGE";r.MESSAGE=m;var b=f;r.default=b},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/RetryController":446,"app/utils/event-target":458}],507:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=e("app/utils/Constant"),o=i(e("../../components/triton/CompanionAdComponent")),u=new s.default("TritonCompanionAdPlugin"),d=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"init",value:function(){var e=this.options_.metadata;(void 0===e?{}:e).streamProvider===l.TRITON_PROVIDER_NAME&&(u.debug("plugin enabled."),videojs.registerComponent("CompanionAdComponent",o.default))}}]),e}();videojs.registerPlugin("TritonCompanionAdPlugin",d.init);var p=d;r.default=p},{"../../components/triton/CompanionAdComponent":378,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/Constant":441,"app/utils/log":464}],378:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.parse-int"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/utils/log")),c=i(e("./BasicCompanionAdRenderer")),h=i(e("app/events/player-events")),f=new p.default("CompanionAdComponent"),m=videojs.getComponent("Component"),b="bvp-companion-ad--visible",v=["_onCompanionAd","_onTimeUpdate"],y=function(e){function i(e,t){var r;return(0,a.default)(this,i),r=(0,s.default)(this,(0,u.default)(i).call(this,e,t)),v.forEach(function(e){return r[e]=r[e].bind((0,l.default)(r))}),r.renderer=null,r.adExpireTime=1/0,r.player=e,r.player.on(h.default.COMPANION_AD,r._onCompanionAd),r.player.on(h.default.TIMEUPDATE,r._onTimeUpdate),r}return(0,d.default)(i,e),(0,n.default)(i,[{key:"createEl",value:function(){return(0,o.default)((0,u.default)(i.prototype),"createEl",this).call(this,"div",{className:"bvp-companion-ad"})}},{key:"dispose",value:function(){this._removeAd(),(0,o.default)((0,u.default)(i.prototype),"dispose",this).call(this)}},{key:"_onCompanionAd",value:function(e){var t=e.data,r=this._playerCurrentTime(),i=parseInt(t.parameters.cue_time_duration,10)||5e3,a=t.timestamp+i;a<r||(f.debug("Showing Companion Ad",t),this._removeAd(),this._showAd(t),this.adExpireTime=a)}},{key:"_onTimeUpdate",value:function(){var e=this._playerCurrentTime();this.adExpireTime<e&&this._removeAd()}},{key:"_playerCurrentTime",value:function(){return 1e3*this.player.currentTime()}},{key:"_showAd",value:function(e){e.parameters.ad_url&&(this.addClass(b),this.renderer=new c.default(this.el(),e),this.renderer.render())}},{key:"_removeAd",value:function(){this.removeClass(b),this.adExpireTime=1/0,this.renderer&&(this.renderer.dispose(),this.renderer=null)}}]),i}(m);r.default=y},{"./BasicCompanionAdRenderer":377,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381,"app/utils/log":464,"core-js/modules/es.parse-int":215}],377:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=new(i(e("app/utils/log")).default)("BasicCompanionAdRenderer"),l=function(){function r(e,t){(0,a.default)(this,r),this.containerEl=e,this.adData=t}return(0,n.default)(r,[{key:"render",value:function(){var e=this.adData.parameters.ad_url.split("|")[1];this.containerEl.innerHTML='<iframe class="'.concat("companion-ad-iframe",'" scrolling="no" src="').concat(e,'">')}},{key:"dispose",value:function(){s.debug("Removing companion Ad");var e=this.containerEl.querySelector(".companion-ad-iframe");e&&e.parentNode.removeChild(e)}}]),r}();r.default=l},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464,"core-js/modules/es.string.split":230}],503:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var n=i(e("@babel/runtime/helpers/asyncToGenerator")),s=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/defineProperty")),u=i(e("app/utils/log")),d=i(e("app/events/player-events")),p=i(e("../../components/transcript/TranscriptButton")),c=i(e("../closed-captions/videojs-vod-captions-helper")),h=new u.default("TranscriptPlugin"),f=function(){function t(e){(0,s.default)(this,t),(0,o.default)(this,"_player",void 0),this._player=e}var r,e;return(0,l.default)(t,[{key:"initialize",value:(e=(0,n.default)(a.default.mark(function e(){var t,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.getVttUrl(this._player);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this._fetchData(t);case 7:return r=e.sent,e.next=10,c.default.parseCaptionResponse(r);case 10:this._player._bbTranscript=e.sent,this._player.trigger(d.default.TRANSCRIPT_READY);case 12:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_fetchData",value:(r=(0,n.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent.text());case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})}],[{key:"register",value:function(){if(this.options_.useTranscriptPlugin)if(c.default.hasCaption(this.options_)){h.debug("Plugin enabled.");var e=new t(this);videojs.registerComponent("TranscriptButton",p.default),e.initialize()}else h.debug("No caption found. Plugin disabled.");else h.debug("Plugin disabled.")}}]),t}();videojs.registerPlugin("TranscriptPlugin",f.register);var m=f;r.default=m},{"../../components/transcript/TranscriptButton":376,"../closed-captions/videojs-vod-captions-helper":488,"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/regenerator":28,"app/events/player-events":381,"app/utils/log":464,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219,"regenerator-runtime/runtime":271}],376:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/events/player-events")),c=videojs.getComponent("Button"),h="blvs-transcript-button--on",f=["_toggleOn","_toggleOff","_show"],m=function(e){function i(e,t){var r;return(0,a.default)(this,i),r=(0,s.default)(this,(0,u.default)(i).call(this,e,t)),f.forEach(function(e){return r[e]=r[e].bind((0,l.default)(r))}),r._isTranscriptOn=!1,r.player_.on(p.default.INTERNAL_TRANSCRIPT_ON,r._toggleOn),r.player_.on(p.default.INTERNAL_TRANSCRIPT_OFF,r._toggleOff),r.player_.on(p.default.TRANSCRIPT_READY,r._show),r.player_.on(p.default.ENDED,r._toggleOff),r}return(0,d.default)(i,e),(0,n.default)(i,[{key:"buildCSSClass",value:function(){return"blvs-transcript-button ".concat((0,o.default)((0,u.default)(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this._isTranscriptOn=!this._isTranscriptOn,this._setState()}},{key:"_toggleOn",value:function(){this._isTranscriptOn||(this._isTranscriptOn=!0,this._setState())}},{key:"_toggleOff",value:function(){this._isTranscriptOn&&(this._isTranscriptOn=!1,this._setState())}},{key:"_show",value:function(){this.addClass("blvs-transcript-button--shown")}},{key:"_setState",value:function(){this._isTranscriptOn?(this.addClass(h),this.player_.trigger(p.default.TRANSCRIPT_ON)):(this.removeClass(h),this.player_.trigger(p.default.TRANSCRIPT_OFF))}}]),i}(c);(r.default=m).prototype.controlText_="Transcripts"},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381}],502:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.parse-int"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/events/player-events")),l=i(e("app/events/playlist-events")),o=i(e("app/events/ad-events")),u=i(e("app/utils/fullscreen")),d=i(e("app/lib/google-ads/ad-utils")),p=i(e("app/utils/load-timer")),c=i(e("app/utils/log")),h=i(e("app/utils/error-report")),f=window.BVP_GTM,m=new c.default("GoogleTagManagerPlugin"),b="initial",v="content",y="activate",g="chromecast-start",_="chromecast-stop",C={"ad-preroll":"preroll","ad-midroll":"midroll"},A=["_createAdEventHandler","_createContentEventHandler","_handleInitialEvent","_handleContentFirstPlay","_handleContentPause","_handleTimeUpdate","_handleTextTrackChange","_handleFullScreenChange","_handleRequestShare","_handleShareAction","_handleReplayAction","_setContinuousPlayStatus","_createEngagementHandler","_handlePlaylistSlideClick","_handleVolumeChange"],E=[25,50,75,100],P=function(){function r(e){var t=this;(0,a.default)(this,r),this.player=e,this.isContinuousPlay=!1,this.userOptions=e.options_.original_user_options,this.htmlChildId=this.userOptions.htmlChildId,this.hasBeenUmmuted=!1,A.forEach(function(e){t[e]=t[e].bind(t)}),e.on([o.default.AD_STARTED,s.default.PLAY],this._handleInitialEvent),e.on(o.default.AD_STARTED,this._createAdEventHandler(f.eventActions.PLAY)),e.on(o.default.AD_PAUSED,this._createAdEventHandler(f.eventActions.PAUSE)),e.on(o.default.AD_RESUMED,this._createAdEventHandler(f.eventActions.RESUME)),e.on(o.default.AD_COMPLETED,this._createAdEventHandler(f.eventActions.END)),e.on(s.default.PAUSE,this._handleContentPause),e.on(s.default.ENDED,this._createContentEventHandler(f.eventActions.END)),e.on(s.default.FULL_SCREEN_CHANGE,this._handleFullScreenChange),e.on(s.default.REQUEST_SHARE,this._handleRequestShare),e.on(s.default.SHARE_ACTION,this._handleShareAction),e.on(s.default.REPLAY,this._handleReplayAction),e.on(s.default.CONTINUOUS_PLAY_START,this._setContinuousPlayStatus),e.on(s.default.BVP_VOLUME_CHANGE,this._handleVolumeChange),e.on(s.default.TIMEUPDATE,this._handleTimeUpdate),e.on(s.default.MUTED_OVERLAY_CLICKED,this._createEngagementHandler(y)),e.on(s.default.START_CHROME_CAST,this._createEngagementHandler(g)),e.on(s.default.STOP_CHROME_CAST,this._createEngagementHandler(_)),e.on(l.default.SLIDE_CLICK,this._handlePlaylistSlideClick),e.on(s.default.TRANSCRIPT_ON,function(){return t._trackEvent({bvpEventAction:f.eventActions.UI_ACTION,bvpEventLabel:"transcript_on"})}),e.on(s.default.TRANSCRIPT_OFF,function(){return t._trackEvent({bvpEventAction:f.eventActions.UI_ACTION,bvpEventLabel:"transcript_off"})}),e.on(s.default.THEATER_MODE_ENTER_BUTTON_CLICK,function(){t._trackEvent({bvpEventAction:f.eventActions.CLICK,bvpEventLabel:"Theater_mode_on"})}),e.on(s.default.THEATER_MODE_OFF,function(){t._trackEvent({bvpEventAction:f.eventActions.CLICK,bvpEventLabel:"Theater_mode_off"})}),e.one(s.default.PLAY,this._handleContentFirstPlay),e.ready(function(){e.textTracks().on("change",t._handleTextTrackChange),p.default.getEnabled(t.htmlChildId)&&(p.default.trackLoadComplete(t.htmlChildId,p.default.loadTypes.PLAYER_INIT,p.default.loadStatus.COMPLETE),t._trackLoadTimes())})}return(0,n.default)(r,[{key:"_createEngagementHandler",value:function(e){var t=this;return function(){t._trackEvent({bvpEventAction:f.eventActions.CLICK,bvpEventLabel:e})}}},{key:"_handlePlaylistSlideClick",value:function(e){var t=e.data.itemPosition,r="up-next-".concat(t);this._trackEvent({bvpEventAction:f.eventActions.CLICK,bvpEventLabel:r})}},{key:"_setContinuousPlayStatus",value:function(){this.isContinuousPlay=!0}},{key:"_handleContentFirstPlay",value:function(){this._trackEvent({bvpEventAction:f.eventActions.PLAY,bvpEventLabel:v}),this.player.on(s.default.PLAY,this._createContentEventHandler(f.eventActions.RESUME))}},{key:"_handleContentPause",value:function(){this.player.ended()||this.contentPauseEventHandled||(this.contentPauseEventHandled=!0,this._trackEvent({bvpEventAction:f.eventActions.PAUSE,bvpEventLabel:v}))}},{key:"_handleTimeUpdate",value:function(){var e=this.player;if(!e.options_.live){var t=e.duration();if(t<=0)m.warn("Invalid video duration: ".concat(t));else{var r=e.currentTime()/t*100,i=E.length;this.markersCache=this.markersCache||{};for(var a=0;a<i;a++){var n=E[a];if(r<n)return;this.markersCache[n]||(this.markersCache[n]=!0,this._trackEvent({bvpEventAction:f.eventActions.COMPLETION,bvpEventLabel:n.toString()}))}}}}},{key:"_createContentEventHandler",value:function(e){var t=this;return function(){t._trackEvent({bvpEventAction:e,bvpEventLabel:v})}}},{key:"_createAdEventHandler",value:function(r){var i=this;return function(e){if(e.data){var t=e.data;i._trackEvent({bvpEventAction:r,bvpEventLabel:C[t.type],mediaDuration:1e3*t.duration})}else h.default.recordGenericError("Missing event data, cannot log action: ".concat(r))}}},{key:"_handleInitialEvent",value:function(){this.initEventHandled||(this.initEventHandled=!0,this._trackEvent({bvpEventAction:f.eventActions.PLAY,bvpEventLabel:b}))}},{key:"_handleTextTrackChange",value:function(){for(var e=this.player.textTracks(),t=!1,r=0,i=e.length;r<i;r++){var a=e[r];if("showing"===a.mode&&"captions"===a.kind){t=!0;break}}this._trackCaptionEvent(t)}},{key:"_handleFullScreenChange",value:function(){var e=u.default.isInFullScreen()?"fullscreenenter":"fullscreenexit";this._trackEvent({bvpEventAction:f.eventActions.UI_ACTION,bvpEventLabel:e})}},{key:"_handleRequestShare",value:function(){this._trackEvent({bvpEventAction:f.eventActions.UI_ACTION,bvpEventLabel:"shareopen"})}},{key:"_handleShareAction",value:function(e){var t=e&&e.data&&e.data.shareUrl;this._trackEvent({bvpEventAction:f.eventActions.UI_ACTION,bvpEventLabel:"shareaction",bvpLoaderUrl:t})}},{key:"_handleReplayAction",value:function(){this._trackEvent({bvpEventAction:f.eventActions.UI_ACTION,bvpEventLabel:"replayaction"})}},{key:"_trackLoadTimes",value:function(){var r=this,i=p.default.getLoadTimes(this.htmlChildId);Object.keys(i).forEach(function(e){var t=i[e];r._trackDevEvent({bvpEventAction:f.eventActions.LOAD_START,bvpEventLabel:e,bvpAbsoluteTime:t.startTime,bvpDeltaTime:t.startDeltaTime,bvpLoaderUrl:t.url,bvpTrackGA:!0}),r._trackDevEvent({bvpEventValue:parseInt(t.duration,10),bvpEventAction:f.eventActions.LOAD_END,bvpEventLabel:e,bvpAbsoluteTime:t.endTime,bvpDeltaTime:t.endDeltaTime,bvpDuration:t.duration,bvpLoaderUrl:t.url,bvpTrackGA:!0})})}},{key:"_trackEvent",value:function(e){var t=Object.assign(this._createCommonEventData(),this.userOptions.user_tracking_config,e);f.trackEvent(t)}},{key:"_trackDevEvent",value:function(e){var t=Object.assign(this._createCommonEventData(),this.userOptions.user_tracking_config,e);f.trackDevEvent(t)}},{key:"_trackCaptionEvent",value:function(e){this._trackEvent({bvpEventAction:f.eventActions.UI_ACTION,bvpEventLabel:e?"captionon":"captionoff"})}},{key:"_createCommonEventData",value:function(){var e=this.player,t=e.options_,r=(t.autoplayReportingValues||{}).analytics||{},i=t.metadata,a=t.live,n=Boolean(r.autoplay).toString(),s=(this.isContinuousPlay||Boolean(r.continuousPlay)).toString(),l=this._determineStartMutedState();return{mediaTitle:function(e,t){return e?t.form_type:t.title}(a,i),mediaProgram:i.show_name,mediaType:function(e,t){var r;if(e)return t.id.replace("_","-").toLowerCase();var i=t.form_type||"short-form",a=(null!==(r=t.contentCategory)&&void 0!==r?r:"").toLowerCase();return"web"===a||""===a?"vod-".concat(i):"".concat(a,"-").concat(i)}(a,i),niCodes:function(e){return(e.ni_codes||[]).join(",")}(i),bmmrId:i.id,mediaDuration:function(e,t){return e?0:t.duration}(a,i),mediaPublishedAt:function(e,t){return e?void 0:t.createdate}(a,i),mediaTech:e.techName_.toLowerCase(),mediaStartMuted:l,continuousPlay:s,autoplay:n,videoModule:"N/A"}}},{key:"_determineStartMutedState",value:function(){var e=this._isMuted();return!e||this.hasBeenUmmuted?"sound-activated":e&&this._hasPlayerStartedMuted()?"muted-bbg":"muted-browser"}},{key:"_isMuted",value:function(){var e=this.player;return d.default.isAdPlaying(e)?d.default.isAdMuted(e):e.muted()||0===e.volume()}},{key:"_hasPlayerStartedMuted",value:function(){return!!this.player.options_.start_muted}},{key:"_handleVolumeChange",value:function(e){var t=e.data.muted;this.hasBeenUmmuted||(this.hasBeenUmmuted=!t)}}],[{key:"init",value:function(){this.options_.use_google_tag_manager?new r(this):m.info("plugin disabled")}}]),r}();videojs.registerPlugin("GoogleTagManagerPlugin",P.init);var S=P;r.default=S},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/events/playlist-events":382,"app/lib/google-ads/ad-utils":399,"app/utils/error-report":457,"app/utils/fullscreen":459,"app/utils/load-timer":463,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.join":199,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.parse-int":215,"core-js/modules/es.regexp.to-string":223,"core-js/modules/es.string.replace":228,"core-js/modules/web.dom-collections.for-each":243}],501:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("../../components/theater-mode/TheaterMode")),o=i(e("app/events/player-events")),u=i(e("app/events/ad-events")),d=new s.default("TheaterModePlugin"),p=["_triggerDelayedEvent","_resetTheaterModeTrigger","_setContentPlayStatus","_onDispose"],c=function(){function r(e){var t=this;(0,a.default)(this,r),this._player=e,p.forEach(function(e){t[e]=t[e].bind(t)}),this._player.ready(function(){e.usingNativeControls()||(t._player.on(o.default.PLAY,t._setContentPlayStatus),t._player.on(o.default.DISPOSE,t._onDispose))})}return(0,n.default)(r,[{key:"_setContentPlayStatus",value:function(){this._isContentStarted||(this._isContentStarted=!0,this._triggerDelayedEvent())}},{key:"_triggerDelayedEvent",value:function(){var e=this;this._timeoutId=setTimeout(function(){e._player.off(u.default.AD_STARTED,e._resetTheaterModeTrigger),e._player.trigger(o.default.ENTER_THEATER_MODE)},1e4),this._player.one(u.default.AD_STARTED,this._resetTheaterModeTrigger)}},{key:"_resetTheaterModeTrigger",value:function(){clearTimeout(this._timeoutId),this._player.one(u.default.ALL_ADS_COMPLETED,this._triggerDelayedEvent)}},{key:"_onDispose",value:function(){clearTimeout(this._timeoutId)}}],[{key:"register",value:function(){if(this.options_.useTheaterModePlugin)return videojs.registerComponent("TheaterMode",l.default),new r(this);d.debug("Plugin disabled")}}]),r}();videojs.registerPlugin("TheaterModePlugin",c.register);var h=c;r.default=h},{"../../components/theater-mode/TheaterMode":373,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/log":464}],373:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits"));e("./TheaterModeTooltip"),e("./TheaterModeButton");var p=i(e("app/utils/fullscreen")),c=i(e("app/utils/LocalStorage")),h=i(e("app/events/player-events")),f=videojs.getComponent("Component"),m="bvp__tooltip-status",b="closed",v=["_setTooltipCloseStatus","_prepareTooltip","_closeTooltip","_fullScreenChange"];var y=function(e){function i(e,t){var r;return(0,a.default)(this,i),r=(0,s.default)(this,(0,u.default)(i).call(this,e,t)),v.forEach(function(e){return r[e]=r[e].bind((0,l.default)(r))}),c.default.get(m)!==b&&(r._tooltipComponent=r.addChild("TheaterModeTooltip"),r._tooltipComponent.on("close",r._setTooltipCloseStatus),e.on(h.default.ENTER_THEATER_MODE,r._prepareTooltip),e.on(h.default.THEATER_MODE_OFF,r._closeTooltip)),e.on(h.default.FULL_SCREEN_CHANGE,r._fullScreenChange),r}return(0,d.default)(i,e),(0,n.default)(i,[{key:"_fullScreenChange",value:function(){p.default.isInFullScreen()?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}},{key:"createEl",value:function(){return(0,o.default)((0,u.default)(i.prototype),"createEl",this).call(this,"div",{className:"blvs-theater-mode"})}},{key:"_prepareTooltip",value:function(){var e=this;this._showTooltipTimeoutId=setTimeout(function(){return e._tooltipComponent.show()},1e3),this.player_.on(h.default.DISPOSE,function(){return clearTimeout(e._showTooltipTimeoutId)})}},{key:"_setTooltipCloseStatus",value:function(){c.default.set(m,b)}},{key:"_closeTooltip",value:function(){clearTimeout(this._showTooltipTimeoutId),this._tooltipComponent.hide(),this._setTooltipCloseStatus()}}]),i}(f);r.default=y},{"./TheaterModeButton":374,"./TheaterModeTooltip":375,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381,"app/utils/LocalStorage":443,"app/utils/fullscreen":459}],375:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/assertThisInitialized")),u=i(e("@babel/runtime/helpers/get")),d=i(e("@babel/runtime/helpers/getPrototypeOf")),p=i(e("@babel/runtime/helpers/inherits")),n=videojs.getComponent("Component"),c="blvs-theater-mode-tooltip--hidden",h="blvs-theater-mode-tooltip__close",f=function(e){function n(){var e,t;(0,s.default)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=(0,l.default)(this,(e=(0,d.default)(n)).call.apply(e,[this].concat(i))))._closeTooltip=t._closeTooltip.bind((0,o.default)(t)),t.$(".".concat(h)).addEventListener("click",t._closeTooltip),t}return(0,p.default)(n,e),(0,a.default)(n,[{key:"createEl",value:function(){return(0,u.default)((0,d.default)(n.prototype),"createEl",this).call(this,"div",{className:"blvs-theater-mode-tooltip ".concat(c),innerHTML:'\n                <div class="blvs-theater-mode-tooltip__content">\n                    <span class="blvs-theater-mode-tooltip__title">You\'re in theater mode.</span>\n                    <span class="blvs-theater-mode-tooltip__description">To change streams, turn off theater mode.</span>\n                </div>\n                <div class="blvs-theater-mode-tooltip__close-container">\n                    <button class="'.concat(h,'"><span class="vjs-control-text">Close</span></button>                \n                </div>\n            ')})}},{key:"show",value:function(){return this.removeClass(c),this}},{key:"hide",value:function(){return this.addClass(c),this}},{key:"_closeTooltip",value:function(){this.trigger("close"),this.hide()}}]),n}(n);videojs.registerComponent("TheaterModeTooltip",f);var m=f;r.default=m},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"core-js/modules/es.array.concat":193}],374:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/events/player-events")),c=videojs.getComponent("Button"),h="blvs-theater-mode-button--on",f=["_enterTheaterMode","_exitTheaterMode"],m=function(e){function i(e,t){var r;return(0,a.default)(this,i),(r=(0,s.default)(this,(0,u.default)(i).call(this,e,t)))._isTheaterModeButtonClicked=!1,r._isTheaterModeOn=!1,f.forEach(function(e){r[e]=r[e].bind((0,l.default)(r))}),e.on(p.default.ENTER_THEATER_MODE,function(){r._isTheaterModeButtonClicked||r._enterTheaterMode()}),r}return(0,d.default)(i,e),(0,n.default)(i,[{key:"buildCSSClass",value:function(){return"blvs-theater-mode-button blvs-theater-mode-button--shown ".concat((0,o.default)((0,u.default)(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this._isTheaterModeButtonClicked=!0,this._isTheaterModeOn?this._exitTheaterMode():(this.player_.trigger(p.default.THEATER_MODE_ENTER_BUTTON_CLICK),this._enterTheaterMode())}},{key:"_enterTheaterMode",value:function(){this.addClass(h),this.player_.trigger(p.default.THEATER_MODE_ON),this._isTheaterModeOn=!0}},{key:"_exitTheaterMode",value:function(){this.removeClass(h),this.player_.trigger(p.default.THEATER_MODE_OFF),this._isTheaterModeOn=!1}}]),i}(c);r.default=m,videojs.registerComponent("TheaterModeButton",m),m.prototype.controlText_="Theater Mode"},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381}],499:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("./videojs-share-button")),n=i(e("./videojs-share-overlay")),s=i(e("app/utils/utils")),l=i(e("app/events/player-events")),o=new(i(e("app/utils/log")).default)("ShareControl");function u(){var t=this;t.options_.use_share_overlay&&function(e){if(s.default.isEmptyObject(e))return!1;return!(!e.bitly_url&&!e.canonical_url)}(t.options_.share_metadata)?(videojs.registerComponent("ShareOverlay",n.default),videojs.registerComponent("ShareButton",a.default),t.on(l.default.READY,function(){var e=t.getChild("ShareOverlay");t.controlBar.getChild("shareButton").on(["click","touchstart"],function(){e.toggleOverlay.call(e),t.trigger(l.default.REQUEST_SHARE)})})):o.debug("Share control disabled. use_share_overlay: ".concat(t.options_.use_share_overlay,", metadata: "),t.options_.share_metadata)}videojs.registerPlugin("ShareControl",u);var d=u;r.default=d},{"./videojs-share-button":498,"./videojs-share-overlay":500,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464,"app/utils/utils":472}],500:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),H=i(e("app/utils/css-helpers")),z=i(e("app/events/player-events")),G=i(e("app/utils/OverlayFocusHandler")),W=e("../../utils/serverUrlUtils"),d=videojs.getComponent("Component"),Y="blvs-share-overlay__line",Q="blvs-share-overlay__title",K="blvs-share-overlay__share-link",X="vjs-hidden";var p=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,n.default)(t,[{key:"createEl",value:function(){var e=this,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("input"),a=document.createElement("button"),n=["blvs-share-overlay",X],s="blvs-video-permalink-".concat(this.player_.options_.id),l=this.playerOptions.metadata.live,o=this.playerOptions.metadata.title,u=t.cloneNode(!1);l&&(n.push("blvs-share-overlay__live"),o="Bloomberg TV"),H.default.addClassList(u,n);var d=t.cloneNode(!1);H.default.addClass(d,Y);var p=a.cloneNode(!1),c=r.cloneNode(!1),h=document.createTextNode("Close");H.default.addClass(c,"vjs-control-text"),H.default.addClass(p,"blvs-share-overlay__close"),p.addEventListener("click",this.toggleOverlay.bind(this)),u.appendChild(p);var f=t.cloneNode(!1);H.default.addClass(f,"blvs-share-overlay__share-controls"),u.appendChild(f);var m=t.cloneNode(!1),b=document.createTextNode("Share");H.default.addClass(m,Q);var v=a.cloneNode(!1),y=[K,K+"-facebook"];H.default.addClassList(v,y),v.setAttribute("aria-label","Facebook"),v.setAttribute("title","Facebook"),v.addEventListener("click",this.socialShareClickHandlerFor("facebook",o));var g=a.cloneNode(!1),_=[K,K+"-twitter"];H.default.addClassList(g,_),g.setAttribute("aria-label","Twitter"),g.setAttribute("title","Twitter"),g.addEventListener("click",this.socialShareClickHandlerFor("twitter",o));var C=a.cloneNode(!1),A=[K,K+"-linkedin"];H.default.addClassList(C,A),C.setAttribute("aria-label","Linkedin"),C.setAttribute("title","Linkedin"),C.addEventListener("click",this.socialShareClickHandlerFor("linkedin",o));var E=a.cloneNode(!1),P=[K,K+"-email"];H.default.addClassList(E,P),E.setAttribute("aria-label","Email"),E.setAttribute("title","Email"),E.addEventListener("click",this.socialShareClickHandlerFor("email",o)),f.appendChild(m),f.appendChild(d);var S=document.createElement("hr");if(H.default.addClassList(S,["blvs-share-overlay__divider","blvs-hide-on-mobile"]),f.appendChild(S),!l){var T=t.cloneNode(!1),k="".concat(this.id(),"__embed-label-text");H.default.addClassList(T,[Y,"blvs-hide-on-mobile"]);var w=t.cloneNode(!1),j=document.createElement("Label");j.textContent="Embed";var R="".concat(this.id(),"__embed-label");w.setAttribute("id",R),H.default.addClassList(w,[Q,"blvs-hide-on-mobile"]),f.appendChild(w),w.appendChild(j);var D=i.cloneNode(!1);H.default.addClassList(D,["blvs-share-overlay__embed-input","blvs-share-overlay__embed-input--embed"]);var I=this.playerOptions,O=I.metadata.id,L=I.serviceEnv,M=I._devServerUrl,U=function(e){return'<iframe src="'.concat(e,'" allowscriptaccess="always" frameborder="0"></iframe>')}((0,W.getEmbedIframeUrl)(O,L,M));D.setAttribute("type","text"),D.setAttribute("id",k),D.setAttribute("readOnly",""),D.setAttribute("size",35),D.setAttribute("value",U),D.setAttribute("aria-labelledby",R),D.addEventListener("click",function(){return e.player_.trigger({type:z.default.SHARE_ACTION,data:{shareType:"embed-text",shareUrl:U}})}),j.setAttribute("for",k),f.appendChild(T),T.appendChild(D);var x=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.bitly_url||e.canonical_url}(this.playerOptions.share_metadata);if(x){var N=t.cloneNode(!1),B="".concat(this.id(),"__permalink-label");N.setAttribute("id",B),H.default.addClassList(N,[Y,"blvs-hide-on-mobile"]);var V=t.cloneNode(!1),q=document.createElement("Label");q.textContent="Permalink",H.default.addClassList(V,[Q,"blvs-hide-on-mobile"]),f.appendChild(V),V.appendChild(q);var F=i.cloneNode(!1);H.default.addClassList(F,["blvs-share-overlay__embed-input","blvs-share-overlay__embed-input--permalink"]),F.setAttribute("id",s),F.setAttribute("type","text"),F.setAttribute("readOnly",""),F.setAttribute("size",35),F.setAttribute("value",x),F.setAttribute("aria-labelledby",B),F.addEventListener("click",function(){return e.player_.trigger({type:z.default.SHARE_ACTION,data:{shareType:"permalink-text",shareUrl:x}})}),q.setAttribute("for",s),f.appendChild(N),N.appendChild(F),N=F=q=V=null}f=T=j=w=D=null}return c.appendChild(h),p.appendChild(c),d.appendChild(v),d.appendChild(g),d.appendChild(C),d.appendChild(E),m.appendChild(b),S=d=c=p=h=m=b=E=C=g=v=null,this._focusHandler=new G.default(u),u}},{key:"socialShareClickHandlerFor",value:function(e,t){var r=this,i=this.shareUrlFor(e,t);return function(){-1<i.indexOf("mailto")?window.location.href=i:window.open(i,e.toUpperCase(),"width=1000,height=500"),r.player_.trigger({type:z.default.SHARE_ACTION,data:{shareType:e,shareUrl:i}})}}},{key:"shareUrlFor",value:function(e,t){var r=this.playerOptions.share_metadata||{},i=encodeURI(r.bitly_url||r.canonical_url||"");if("twitter"==e){var a=r.twitter_handle?"&via="+r.twitter_handle:"";return"http://twitter.com/share?text=".concat(t,"&url=").concat(i).concat(a)}if("facebook"==e)return"https://www.facebook.com/sharer/sharer.php?u=".concat(i);if("linkedin"!=e)return"email"==e?"mailto:?subject=".concat(t,"&body=").concat(t,"%0D%0A").concat(i):void 0;var n=r.twitter_handle?"&source=".concat(r.twitter_handle):"";return"http://www.linkedin.com/shareArticle?mini=true&url=".concat(i,"&title=").concat(t).concat(n)}},{key:"toggleOverlay",value:function(){if(H.default.hasClass(this.el_,X))return H.default.removeClass(this.el_,X),this._focusHandler.focus(),void this.player_.pause();this._focusHandler.unfocus(),H.default.addClass(this.el_,X),this.player_.trigger(z.default.DISMISS_SHARE),this.player_.play()}},{key:"buildCSSClass",value:function(){return"blvs-share-overlay "+(0,l.default)((0,o.default)(t.prototype),"buildCSSClass",this).call(this)}},{key:"playerOptions",get:function(){return this.player_.options_}}]),t}(d);r.default=p},{"../../utils/serverUrlUtils":469,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381,"app/utils/OverlayFocusHandler":444,"app/utils/css-helpers":453,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.index-of":197}],498:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,n.default)(t,[{key:"buildCSSClass",value:function(){return"blvs-share-button "+(0,l.default)((0,o.default)(t.prototype),"buildCSSClass",this).call(this)}}]),t}(videojs.getComponent("Button"));d.prototype.controlText_="Share";var p=d;r.default=p},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],497:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/events/player-events")),o=i(e("app/events/ad-events")),u=new s.default("PlayerToutPlugin"),d=["_triggerDelayedEvent","_resetToutTrigger","_setContentPlayStatus","_onDispose"],p=function(){function r(e){var t=this;(0,a.default)(this,r),this._player=e,d.forEach(function(e){t[e]=t[e].bind(t)}),this._player.ready(function(){t._player.on(l.default.PLAY,t._setContentPlayStatus),t._player.on(l.default.DISPOSE,t._onDispose)})}return(0,n.default)(r,[{key:"_setContentPlayStatus",value:function(){this._isContentStarted||(this._isContentStarted=!0,this._triggerDelayedEvent())}},{key:"_triggerDelayedEvent",value:function(){var e=this;this._timeoutId=setTimeout(function(){e._player.off(o.default.AD_STARTED,e._resetToutTrigger),e._player.trigger(l.default.PLAYER_TOUT_ON)},2e3),this._player.one(o.default.AD_STARTED,this._resetToutTrigger)}},{key:"_resetToutTrigger",value:function(){clearTimeout(this._timeoutId),this._player.one(o.default.ALL_ADS_COMPLETED,this._triggerDelayedEvent)}},{key:"_onDispose",value:function(){clearTimeout(this._timeoutId)}}],[{key:"register",value:function(){if(this.options_.usePlayerToutPlugin)return new r(this);u.debug("Plugin disabled")}}]),r}();videojs.registerPlugin("PlayerToutPlugin",p.register);var c=p;r.default=c},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/log":464}],496:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/defineProperty")),l=i(e("./GeneralHlsFallbackStrategy")),o=i(e("./TritonHlsFallbackStrategy")),u=e("app/utils/Constant"),d=i(e("app/events/player-events")),p=i(e("app/utils/log")),c=i(e("app/utils/error-report")),h=new p.default("RecoverHlsError"),f=["onPlayerReady","onHlsBridgeFatalError","onWatchdogReload"],m="The Media Player Encountered an Error, Please Reload the Web Page and Try Again",b=function(){function i(e,t){var r=this;(0,a.default)(this,i),(0,s.default)(this,"player",void 0),(0,s.default)(this,"recoveryInProgress",void 0),(0,s.default)(this,"fallbackStrategy",void 0),this.recoveryInProgress=!1,this.player=e,this.fallbackStrategy=t,f.forEach(function(e){r[e]=r[e].bind(r)}),this.player.on(d.default.READY,this.onPlayerReady),this.player.on(d.default.WATCHDOG_RELOAD,this.onWatchdogReload)}return(0,n.default)(i,[{key:"onPlayerReady",value:function(){this.player.tech_.on(d.default.HLS_BRIDGE_FATAL_ERROR,this.onHlsBridgeFatalError)}},{key:"onWatchdogReload",value:function(){h.info("onWatchdogReload"),this.recoverStream()}},{key:"onHlsBridgeFatalError",value:function(){h.info("onHlsBridgeFatalError"),this.recoverStream()}},{key:"recoverStream",value:function(){var r=this,i=function(e){var t=e.tech_;return t&&t.hls_?t.hls_:null}(this.player);return i?this.recoveryInProgress?void h.debug("Recovery in progress. Ignoring."):(this.recoveryInProgress=!0,this.fallbackStrategy.generateStreamList().then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(r.recoveryInProgress=!1,e.length<=0)return Promise.reject("error_no_hls_stream");h.info("Attempting to recover streams",e);var t=!r.player.paused();i.stopLoad(),r.player.src(e),i.recoverMediaError(),i.startLoad(),t&&r.player.play()}).catch(function(e){r.recoveryInProgress=!1,v(r.player,e)})):(v(this.player,"error_no_hls_tech"),void c.default.recordHLSError(h,"Cannot recover from error. Can't find Hls tech on the player."))}}],[{key:"init",value:function(){var e=this;if(e.options_.use_recover_hls){var t=e.options_.metadata,r=new((void 0===t?{}:t).streamProvider===u.TRITON_PROVIDER_NAME?o.default:l.default)(e);new i(e,r),e.on(d.default.DISPOSE,function(){r.dispose()})}else h.info("plugin disabled")}}]),i}();function v(e,t){!function(e){e.error(m)}(e),function(e,t){e.trigger({type:d.default.FATAL_ERROR,error:t})}(e,t)}videojs.registerPlugin("RecoverHlsError",b.init);var y=b;r.default=y},{"./GeneralHlsFallbackStrategy":491,"./TritonHlsFallbackStrategy":492,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/Constant":441,"app/utils/error-report":457,"app/utils/log":464,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219}],492:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/lib/projector-settings-js/TritonStreamProvider")),l=i(e("app/utils/RetryController")),o=e("app/utils/Constant"),u=i(e("app/events/player-events")),d=i(e("app/utils/log")),p=i(e("app/utils/error-report")),c=new d.default("TritonHlsFallbackStrategy"),h=["_fetchNewStreamList","_onTimeUpdate"];function f(e){return e.map(function(e){return{src:e.url,type:e.type}})}var m=function(){function r(e){var t=this;(0,a.default)(this,r),this.previousTime=0,this.player=e,h.forEach(function(e){return t[e]=t[e].bind(t)}),this.retryController=new l.default({name:"Triton Recover",tryCallback:this._fetchNewStreamList,maxRetryDelay:4e3}),this.player.on(u.default.TIMEUPDATE,this._onTimeUpdate)}return(0,n.default)(r,[{key:"dispose",value:function(){this.player.off(u.default.TIMEUPDATE,this._onTimeUpdate),this.retryController.dispose(),this.retryController=null}},{key:"generateStreamList",value:function(){var t=this;return this._getRemainingStreams().then(function(e){return 0<e.length?f(e):t.retryController.retry()})}},{key:"_onTimeUpdate",value:function(){var e=this.player.currentTime();this.previousTime!==e&&(this.previousTime=e,this.retryController.resetRetryDelay())}},{key:"_fetchNewStreamList",value:function(){c.debug("Fetching new stream list from provision API.");var t=this.player.options_,e=t.original_user_options.htmlChildId,r=t.metadata.streamProviderConfig;return s.default.fetchStreamInfo(r,e).then(function(e){return t.streams=e,t.filteredStreams=[],f(e)},function(){return Promise.resolve([])})}},{key:"_getRemainingStreams",value:function(){var e=this.player.options_,t=e.filteredStreams=e.filteredStreams||[],r=this.player.currentSrc(),i=e.streams;if(!i.some(function(e){return e.url===r}))return p.default.recordHLSError(c,"Could not find current source url ".concat(r," in original streams"),i),Promise.reject(o.CURRENT_STREAM_NOT_FOUND);t.push(r);var a=i.filter(function(e){return t.indexOf(e.url)<0});return Promise.resolve(a)}}]),r}();r.default=m},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/lib/projector-settings-js/TritonStreamProvider":419,"app/utils/Constant":441,"app/utils/RetryController":446,"app/utils/error-report":457,"app/utils/log":464,"core-js/modules/es.array.filter":194,"core-js/modules/es.array.index-of":197,"core-js/modules/es.array.map":201,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219}],491:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.find"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.includes"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.streamToSource=void 0;var p=i(e("@babel/runtime/regenerator")),c=i(e("@babel/runtime/helpers/toConsumableArray"));e("regenerator-runtime/runtime");function h(e){return{type:e.type,src:e.url}}var a=i(e("@babel/runtime/helpers/asyncToGenerator")),n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/defineProperty")),f=e("app/utils/Constant"),m=i(e("./videojs-hls-bridge")),o=i(e("app/utils/log")),b=i(e("app/utils/error-report")),u=i(e("app/events/player-events")),v=new o.default("GeneralHlsFallbackStrategy"),y=["_onTimeUpdate"];r.streamToSource=h;var d=function(){function t(e){var d=this;(0,n.default)(this,t),(0,l.default)(this,"player",void 0),(0,l.default)(this,"previousTime",void 0),(0,l.default)(this,"streamRetryDelay",void 0),(0,l.default)(this,"generateStreamList",(0,a.default)(p.default.mark(function e(){var t,r,i,a,n,s,l,o,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.default.getSourceType(),r=d.player.currentSrc(),i=d.player.options_.originalStreams||[],a=d.player.options_.filteredStreams||[],n=[].concat((0,c.default)(d.player.currentSources()),(0,c.default)(i.map(h))).filter(function(e){return e.type===t&&!a.includes(e)}),s=n.find(function(e){return e.src===r})){e.next=9;break}throw b.default.recordHLSError(v,"Could not find current source url ".concat(r," in original streams"),n),f.CURRENT_STREAM_NOT_FOUND;case 9:if(l=[].concat((0,c.default)(a),(0,c.default)(d.player.options_.isPlayingDai?[]:[s])),o=n.filter(function(e){return e.src!==r}),d._resetDai(),0===o.length)return v.warn("Ran out of original streams. Recycling filteredStreams and delaying ".concat(d.streamRetryDelay,"ms until next retry cycle begins")),d.player.options_.filteredStreams=[],u=d._calculateAndGetDelay(),e.next=18,d._delay(u);e.next=19;break;case 18:return e.abrupt("return",l);case 19:return d.player.options_.filteredStreams=l,e.next=22,d._delay(0);case 22:return e.abrupt("return",o);case 23:case"end":return e.stop()}},e)}))),this.player=e,y.forEach(function(e){return d[e]=d[e].bind(d)}),this.player.on(u.default.TIMEUPDATE,this._onTimeUpdate),this.previousTime=0,this.streamRetryDelay=1e3}return(0,s.default)(t,[{key:"_resetDai",value:function(){this.player.options_.originalStreams=[],this.player.options_.isPlayingDai=!1}},{key:"_delay",value:function(t){return new Promise(function(e){return setTimeout(e,t)})}},{key:"_calculateAndGetDelay",value:function(){if(this.streamRetryDelay<6e4){var e=this.streamRetryDelay;return this.streamRetryDelay=2*this.streamRetryDelay,e}return 6e4}},{key:"_onTimeUpdate",value:function(){var e=this.player.currentTime();this.previousTime!==e&&(this.previousTime=e,this.streamRetryDelay=1e3)}},{key:"dispose",value:function(){}}]),t}();r.default=d},{"./videojs-hls-bridge":493,"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/toConsumableArray":25,"@babel/runtime/regenerator":28,"app/events/player-events":381,"app/utils/Constant":441,"app/utils/error-report":457,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.filter":194,"core-js/modules/es.array.find":195,"core-js/modules/es.array.includes":196,"core-js/modules/es.array.map":201,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219,"core-js/modules/es.string.includes":224,"regenerator-runtime/runtime":271}],493:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.parse-int"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/createClass")),p=i(e("@babel/runtime/helpers/inherits")),c=i(e("./videojs-hls-tag-parser")),h=i(e("app/events/player-events")),a=i(e("./videojs-hls-cue-handler")),f=i(e("app/events/ad-events")),m=i(e("app/utils/log")),b=e("app/utils/Constant"),v=i(e("lodash.debounce")),y=videojs.getTech("Tech"),g=videojs.getTech("Html5"),_=b.MPEG_STREAM_TYPE,C=new m.default("HlsjsBridge"),A=["onMediaAttached","onManifestParsed","onFragLoaded","onFragChanged","onError","createTextTrack","startLoad","onLevelLoaded","duration"],E={cueHandler:a.default},P=function(e){function a(e){var t;(0,n.default)(this,a),(t=(0,s.default)(this,(0,u.default)(a).call(this,e))).numMediaErrorRetries=0,t.lastSource="",t.lastBitrateReported=null,t.hasLoadedSource=!1,t.el_.tech=(0,l.default)(t),A.forEach(function(e){t[e]=t[e].bind((0,l.default)(t))});var r=Object.assign({},E,e.hlsConfig);t.hls_=new Hls(r),t.hls_.on(Hls.Events.MEDIA_ATTACHED,t.onMediaAttached),t.hls_.on(Hls.Events.MANIFEST_PARSED,t.onManifestParsed),t.hls_.on(Hls.Events.FRAG_CHANGED,t.onFragChanged),t.hls_.on(Hls.Events.LEVEL_LOADED,t.onLevelLoaded),t.hls_.on(Hls.Events.FRAG_LOADED,t.onFragLoaded),t.hls_.on(Hls.Events.ERROR,t.onError),t.hls_.attachMedia(t.el_);var i=t.createTextTrack;return t.hls_.coreComponents&&t.hls_.coreComponents.forEach(function(e){e.createTextTrack&&(e.createTextTrack=i)}),t.options_.source&&t.src(t.options_.source.src),e.__disableDebounceForTesting||(t.dispatchHlsBridgeError=(0,v.default)(t.dispatchFatalHlsBridgeError,100)),t.on(f.default.AD_ALMOST_FINISHED,t.startLoad),t}return(0,p.default)(a,e),(0,d.default)(a,null,[{key:"isSupported",value:function(){return Hls.isSupported()}},{key:"canPlaySource",value:function(e){return!(!e||e.type!==_)&&Hls.isSupported()}},{key:"getSourceType",value:function(){return _}}]),(0,d.default)(a,[{key:"createTextTrack",value:function(e,t,r){return this.addTextTrack(e,"english",r)}},{key:"onMediaAttached",value:function(){this.triggerReady()}},{key:"onLevelLoaded",value:function(e,t){this._isLive=t.details.live}},{key:"duration",value:function(){return this._isLive?1/0:this.el_.duration}},{key:"onManifestParsed",value:function(){this.player_.options_.autoplay&&this.player_.play()}},{key:"onFragLoaded",value:function(e,t){var r=t.frag,i=c.default.extractCueFrom(r);i&&i.event===h.default.HLS_CUE_OUT&&this.trigger({type:h.default.HLS_CUE_OUT_LOADED,data:i})}},{key:"onFragChanged",value:function(e,t){var r=t.frag,i=c.default.extractCueFrom(r);if(i&&this.trigger({type:i.event,data:i}),this.hls_&&this.hls_.levels){var a=parseInt(this.hls_.levels[r.level].bitrate,10);a!==this.lastBitrateReported&&(this.trigger({type:h.default.BITRATE_CHANGE,newBitrate:a}),this.lastBitrateReported=a)}}},{key:"currentSrc",value:function(){return this.hls_?this.hls_.url:(0,o.default)((0,u.default)(a.prototype),"currentSrc",this).call(this)}},{key:"setSrc",value:function(e){this.lastSource=e,this.numMediaErrorRetries=0,this.hls_&&this.hls_.loadSource(e)}},{key:"pause",value:function(){this._removeAutoplayOnManifestParsedHandler(),(0,o.default)((0,u.default)(a.prototype),"pause",this).call(this)}},{key:"play",value:function(){this.startLoad(),(0,o.default)((0,u.default)(a.prototype),"play",this).call(this)}},{key:"startLoad",value:function(){this.hasLoadedSource||(this.hasLoadedSource=!0,this.hls_.startLoad())}},{key:"onError",value:function(e,t){t.fatal&&this.handleFatalError(t),C.warn("".concat(t.type," - ").concat(t.details,". Fatal: ").concat(t.fatal)),this.broadcastHlsError(t)}},{key:"handleFatalError",value:function(e){switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:this.handleNetworkError();break;case Hls.ErrorTypes.MEDIA_ERROR:this.handleMediaError();break;default:this.dispatchFatalHlsBridgeError()}}},{key:"broadcastHlsError",value:function(e){this.trigger({type:h.default.HLS_BRIDGE_ERROR,data:e})}},{key:"handleNetworkError",value:function(){C.warn("Network error: retrying to load same manifest"),this.dispatchFatalHlsBridgeError()}},{key:"handleMediaError",value:function(){if(this.numMediaErrorRetries<1)return C.warn("Media error: attempting to get hls to recover from fatal media error"),this.hls_.recoverMediaError(),void this.numMediaErrorRetries++;this.dispatchFatalHlsBridgeError()}},{key:"dispatchFatalHlsBridgeError",value:function(){this.trigger(h.default.HLS_BRIDGE_FATAL_ERROR)}},{key:"dispose",value:function(){this._removeAutoplayOnManifestParsedHandler(),this.hls_.off(Hls.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls_.off(Hls.Events.ERROR,this.onError),this.hls_.off(Hls.Events.LEVEL_LOADED,this.onLevelLoaded),this.hls_.destroy(),(0,o.default)((0,u.default)(a.prototype),"dispose",this).call(this)}},{key:"_removeAutoplayOnManifestParsedHandler",value:function(){this.hls_.off(Hls.Events.MANIFEST_PARSED,this.onManifestParsed)}}]),a}(g);y.registerTech("Hlsjs",P),videojs.options.techOrder.push("Hlsjs");var S=P;r.default=S},{"./videojs-hls-cue-handler":494,"./videojs-hls-tag-parser":495,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/Constant":441,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.object.assign":207,"core-js/modules/es.parse-int":215,"core-js/modules/web.dom-collections.for-each":243,"lodash.debounce":261}],495:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/slicedToArray")),l=i(e("app/events/player-events")),o="EXT-X-CUE-OUT",u="EXT-X-CUE-IN";var a={extractCueFrom:function(e){var t=e.tagList;if(!t)return null;for(var r=0;r<t.length;r++){var i=t[r],a=i[0]||"",n=i[1]||"";switch(a){case o:return Object.assign({event:l.default.HLS_CUE_OUT,type:o},(void 0,n.split(",").reduce(function(e,t){var r=t.split("="),i=(0,s.default)(r,2),a=i[0],n=i[1];return e[a.toLowerCase()]=n,e},{})));case u:return{event:l.default.HLS_CUE_IN,type:u}}}return null}};r.default=a},{"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/slicedToArray":23,"app/events/player-events":381,"core-js/modules/es.object.assign":207,"core-js/modules/es.string.split":230}],494:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.splice"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),h=i(e("app/utils/projector-utils"));var s=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"newCue",value:function(e,t,r,i){!function(e){if(e&&e.cues&&1e3<=e.cues.length){var t=e.cues.length-1e3+1;e.cues_.splice(0,t),e.cues.setCues_(e.cues_)}}(e);for(var a=window.vttjs?window.vttjs.VTTCue:window.VTTCue||window.TextTrackCue,n=0;n<i.rows.length;n++){var s=i.rows[n],l=!0,o=0,u="";if(!s.isEmpty()){for(var d=0;d<s.chars.length;d++)s.chars[d].uchar.match(/\s/)&&l?o++:(u+=s.chars[d].uchar,l=!1);var p=new a(s.cueStartTime=t,r,u.trim());16<=o?o--:o++;var c=h.default.isFirefox();p.line=c?n+1:7<n?n-2:n+1,p.align="left",p.positionAlign="left",p.position=Math.max(0,Math.min(100,o/32*100+(c?50:0))),e.addCue(p)}}}}]),e}();r.default=s},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/projector-utils":466,"core-js/modules/es.array.splice":204,"core-js/modules/es.string.match":226,"core-js/modules/es.string.trim":232}],490:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/defineProperty")),l=i(e("app/utils/fullscreen")),o=i(e("app/utils/OverlayFocusHandler")),u=i(e("app/events/player-events")),d=new(i(e("app/utils/log")).default)("FullscreenAccessibilityPlugin"),p=function(){function r(e){var t=this;(0,a.default)(this,r),(0,s.default)(this,"_player",void 0),(0,s.default)(this,"_focusHandler",void 0),(0,s.default)(this,"_fullScreenChange",function(){l.default.isInFullScreen()?t._focusHandler.focus():t._focusHandler.unfocus()}),(0,s.default)(this,"dispose",function(){t._focusHandler.unfocus(),t._player.off(u.default.PLAY,t._fullScreenChange),t._player.off(u.default.FULL_SCREEN_CHANGE,t._fullScreenChange)}),this._player=e,this._player.on(u.default.DISPOSE,this.dispose),this._focusHandler=new o.default(this._player.el_),this._player.ready(function(){t._player.on(u.default.PLAY,t._fullScreenChange)}),this._player.on(u.default.FULL_SCREEN_CHANGE,this._fullScreenChange)}return(0,n.default)(r,null,[{key:"register",value:function(){if(this.options_.useFullscreenControlPlugin)return new r(this);d.info("plugin disabled")}}]),r}();r.default=p,videojs.registerPlugin("FullscreenAccessibilityPlugin",p.register)},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/OverlayFocusHandler":444,"app/utils/fullscreen":459,"app/utils/log":464}],444:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.getFocusableElements=d,r.default=void 0;var a=i(e("@babel/runtime/helpers/slicedToArray")),n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=e("./KeyCodes"),o=["a[href]","button",'input[type="checkbox"]','input[type="password"]','input[type="radio"]','input[type="submit"]','input[type="text"]','input[type="reset"]',"select","textarea","[tabindex]"].map(function(e){return e+':not([tabindex^="-"])'}).join(", ").trim(),u=function(e){var t=window.getComputedStyle(e);return 0<e.offsetWidth&&0<e.offsetHeight&&"hidden"!==t.visibility&&"0"!==t.opacity&&"none"!==t["pointer-events"]};function d(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=e.querySelectorAll("".concat(o).concat(t)),i=[],a=0;a<r.length;a++){var n=r[a];u(n)&&i.push(n)}return i}var p=function(){function t(e){(0,n.default)(this,t),this._overlayEl=e,this._handleKeyDown=this._handleKeyDown.bind(this)}return(0,s.default)(t,[{key:"_hasFocusableElements",value:function(){return this._focusableEls&&this._focusableEls.length}},{key:"focus",value:function(){if(this._focusableEls=d(this._overlayEl),this._hasFocusableElements()){var e=(0,a.default)(this._focusableEls,1)[0];e&&e.focus(),this._overlayEl.addEventListener("keydown",this._handleKeyDown),this._currIndex=0}}},{key:"unfocus",value:function(){this._overlayEl.removeEventListener("keydown",this._handleKeyDown)}},{key:"_handleKeyDown",value:function(e){if((0,l.isTab)(e)){e.preventDefault();var t=function(e){return!e.shiftKey}(e)?1:-1;this._currIndex=(this._currIndex+this._focusableEls.length+t)%this._focusableEls.length,this._focusableEls[this._currIndex].focus()}}}]),t}();r.default=p},{"./KeyCodes":442,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/slicedToArray":23,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.join":199,"core-js/modules/es.array.map":201,"core-js/modules/es.string.trim":232}],489:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.ContentOverlayComponent=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/events/player-events")),c=i(e("app/events/ad-events")),h=e("app/utils/Constant"),f=new(i(e("app/utils/log")).default)("ContentOverlayComponent"),m=videojs.getComponent("Component"),b=["_onAllAdsCompleted","_onAdLoaded","_onFinishedPlaying","_onPause","_onPlay","_onUserActive","_onUserInactive"],v="".concat(h.CONTENT_OVERLAY_CLASS,"--visible"),y=function(e){function r(e){var t;return(0,a.default)(this,r),t=(0,s.default)(this,(0,u.default)(r).call(this,e)),b.forEach(function(e){t[e]=t[e].bind((0,l.default)(t))}),t._isAdPlaying=!1,t._isActive=!1,e.on([c.default.ALL_ADS_COMPLETED,p.default.ADS_TIMEOUT_ERROR],t._onAllAdsCompleted),e.on(c.default.AD_LOADED,t._onAdLoaded),e.on(p.default.ENDED,t._onFinishedPlaying),e.on(p.default.PAUSE,t._onPause),e.on(p.default.PLAY,t._onPlay),e.on(p.default.USER_ACTIVE,t._onUserActive),e.on(p.default.USER_INACTIVE,t._onUserInactive),t}return(0,d.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,o.default)((0,u.default)(r.prototype),"createEl",this).call(this,"div",{className:h.CONTENT_OVERLAY_CLASS})}},{key:"_clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=0)}},{key:"_show",value:function(){this._clearTimer(),this.addClass(v)}},{key:"_hide",value:function(){this.removeClass(v)}},{key:"_onAdLoaded",value:function(){this._isAdPlaying=!0,this._hide()}},{key:"_onAllAdsCompleted",value:function(e){var t,r=this;this._isAdPlaying=!1,(null===(t=e.data)||void 0===t?void 0:t.adType)===h.AD_TYPES.PREROLL&&(this._show(),this.timer=setTimeout(function(){r._hide()},3e3))}},{key:"_onPause",value:function(){this._isAdPlaying||this.player_.ended()||this._show()}},{key:"_onPlay",value:function(){this._isActive||this._hide()}},{key:"_onUserActive",value:function(){this._isActive=!0,this.player_.ended()||this._isAdPlaying||this._show()}},{key:"_onUserInactive",value:function(){this._isActive=!1,this.player_.paused()||this._hide()}},{key:"_onFinishedPlaying",value:function(){this._hide()}},{key:"dispose",value:function(){this._clearTimer()}}],[{key:"init",value:function(){this.options_.useContentOverlayPlugin?videojs.registerComponent("ContentOverlay",r):f.info("plugin disabled")}}]),r}(m);r.ContentOverlayComponent=y,videojs.registerPlugin("ContentOverlayPlugin",y.init)},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/Constant":441,"app/utils/log":464}],487:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/projector-utils")),l=i(e("./videojs-vod-captions-helper")),o=new(i(e("app/utils/log")).default)("ClosedCaptionsPlugin"),u=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"isEnabled",value:function(e){return"true"===String(e.options_.use_captions)}},{key:"shouldParseVodCaptions",value:function(e){return!e.options_.metadata.live&&!s.default.isMobile()}},{key:"init",value:function(){e.isEnabled(this)?e.shouldParseVodCaptions(this)&&l.default.parse(this):o.info("plugin disabled")}}]),e}();videojs.registerPlugin("ClosedCaptionsPlugin",u.init);var d=u;r.default=d},{"./videojs-vod-captions-helper":488,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464,"app/utils/projector-utils":466}],488:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.replace"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.weak-map"),e("core-js/modules/esnext.weak-map.delete-all"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/typeof")),d=i(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var n=i(e("@babel/runtime/helpers/asyncToGenerator")),s=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/inherits")),p=(i(e("@babel/runtime/helpers/possibleConstructorReturn")),i(e("@babel/runtime/helpers/getPrototypeOf")),i(e("@babel/runtime/helpers/wrapNativeSuper"))),c=i(e("app/events/player-events")),h=i(e("videojs-vtt.js"));function f(e,t){f=function(e,t){return new r(e,void 0,t)};var a=(0,p.default)(RegExp),n=RegExp.prototype,s=new WeakMap;function r(e,t,r){var i=a.call(this,e,t);return s.set(i,r||s.get(e)),i}function l(r,e){var i=s.get(e);return Object.keys(i).reduce(function(e,t){return e[t]=r[i[t]],e},Object.create(null))}return(0,u.default)(r,a),r.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=l(t,this)),t},r.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var r=s.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"!=typeof t)return n[Symbol.replace].call(this,e,t);var i=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==(0,o.default)(e[e.length-1])&&e.push(l(e,i)),t.apply(this,e)})},f.apply(this,arguments)}var m=h.default.WebVTT,b=f(/\n#EXT\x2DX\x2DMEDIA.+URI="([\0-!#-\uFFFF]*\.m3u8[\0-!#-\uFFFF]*)"/i,{uri:1}),v=f(/\n([\0-"\$-\uFFFF][\0-\t\x0B-\uFFFF]*\.vtt[\0-\t\x0B-\uFFFF]*)/i,{uri:1}),a=function(){function t(){(0,s.default)(this,t)}var r,i,a;return(0,l.default)(t,null,[{key:"onMetadataLoad",value:(a=(0,n.default)(d.default.mark(function e(t){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getVttUrl(t);case 2:(r=e.sent)&&t.addRemoteTextTrack({src:r,kind:"captions",language:"en",label:"English",mode:"hidden"});case 4:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"hasCaption",value:function(e){var t,r,i;return Boolean(null===(t=e.metadata)||void 0===t?void 0:null===(r=t.captions)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.url)}},{key:"getVttUrl",value:(i=(0,n.default)(d.default.mark(function e(t){var r,i,a,n,s,l,o,u;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasCaption(t.options_)){e.next=2;break}return e.abrupt("return");case 2:return a=t.options_.streams[0].url,e.next=5,this._fetch(a);case 5:return e.next=7,e.sent.text();case 7:if(n=e.sent,null==(s=b.exec(n))?void 0:null===(r=s.groups)||void 0===r?void 0:r.uri){e.next=11;break}return e.abrupt("return");case 11:return l=new URL(s.groups.uri,new URL(a).origin).href,e.next=14,this._fetch(l);case 14:return e.next=16,e.sent.text();case 16:if(o=e.sent,null==(u=v.exec(o))?void 0:null===(i=u.groups)||void 0===i?void 0:i.uri){e.next=20;break}return e.abrupt("return");case 20:return e.abrupt("return",new URL(u.groups.uri,new URL(l).origin).href);case 21:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"parseCaptionResponse",value:(r=(0,n.default)(d.default.mark(function e(a){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var r=new m.Parser(window,h.default,m.StringDecoder()),i=[];r.oncue=function(e){i.push({begin:e.startTime,text:e.text})},r.onflush=function(){e(i)},r.onparsingerror=function(e){t(e)},r.parse(a),r.flush()}));case 1:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},{key:"_fetch",value:function(e){return fetch(e)}},{key:"parse",value:function(e){e.on(c.default.LOADED_METADATA,t.onMetadataLoad.bind(this,e))}}]),t}();r.default=a},{"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"@babel/runtime/helpers/typeof":26,"@babel/runtime/helpers/wrapNativeSuper":27,"@babel/runtime/regenerator":28,"app/events/player-events":381,"core-js/modules/es.array.iterator":198,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219,"core-js/modules/es.regexp.constructor":220,"core-js/modules/es.regexp.to-string":223,"core-js/modules/es.string.iterator":225,"core-js/modules/es.string.replace":228,"core-js/modules/es.symbol":235,"core-js/modules/es.symbol.description":233,"core-js/modules/es.symbol.replace":236,"core-js/modules/es.weak-map":237,"core-js/modules/esnext.weak-map.delete-all":242,"core-js/modules/web.dom-collections.iterator":244,"core-js/modules/web.url":246,"regenerator-runtime/runtime":271,"videojs-vtt.js":279}],486:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.parse-float"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/events/player-events")),o=i(e("app/events/ad-events")),u=new s.default("VideoWatchedTimeUpdate"),d=["_startTimeCounter","_stopTimeCounter","_onTimeUpdate"],p=[l.default.PLAY,o.default.ALL_ADS_COMPLETED],c=[o.default.AD_STARTED,l.default.PAUSE,l.default.ENDED,l.default.WATCHDOG_RELOAD,l.default.HLS_BRIDGE_FATAL_ERROR],h=function(){function r(e){var t=this;(0,a.default)(this,r),this._player=e,this._lastBroadcastedValue=0,this._lastBroadcastedDateTime=null,this._isTrackingVideoWatchTime=!1,d.forEach(function(e){t[e]=t[e].bind(t)}),e.on(c,this._stopTimeCounter),e.on(p,this._startTimeCounter),e.on(l.default.TIMEUPDATE,this._onTimeUpdate)}return(0,n.default)(r,[{key:"_startTimeCounter",value:function(e){this._isTrackingVideoWatchTime||(u.info("Time tracking started by event: ",e.type),this._isTrackingVideoWatchTime=!0,this._lastBroadcastedDateTime=new Date)}},{key:"_stopTimeCounter",value:function(e){this._isTrackingVideoWatchTime&&(u.info("Time tracking stopped by event: ",e.type),this._broadcastUpdate(this._getDeltaVideoWatchedTime()),this._isTrackingVideoWatchTime=!1)}},{key:"_onTimeUpdate",value:function(){if(this._isTrackingVideoWatchTime){var e=this._getDeltaVideoWatchedTime();10<=e&&this._broadcastUpdate(e)}}},{key:"_getDeltaVideoWatchedTime",value:function(){return parseFloat((new Date-this._lastBroadcastedDateTime)/1e3)}},{key:"_broadcastUpdate",value:function(e){var t=this._lastBroadcastedValue+e;this._player.trigger({type:"videoWatchedTimeUpdate",data:{timeWatchedSinceLastUpdate:e,totalTimeWatched:t}}),u.info("Video watch time boradcast. Total time watched: ".concat(t,", Time watched since last update: ").concat(e)),this._lastBroadcastedValue=t,this._lastBroadcastedDateTime=new Date}}],[{key:"init",value:function(){return new r(this)}}]),r}();videojs.registerPlugin("VideoWatchedTimeUpdatePlugin",h.init);var f=h;r.default=f},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.parse-float":214}],485:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.filter"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/events/player-events")),o=i(e("app/events/ad-events")),u=i(e("build/resources")),d=new s.default("VideoMidrollPlugin"),p="bvp-progress-bar-marker",c=".vjs-progress-holder",h=function(){function t(e){(0,a.default)(this,t),this._player=e,this._lastAdTime=new Date(0),this._lastAdCuePointIndex=-1,this._playedAdCuePoints={},e.ready(this.initialize.bind(this))}return(0,n.default)(t,[{key:"initialize",value:function(){var e=this._player;this._adCuePoints=e.options_.metadata.adCuePoints||[],0!==this._adCuePoints.length&&(e.on(l.default.TIMEUPDATE,this._onTimeUpdate.bind(this)),e.on([o.default.ALL_ADS_COMPLETED,l.default.ADS_TIMEOUT_ERROR],this._setLastAdTime.bind(this)),e.on(l.default.LOADED_METADATA,this._updateProgressBarMarker.bind(this)))}},{key:"_onTimeUpdate",value:function(){if(!this._player.scrubbing()){var e=this._getCurrentAdCuePointIndex();e!==this._lastAdCuePointIndex&&(d.info("Setting last cue point index to: ".concat(e)),this._lastAdCuePointIndex=e,this._passedExemptionPeriod()&&(this._playedAdCuePoints[e]||(d.info("Triggering cue point ad @ ".concat(this._player.currentTime())),this._player.tech_.trigger({type:l.default.HLS_CUE_OUT,data:{duration:60}}),this._playedAdCuePoints[e]=!0,this._updateProgressBarMarker())))}}},{key:"_passedExemptionPeriod",value:function(){return 6e4<=new Date-this._lastAdTime}},{key:"_getCurrentAdCuePointIndex",value:function(){for(var e=this._player.currentTime(),t=this._adCuePoints.length-1;0<=t;t--)if(e>=this._adCuePoints[t])return t;return-1}},{key:"_setLastAdTime",value:function(){this._lastAdTime=new Date,d.info("Set last Ad time to: ".concat(this._lastAdTime))}},{key:"_updateProgressBarMarker",value:function(){var r=this,e=this._player,t=e.el(),i=t.querySelector(c);if(i){var a=e.duration();if(a){for(var n=t.querySelectorAll(".".concat(p)),s=0;s<n.length;s++){var l=n[s];l.parentNode.removeChild(l)}this._adCuePoints.filter(function(e,t){return!r._playedAdCuePoints[t]}).forEach(function(e){var t=e/a*100,r=videojs.createEl("div",{},{class:p,style:"left: ".concat(t,"%;")});i.appendChild(r)})}else d.error("Can't get player duration")}else d.error("Can't find ".concat(c," element"))}}],[{key:"init",value:function(){var e=this.options_;if("true"===u.default.VOD_MIDROLL_ENABLED)if(e.useVideoMidrollPlugin){if(!e.live)return d.info("plugin initialized"),new t(this);d.info("plugin disabled for live stream.")}else d.info("plugin disabled");else d.info("plugin disabled for this environment")}}]),t}();videojs.registerPlugin("VideoMidrollPlugin",h.init);var f=h;r.default=f},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/log":464,"build/resources":1,"core-js/modules/es.array.filter":194,"core-js/modules/web.dom-collections.for-each":243}],484:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/utils/resize-monitor")),o=new s.default("ResizePlayerPlugin"),u=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"init",value:function(){this.options_.use_resize_player?(o.info("monitoring player size"),function(e){var t=e.el_;t.setAttribute("data-breakpoints","320 640 800"),new l.default(t).setEventParent(e)}(this)):o.info("plugin disabled")}}]),e}();videojs.registerPlugin("ResizePlayerPlugin",u.init);var d=u;r.default=d},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464,"app/utils/resize-monitor":468}],483:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/events/player-events")),o=i(e("app/utils/projector-utils")),u=new s.default("MutedOverlayPlugin"),d=["_onRegUIPopUpShown","_onRegUIPopUpClosed","_onDispose"],p=function(){function r(e){var t=this;(0,a.default)(this,r),this._player=e,this._playerPausedByRegUIPopUp=!1,d.forEach(function(e){t[e]=t[e].bind(t)}),window.addEventListener(l.default.REG_UI_POP_UP_SHOWN,this._onRegUIPopUpShown),window.addEventListener(l.default.REG_UI_POP_UP_CLOSED,this._onRegUIPopUpClosed),this._player.on(l.default.DISPOSE,this._onDispose)}return(0,n.default)(r,[{key:"_onRegUIPopUpShown",value:function(){o.default.isAdOrContentPlaying(this._player)&&(this._playerPausedByRegUIPopUp=!0,this._player.pause(),this._player.trigger(l.default.REG_UI_POP_UP_SHOWN))}},{key:"_onRegUIPopUpClosed",value:function(){!o.default.isAdOrContentPlaying(this._player)&&this._isPlayerPausedByRegUIPopUp()&&(this._playerPausedByRegUIPopUp=!1,this._player.trigger(l.default.REG_UI_POP_UP_CLOSED))}},{key:"_onDispose",value:function(){window.removeEventListener(l.default.REG_UI_POP_UP_SHOWN,this._onRegUIPopUpShown),window.removeEventListener(l.default.REG_UI_POP_UP_CLOSED,this._onRegUIPopUpClosed)}},{key:"_isPlayerPausedByRegUIPopUp",value:function(){return this._playerPausedByRegUIPopUp}}],[{key:"init",value:function(){if(this.options_.useRegUIPopUpPlugin)return new r(this);u.info("Reg UI pop-up plugin is disabled!")}}]),r}();videojs.registerPlugin("RegUIPopUpPlugin",p.init);var c=p;r.default=c},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464,"app/utils/projector-utils":466}],482:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=new(i(e("app/utils/log")).default)("PlayPauseOverlayComponent"),c=videojs.getComponent("Component"),h=["_handleClick"],f=function(e){function r(e){var t;return(0,a.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this,e))).player=e,h.forEach(function(e){t[e]=t[e].bind((0,l.default)(t))}),t.el_.addEventListener("click",t._handleClick),t}return(0,d.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,o.default)((0,u.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-play-pause-overlay",innerHTML:""})}},{key:"_handleClick",value:function(){this.player.paused()?this.player.play():this.player.pause()}}],[{key:"init",value:function(){this.options_.enablePlayPauseOverlay?videojs.registerComponent("PlayPauseOverlayComponent",r):p.info("plugin disabled")}}]),r}(c);videojs.registerPlugin("PlayPauseOverlayPlugin",f.init);var m=f;r.default=m},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/log":464}],481:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/events/player-events")),c=new(i(e("app/utils/log")).default)("NonInteractiveProgressBarComponent"),h=videojs.getComponent("Component"),f=["_onPlayerTimeUpdate"],m=function(e){function r(e){var t;return(0,a.default)(this,r),(t=(0,s.default)(this,(0,u.default)(r).call(this,e))).player=e,f.forEach(function(e){t[e]=t[e].bind((0,l.default)(t))}),t.player.on(p.default.TIMEUPDATE,t._onPlayerTimeUpdate),t}return(0,d.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,o.default)((0,u.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-non-interactive-progress-bar",innerHTML:'<div class="bvp-non-interactive-progress-bar__progress"></div>'})}},{key:"_onPlayerTimeUpdate",value:function(){var e="".concat(this.player.currentTime()/this.player.duration()*100,"%");this.$(".bvp-non-interactive-progress-bar__progress").style.setProperty("width",e)}}],[{key:"init",value:function(){this.options_.useNonInteractiveProgressBar?videojs.registerComponent("NonInteractiveProgressBarComponent",r):c.info("plugin disabled")}}]),r}(h);videojs.registerPlugin("NonInteractiveProgressBarPlugin",m.init);var b=m;r.default=b},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381,"app/utils/log":464}],480:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/utils/projector-utils")),o=i(e("app/events/player-events")),u=i(e("../components/muted-overlay/MutedOverlayComponent")),d=i(e("../components/foundation/FoundationOverlayComponent")),p=new s.default("InitialOverlay"),c=["onReady","onPause"],h=function(){function r(e){var t=this;(0,a.default)(this,r),this.player=e,c.forEach(function(e){t[e]=t[e].bind(t)}),e.on(o.default.READY,this.onReady),e.on(o.default.PAUSE,this.onPause)}return(0,n.default)(r,[{key:"onPause",value:function(){l.default.isFoundationOverlayEnabled(this.player.options_)&&this.player.bigPlayButton.show()}},{key:"onReady",value:function(){l.default.isFoundationOverlayEnabled(this.player.options_)&&(this.player.bigPlayButton.hide(),this.player.TitleBar.hide())}}],[{key:"init",value:function(){var e=this;p.info(e),new r(e),l.default.isMutedOverlayEnabled(e.options_)?(p.info("plugin initialized; using muted overlay"),videojs.registerComponent("MutedOverlayComponent",u.default),e.options_.initialOverlayComponent="MutedOverlayComponent"):l.default.isFoundationOverlayEnabled(e.options_)?(p.info("plugin initialized; using foundation overlay"),videojs.registerComponent("FoundationOverlayComponent",d.default),e.options_.initialOverlayComponent="FoundationOverlayComponent"):p.info("plugin initialized; using default overlay without a component")}}]),r}();videojs.registerPlugin("InitialOverlayPlugin",h.init);var f=h;r.default=f},{"../components/foundation/FoundationOverlayComponent":370,"../components/muted-overlay/MutedOverlayComponent":372,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464,"app/utils/projector-utils":466}],372:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/assertThisInitialized")),u=i(e("@babel/runtime/helpers/get")),d=i(e("@babel/runtime/helpers/getPrototypeOf")),p=i(e("@babel/runtime/helpers/inherits")),n=i(e("app/utils/log")),c=i(e("app/utils/projector-utils")),h=i(e("app/events/player-events")),f=i(e("app/events/ad-events")),m=i(e("app/utils/css-helpers")),b=new n.default("MutedOverlayComponent"),v=videojs.getComponent("Component"),y=["_initializeOverlay","_updateSkipState","_clearSkipState"],g="bvp-muted-overlay--skippable",_=function(e){function n(e,t){var r;(0,s.default)(this,n),(r=(0,l.default)(this,(0,d.default)(n).call(this,e,t))).player=e,r.hasBuiltOverlay=!1;for(var i=0;i<y.length;i++){var a=y[i];r[a]=r[a].bind((0,o.default)(r))}return e.ready(r._initializeOverlay),e.on(h.default.ENDED,function(){return r.destroy()}),r}return(0,p.default)(n,e),(0,a.default)(n,[{key:"show",value:function(){this._buildOverlay(),(0,u.default)((0,d.default)(n.prototype),"show",this).call(this)}},{key:"destroy",value:function(){this.hide(),this._clickOverlayEl&&(this._clickOverlayEl.removeEventListener("click",this._unmuteAndLoadContent),this._clickOverlayEl=null)}},{key:"_initializeOverlay",value:function(){this.player_.options_.original_user_options.autoplay?this._buildOverlay():this.hide()}},{key:"_buildOverlay",value:function(){if(!this.hasBuiltOverlay){var e=videojs.createEl("div",{className:"bvp-muted-overlay",innerHTML:'\n                <button class="bvp-muted-overlay__button">\n                    <span class="vjs-control-text">Unmute</span>\n                </button>\n            '});this.el().appendChild(e),this._clickOverlayEl=e;var t=this.player_;this._unmuteAndLoadContent=this._unmuteAndLoadContent.bind(this,t),this._clickOverlayEl.addEventListener("click",this._unmuteAndLoadContent),this.player.on(f.default.SKIP_STATE_CHANGED,this._updateSkipState),this.player.on(f.default.ALL_ADS_COMPLETED,this._clearSkipState),this.player.on(h.default.ADS_TIMEOUT_ERROR,this._clearSkipState),this.player.trigger(h.default.MUTED_OVERLAY_SHOW),this.hasBuiltOverlay=!0}}},{key:"_unmuteAndLoadContent",value:function(e,t){t.stopPropagation(),this.hide(),b.info("Unmute content;"),this.player.trigger(h.default.MUTED_OVERLAY_CLICKED),c.default.canAutoplayAfterAction()&&(b.info("Set autoplayAllowed to true"),c.default.setAutoplayAllowed(!0)),this._unmuteContent(e),this._loadContent(e)}},{key:"_loadContent",value:function(e){var t=e.AdController;t&&t.loadAdAndContent()}},{key:"_unmuteContent",value:function(e){var t=e.AdController;t?t.unmuteAdAndContent():e.muted(!1)}},{key:"_updateSkipState",value:function(e){e.data.adSkipState?m.default.addClass(this._clickOverlayEl,g):this._clearSkipState()}},{key:"_clearSkipState",value:function(){m.default.removeClass(this._clickOverlayEl,g)}}]),n}(v);r.default=_},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/css-helpers":453,"app/utils/log":464,"app/utils/projector-utils":466}],370:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/assertThisInitialized")),u=i(e("@babel/runtime/helpers/get")),d=i(e("@babel/runtime/helpers/getPrototypeOf")),p=i(e("@babel/runtime/helpers/inherits")),n=i(e("app/utils/log")),c=i(e("../../events/player-events")),h=i(e("../../utils/datetime-utils")),f=new n.default("FoundationOverlayComponent"),m=videojs.getComponent("Component"),b=["_initializeOverlay"],v=function(e){function n(e,t){var r;(0,s.default)(this,n),(r=(0,l.default)(this,(0,d.default)(n).call(this,e,t))).player=e,r.hasBuiltOverlay=!1;for(var i=0;i<b.length;i++){var a=b[i];r[a]=r[a].bind((0,o.default)(r))}return e.ready(r._initializeOverlay),e.on(c.default.PLAY,function(){return r.destroy()}),r}return(0,p.default)(n,e),(0,a.default)(n,[{key:"show",value:function(){this._buildOverlay(),(0,u.default)((0,d.default)(n.prototype),"show",this).call(this)}},{key:"destroy",value:function(){this.hide(),f.info("Destroying foundation overlay."),this._clickOverlayEl&&(this._clickOverlayEl.removeEventListener("click",this._playContent),this._clickOverlayEl=null)}},{key:"_initializeOverlay",value:function(){var e=this.player;e.options_.FoundationOverlayComponent&&e.options_.useFoundationLayout&&"FoundationOverlayComponent"===e.options_.initialOverlayComponent?this._buildOverlay():this.hide()}},{key:"_buildOverlay",value:function(){if(!this.hasBuiltOverlay){var e=this.player,t=this.player.options_.playerOptions.metadata.duration/1e3,r=videojs.createEl("div",{className:"bvp-foundation-overlay",innerHTML:'\n            <button class="bvp-foundation-overlay__button">Play</button>\n            <div class="bvp-foundation-overlay__playtime">'.concat(h.default.formatSeconds(t),'</div>\n            <div class="bvp-foundation-overlay__gradient">\n                <div class="bvp-foundation-overlay__hover-gradient"/>\n            </div>\n            ')});this.el().appendChild(r),this._playContent=this._playContent.bind(this,e),this._clickOverlayEl=r,this._clickOverlayEl.addEventListener("click",this._playContent),this.hasBuiltOverlay=!0,f.info("Successfully built foundation overlay.")}}},{key:"_playContent",value:function(e,t){t.stopPropagation(),f.info("Clicked foundation overlay"),e.trigger(c.default.FOUNDATION_OVERLAY_CLICKED),this.destroy()}}]),n}(m);r.default=v},{"../../events/player-events":381,"../../utils/datetime-utils":455,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/log":464}],479:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-descriptors"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime/regenerator")),l=a(e("@babel/runtime/helpers/slicedToArray"));e("regenerator-runtime/runtime");var o=a(e("@babel/runtime/helpers/asyncToGenerator")),u=a(e("@babel/runtime/helpers/classCallCheck")),d=a(e("@babel/runtime/helpers/createClass")),p=a(e("@babel/runtime/helpers/defineProperty")),n=a(e("app/utils/log")),c=a(e("app/utils/projector-utils")),h=a(e("app/utils/datetime-utils")),f=a(e("app/events/ad-events")),m=a(e("app/events/player-events")),b=e("app/utils/Constant"),v=a(e("../lib/google-ads/videojs-dai-ad-controls")),y=a(e("../lib/google-ads/videojs-ad-learn-more")),g=a(e("../lib/google-ads/videojs-ad-time-remaining")),_=a(e("uuid/v4")),C=a(e("app/utils/query-string")),A=e("app/utils/dai-util"),E=a(e("app/utils/PPID")),P=i(e("app/services/ConsentService"));function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach(function(e){(0,p.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var k=new n.default("DaiPlugin"),w="addtrack",j=function(){function n(e,t){var a=this;(0,u.default)(this,n),(0,p.default)(this,"dai",void 0),(0,p.default)(this,"player",void 0),(0,p.default)(this,"pluginOptions",void 0),(0,p.default)(this,"daiEvents",void 0),(0,p.default)(this,"daiAssetKey",void 0),(0,p.default)(this,"isMobile",void 0),(0,p.default)(this,"additionalCustomParameterService",void 0),(0,p.default)(this,"streamManager",void 0),(0,p.default)(this,"isInAdBreak",void 0),(0,p.default)(this,"impressionId",void 0),(0,p.default)(this,"daiAdControls",void 0),(0,p.default)(this,"_videoTag",void 0),(0,p.default)(this,"currentAdInfo",void 0),(0,p.default)(this,"streamUrl",void 0),(0,p.default)(this,"_isYouboraAdAdapterAttached",void 0),(0,p.default)(this,"channelId",void 0),(0,p.default)(this,"_onReady",function(){a._setVideoTag(),a.streamManager=n.getStreamManager(a._videoTag),a.streamManager.addEventListener(a.daiEvents.LOADED,a._onManifestLoaded),a.streamManager.addEventListener(a.daiEvents.ERROR,a._onManifestLoadError),a.streamManager.addEventListener(a.daiEvents.AD_BREAK_STARTED,a._onAdBreakStarted),a.streamManager.addEventListener(a.daiEvents.STARTED,a._onAdStarted),a.streamManager.addEventListener(a.daiEvents.AD_PROGRESS,a._onAdProgress),a.streamManager.addEventListener(a.daiEvents.FIRST_QUARTILE,a._onAdFirstQuartile),a.streamManager.addEventListener(a.daiEvents.MIDPOINT,a._onAdMidPoint),a.streamManager.addEventListener(a.daiEvents.THIRD_QUARTILE,a._onAdThirdQuartile),a.streamManager.addEventListener(a.daiEvents.COMPLETE,a._onAdComplete),a.streamManager.addEventListener(a.daiEvents.AD_BREAK_ENDED,a._onAdBreakEnded),a.streamManager.addEventListener(a.daiEvents.CLICK,a._onAdClick),a.daiAdControls=a.player.getChild("DaiAdControlsComponent"),a.streamManager.setClickElement(a._getAdClickEl()),a.initialize()}),(0,p.default)(this,"_onManifestLoaded",function(e){k.info("Manifest loaded"),a.streamUrl=e.getStreamData().url,a._loadUrl(a.streamUrl)}),(0,p.default)(this,"_onManifestLoadError",function(){k.info("Error loading DAI stream"),a.player.src((0,A.getOriginalStreamUrl)(a.player.options_))}),(0,p.default)(this,"_onAddTrack",function(e){if(!a._getHlsjs()){k.info("Track added");var u=e.track,d=a.streamManager;"metadata"===u.kind&&(u.mode="hidden",u.addEventListener("cuechange",function(){var e={},t=!0,r=!1,i=void 0;try{for(var a,n=u.activeCues[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value.value,l=s.key,o=s.data;e[l]=o}}catch(e){r=!0,i=e}finally{try{t||null==n.return||n.return()}finally{if(r)throw i}}d.onTimedMetadata(e)}))}}),(0,p.default)(this,"_onAdBreakStarted",function(){k.info("Ad break started"),a.isInAdBreak=!0}),(0,p.default)(this,"_onAdStarted",function(e){a.daiAdControls.show(),a.currentAdInfo=e;var t=a._extractDetails(a.currentAdInfo);a.player.trigger({type:f.default.AD_LOADED,data:Object.assign({},t,{isLive:!0,mediaUrl:t.url})}),a.player.trigger({type:f.default.AD_STARTED,data:t}),a.player.trigger({type:f.default.CLIP,data:t})}),(0,p.default)(this,"_onAdProgress",function(e){var t=e.getStreamData().adProgressData,r=t.currentTime,i=t.duration-r;a.daiAdControls.setCountdownTime(h.default.formatSeconds(i)),a.player.trigger({type:f.default.AD_PLAYBACK_PROGRESS_UPDATE,data:Object.assign({},a._extractDetails(a.currentAdInfo),{elapsedTime:r})})}),(0,p.default)(this,"_onAdFirstQuartile",function(){a.player.trigger({type:f.default.AD_FIRST_QUARTILE,data:a._extractDetails(a.currentAdInfo)})}),(0,p.default)(this,"_onAdMidPoint",function(){a.player.trigger({type:f.default.AD_MIDPOINT,data:a._extractDetails(a.currentAdInfo)})}),(0,p.default)(this,"_onAdThirdQuartile",function(){a.player.trigger({type:f.default.AD_THIRD_QUARTILE,data:a._extractDetails(a.currentAdInfo)})}),(0,p.default)(this,"_onAdComplete",function(){k.info("AD complete"),a.player.trigger({type:f.default.AD_COMPLETED,data:a._extractDetails(a.currentAdInfo)}),a.currentAdInfo=null}),(0,p.default)(this,"_onAdBreakEnded",function(){k.info("Ad break ended"),a.isInAdBreak=!1,a.daiAdControls.hide(),a.player.trigger({type:f.default.ALL_ADS_COMPLETED}),a.player.trigger({type:f.default.CLIP,data:a._extractDetails(a.currentAdInfo)})}),(0,p.default)(this,"_onAdClick",function(){k.info("Ad clicked. pausing player"),a.player.pause(),a.player.bigPlayButton.hide(),a.player.trigger({type:f.default.AD_CLICKED,data:a._extractDetails(a.currentAdInfo)})}),(0,p.default)(this,"_attachYouboraAdAdapter",function(){a._isYouboraAdAdapterAttached||(window.youboraPlugin.setAdsAdapter(a._getYouboraImaAdapter()),a._isYouboraAdAdapterAttached=!0)}),(0,p.default)(this,"_onPlay",function(){a.isInAdBreak&&a.player.trigger({type:f.default.AD_RESUMED,data:a._extractDetails(a.currentAdInfo)})}),(0,p.default)(this,"_onPause",function(){a.isInAdBreak&&a.player.trigger({type:f.default.AD_PAUSED,data:a._extractDetails(a.currentAdInfo)})}),(0,p.default)(this,"_onVolumeChange",function(){a.isInAdBreak&&a.player.trigger({type:f.default.AD_VOLUME_CHANGE,data:{isDai:!0}})}),(0,p.default)(this,"_onDispose",function(){a.streamManager.removeEventListener(a.daiEvents.LOADED,a._onManifestLoaded),a.streamManager.removeEventListener(a.daiEvents.ERROR,a._onManifestLoadError),a.streamManager.removeEventListener(a.daiEvents.AD_BREAK_STARTED,a._onAdBreakStarted),a.streamManager.removeEventListener(a.daiEvents.STARTED,a._onAdStarted),a.streamManager.removeEventListener(a.daiEvents.AD_PROGRESS,a._onAdProgress),a.streamManager.removeEventListener(a.daiEvents.FIRST_QUARTILE,a._onAdFirstQuartile),a.streamManager.removeEventListener(a.daiEvents.MIDPOINT,a._onAdMidPoint),a.streamManager.removeEventListener(a.daiEvents.THIRD_QUARTILE,a._onAdThirdQuartile),a.streamManager.removeEventListener(a.daiEvents.COMPLETE,a._onAdComplete),a.streamManager.removeEventListener(a.daiEvents.AD_BREAK_ENDED,a._onAdBreakEnded),a.streamManager.removeEventListener(a.daiEvents.CLICK,a._onAdClick),a._getTextTracks().removeEventListener(w,a._onAddTrack)}),this._isYouboraAdAdapterAttached=!1,this.dai=window.google.ima.dai.api,this.player=t,this.pluginOptions=e,this.daiEvents=this.dai.StreamEvent.Type;var r=t.options_;this.daiAssetKey=r.useTestDaiStream?"sN_IYUG8STe1ZzhIIE_ksA":r.daiAssetKey,this.isMobile=c.default.isMobile();var i=r.original_user_options.facadePlayer;this.additionalCustomParameterService=i.getAdditionalCustomParameterService(),this.player.on(m.default.PLAY,this._onPlay),this.player.one(m.default.PLAY,this._attachYouboraAdAdapter),this.player.on(m.default.PAUSE,this._onPause),this.player.on(m.default.BVP_VOLUME_CHANGE,this._onVolumeChange),this.player.on(m.default.DISPOSE,this._onDispose),this.player.ready(this._onReady),this.isInAdBreak=!1,this.impressionId=n._getImpressionId(),this.channelId="".concat(e.prerollNetworkId,"/").concat(e.prerollUnit),videojs.registerComponent("DaiAdControlsComponent",v.default),videojs.registerComponent("AdTimeRemaining",g.default),this.isMobile&&videojs.registerComponent("AdLearnMore",y.default)}var e;return(0,d.default)(n,[{key:"_listenToId3Events",value:function(){var i=this,e=this._getHlsjs();e&&e.on(window.Hls.Events.FRAG_PARSING_METADATA,function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).samples;(void 0===t?[]:t).forEach(function(e){var t=e.data,r=e.pts;return i.streamManager.processMetadata("ID3",t,r)})})}},{key:"_getHlsjs",value:function(){return this.player&&this.player.tech_&&this.player.tech_.hls_}},{key:"_getYouboraImaAdapter",value:function(){return new window.YouboraLib.adapters.Ima(this.streamManager)}},{key:"initialize",value:function(){return this._listenToId3Events(),this._requestLiveStream(this.daiAssetKey,null)}},{key:"_getAdClickEl",value:function(){return this.isMobile?this.daiAdControls.adLearnMoreComponent.el():this.daiAdControls.el()}},{key:"_loadUrl",value:function(e){k.info("Loading: ".concat(e)),this.player.src(e),this._getTextTracks().addEventListener(w,this._onAddTrack),this.player.options_.isPlayingDai=!0}},{key:"_getTextTracks",value:function(){return this._videoTag.textTracks}},{key:"_setVideoTag",value:function(){this._videoTag||(this._videoTag=this.player.el_.getElementsByTagName("video")[0])}},{key:"_extractDetails",value:function(e){if(!e)return null;var t=e.getAd(),r=t.getWrapperCreativeIds(),i=t.getWrapperAdIds();return{isDai:!0,url:this.streamUrl,type:this.isInAdBreak&&"ad-".concat(b.AD_TYPES.MIDROLL)||this.player.options_.metadata.form_type,adType:b.AD_TYPES.MIDROLL,title:t.getTitle(),duration:t.getDuration(),dfpCreativeId:r.length?r:[t.getCreativeId()],dfpLineItemId:i.length?i:[t.getAdId()],clip:{contentId:this.isInAdBreak?t.getAdId():this.player.options_.metadata.id},impressionId:this.impressionId,channelId:this.channelId}}},{key:"_requestLiveStream",value:function(r,i){var a=this;return this._getAdTagParams().then(function(e){var t=new a.dai.LiveStreamRequest({adTagParameters:e});t.assetKey=r,t.apiKey=i||"",a.streamManager.requestStream(t)})}},{key:"_getAdTagParams",value:(e=(0,o.default)(s.default.mark(function e(){var t,r,i,a,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getDAICustomParams(),P.fetchParams()]);case 2:return t=e.sent,r=(0,l.default)(t,2),i=r[0],a=r[1].isPersonalizedAdAllowed,n={cust_params:C.default.toQueryString(i)},e.abrupt("return",a?T({},n,{ppid:E.default.get()}):n);case 8:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_getDAICustomParams",value:function(){var e=Object.assign({},this.pluginOptions.midrollCustParams,{iid:this.impressionId});return this.additionalCustomParameterService.fillAdditionalParams(b.AD_TYPES.MIDROLL,e).then(function(){return e})}}],[{key:"_getImpressionId",value:function(){return(0,_.default)()}},{key:"getStreamManager",value:function(e){return new window.google.ima.dai.api.StreamManager(e)}},{key:"init",value:function(e){if((0,A.isDaiEnabled)(this.options_))return k.info("Initializing Dai plugin"),new n(e,this)}}]),n}();r.default=j,videojs.registerPlugin("DaiPlugin",j.init)},{"../lib/google-ads/videojs-ad-learn-more":405,"../lib/google-ads/videojs-ad-time-remaining":408,"../lib/google-ads/videojs-dai-ad-controls":409,"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"@babel/runtime/helpers/slicedToArray":23,"@babel/runtime/regenerator":28,"app/events/ad-events":379,"app/events/player-events":381,"app/services/ConsentService":430,"app/utils/Constant":441,"app/utils/PPID":445,"app/utils/dai-util":454,"app/utils/datetime-utils":455,"app/utils/log":464,"app/utils/projector-utils":466,"app/utils/query-string":467,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.filter":194,"core-js/modules/es.array.iterator":198,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.get-own-property-descriptor":210,"core-js/modules/es.object.get-own-property-descriptors":211,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219,"core-js/modules/es.string.iterator":225,"core-js/modules/es.symbol":235,"core-js/modules/es.symbol.description":233,"core-js/modules/es.symbol.iterator":234,"core-js/modules/web.dom-collections.for-each":243,"core-js/modules/web.dom-collections.iterator":244,"regenerator-runtime/runtime":271,"uuid/v4":277}],409:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=i(e("app/utils/projector-utils")),p=videojs.getComponent("Component"),c="bvp-ad-time-remaining__time-empty",h=function(e){function i(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,i),(t=(0,s.default)(this,(0,o.default)(i).call(this,e,r))).adTimeRemainingComponent=t.getChild("AdTimeRemaining"),t.adLearnMoreComponent=t.getChild("AdLearnMore"),t}return(0,u.default)(i,e),(0,n.default)(i,[{key:"show",value:function(){(0,l.default)((0,o.default)(i.prototype),"show",this).call(this),this.adTimeRemainingComponent.show(),d.default.isMobile()&&this.adLearnMoreComponent.show()}},{key:"hide",value:function(){(0,l.default)((0,o.default)(i.prototype),"hide",this).call(this),this.adTimeRemainingComponent.hide(),d.default.isMobile()&&this.adLearnMoreComponent.hide()}},{key:"createEl",value:function(){var e=d.default.isMobile()?"bvp-dai-ad__mobile":"";return(0,l.default)((0,o.default)(i.prototype),"createEl",this).call(this,"div",{className:"bvp-dai-ad ".concat(e," vjs-hidden")})}},{key:"setCountdownTime",value:function(e){(this.adTimeRemainingComponent.el_.textContent=e)?this.adTimeRemainingComponent.removeClass(c):this.adTimeRemainingComponent.addClass(c)}}]),i}(p);r.default=h},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/projector-utils":466}],405:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=function(e){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,r),(0,s.default)(this,(0,o.default)(r).call(this,e,t))}return(0,u.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,l.default)((0,o.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-dai-ad-learn-more vjs-hidden",innerHTML:"Learn More"})}}]),r}(videojs.getComponent("Component"));r.default=d},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],478:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=new(i(e("app/utils/log")).default)("CustomBufferingComponent"),p=function(e){function r(e){var t;return(0,a.default)(this,r),(t=(0,s.default)(this,(0,o.default)(r).call(this,e))).$(".bvp-custom-buffering__spinner").setAttribute("data-spinner-asset",e.options_.customBufferingAnimationAsset),t.el_.style.backgroundImage='url(" '.concat(e.options_.posterUrl,' "'),t}return(0,u.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,l.default)((0,o.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-custom-buffering",innerHTML:'<div class="bvp-custom-buffering__spinner"></div>'})}}],[{key:"init",value:function(){this.options_.useCustomBufferingAnimation?videojs.registerComponent("CustomBufferingComponent",r):d.info("plugin disabled")}}]),r}(videojs.getComponent("Component"));videojs.registerPlugin("CustomBufferingPlugin",p.init);var c=p;r.default=c},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/log":464}],477:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/events/player-events")),l=new(i(e("app/utils/log")).default)("ClosedCaptionsApiPlugin"),o=["_showClosedCaptions","_hideClosedCaptions"],u="showing",d="disabled",p=function(){function r(e){var t=this;(0,a.default)(this,r),this.player=e,o.forEach(function(e){t[e]=t[e].bind(t)}),this.player.on(s.default.SHOW_CLOSED_CAPTIONS,this._showClosedCaptions),this.player.on(s.default.HIDE_CLOSED_CAPTIONS,this._hideClosedCaptions)}return(0,n.default)(r,[{key:"_showClosedCaptions",value:function(){this.closedCaptionsShown||(this._setTextTrackMode(u),this.closedCaptionsShown=!0)}},{key:"_hideClosedCaptions",value:function(){this.closedCaptionsShown&&(this.closedCaptionsShown=!1,this._setTextTrackMode(d))}},{key:"_setTextTrackMode",value:function(e){for(var t=this.player.textTracks(),r=0;r<t.length;r++){var i=t[r];"captions"===i.kind&&"en"===i.language&&(i.mode=e)}}}],[{key:"init",value:function(){if(this.options_.enableClosedCaptionsApi)return new r(this);l.info("plugin disabled")}}]),r}();videojs.registerPlugin("ClosedCaptionsApiPlugin",p.init);var c=p;r.default=c},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464}],476:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("../components/chromecast/BloombergChromeCastButton")),o=new s.default("ChromeCastPlugin"),u=function(){function r(){(0,a.default)(this,r)}return(0,n.default)(r,null,[{key:"init",value:function(){var e=this.options_,t=e.metadata.player_type;e.live&&"standard"===t&&e.useChromeCastPlugin&&r._isCastAllowed()?videojs.registerComponent("BloombergChromeCastButton",l.default):o.info("plugin disabled")}},{key:"_isCastAllowed",value:function(){return"https:"===location.protocol||"localhost"===location.hostname}}]),r}();videojs.registerPlugin("ChromeCastPlugin",u.init);var d=u;r.default=d},{"../components/chromecast/BloombergChromeCastButton":368,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464}],368:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/assertThisInitialized")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/events/player-events")),c=videojs.getComponent("ChromeCastButton"),h="vjs-chromecast-button--hidden",f=function(e){function i(e,t){var r;return(0,a.default)(this,i),(r=(0,s.default)(this,(0,u.default)(i).call(this,e,t))).player_.on(p.default.SUBSCRIBER_STATUS_CHANGE,r._onSubscriberStatusChange.bind((0,l.default)(r))),r.addClass(h),r}return(0,d.default)(i,e),(0,n.default)(i,[{key:"handleClick",value:function(){var e=this.casting?p.default.STOP_CHROME_CAST:p.default.START_CHROME_CAST;this.player_.trigger(e),(0,o.default)((0,u.default)(i.prototype),"handleClick",this).call(this)}},{key:"_onSubscriberStatusChange",value:function(e){e.data.isBBGSubscriber?this.removeClass(h):this.addClass(h)}}]),i}(c);r.default=f},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381}],475:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/events/player-events")),o=i(e("app/events/ad-events")),u=i(e("app/utils/projector-utils")),d=new s.default("AutoplayBrowsersPlugin"),p=["_onPlay","_onPause","_onVolumeChange","_onAdTimeUpdate","_onContentTimeUpdate"],c=function(){function r(e){var t=this;(0,a.default)(this,r),this._player=e,p.forEach(function(e){t[e]=t[e].bind(t)}),this._isMuted=e.options_.muted||0===e.volume(),e.on(l.default.BVP_VOLUME_CHANGE,this._onVolumeChange),e.on(o.default.AD_PLAYBACK_PROGRESS_UPDATE,this._onAdTimeUpdate),e.on(l.default.TIMEUPDATE,this._onContentTimeUpdate),e.on([l.default.PLAY,o.default.AD_STARTED,o.default.AD_RESUMED],this._onPlay),e.on([l.default.PAUSE,o.default.AD_PAUSED],this._onPause),this._wasLastTickPlayingWithSound=!1,this._lastPlayingWithSoundTime=0}return(0,n.default)(r,[{key:"removeEventListeners",value:function(){d.debug("removing event listeners"),this._player.off(l.default.BVP_VOLUME_CHANGE,this._onVolumeChange),this._player.off(o.default.AD_PLAYBACK_PROGRESS_UPDATE,this._onAdTimeUpdate),this._player.off(l.default.TIMEUPDATE,this._onContentTimeUpdate),this._player.off([l.default.PLAY,o.default.AD_STARTED,o.default.AD_RESUMED],this._onPlay),this._player.off([l.default.PAUSE,o.default.AD_PAUSED],this._onPause)}},{key:"_onPlay",value:function(){this._isPlaying=!0}},{key:"_onPause",value:function(){this._wasLastTickPlayingWithSound=!1,this._isPlaying=!1}},{key:"_onVolumeChange",value:function(e){var t=e.data,r=t.volume,i=t.muted;this._isMuted=i||0===r}},{key:"_onAdTimeUpdate",value:function(e){var t=e.data.elapsedTime;this._handleTimeUpdate(t)}},{key:"_onContentTimeUpdate",value:function(){this._handleTimeUpdate(this._player.currentTime())}},{key:"_handleTimeUpdate",value:function(e){var t=!this._isMuted&&this._isPlaying;this._wasLastTickPlayingWithSound?t?1<=e-this._lastPlayingWithSoundTime&&(d.info("Setting autoplayAllowed flag to true"),u.default.setAutoplayAllowed(!0),this.removeEventListeners()):(this._wasLastTickPlayingWithSound=!1,this._lastPlayingWithSoundTime=0):t&&(this._wasLastTickPlayingWithSound=!0,this._lastPlayingWithSoundTime=e)}}],[{key:"init",value:function(){var e=this.options_,t=e.metadata.player_type;if(e.useAutoplayBrowsersPlugin&&!u.default.getAutoplayAllowed()&&u.default.canAutoplayAfterAction()&&!u.default.isMiniPlayer({playerType:t})&&!u.default.isRadioPlayer({playerType:t}))return new r(this);d.info("plugin disabled")}}]),r}();videojs.registerPlugin("AutoplayBrowsersPlugin",c.init);var h=c;r.default=h},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/log":464,"app/utils/projector-utils":466}],474:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("../components/audio/AudioBarsComponent")),o=new s.default("AudioBarsPlugin"),u=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"init",value:function(){var e=this.options_;e.enableAudioBars?"radio"===e.metadata.player_type?(o.info("plugin initialized"),videojs.registerComponent("AudioBarsComponent",l.default),this.options_.AudioBarsComponent=this.options_.AudioBarsComponent||!0):o.info("plugin disabled for non-radio streams"):o.info("plugin disabled")}}]),e}();videojs.registerPlugin("AudioBarsPlugin",u.init);var d=u;r.default=d},{"../components/audio/AudioBarsComponent":367,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464}],367:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),p=i(e("app/events/player-events")),c=i(e("app/utils/css-helpers")),n=videojs.getComponent("Component"),h="bvp-audio-bars--playing",f="bvp-audio-bars--paused",m=function(e){function n(e,t){var r;return(0,a.default)(this,n),r=(0,l.default)(this,(0,u.default)(n).call(this,e,t)),e.on(p.default.PLAY,function(){c.default.addClass(r.el(),h),c.default.removeClass(r.el(),f)}),e.on(p.default.PAUSE,function(){c.default.removeClass(r.el(),h),c.default.addClass(r.el(),f)}),r}return(0,d.default)(n,e),(0,s.default)(n,[{key:"createEl",value:function(){for(var e=(0,o.default)((0,u.default)(n.prototype),"createEl",this).call(this,"div",{className:"bvp-audio-bars"}),t=0;t<75;t++){var r=.7*Math.random(),i=1.6*Math.random()+1.5,a=(0,o.default)((0,u.default)(n.prototype),"createEl",this).call(this,"div",{className:"bvp-audio-bars__bar-container",innerHTML:'<div class="bvp-audio-bars__bar" style="animation-delay: '.concat(r,"s; animation-duration: ").concat(i,'s"></div>')});e.appendChild(a)}return e}}]),n}(n);videojs.registerComponent("AudioBarsComponent",m);var b=m;r.default=b},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381,"app/utils/css-helpers":453,"core-js/modules/es.array.concat":193}],439:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),o=i(e("@babel/runtime/helpers/inherits")),a=i(e("./AbstractViewStrategy")),u=i(e("../lib/script-element")),d=i(e("../view/replace-view")),p=function(e){function a(e){var t;(0,n.default)(this,a);var r=e.containerElement||u.default.findScriptElement();e.containerElement=r.parentNode;var i=e||u.default.getScriptQueryParameters(r);if((t=(0,s.default)(this,(0,l.default)(a).call(this,i))).view=d.default,t.el_=r,!t.el_)throw new Error("Container element is not found. Make sure your code is wrapped in a script tag.");return t}return(0,o.default)(a,e),a}(a.default);t.exports=p},{"../lib/script-element":427,"../view/replace-view":527,"./AbstractViewStrategy":437,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],527:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),o=i(e("@babel/runtime/helpers/inherits")),u=i(e("./View")),d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,l.default)(t).apply(this,arguments))}return(0,o.default)(t,e),(0,n.default)(t,[{key:"preRender",value:function(e){var t=this.element.parentNode;return t?(t.replaceChild(e,this.element),!0):(this.trigger(u.default.ON_ERROR,{error:new Error("Missing parent node. Cannot attach the video player")}),!1)}}]),t}(u.default);r.default=d},{"./View":525,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],427:[function(require,module,exports){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.string.split"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _queryString=_interopRequireDefault(require("app/utils/query-string")),_log=_interopRequireDefault(require("app/utils/log")),REGEXP_BPLAYER_HREF=/bplayer\.js$|bplayer\.js\?/,REGEXP_BPLAYER_NAME=/^bplayer$/,DATA_EXCLUDE="data-exclude",DATA_NAME="data-name",log=new _log.default("ScriptElement");function findScriptElement(){if(document.currentScript)return document.currentScript;var e,t=document.getElementsByTagName("script"),r=t[t.length-1];if(REGEXP_BPLAYER_HREF.test(r.src))e=r;else for(var i=0,a=t.length;i<a;++i)REGEXP_BPLAYER_HREF.test(t[i].src)&&!t[i].getAttribute(DATA_EXCLUDE)&&(e=t[i]);if(!e)for(var n=0,s=t.length;n<s;++n)REGEXP_BPLAYER_NAME.test(t[n].getAttribute(DATA_NAME))&&(e=t[n]);return e}function getScriptQueryParameters(scriptElement){log.warn("Specifying user options through URL query-string has been deprecated.");var query=scriptElement.src.split("?")[1];return query?(0,_queryString.default)(query):("bplayer"!==scriptElement.getAttribute("data-name")&&(log.warn("Initialization of BPlayer within a script tag has been deprecated."),eval(scriptElement.innerHTML)),"undefined"==typeof setup?{}:setup)}var _default={findScriptElement:findScriptElement,getScriptQueryParameters:getScriptQueryParameters};exports.default=_default},{"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464,"app/utils/query-string":467,"core-js/modules/es.string.split":230}],438:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault"),a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/possibleConstructorReturn")),s=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),o=i(e("./AbstractViewStrategy")),u=i(e("../view/insert-view")),d=function(e){function r(e){var t;if((0,a.default)(this,r),(t=(0,n.default)(this,(0,s.default)(r).call(this,e))).view=u.default,t.el_=e.containerElement,!t.el_)throw new Error("Container element is not found. Make sure userOptions.containerElement is set!");return t}return(0,l.default)(r,e),r}(o.default);t.exports=d},{"../view/insert-view":526,"./AbstractViewStrategy":437,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],526:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),o=i(e("@babel/runtime/helpers/inherits")),u=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(0,l.default)(t).apply(this,arguments))}return(0,o.default)(t,e),(0,n.default)(t,[{key:"preRender",value:function(e){return this.element.innerHTML="",this.element.appendChild(e),!0}}]),t}(i(e("./View")).default);r.default=u},{"./View":525,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],437:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=e("build/shims"),l=i(e("../lib/projector-settings-js/projector-settings-js")),o=i(e("../lib/projector-config")),u=i(e("app/utils/utils")),d=i(e("../view/View")),p=i(e("../lib/user-options-validator")),c=["loadBMMRData","loadProjectorConfiguration","setProjectorSettings","setupViewRenderer","renderView"],h=function(){function r(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if((0,a.default)(this,r),this.userOptions=p.default.getValidatedOptions(e),this.view=null,this.el_=null,u.default.isEmptyObject(this.userOptions))throw new Error("Unable to run strategy without userOptions");c.forEach(function(e){t[e]=t[e].bind(t)})}return(0,n.default)(r,[{key:"run",value:function(){return this.loadBMMRData().then(this.loadProjectorConfiguration).then(this.setProjectorSettings).then(this.setupViewRenderer).then(this.renderView)}},{key:"loadBMMRData",value:function(){return this.userOptions.facadePlayer.getBmmrLoader().load()}},{key:"loadProjectorConfiguration",value:function(e){var t=0<arguments.length&&void 0!==e?e:null,r=this.userOptions.live?this.userOptions.id:void 0;return o.default.load({userOptions:this.userOptions,version:s.version,bmmrAsset:t,liveId:r})}},{key:"setProjectorSettings",value:function(e){return new l.default(e).ready()}},{key:"setupViewRenderer",value:function(e){return new this.view(this.el_,e)}},{key:"renderView",value:function(e){var t=this;return new Promise(function(r,i){e.on(d.default.ON_RENDER,function(e){var t=e.detail.player;r(t)}).on(d.default.ON_ERROR,function(e){var t=e.detail.error;i(t)}).on(d.default.ON_DISPOSE,function(){return t.dispose()}),e.render()})}},{key:"isLive",value:function(){return Boolean(this.userOptions.live)}},{key:"dispose",value:function(){this.userOptions=this.view=this.el_=null}}]),r}();r.default=h},{"../lib/projector-config":418,"../lib/projector-settings-js/projector-settings-js":425,"../lib/user-options-validator":428,"../view/View":525,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/utils":472,"build/shims":2,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219}],525:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),s=i(e("app/utils/event-target")),p=i(e("app/utils/video-tag-generator")),c=function(e){function s(e,t){var r;if((0,a.default)(this,s),(r=(0,l.default)(this,(0,u.default)(s).call(this))).element=e,r.settings=t,r.tagGenerator=new p.default(t),!e)throw new Error("View element is not provided");return r}return(0,d.default)(s,e),(0,n.default)(s,[{key:"preRender",value:function(){throw new Error("Required method preRender is not implemented.")}},{key:"render",value:function(){this.trigger(s.ON_BEFORE_RENDER);var e=this,t=this.settings.dataSetup,r=this.dispose.bind(this),i=this.tagGenerator.generateVideoTag(),a=i.id;if(this.preRender(i)){var n;t.id=a;try{n=window.videojs(a,t)}catch(e){return this.element=null,void this.trigger(s.ON_ERROR,{error:e})}return n.ready(function(){e.element=null,e.trigger(s.ON_RENDER,{player:this})}),n.on("dispose",r),this._addCustomPlayerSetting(n,t),n}this.trigger(s.ON_ERROR,{error:new Error("Failed to pre-render video element")})}},{key:"_addCustomPlayerSetting",value:function(e,t){t.hidePlayerControls&&e.addClass("vjs-hide-player-controls"),t.useCustomBufferingAnimation&&e.addClass("vjs-hide-default-buffering-animation")}},{key:"dispose",value:function(){this.element=this.settings=this.tagGenerator=null,this.trigger(s.ON_DISPOSE),(0,o.default)((0,u.default)(s.prototype),"removeAllEventListeners",this).call(this)}}]),s}(s.default);Object.defineProperties(c,{ON_BEFORE_RENDER:{value:"beforeRender"},ON_RENDER:{value:"render"},ON_DISPOSE:{value:"dispose"},ON_ERROR:{value:"error"}});var h=c;r.default=h},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/event-target":458,"app/utils/video-tag-generator":473}],473:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),l=i(e("./css-helpers")),o=i(e("app/utils/projector-utils")),n=i(e("app/utils/log")),u=i(e("app/utils/error-report")),d=e("app/utils/Constant"),p=new n.default("VideoTagGenerator"),c=function(){function n(e){if((0,s.default)(this,n),e){var t=e.dataSetup,r=t.streams,i=t.width,a=t.height;this.dataSetup=t,this.options=e.userOptions,this.isMiniPlayer=o.default.isMiniPlayer(t),this.height=a,this.playerId=n.getUniqueVideoTagId(t),this.preload=this.options.preload||"metadata",this.streams=r,this.width=i,this.forcePosterMobile=t.forcePosterMobile,this.poster=t.posterUrl}else u.default.recordGenericError(p,"VideoTagGenerator requires a ProjectorSettings instance")}return(0,a.default)(n,[{key:"generateVideoTag",value:function(){var e=document.createElement("video");e.setAttribute("id",this.playerId),e.setAttribute("preload",this.preload);var t=["video-js","vjs-default-skin"];return this.isMiniPlayer?t.push("bvp-mini-player"):t.push("vjs-show-big-play-button-on-pause"),this.width&&this.height?l.default.css(e,{width:this.width,height:this.height}):e.setAttribute("fluid",!0),this.dataSetup.autoplay&&(t.push(d.AUTOPLAY_CLASS),e.setAttribute("autoplay",!0)),o.default.isMobile()&&(e.setAttribute("playsinline",!0),this.forcePosterMobile&&e.setAttribute("poster",this.poster)),l.default.addClassList(e,t),n.setVideoSources(e,this.streams),e}}],[{key:"getUniqueVideoTagId",value:function(e){var t=String(e.htmlChildId||e.id);return"bvp-".concat(t.substr(0,6),"-").concat(Math.floor(1e6*Math.random()))}},{key:"setVideoSources",value:function(r,e){var i=document.createElement("source");e.forEach(function(e){var t=i.cloneNode(!1);t.setAttribute("src",e.url),t.setAttribute("type",e.type),e.percent&&t.setAttribute("data-percent",e.percent),r.appendChild(t)})}}]),n}();r.default=c},{"./css-helpers":453,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/Constant":441,"app/utils/error-report":457,"app/utils/log":464,"app/utils/projector-utils":466,"core-js/modules/es.array.concat":193,"core-js/modules/web.dom-collections.for-each":243}],428:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/log")),l=i(e("app/utils/error-report")),o=i(e("lodash.pick")),u=new s.default("UserOptionsValidator"),d={id:{required:!0,type:String},autoplay:Boolean,aspectRatio:String,htmlChildId:String,width:String,height:String,log_debug:Boolean,comscore_ns_site:String,vertical:String,poster:String,start_muted:Boolean,live:Boolean,comscore_page_level_tags:Object,techOrder:Array,tech_order:Array,idType:String,share_metadata:Object,video_autoplay_on_page:Boolean,controls:Boolean,containerElement:HTMLElement,source:String,zone:String,poster_as_slate:Boolean,forcePosterMobile:Boolean,byzantium_client:Object,parselyPageUrl:String,playlistIndex:Number,isPlaylistPreloadedPlayer:Boolean,use_comscore:Boolean,use_parsely:Boolean,use_share_overlay:Boolean,use_title_bar:Boolean,continuous_play_previous_url:String,use_google_tag_manager:Boolean,google_tag_manager_data_layer_id:String,enableFence:Boolean,enableAudioBars:Boolean,offsite_embed:Boolean,analyticsParams:Object,useRegUIPopUpPlugin:Boolean,useChromeCastPlugin:Boolean,enableDai:Boolean,useMoatDai:Boolean,user_tracking_config:Object,hidePlayerControls:Boolean,useNonInteractiveProgressBar:Boolean,useCustomBufferingAnimation:Boolean,customBufferingAnimationAsset:String,enableClosedCaptionsApi:Boolean,hideNativePlayerControls:Boolean,enablePlayPauseOverlay:Boolean,useTranscriptPlugin:Boolean,useTheaterModePlugin:Boolean,usePlayerToutPlugin:Boolean,hideLiveDisplay:Boolean,use_youbora:Boolean,useFoundationLayout:Boolean,useFullscreenControlPlugin:Boolean,useViewabilityPlugin:Boolean,useTestDaiStream:Boolean,useContentOverlayPlugin:Boolean,accessKey:String,distributions:String,userId:String,client:String,serviceEnv:String,_devServerUrl:String,module_ad_player:String,ad_tag:String,ad_tag_sz_preroll:String,ad_tag_midroll:String,ad_tag_sz_midroll:String,ad_tag_gpt_preroll:Boolean,ad_tag_gpt_midroll:Boolean,ad_network_id_preroll:String,ad_network_id_midroll:String,ad_tag_cust_params_preroll:String,ad_tag_cust_params_midroll:String,use_js_ads:Boolean,ad_code_prefix:String,ad_companion:Boolean,additionalSites:String,site:String,url_override:Object,facadePlayer:Object},p=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"getValidatedOptions",value:function(i){var t=0,a=0;return Object.keys(d).forEach(function(e){d[e].constructor!==Object||!d[e].required||void 0!==i[e]&&null!==i[e]||(l.default.recordGenericError(u,'Missing required option "'.concat(e,'"')),t++)}),Object.keys(i).forEach(function(e){var t=i[e];if(void 0===d[e])return u.warn("Unexpected option passed: ".concat(e," with value: "),t),void a++;var r="[object Object]"===Object.prototype.toString.call(d[e])?d[e].type:d[e];null==t||t.constructor===r||t instanceof r||(u.warn("Unexpected option type: ".concat(e,'. Was expecting type "').concat(r.name,'" but got'),t),a++)}),u.info("validation complete with ".concat(t," errors and ").concat(a," warnings")),(0,o.default)(i,Object.keys(d))}}]),e}();r.default=p},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/error-report":457,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.function.name":205,"core-js/modules/es.number.constructor":206,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.regexp.to-string":223,"core-js/modules/web.dom-collections.for-each":243,"lodash.pick":262}],425:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.url.to-json"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/defineProperty")),l=i(e("app/utils/persist-controls")),o=i(e("../projector-autoplay")),u=i(e("./cdn")),d=i(e("./prioritize-cdn/cedexis-priority-provider")),p=i(e("../../../config/errorStrings.json")),c=i(e("./plugin-options")),h=i(e("app/lib/projector-settings-js/poster-size")),f=i(e("../projector-ads")),m=i(e("app/utils/projector-utils")),b=i(e("build/resources")),v=i(e("./prioritize-cdn/weighted-random-priority-provider")),y=i(e("app/utils/log")),g=i(e("app/utils/error-report")),_=i(e("app/lib/projector-settings-js/TritonStreamProvider")),C=e("app/utils/Constant"),A=i(e("lodash.clone")),E=i(e("lodash.pick")),P=i(e("app/lib/bmmr-asset-js/video-stream")),S=e("app/utils/dai-util"),T=new y.default("ProjectorSettings"),k=C.MPEG_STREAM_TYPE,w={MP4:!0,TS:!0,F4M:!0},j=["id","title","live","form_type","player_type","cedexisAppID","streamProvider","streamProviderConfig"];function R(e){return"https:"===location.protocol&&b.default.isDev?e.replace(":".concat(b.default.localPort),":".concat(b.default.localPort+1)):e}var D=function(){function r(e){var t=this;if((0,a.default)(this,r),(0,s.default)(this,"config",void 0),(0,s.default)(this,"liveId",void 0),(0,s.default)(this,"version",void 0),(0,s.default)(this,"userOptions",void 0),(0,s.default)(this,"bmmrAsset",void 0),(0,s.default)(this,"htmlChildId",void 0),(0,s.default)(this,"prioritizeStreams",void 0),(0,s.default)(this,"dataSetup",void 0),(0,s.default)(this,"readyPromise",void 0),(0,s.default)(this,"debugLogEnabled",void 0),(0,s.default)(this,"finalizeSettings",function(){t.dataSetup=Object.assign({swf:r.getSwfUrl(),ui_skin_url:r.getSkinUrl(),buffering_animation:r.getBufferingAnimationUrl(),asset_version:t.version,original_user_options:t.config.userOptions},t.config.defaultOptions||{},t.userOptions||{},{poster:void 0},t.generateProjectorAssetWithStreams()),(0,S.isDaiEnabled)(t.dataSetup)&&(t.dataSetup=(0,S.formatStreams)(t.dataSetup)),t._overwriteSettingsForHidingPlayerControls(),t.determineMuteState();var e=new f.default(t.dataSetup,t.bmmrAsset);t.dataSetup=Object.assign(t.dataSetup,e.prepare()),t._determineContentAutoplay(),c.default.addOptions(t.dataSetup),t.initializeIsViewable(),t.determineTechOrder(),t.determineTitle(),t.setControlsVisibility(),t.setNativeTextTrack(),t.addPlayerIdToPluginSettings(),t.filterStreamsForMobile(),t._overwriteSettingsForStreamProvider(),t._overwriteSettingsForExperiment(),!t._isTritonStream()&&t.dataSetup.hlsjs&&(t.dataSetup.hlsjs.hlsConfig.startLevel=-1),t.dataSetup.autoplayReportingValues=o.default.getReportingValues(t.dataSetup)}),(0,s.default)(this,"addPlayerIdToPluginSettings",function(){t.dataSetup&&t.dataSetup.plugins?Object.keys(t.dataSetup.plugins).forEach(function(e){t.dataSetup.plugins[e].playerId=t.dataSetup.id}):T.debug("Cannot add playerid tp plugin options")}),this.config=e,this.config.version){if(this.liveId=null,this.dataSetup=null,this.prioritizeStreams=null,this.version=this.config.version,this.userOptions=this.config.userOptions,this.userOptions.live=Boolean(+this.userOptions.live),this.bmmrAsset=this.config.bmmrAsset,this.htmlChildId=this.userOptions.htmlChildId,this.userOptions.live){if(!this.config.liveId)return void g.default.recordGenericError(T,"liveId not passed");if(this.liveId=this.config.liveId,!this.config.liveStreams[this.liveId])return void g.default.recordGenericError(T,"Invalid liveId:",this.liveId)}this.debugLogEnabled=this.userOptions.log_debug,videojs.addLanguage("en",p.default),void 0!==this.userOptions.tech_order&&(this.userOptions.techOrder=this.userOptions.tech_order),this.readyPromise=this.prepareStreams().then(this.setPrioritizedStreams.bind(this),function(e){return T.warn("Stream prioritize failure: ".concat(e))}).then(this.finalizeSettings).then(function(){return t})}else g.default.recordGenericError(T,"Invalid version passed")}return(0,n.default)(r,[{key:"ready",value:function(){return this.readyPromise}},{key:"determineTechOrder",value:function(){var e=this.dataSetup.techOrder||[],t=[];if(m.default.isMobile()||m.default.isSafariDesktop())this.dataSetup.techOrder=["html5"];else{for(var r=0;r<e.length;r++)if("html5"===e[r])t.push("hlsjs");else{if("Chromecast"===e[r]&&m.default.isIeOrEdge())continue;t.push(e[r])}this.dataSetup.techOrder=t}}},{key:"determineMuteState",value:function(){this.dataSetup.muted=!m.default.isRadioPlayer(this.dataSetup)&&(m.default.isMutedOverlayShowing(this.dataSetup)||this.config.userOptions.start_muted||m.default.isMiniPlayer(this.dataSetup)||"true"===l.default.get("muted"))}},{key:"initializeIsViewable",value:function(){this.dataSetup.isViewable=!0}},{key:"setControlsVisibility",value:function(){m.default.isMobile()&&!this.dataSetup.hideNativePlayerControls&&(this.dataSetup.nativeControlsForTouch=!0)}},{key:"setNativeTextTrack",value:function(){var e=this.dataSetup&&this.dataSetup.html5||{};this.userOptions.live&&m.default.isSafariDesktop()&&(e.nativeTextTracks=!0);var t=!e.hasOwnProperty("nativeTextTracks")||e.nativeTextTracks,r=videojs.getTech("Html5");r&&(r.prototype.featuresNativeTextTracks=t);var i=videojs.getTech("Hlsjs");i&&(i.prototype.featuresNativeTextTracks=t)}},{key:"prepareStreams",value:function(){if(this._isTritonStream()){var e=this.config.liveStreams[this.liveId].streamProviderConfig;return _.default.syncAndFetchStreamInfo(e,this.htmlChildId)}if(this.userOptions.url_override)return this.getStreamsManualUrl();var t=new v.default,r=new d.default(this.getCedexisAppID(),this.htmlChildId);if(this.userOptions.live){var i=t.prioritizeCDNs(this.config.liveStreams[this.liveId].cdns);return r.prioritizeCDNs(i).then(function(e){return u.default.getStreams(e)})}var a=t.prioritizeStreams(this.getStreams());return r.prioritizeStreams(a)}},{key:"getCedexisAppID",value:function(){return this.bmmrAsset?this.bmmrAsset.getCedexisAppID():this.config.liveStreams[this.liveId].cedexisAppID}},{key:"getStreams",value:function(){if(this.bmmrAsset){var e="https:"===window.location.protocol;return this.bmmrAsset.getStreams(e)}return u.default.getStreams(this.config.liveStreams[this.liveId].cdns)}},{key:"getStreamsManualUrl",value:function(){var e=this.userOptions.url_override;return Promise.resolve([new P.default({percent:100,stream_type:e.type,url:e.url,muxing_format:e.mux})])}},{key:"setPrioritizedStreams",value:function(e){this.prioritizeStreams=e}},{key:"getPrioritizedStreams",value:function(){return this.prioritizeStreams?this.prioritizeStreams:this.getStreams()}},{key:"getProjectorAssetCaptionsVod",value:function(){var e=this.bmmrAsset?this.bmmrAsset.getCaptions():null;if(e){for(var t=[],r=0;r<e.length;++r)t.push({url:e[r].getUrl()});return t}}},{key:"getProjectorAssetStreamsVod",value:function(){for(var e=this.getPrioritizedStreams(),t=[],r=0;r<e.length;++r){var i=e[r],a=i.getMuxingFormat();w[a]&&t.push(i.toJSON())}return t}},{key:"getProjectorAssetNiCodesVod",value:function(){return(this.bmmrAsset?this.bmmrAsset.getNiCodes():null).map(function(e){return e.code})}},{key:"getProjectorAssetPeoplesVod",value:function(){return(this.bmmrAsset?this.bmmrAsset.getPeoples():null).map(function(e){return e.description})}},{key:"getPosterTemplateImage",value:function(){return this.userOptions.poster?this.userOptions.poster:this.userOptions.live?this.config.liveStreams[this.liveId].poster:this.bmmrAsset?this.bmmrAsset.getPosterTemplateImage():null}},{key:"getPosterContainerSize",value:function(){if(this.userOptions.width&&this.userOptions.height)return{width:this.userOptions.width,height:this.userOptions.height};if(this.userOptions.containerElement){var e=this.userOptions.containerElement.getBoundingClientRect();return{width:e.width,height:e.height}}return{width:9999,height:9999}}},{key:"getPosterImage",value:function(){var e=this.getPosterTemplateImage();if(!e)return T.warn("No poster template image"),null;var t=this.getPosterContainerSize();return h.default.closestImage(t.width,t.height,e)}},{key:"generateProjectorAssetWithStreamsVod",value:function(){var e=this.getPosterImage();return{posterUrl:e,streams:this.getProjectorAssetStreamsVod(),metadata:this.userOptions.url_override?{id:"urlOverride_"+(Math.floor(1e3*Math.random())+1)}:{bb_pub_d:this.bmmrAsset.getComscoreMetadata().getBbPubD(),c5:this.bmmrAsset.getComscoreMetadata().getC5(),cedexisAppID:this.bmmrAsset.getCedexisAppID(),compressedID:this.bmmrAsset.getCompressedID(),createdate:this.bmmrAsset.getCreateDate(),duration:""+this.bmmrAsset.getDuration(),form_type:this.bmmrAsset.getComscoreMetadata().getNsStTy(),id:this.bmmrAsset.getId(),show_name:(this.bmmrAsset.getShowName()||"").replace(/[']/g,"&apos;"),title:this.bmmrAsset.getTitle(),version:this.version,captions:this.getProjectorAssetCaptionsVod(),ni_codes:this.getProjectorAssetNiCodesVod(),keywords:this.bmmrAsset.getKeywords(),peoples:this.getProjectorAssetPeoplesVod(),contentCategory:this.bmmrAsset.getContentCategory(),adCuePoints:this.bmmrAsset.getAdCuePoints(),poster:e}}}},{key:"generateProjectorAssetWithStreamsLive",value:function(){var e=this.config.liveStreams[this.liveId],t=this.getPosterImage(),r=this.getPrioritizedStreams();return{posterUrl:t,streams:r,playerType:e.player_type,daiAssetKey:e.daiAssetKey,metadata:Object.assign((0,A.default)((0,E.default)(e,j)),{streams:r,poster:t,version:this.version})}}},{key:"generateProjectorAssetWithStreams",value:function(){return this.userOptions.live?this.generateProjectorAssetWithStreamsLive():this.generateProjectorAssetWithStreamsVod()}},{key:"filterStreamsForMobile",value:function(){m.default.isMobile()&&(this.dataSetup.streams=this.dataSetup.streams.filter(function(e){return e.type===k}))}},{key:"determineTitle",value:function(){var e=this.config.bmmrAsset?this.config.bmmrAsset.getTitle():this.config.title;this.dataSetup.title=e||""}},{key:"_isTritonStream",value:function(){return this.userOptions.live&&this.config.liveStreams[this.liveId].streamProvider===C.TRITON_PROVIDER_NAME}},{key:"_overwriteSettingsForStreamProvider",value:function(){if(this._isTritonStream()){var e=this.dataSetup;if(e.hlsjs){var t=e.hlsjs.hlsConfig;t.autoStartLoad=!0,t.manifestLoadingMaxRetry=0}m.default.isSafariDesktop()&&(e.preload=!0)}}},{key:"_determineContentAutoplay",value:function(){var e=this.dataSetup,t=this.userOptions,r=t.autoplay,i=m.default.isAllowedToAutoplay(e),a="disabled"!==t.module_ad_player&&e.hasPreroll;e.autoplay=Boolean(r&&!a&&i)}},{key:"_overwriteSettingsForExperiment",value:function(){}},{key:"_overwriteSettingsForHidingPlayerControls",value:function(){this.userOptions.hidePlayerControls&&Object.assign(this.dataSetup,e("../../../config/hidePlayerControlsOverride"))}}],[{key:"getSwfUrl",value:function(){return R(b.default.SWF_FILE_NAME_INSIGHTS)}},{key:"getSkinUrl",value:function(){return R(b.default.SKIN_FILE_NAME)}},{key:"getBufferingAnimationUrl",value:function(){return R(b.default.BUFFERING_ANIMATION_FILE_NAME)}}]),r}();r.default=D},{"../../../config/errorStrings.json":360,"../../../config/hidePlayerControlsOverride":361,"../projector-ads":416,"../projector-autoplay":417,"./cdn":420,"./plugin-options":421,"./prioritize-cdn/cedexis-priority-provider":423,"./prioritize-cdn/weighted-random-priority-provider":424,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/lib/bmmr-asset-js/video-stream":392,"app/lib/projector-settings-js/TritonStreamProvider":419,"app/lib/projector-settings-js/poster-size":422,"app/utils/Constant":441,"app/utils/dai-util":454,"app/utils/error-report":457,"app/utils/log":464,"app/utils/persist-controls":465,"app/utils/projector-utils":466,"build/resources":1,"core-js/modules/es.array.filter":194,"core-js/modules/es.array.map":201,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219,"core-js/modules/es.string.replace":228,"core-js/modules/es.symbol":235,"core-js/modules/es.symbol.description":233,"core-js/modules/web.dom-collections.for-each":243,"core-js/modules/web.url.to-json":247,"lodash.clone":259,"lodash.pick":262}],454:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.find"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-descriptors"),e("core-js/modules/es.object.keys"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.getOriginalStreamUrl=r.formatStreams=r.isDaiEnabled=void 0;var a=i(e("@babel/runtime/helpers/defineProperty")),n=i(e("build/resources"));function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}var l=new(i(e("app/utils/log")).default)("DaiUtil");r.isDaiEnabled=function(e){var t=e.live,r=e.enableDai,i=e.daiAssetKey,a=e.module_ad_player;return"true"!==n.default.DAI_MIDROLL_ENABLED?(l.info("Dai Plugin will be disabled for this environment"),!1):t?r?"disabled"===a?(l.info("DAI stream will not be used because ads module is disabled via options. Falling back on original manifest stream."),!1):window.google.ima.dai?!!i||(l.warn("Dai plugin will not be initialized. DAI asset key not present"),!1):(l.error("Dai plugin will not be initialized. Google ima dai sdk not found"),!1):(l.info("Dai Plugin will be is disabled"),!1):(l.info("Not a live page. Dai Plugin will be not initialized."),!1)};r.formatStreams=function(e){return l.info("Dai Plugin is enabled, default streams removed and backed up."),!e.streams||e.streams.length<=0?e:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach(function(e){(0,a.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e,{streams:[],originalStreams:e.streams})};r.getOriginalStreamUrl=function(e){var t=e.originalStreams;return((void 0===t?[]:t).find(function(e){return e.url})||{url:null}).url}},{"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464,"build/resources":1,"core-js/modules/es.array.filter":194,"core-js/modules/es.array.find":195,"core-js/modules/es.object.get-own-property-descriptor":210,"core-js/modules/es.object.get-own-property-descriptors":211,"core-js/modules/es.object.keys":212,"core-js/modules/es.symbol":235,"core-js/modules/web.dom-collections.for-each":243}],424:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.splice"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass"));function s(e,r){for(var t,i,a,n=[].concat(e),s=[],l=n.reduce(function(e,t){return e+t[r]},0);0<n.length&&1e-13<l;){t=0,i=Math.random()*l;for(var o=0,u=n.length;o<u;o++)if(i<=(t+=(a=n[o])[r])){s.push(a),n.splice(o,1),l-=a[r];break}}return s.concat(n)}var l=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,[{key:"prioritizeStreams",value:function(e){return e?s(e,"percent"):null}},{key:"prioritizeCDNs",value:function(e){return e?s(e,"weight"):null}}]),e}();r.default=l},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.splice":204}],423:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=function(){function r(e,t){(0,a.default)(this,r),this.appId=e,this.htmlChildId=t}return(0,n.default)(r,[{key:"prioritizeStreams",value:function(e){return e?Promise.resolve(e):Promise.resolve(null)}},{key:"prioritizeCDNs",value:function(e){return e?Promise.resolve(e):Promise.resolve(null)}}]),r}();r.default=s},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219}],421:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.map"),e("core-js/modules/es.object.keys"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s={bufferingAnimation:"buffering_animation",prerollUnit:"ad_tag",midrollUnit:"ad_tag_midroll",prerollNetworkId:"ad_network_id_preroll",midrollNetworkId:"ad_network_id_midroll",prerollSuffix:"ad_tag_suffix_preroll",midrollSuffix:"ad_tag_suffix_midroll",midrollMinDuration:"ad_midroll_min_duration",midrollMaxDuration:"ad_midroll_max_duration",prerollSz:"ad_tag_sz_preroll",midrollSz:"ad_tag_sz_midroll",prerollTile:"ad_tag_tile_preroll",midrollTile:"ad_tag_tile_midroll",prerollIsGPT:"ad_tag_gpt_preroll",midrollIsGPT:"ad_tag_gpt_midroll",prerollCustParams:"ad_tag_cust_params_preroll",midrollCustParams:"ad_tag_cust_params_midroll",overlayDisableCompanionAds:"disable_overlay_companion_ads",prerollDisableCompanionAds:"disable_companion_ads",midrollDisableCompanionAds:"disable_companion_ads",debug:"log_debug",prerollAdsPerBlock:"preroll_ads_per_block",midrollAdsPerBlock:"ads_live_per_block",prerollPlaybackDelay:"preroll_ads_playback_delay",midrollPlaybackDelay:"ads_live_playback_delay",controlsFadeMillis:"ui_autohide_timeout",jsAdsEnabled:"use_js_ads",prerollMaxRetries:"ads_max_retries_preroll",midrollMaxRetries:"ads_max_retries_midroll",shouldFetchCompanionAd:"ad_companion",byzantiumClient:"byzantium_client"},l={ns_site:"comscore_ns_site",page_level_tags:"comscore_page_level_tags"};function o(r,i,a){Object.keys(r).map(function(e){var t=r[e];void 0!==i[t]&&(a[e]=i[t])})}var u=function(){function t(){(0,a.default)(this,t)}return(0,n.default)(t,null,[{key:"addOptions",value:function(e){e.plugins||(e.plugins={}),t.addGoogleAdOptions(e),t.addComscoreOptions(e),t.addDaiOptions(e)}},{key:"addGoogleAdOptions",value:function(e){e.plugins.GoogleAdsPlugin||(e.plugins.GoogleAdsPlugin={}),o(s,e,e.plugins.GoogleAdsPlugin)}},{key:"addComscoreOptions",value:function(e){e.plugins.ComscoreStreamSensePlugin||(e.plugins.ComscoreStreamSensePlugin={}),o(l,e,e.plugins.ComscoreStreamSensePlugin)}},{key:"addDaiOptions",value:function(e){e.plugins.DaiPlugin||(e.plugins.DaiPlugin={}),o(s,e,e.plugins.DaiPlugin)}}]),t}();r.default=u},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"core-js/modules/es.array.map":201,"core-js/modules/es.object.keys":212}],420:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.function.name"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/defineProperty")),o=i(e("./stream"));var n=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length?arguments[2]:void 0;(0,a.default)(this,n),(0,l.default)(this,"name",void 0),(0,l.default)(this,"weight",void 0),(0,l.default)(this,"streams",void 0),this.name=e,this.weight=t,this.streams=r}return(0,s.default)(n,null,[{key:"getStreams",value:function(e){return n.combineStreams(n.parse(0<arguments.length&&void 0!==e?e:[])).streams}},{key:"parse",value:function(e){return(0<arguments.length&&void 0!==e?e:[]).reduce(function(e,t){var r=t.name,i=t.weight,a=t.streams.map(function(e,t){var r=t.url,i=t.type;return new o.default(r,i,e)}.bind(null,i));return e.push(new n(r,i,a)),e},[])}},{key:"combineStreams",value:function(e){var i=[];return new n((0<arguments.length&&void 0!==e?e:[]).reduce(function(e,t){var r=t.name;return t.streams.forEach(function(e,t,r){r.cname=e,t.push(r)}.bind(null,r,i)),"".concat(e,"_").concat(r)},""),null,i)}}]),n}();r.default=n},{"./stream":426,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.map":201,"core-js/modules/es.function.name":205,"core-js/modules/web.dom-collections.for-each":243}],426:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/defineProperty")),a=function(){function a(e,t,r){(0,n.default)(this,a),(0,l.default)(this,"url",void 0),(0,l.default)(this,"type",void 0),(0,l.default)(this,"percent",void 0);var i=100*r;if(!e||!t)throw new Error("Invalid url and type specified");if(isNaN(i)||i<0||100<i)throw new Error("Invalid stream weight specified (".concat(r,")"));this.url=e,this.type=t,this.percent=i}return(0,s.default)(a,[{key:"serialize",value:function(){return{url:this.url,type:this.type,percent:this.percent}}}]),a}();r.default=a},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14}],419:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("app/utils/ScriptInjector")),l=i(e("uuid/v4")),o=i(e("app/utils/RetryController")),u=e("app/utils/Constant"),d=i(e("app/utils/load-timer")),p=i(e("app/utils/error-report")),c=i(e("app/utils/log")),h=i(e("build/resources")),f=new c.default("TritonStreamProvider"),m=s.default.getInstance(),b={mode:"cors",credentials:"same-origin",cache:"no-cache"},v=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"syncAndFetchStreamInfo",value:function(e,t){var r=this,i=e.apiVersion,a=e.mount,n=e.stationId;return this._syncIds(n,t).then(function(){return r.fetchStreamInfo({apiVersion:i,mount:a},t)})}},{key:"fetchStreamInfo",value:function(e,i){var a=this,t=e.apiVersion,n=e.mount,s="".concat("https://playerservices.streamtheworld.com/api/livestream","?transports=hls&version=").concat(t,"&mount=").concat(n);return new Promise(function(t){var r=new o.default({name:"Provision Request",tryCallback:function(){a._fetchStreamMetadata(s,n,i).then(function(e){r.dispose(),t(e)},function(){return r.retry()})},maxRetryDelay:4e3});r.retry()})}},{key:"_fetchStreamMetadata",value:function(t,r,i){var a=this;return d.default.trackLoadStart(i,d.default.loadTypes.TRITON_PROVISION_API,t),fetch(t,b).then(function(e){if(!e.ok)throw new Error("Bad response from Triton provision API: ".concat(e.status));return d.default.trackLoadComplete(i,d.default.loadTypes.TRITON_PROVISION_API,d.default.loadStatus.COMPLETE),e.text().then(function(e){var t=window.xml.xmlToJSON(e);return a._buildStreamInfo(t,r)})}).catch(function(e){throw p.default.recordLoadError(f,t,"Unable to load:",e),d.default.trackLoadComplete(i,d.default.loadTypes.TRITON_PROVISION_API,d.default.loadStatus.ERROR),e})}},{key:"_generateSidebandMetadataId",value:function(){return(0,l.default)()}},{key:"_syncIds",value:function(e,t){return m.inject("".concat("https://playerservices.live.streamtheworld.com/api/idsync.js","?stationId=").concat(e),t,d.default.loadTypes.TRITON_ID_SYNC)}},{key:"_buildStreamInfo",value:function(e,r){var i=this,t=e.live_stream_config.mountpoints.mountpoint,a=t.transports.transport["@mountSuffix"],n=t.metadata["sse-sideband"]["@metadataSuffix"],s=t.servers.server.map(function(e){return e.ip.Text}),l=h.default.TRITON_TAG?"&".concat(h.default.TRITON_TAG):"";return s.map(function(e){var t=i._generateSidebandMetadataId();return{url:"https://".concat(e,"/").concat(r).concat(a,"?sbmid=").concat(t).concat(l),sbmUrl:"https://".concat(e,"/").concat(r).concat(n,"?sbmid=").concat(t),type:u.MPEG_STREAM_TYPE}})}}]),e}();r.default=v},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/Constant":441,"app/utils/RetryController":446,"app/utils/ScriptInjector":447,"app/utils/error-report":457,"app/utils/load-timer":463,"app/utils/log":464,"build/resources":1,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.map":201,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219,"uuid/v4":277}],446:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),n=i(e("app/utils/log")),o=new n.default("RetryController"),u=["retry","resetRetryDelay","dispose"],s=function(){function s(e){var t=this,r=e.name,i=e.tryCallback,a=e.cleanupCallback,n=e.maxRetryDelay;(0,l.default)(this,s),this.name=r,this.tryCallback=i,this.cleanupCallback=a,this.maxRetryDelay=n,this.retryDelay=0,this.retryTimer=null,u.forEach(function(e){return t[e]=t[e].bind(t)})}return(0,a.default)(s,[{key:"resetRetryDelay",value:function(){this.retryDelay<1500||(o.debug("".concat(this.name," resetting retry interval")),this.retryDelay=this._getInitialRetryDelay())}},{key:"retry",value:function(){var t=this;return this._cleanup(),new Promise(function(e){t.retryTimer=setTimeout(function(){o.debug("(".concat(t.name,") retrying...")),t.retryTimer=null,e(t.tryCallback())},t.retryDelay),o.debug("(".concat(t.name,") retrying in ").concat(t.retryDelay,"ms")),t._incrementRetryDelay()})}},{key:"dispose",value:function(){this._cleanup()}},{key:"_cleanup",value:function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null),this.cleanupCallback&&this.cleanupCallback()}},{key:"_incrementRetryDelay",value:function(){var e=0<this.retryDelay?1.1*this.retryDelay:this._getInitialRetryDelay();e<=this.maxRetryDelay&&(this.retryDelay=e)}},{key:"_getInitialRetryDelay",value:function(){return 1e3*Math.random()+500}}]),s}();r.default=s},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.function.name":205,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219}],416:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),p=i(e("@babel/runtime/helpers/defineProperty")),c=i(e("./projector-autoplay")),n=i(e("app/utils/projector-utils")),s=i(e("app/utils/query-string")),h=i(e("app/utils/error-report")),l=i(e("polyfills/url-search-params")),o=i(e("app/utils/log")),f=i(e("app/utils/Site")),m=e("app/utils/Constant"),b=i(e("types/SiteType")),u=/\bvod\b/g,v=new o.default("ProjectorAds"),y=["test","demo","bpop","adv","tagr","cmpid","srnd"],g=["pagetype","frameurl"],_="ad_test",C=(0,p.default)({},m.QUICKTAKE_CUSTOM_KEY,{prerollUnit:"quicktake/vod/preroll",midrollUnit:"quicktake/vod/midroll"});function A(e,t){return e?1<arguments.length&&void 0!==t&&t?e.replace(u,"embed/vod"):e:""}var E=function(){function u(e,t){if((0,d.default)(this,u),(0,p.default)(this,"dataSetup",void 0),(0,p.default)(this,"options",void 0),(0,p.default)(this,"autoplay",void 0),(0,p.default)(this,"video",void 0),(0,p.default)(this,"live",void 0),(0,p.default)(this,"offsiteEmbed",void 0),(0,p.default)(this,"prerollUnit",void 0),(0,p.default)(this,"midrollUnit",void 0),(0,p.default)(this,"adsEnabled",void 0),e&&e.original_user_options){var r=e.original_user_options,i=r.ad_tag_midroll,a=void 0===i?"":i,n=r.module_ad_player;this.dataSetup=e,this.options=r,this.autoplay=c.default.getReportingValues(e).dfp,this.video=t,this.live=Boolean(r.live),this.offsiteEmbed="true"===String(r.offsite_embed)||"offsite"===r.partner;var s=this._getAdUnits(a),l=s.prerollUnit,o=s.midrollUnit;this.prerollUnit=l,this.midrollUnit=o,this.adsEnabled="disabled"!==n&&Boolean(this.prerollUnit||this.midrollUnit)}else h.default.recordGenericError(v,"User options are missing")}return(0,a.default)(u,[{key:"isPrerollAdUnit",value:function(){return Boolean(this.video&&this.video.getPrerollAdUnit()&&this.options.vertical)}},{key:"addVerticalToUnit",value:function(){return this.options.ad_tag?this.options.ad_tag:this.isPrerollAdUnit()?"".concat(this.options.vertical,"/").concat(this.video.getPrerollAdUnit()):void 0}},{key:"getUnitWithVertical",value:function(){return this.live?this.options.ad_tag:this.options.ad_tag?this.options.ad_tag:this.video?this.video.getAdTag():null}},{key:"_getCustomAdUnits",value:function(){return this.video&&this.dataSetup.site!==b.default.COJP&&(this.video.getAdTag()||this.video.getPrerollAdUnit())?C[this.video.getCustomAdKey()]:null}},{key:"_getAdUnits",value:function(e){var t=this._getCustomAdUnits();if(t)return t;var r=this.isPrerollAdUnit()?this.addVerticalToUnit():this.getUnitWithVertical(),i=this._getPrerollAdCodePrefix();return{prerollUnit:A(r?i+r:"",this.offsiteEmbed),midrollUnit:A(e,this.offsiteEmbed)}}},{key:"_getSites",value:function(){var t={},e=this.options.additionalSites;e&&e.split(",").map(function(e){return t[e]=1});var r=this.video?this.video.getSites():null;return r&&r.map(function(e){return t[e]=1}),0<Object.keys(t).length?Object.keys(t).join(","):null}},{key:"_computedParameters",value:function(){var e=this._generateByzantiumParams(),t=this.video?this.video.getRawNiData():null;t&&(e.ni=t);var r=this.video?this.video.getId():null;r&&(e.guid=r);var i=this._getSites();if(i&&(e.sites=i),e.autoplay=this.autoplay||this.options.isPlaylistPreloadedPlayer,e.platform=n.default.isMobile()?"mobile":"desktop",this.live)e.videocontent="QT"===this.options.id?m.QUICKTAKE_CUSTOM_KEY:m.BLOOMBERGTV_CUSTOM_KEY;else if(this.video){var a;e.videocontent=null!==(a=this.video.getCustomAdKey())&&void 0!==a?a:m.BLOOMBERGTV_CUSTOM_KEY}return f.default.isOnSite(window.location.hostname)?e.onsite=!0:e.offsite=!0,e}},{key:"_mergeCustomParameters",value:function(e){var t=e?decodeURIComponent(e):"",r=s.default.parseQueryString(t),i=this._computedParameters(),a=this._getAdQueryParamOverrides();return Object.assign({},r,a,i)}},{key:"prepare",value:function(){if(this.adsEnabled){var e=this.options.ad_tag_cust_params_preroll,t=this.options.ad_tag_cust_params_midroll;return{hasPreroll:Boolean(this.prerollUnit),module_ad_player:"enabled",ad_tag:this.prerollUnit,ad_tag_midroll:this.midrollUnit,ad_tag_cust_params_preroll:this.prerollUnit?this._mergeCustomParameters(e):{},ad_tag_cust_params_midroll:this.midrollUnit?this._mergeCustomParameters(t):{},share_overrides:{ad_tag:this.prerollUnit,ad_tag_midroll:this.midrollUnit}}}return{module_ad_player:"disabled",ad_tag:"",ad_tag_midroll:"",ad_tag_cust_params_preroll:"",share_overrides:{ad_tag:"",ad_tag_midroll:""}}}},{key:"_generateByzantiumParams",value:function(){var e,t=this.dataSetup.byzantiumClient||(window.__bloomberg__||{}).byzantium;if(t&&t.getTagsWithContentInfo){var r={};this.video&&(r={id:this.video.getId(),contentType:"video",contentTags:this.video.getContentTags()||[]}),e=t.getTagsWithContentInfo({},r)}return e||{}}},{key:"_getAdQueryParamOverrides",value:function(){var r=this._getWindowSearchParams();return[].concat(y,g).reduce(function(e,t){return r.has(t)&&(e[t]=r.get(t)),e},{})}},{key:"_getWindowSearchParams",value:function(){var e=new URL(window.location.toString()).searchParams;if(e)return e;var t=document.createElement("a");t.href=window.location.toString();var r=t.search;return t=null,new l.default(r)}},{key:"_getPrerollAdCodePrefix",value:function(){var e=this.dataSetup.ad_code_prefix?this.dataSetup.ad_code_prefix:"",t=this._getWindowSearchParams();return t.has(_)?t.get(_):e}}]),u}();r.default=E},{"./projector-autoplay":417,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/Constant":441,"app/utils/Site":448,"app/utils/error-report":457,"app/utils/log":464,"app/utils/projector-utils":466,"app/utils/query-string":467,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.iterator":198,"core-js/modules/es.array.join":199,"core-js/modules/es.array.map":201,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.regexp.to-string":223,"core-js/modules/es.string.iterator":225,"core-js/modules/es.string.replace":228,"core-js/modules/es.string.search":229,"core-js/modules/es.string.split":230,"core-js/modules/web.dom-collections.iterator":244,"core-js/modules/web.url":246,"polyfills/url-search-params":528,"types/SiteType":530}],528:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("../js/utils/query-string")),l=function(){function t(e){(0,a.default)(this,t),this.params=s.default.parseQueryString(e)}return(0,n.default)(t,[{key:"get",value:function(e){if(this.has(e))return Array.isArray(this.params[e])?this.params[e][0]:this.params[e]}},{key:"getAll",value:function(e){return this.has(e)?Array.isArray(this.params[e])?this.params[e]:[this.params[e]]:[]}},{key:"has",value:function(e){return this.params.hasOwnProperty(e)}}]),t}();r.default=l},{"../js/utils/query-string":467,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14}],417:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.freeze"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a,n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/defineProperty")),o=i(e("app/utils/projector-utils")),u="autoplay",d="continuousplay",p="false",c="mobile",h="offsiteembed",f="true",m="video_autoplay_on_page",b="vod",v=Object.freeze({bss_cont_play:0,bss_auto_play:0}),y=(a={},(0,l.default)(a,u+f+d+p+c+p+b+p,{bss_cont_play:0,bss_auto_play:1}),(0,l.default)(a,u+p+d+p+c+p+b+p,v),(0,l.default)(a,u+f+d+p+c+f+b+p,v),(0,l.default)(a,u+p+d+p+c+f+b+p,v),(0,l.default)(a,u+p+d+f+c+p+b+p,{bss_cont_play:1,bss_auto_play:1}),(0,l.default)(a,u+p+d+p+c+f+b+p,v),(0,l.default)(a,u+p+d+f+c+f+b+p,{bss_cont_play:1,bss_auto_play:0}),(0,l.default)(a,u+f+d+p+c+p+b+f,{bss_cont_play:0,bss_auto_play:1}),(0,l.default)(a,u+f+d+f+c+p+b+f,{bss_cont_play:1,bss_auto_play:1}),(0,l.default)(a,u+p+d+p+c+p+b+p+h+f,{bss_cont_play:0,bss_auto_play:0,bss_offsite:1}),a);var g=function(){function i(){(0,n.default)(this,i)}return(0,s.default)(i,null,[{key:"getAutoPlayBoolean",value:function(e){var t=e.original_user_options;return t.hasOwnProperty(m)?t[m]:function(e){var t=e.original_user_options.autoplay,r=o.default.isAllowedToAutoplay(e);return Boolean(t&&r)}(e)}},{key:"getAutoPlayTruthString",value:function(e){return u+(e.autoPlay?f:p)+d+(e.continuousPlayPreviousUrl?f:p)+c+(o.default.isMobile()?f:p)+b+(e.vod?f:p)+(e.offsiteEmbed?h+f:"")}},{key:"getComscoreAutoplayValues",value:function(e){return y[i.getAutoPlayTruthString(e)]||v}},{key:"getAutoplayConfigData",value:function(e){var t=e.original_user_options;return{continuousPlayPreviousUrl:function(e){return e.hasOwnProperty("continuous_play_previous_url")}(t),autoPlay:i.getAutoPlayBoolean(e),vod:!t.live,offsiteEmbed:t.offsite_embed||"offsite"===t.partner}}},{key:"getReportingValues",value:function(e){var t=i.getAutoplayConfigData(e),r=i.getComscoreAutoplayValues(t);return{dfp:function(e){return e.autoPlay}(t),comscore:r,analytics:{continuousPlay:Boolean(r.bss_cont_play),autoplay:Boolean(r.bss_auto_play)}}}}]),i}();r.default=g},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/projector-utils":466,"core-js/modules/es.object.freeze":209}],418:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.freeze"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime/helpers/classCallCheck")),l=a(e("@babel/runtime/helpers/createClass")),o=a(e("@babel/runtime/helpers/defineProperty")),u=i(e("app/lib/ProjectorDefaults")),d=a(e("config/livestreams")),n=function(){function n(e){var t=e.userOptions,r=e.version,i=e.bmmrAsset,a=e.liveId;(0,s.default)(this,n),(0,o.default)(this,"defaultOptions",void 0),(0,o.default)(this,"liveStreams",void 0),(0,o.default)(this,"userOptions",void 0),(0,o.default)(this,"version",void 0),(0,o.default)(this,"bmmrAsset",void 0),(0,o.default)(this,"liveId",void 0),(0,o.default)(this,"title",void 0),Object.defineProperties(this,{userOptions:{value:t},version:{value:r},bmmrAsset:{value:i},liveId:{value:a}}),this.defaultOptions=Object.freeze(u.getConfig()),this.liveStreams=Object.freeze(d.default)}return(0,l.default)(n,null,[{key:"load",value:function(e){return Promise.resolve(new n(e))}}]),n}();r.default=n},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"app/lib/ProjectorDefaults":386,"config/livestreams":362,"core-js/modules/es.object.freeze":209,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219}],410:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.object.assign"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("./videojs-ad-buffering-spinner")),l=i(e("./videojs-ad-controlbar")),o=i(e("./ad-controller")),u=i(e("./videojs-ad-controls")),d=i(e("./videojs-ad-time-remaining")),p=i(e("./videojs-ad-play-button")),c=i(e("./videojs-ad-tag-container")),h=i(e("./ad-utils")),f=i(e("app/events/player-events")),m=i(e("app/utils/projector-utils")),b=new(i(e("app/utils/log")).default)("GoogleAdsPlugin"),v=function(){function i(e,t){(0,a.default)(this,i),this.options=e,this.player=t,videojs.registerComponent("AdControlsComponent",u.default),videojs.registerComponent("AdTimeRemaining",d.default),videojs.registerComponent("AdBufferingSpinner",s.default),videojs.registerComponent("AdPlayButton",p.default),videojs.registerComponent("AdTagContainer",c.default),videojs.registerComponent("AdControlBar",l.default),b.info("Google Ads Plugin Initialized")}return(0,n.default)(i,[{key:"onReady",value:function(){b.info("Plugin Ready Starting Ad Controller"),this.adController=this.player.AdController=new o.default(this.options,this.player)}},{key:"onPlayPreroll",value:function(){this.adController&&(this.adController.destroy(),this.adController=this.player.AdController=null);var e=Object.assign({forcePlay:!0},this.options);this.adController=this.player.AdController=new o.default(e,this.player),m.default.isAutoplayDisabledBrowser()&&this.adController.prerollForAutoplayDisabledBrowser()}},{key:"dispose",value:function(){this.adController.destroy(),this.adController=null,this.player.AdController=null,this.player=this.options=null}}],[{key:"init",value:function(e){var t=this;if(!m.default.isMiniPlayer(t.options_)&&h.default.canDisplayAds(e)){var r=new i(e,t);t.ready(r.onReady.bind(r)),t.on(f.default.PLAY_PREROLL,r.onPlayPreroll.bind(r)),t.on(f.default.DISPOSE,function(){r.dispose(),r=null})}}}]),i}();videojs.registerPlugin("GoogleAdsPlugin",v.init);var y=v;r.default=y},{"./ad-controller":393,"./ad-utils":399,"./videojs-ad-buffering-spinner":402,"./videojs-ad-controlbar":403,"./videojs-ad-controls":404,"./videojs-ad-play-button":406,"./videojs-ad-tag-container":407,"./videojs-ad-time-remaining":408,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/player-events":381,"app/utils/log":464,"app/utils/projector-utils":466,"core-js/modules/es.object.assign":207}],408:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=function(e){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,r),(0,s.default)(this,(0,o.default)(r).call(this,e,t))}return(0,u.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,l.default)((0,o.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-time-remaining bvp-ad-time-remaining__time-empty vjs-hidden",innerHTML:""})}}]),r}(videojs.getComponent("Component"));r.default=d},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],407:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=function(e){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,r),(0,s.default)(this,(0,o.default)(r).call(this,e,t))}return(0,u.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){var e=this.id();return(0,l.default)((0,o.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-ad__content",id:e.concat("AdTagContainer")})}}]),r}(videojs.getComponent("Component"));r.default=d},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"core-js/modules/es.array.concat":193}],406:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=function(e){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,r),(0,s.default)(this,(0,o.default)(r).call(this,e,t))}return(0,u.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){return(0,l.default)((0,o.default)(r.prototype),"createEl",this).call(this,"button",{className:"bvp-ad-big-play-button"},{"aria-live":"polite","aria-label":"Play",title:"Play"})}}]),r}(videojs.getComponent("Component"));r.default=d},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],404:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=videojs.getComponent("Component"),p="bvp-ad--active",c="bvp-ad-time-remaining__time-empty",h=function(e){function i(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,i),(t=(0,s.default)(this,(0,o.default)(i).call(this,e,r))).timeRemainingComponent=t.getChild("AdTimeRemaining"),t.on("mouseenter",t.onMouseEnter),t.on("mouseout",t.onMouseOut),t}return(0,u.default)(i,e),(0,n.default)(i,[{key:"showUI",value:function(){this.timeRemainingComponent.show()}},{key:"hideUI",value:function(){this.timeRemainingComponent.hide()}},{key:"createEl",value:function(){return(0,l.default)((0,o.default)(i.prototype),"createEl",this).call(this,"div",{className:"bvp-ad"})}},{key:"setCountdownTime",value:function(e){(this.timeRemainingComponent.el_.textContent=e)?this.timeRemainingComponent.removeClass(c):this.timeRemainingComponent.addClass(c)}},{key:"onMouseEnter",value:function(){this.player_.blockControls||this.addClass(p)}},{key:"onMouseOut",value:function(){this.removeClass(p)}},{key:"dispose",value:function(){(0,l.default)((0,o.default)(i.prototype),"dispose",this).call(this),this.remainingElement=null}}]),i}(d);r.default=h},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],403:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/get")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),u=i(e("@babel/runtime/helpers/inherits")),d=i(e("app/utils/css-helpers")),p=videojs.getComponent("Component"),c="bvp-ad-play-button",h="bvp-ad-play-button__paused",f="bvp-ad-play-button__playing",m="bvp-ad-fullscreen",b="bvp-ad-exit-fullscreen",v="bvp-ad-volume-bar__container--expanded",y="bvp-ad-volume-bar--expanded",g=function(e){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,r),(0,s.default)(this,(0,o.default)(r).call(this,e,t))}return(0,u.default)(r,e),(0,n.default)(r,[{key:"createEl",value:function(){var e=(0,l.default)((0,o.default)(r.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-control-bar",innerHTML:'\n      <button class="'.concat(c,' bvp-ad-button" \n        title="Play" \n        aria-live="polite" \n        aria-label="Play"></button>\n      <div class="bvp-ad-sound-menu">\n        <div class="bvp-ad-sound-menu__mute-control bvp-ad-button" \n            role="button" \n            aria-live="polite" \n            title="Mute" \n            aria-label="Mute" \n            tabindex="0"></div>\n        <div class="bvp-ad-volume-bar">\n          <div class="bvp-ad-volume-bar__container"\n                title="Volume Level"\n                aria-label="Volume Level"\n                aria-live="polite"\n                role="slider" \n                tabindex="0" \n                aria-valuemin="0" \n                aria-valuemax="100" \n                aria-valuenow="0"\n                aria-valuetext="0%">\n            <div class="bvp-ad-volume-bar__scrubber"></div>\n          </div>\n        </div>\n      </div>\n      <button class="').concat(m,' bvp-ad-button" title="Fullscreen" aria-live="polite" aria-label="Fullscreen"></button>\n    ')});return this._expandVolumeBar=this._expandVolumeBar.bind(this),this._collapseVolumeBar=this._collapseVolumeBar.bind(this),this._volumeBar=e.querySelector(".".concat("bvp-ad-volume-bar")),this._volumeBarContainer=e.querySelector(".".concat("bvp-ad-volume-bar__container")),this._soundMenu=e.querySelector(".".concat("bvp-ad-sound-menu")),this._muteButton=e.querySelector(".bvp-ad-sound-menu__mute-control"),this._soundMenu.addEventListener("mouseover",this._expandVolumeBar),this._volumeBarContainer.addEventListener("focus",this._expandVolumeBar),this._muteButton.addEventListener("focus",this._expandVolumeBar),this._soundMenu.addEventListener("mouseout",this._collapseVolumeBar),this._volumeBarContainer.addEventListener("blur",this._collapseVolumeBar),this._muteButton.addEventListener("blur",this._collapseVolumeBar),e}},{key:"dispose",value:function(){this._soundMenu.removeEventListener("mouseover",this._expandVolumeBar),this._volumeBarContainer.removeEventListener("focus",this._expandVolumeBar),this._muteButton.removeEventListener("focus",this._expandVolumeBar),this._soundMenu.removeEventListener("mouseout",this._collapseVolumeBar),this._muteButton.removeEventListener("blur",this._expandVolumeBar),this._volumeBarContainer.removeEventListener("blur",this._collapseVolumeBar),(0,l.default)((0,o.default)(r.prototype),"dispose",this).call(this)}},{key:"_expandVolumeBar",value:function(){d.default.addClass(this._volumeBarContainer,v),d.default.addClass(this._volumeBar,y)}},{key:"_collapseVolumeBar",value:function(){d.default.removeClass(this._volumeBarContainer,v),d.default.removeClass(this._volumeBar,y)}},{key:"setPlayState",value:function(){this._setPlayPauseState(!0)}},{key:"setPauseState",value:function(){this._setPlayPauseState(!1)}},{key:"setEnterFullscreenState",value:function(){this._setFullscreenState(!0)}},{key:"setExitFullscreenState",value:function(){this._setFullscreenState(!1)}},{key:"hideFullscreenButton",value:function(){var e=this.$(".".concat(m));d.default.addClass(e,"vjs-hidden")}},{key:"_setFullscreenState",value:function(e){var t=e?"Exit Fullscreen":"Fullscreen",r=this.$(".".concat(m));e?d.default.addClass(r,b):d.default.removeClass(r,b),r.setAttribute("title",t),r.setAttribute("aria-label",t)}},{key:"_setPlayPauseState",value:function(e){var t=e?"Pause":"Play",r=this.$(".".concat(c));e?(d.default.removeClass(r,f),d.default.addClass(r,h)):(d.default.removeClass(r,h),d.default.addClass(r,f)),r.setAttribute("title",t),r.setAttribute("aria-label",t)}}]),r}(p);r.default=g},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/css-helpers":453}],402:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/get")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),a=function(e){function a(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,n.default)(this,a),t=(0,l.default)(this,(0,u.default)(a).call(this,e,r));var i="B";return e.options_.useCustomBufferingAnimation&&(i=e.options_.customBufferingAnimationAsset,t.el_.style.backgroundImage='url(" '.concat(e.options_.posterUrl,' "')),t.$(".bvp-ad-buffering__spinner").setAttribute("data-spinner-asset",i),t}return(0,d.default)(a,e),(0,s.default)(a,[{key:"createEl",value:function(){return(0,o.default)((0,u.default)(a.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-buffering",innerHTML:'\n      <div class="bvp-ad-buffering__spinner"></div>\n      '})}}]),a}(videojs.getComponent("Component"));r.default=a},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],393:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.join"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.parse-float"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/defineProperty")),d=i(e("app/utils/projector-utils")),p=i(e("./ad-controls")),c=i(e("app/events/player-events")),h=i(e("app/events/ad-events")),f=i(e("app/utils/persist-controls")),n=i(e("app/utils/css-helpers")),s=i(e("./ad-preroll")),m=i(e("./ad-midroll")),b=i(e("./ad-utils")),l=i(e("app/utils/log")),v=e("app/utils/Constant"),y=new l.default("AdController"),g=function(){function l(e,t){var n=this;(0,o.default)(this,l),(0,u.default)(this,"videoTag",void 0),(0,u.default)(this,"player",void 0),(0,u.default)(this,"currentAdStarted",void 0),(0,u.default)(this,"isMobile",void 0),(0,u.default)(this,"isAdPlayable",void 0),(0,u.default)(this,"isLive",void 0),(0,u.default)(this,"playerWidth",void 0),(0,u.default)(this,"playerHeight",void 0),(0,u.default)(this,"animationFrameId",void 0),(0,u.default)(this,"muteStatus",void 0),(0,u.default)(this,"config",void 0),(0,u.default)(this,"adDimensions",void 0),(0,u.default)(this,"adUnit",void 0),(0,u.default)(this,"adControls",void 0),(0,u.default)(this,"volume",void 0),(0,u.default)(this,"googleIma",void 0),(0,u.default)(this,"adHTMLContainer",void 0),(0,u.default)(this,"adDisplayContainer",void 0),(0,u.default)(this,"adsLoader",void 0),(0,u.default)(this,"_isGoingToAutoplay",void 0),(0,u.default)(this,"_pausedForViewability",!1),(0,u.default)(this,"hasPlayableAd",void 0),(0,u.default)(this,"playMidroll",function(e){if(!(n.adUnit||n.player.paused()||n.player.options_.isPlayingDai)){var t=n.player.muted();n.isAdPlayable=!0,n.setMuteStatus(t),n.fetchMidroll(e)}}),(0,u.default)(this,"fetchMidroll",function(e){n.prepareForAd(),y.info("fetch midroll is called with the event",e),e&&e.data&&(0<e.data.duration>>0&&(n.config.midrollMaxDuration=1e3*e.data.duration));var t=n.muteStatus?0:n.volume;n.adUnit=new m.default(n._createFetchOptions(),n.adDimensions,n.videoTag,n.player,t),n.fetchAd()}),(0,u.default)(this,"_requestAd",function(){y.info("Requesting Ad",n._getAdType()),n.adControls.show(),n._initializeAdDisplayContainer(),n.adUnit.on([h.default.MAX_RETRIES_REACHED,h.default.AD_PLAYBACK_TIMED_OUT,h.default.AD_LOAD_TIMED_OUT].join(),n.onAdsTimedOut).on(h.default.AD_COMPLETED,n.onAdComplete).on(h.default.AD_LOADED,n.onAdLoaded).on(h.default.AD_LOADING,n.onAdLoading).on(h.default.AD_PAUSED,n.onAdPause).on(h.default.AD_PLAY_ERROR,n.onAdPlayError).on(h.default.AD_PLAYBACK_PROGRESS_UPDATE,n.onPlaybackStatusUpdate).on(h.default.AD_RESUMED,n.onAdResume).on(h.default.AD_STARTED,n.onAdStart).on(h.default.ALL_ADS_COMPLETED,n.onAllAdsComplete).on(h.default.CONTENT_PAUSE_REQUESTED,n.onContentPauseRequested).on(h.default.DURATION_CHANGE,n.onDurationChange).on(h.default.SKIPPED,n.onAdSkipped).on(h.default.SKIP_STATE_CHANGED,n.onAdSkipStateChange),n.adUnit.fetchAd(),setTimeout(n._sendAdRequestTracking.bind(n),0)}),(0,u.default)(this,"onAdLoaded",function(e){y.info("onAdLoaded is called");var t=n.adUnit.getAdController();n.player.trigger({type:h.default.AD_LOADED,data:{adsManager:t.adsManager,adContainer:t.adContainer,viewMode:t.viewMode,adType:n._getAdType(),custParams:n.adUnit.fromConfig("custParams"),isLive:n.isLive,duration:e.detail.data.duration,title:e.detail.data.title,mediaUrl:e.detail.data.mediaUrl,impressionId:e.detail.data.impressionId,channelId:t.channelId}}),n.updatePlayerUIForAd()}),(0,u.default)(this,"onAdLoading",function(){n.player.trigger({type:c.default.AD_LOADING})}),(0,u.default)(this,"onAdStart",function(e){n.hideBufferingAnimation(),y.info("Ad started"),n.monitorAdSizeStart(),n.player.trigger({type:h.default.CLIP,data:e.detail.data}),n.currentAdStarted=!0,n.showAdControls(),n.adControls.setPlayStatus(p.default.playStatus.PLAYING),n.player.trigger({type:h.default.AD_STARTED,data:e.detail.data})}),(0,u.default)(this,"onAdResume",function(e){n.adControls.setPlayStatus(p.default.playStatus.PLAYING),n.player.trigger({type:h.default.AD_RESUMED,data:e.detail.data})}),(0,u.default)(this,"onAdPause",function(e){n.adControls.setPlayStatus(p.default.playStatus.PAUSED),n.player.trigger({type:h.default.AD_PAUSED,data:e.detail.data})}),(0,u.default)(this,"onAdPlayError",function(e){n.hideBufferingAnimation(),n.monitorAdSizeEnd(),n.player.trigger(c.default.ADS_PLAY_ERROR,e)}),(0,u.default)(this,"onAdPlayRequest",function(){if(n.isAdPlayable=!0,n.adUnit){var e=n.player.options_,t=e.isViewable,r=e.passedViewableAdImpressionCheck;if(!t&&!r)return n._pausedForViewability=!0,void y.info("Player unviewable. Ad play request cancelled");n._pausedForViewability=!1,n.currentAdStarted?n.adUnit.resume():n.adUnit.startAd()}else n.fetchPreroll({autoPlay:!1})}),(0,u.default)(this,"onAdPauseRequest",function(){n._pausedForViewability=!1,n._onAdPauseRequest()}),(0,u.default)(this,"_onAdPauseRequest",function(){n.adUnit&&n.adUnit.pause(),!n.isMobile&&n.isAdPlayable&&(n.isAdPlayable=!1,n.hideBufferingAnimation(),n.adControls.setPlayStatus(p.default.playStatus.PLAYING),n.adControls.setPlayStatus(p.default.playStatus.PAUSED))}),(0,u.default)(this,"onContentPauseRequested",function(){n._getAdType()!==v.AD_TYPES.PREROLL&&(y.debug("onContentPauseRequested is called"),n.isLive?n.player.muted(!0):n.player.pause())}),(0,u.default)(this,"onDurationChange",function(e){var t=e.detail.duration;n.player.trigger({type:c.default.DURATION_CHANGE,data:t})}),(0,u.default)(this,"onPlaybackStatusUpdate",function(e){var t=e.detail.data,r=t.remainingTime,i=t.elapsedTime,a=t.duration;n.adControls.setAdCountdownTime(r,i,a),n.player.trigger({type:h.default.AD_PLAYBACK_PROGRESS_UPDATE,data:e.detail.data}),r<=n.player.options_.adAlmostFinishedThreshold&&n.player.tech_.trigger(h.default.AD_ALMOST_FINISHED)}),(0,u.default)(this,"onAdSkipped",function(e){var t=e.detail?e.detail.data:{};n.player.trigger({type:h.default.SKIPPED,data:t})}),(0,u.default)(this,"onAdSkipStateChange",function(e){var t=e.detail.data.adSkipState;n.player.trigger({type:h.default.SKIP_STATE_CHANGED,data:{adSkipState:t}})}),(0,u.default)(this,"onAdComplete",function(e){var t=e.detail?e.detail.data:{};n.player.trigger({type:h.default.AD_COMPLETED,data:t})}),(0,u.default)(this,"onAllAdsComplete",function(e){n.monitorAdSizeEnd(),n.player.trigger({type:h.default.ALL_ADS_COMPLETED,data:e.detail.data}),n.destroy(),n.switchToContent()}),(0,u.default)(this,"onAdsTimedOut",function(e){y.info("onAdsTimedOut"),n.player.trigger({type:c.default.ADS_TIMEOUT_ERROR,data:{originalEvent:e,adType:e.detail.data.adType}}),n.destroy(),n.isAdPlayable&&n.switchToContent()}),(0,u.default)(this,"onVolumeChange",function(e){n.volume=e.detail.volume,f.default.set("volume",n.volume),n.setMuteStatus(e.detail.muted),0<n.volume&&n.player.volume(n.volume),n.setAdVolume(n.volume,n.muteStatus)}),(0,u.default)(this,"onFullscreen",function(){n.adUnit&&(n.monitorAdSizeEnd(),n.adUnit.resize(window.screen.width,window.screen.height,n.googleIma.ViewMode.FULLSCREEN))}),(0,u.default)(this,"onExitFullscreen",function(){n.adUnit&&(n.monitorAdSizeStart(),n.adUnit.resize(n.playerWidth,n.playerHeight,n.googleIma.ViewMode.NORMAL))}),(0,u.default)(this,"onPlayerResize",function(){if(n.adUnit){var e=n.player.el().getBoundingClientRect(),t=e.width,r=e.height;n.playerHeight!=r&&n.playerWidth!=t&&(n.playerHeight=r,n.playerWidth=t,n.adUnit.resize(t,r,n.googleIma.ViewMode.NORMAL)),n.monitorAdSizeEnd(),n.monitorAdSizeStart()}}),(0,u.default)(this,"_triggerWillPlay",function(){n.player.trigger(c.default.WILL_PLAY)}),this.destroy=this.destroy.bind(this),this.prerollForAutoplayDisabledBrowser=this.prerollForAutoplayDisabledBrowser.bind(this);var r=b.default.hasPreroll(e),i=b.default.hasMidroll(e);if((this.hasPlayableAd=r)||i){var a=t.el().getBoundingClientRect(),s=t.options_.original_user_options;this.videoTag=null,this.player=t,this.currentAdStarted=null,this.isMobile=d.default.isMobile(),this.isAdPlayable=Boolean(s.autoplay||e.forcePlay),this.isLive=s.live,this.playerWidth=a.width,this.playerHeight=a.height,this.animationFrameId=null,this.muteStatus=t.options_.muted,this.config=e,this.adDimensions=null,this.adUnit=null,this.player.on(h.default.REQUEST_AD_PLAY,this.onAdPlayRequest),this.player.on(h.default.REQUEST_AD_PAUSE,this.onAdPauseRequest),this.player.on(c.default.DISPOSE,this.destroy),this.volume=this.getPlayerVolume(),this.adControls=this.createAdControls(),this.adControls.one(p.default.events.AD_REQUEST,this._triggerWillPlay),this._setupViewability(),this.googleIma=window.google.ima,this.adHTMLContainer=this.player.el().querySelector(".bvp-ad__content"),this.adDisplayContainer=new this.googleIma.AdDisplayContainer(this.adHTMLContainer),this.adsLoader=new this.googleIma.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(this.googleIma.ImaSdkSettings.VpaidMode.ENABLED),this.adsLoader.getSettings().setAutoPlayAdBreaks(!1),this._isGoingToAutoplay=this.isAdPlayable||s.isPlaylistPreloadedPlayer,r?this.setupPreroll():this.destroy(),i&&this.setupMidroll()}}return(0,a.default)(l,[{key:"_initializeAdDisplayContainer",value:function(){d.default.needDirectUserActionToPlay()&&this._getAdType()===v.AD_TYPES.PREROLL&&this.videoTag.load(),this.adDisplayContainer.initialize()}},{key:"setupMidroll",value:function(){this.player.tech_.on(c.default.HLS_CUE_OUT,this.playMidroll)}},{key:"setupPreroll",value:function(){this.prepareForAd(),d.default.isActionRequiredToPlayAd(this.muteStatus,this.player.options_)?this.adControls.one(p.default.events.AD_REQUEST,this.prerollForAutoplayDisabledBrowser):this.preRollForDesktop()}},{key:"preRollForDesktop",value:function(){this._isGoingToAutoplay?this.showBufferingAnimation():this.hideBufferingAnimation(),this.isAdPlayable?this.fetchPreroll({autoPlay:!0}):this.adControls.one(p.default.events.AD_REQUEST,this.onAdPlayRequest)}},{key:"prerollForAutoplayDisabledBrowser",value:function(){this.isAdPlayable=!0,this.showBufferingAnimation(),this.fetchPreroll({autoPlay:!1})}},{key:"_createFetchOptions",value:function(){return Object.assign({},this.config,{adHTMLContainer:this.adHTMLContainer,adDisplayContainer:this.adDisplayContainer,adsLoader:this.adsLoader})}},{key:"fetchPreroll",value:function(e){var t=e.autoPlay;if(!this.adUnit){var r=this.muteStatus?0:this.volume;this.adUnit=new s.default(this._createFetchOptions(),this.adDimensions,this.videoTag,this.player,r,t),this.fetchAd()}}},{key:"fetchAd",value:function(){if(this._getAdType()===v.AD_TYPES.PREROLL&&!this.player.options_.isViewable)return y.info("Player unviewable. Ad loading delayed."),void this.player.one(c.default.VIEWABLE,this._requestAd);this._requestAd()}},{key:"_setupViewability",value:function(){var e=this;this.player.on(c.default.VIEWABLE,function(){e._getAdType()===v.AD_TYPES.PREROLL&&e._pausedForViewability&&(y.info("Ad resumed for viewability"),e.onAdPlayRequest())}),this.player.on(c.default.UNVIEWABLE,function(){e._getAdType()!==v.AD_TYPES.PREROLL||e.player.options_.passedViewableAdImpressionCheck||e.isAdPlayable&&(e._pausedForViewability=!0,y.info("Ad paused for viewability"),e._onAdPauseRequest())})}},{key:"_sendAdRequestTracking",value:function(){this.player.trigger({type:h.default.AD_REQUESTED,data:{adType:this._getAdType()}})}},{key:"createAdControls",value:function(){var e=function(e,t,r,i,a){return new p.default({playerWidth:t.width(),playerHeight:t.height(),playerId:t.el().id,poster:t.options_.metadata.poster,bufferingAnimation:e.bufferingAnimation,controlsFadeMillis:e.controlsFadeMillis,adDimensions:a,volume:r,muted:i},t)}(this.config,this.player,this.volume,this.muteStatus,this.adDimensions);return e.on(p.default.events.PLAY_REQUEST,this.onAdPlayRequest).on(p.default.events.PAUSE_REQUEST,this.onAdPauseRequest).on(p.default.events.VOLUME_CHANGE,this.onVolumeChange).on(p.default.events.REQUEST_FULLSCREEN,this.onFullscreen).on(p.default.events.EXIT_FULLSCREEN,this.onExitFullscreen),e.initialize(),e}},{key:"switchToContent",value:function(){this.player.controlBar.show(),this.player.muted(this.muteStatus),this.player.play();var e=function(e){return{type:e.options_.metadata.form_type,clip:e.options_.metadata.id,duration:e.duration(),url:e.currentSrc(),metadata:{}}}(this.player);this.player.trigger({type:h.default.CLIP,data:e})}},{key:"updatePlayerUIForAd",value:function(){this.adjustVolumeControls(this.getPlayerVolume(),this.muteStatus),this.hidePlayerControls(),this.adUnit&&!this.currentAdStarted&&this.isAdPlayable&&this.showBufferingAnimation()}},{key:"showBufferingAnimation",value:function(){this.adControls.getPlayStatus()!==p.default.playStatus.BUFFERING&&(function(e){y.info("setAutoPlayClass on",e),n.default.addClass(e,v.AUTOPLAY_CLASS)}(this.player.el()),this.adControls.showBufferingAnimation())}},{key:"hideBufferingAnimation",value:function(){this.adControls.setIdle()}},{key:"prepareForAd",value:function(){var e=this.player.el().getBoundingClientRect();this.videoTag=this.player.tech_.el_,this.adDimensions=e}},{key:"hidePlayerControls",value:function(){this.player.controlBar.hide()}},{key:"showAdControls",value:function(){this.adControls.showUI()}},{key:"isPlaying",value:function(){return this.adControls.playStatus===p.default.playStatus.PLAYING}},{key:"destroy",value:function(){this.adControls.hideUI(),this.adControls.hide(),this.animationFrameId=null,this.videoTag=null,this.currentAdStarted=!1,this._pausedForViewability=!1,this.adUnit&&(this.adUnit.destroy(),this.adUnit=null)}},{key:"monitorAdSizeStart",value:function(){this.onPlayerResize&&(this.animationFrameId=window.requestAnimationFrame(this.onPlayerResize))}},{key:"monitorAdSizeEnd",value:function(){null!==this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)}},{key:"adjustVolumeControls",value:function(e,t){this.adUnit&&(y.debug("adjustVolumeControls muted",t),this.setAdControlsVolume(e,t),d.default.isMobile()&&this.setAdVolume(e,t))}},{key:"setAdVolume",value:function(e,t){this.adUnit&&(e=t?0:e,this.adUnit.setVolume(e),this.player.trigger({type:c.default.BVP_VOLUME_CHANGE,data:{volume:e,muted:t}}))}},{key:"setAdControlsVolume",value:function(e,t){t?this.adControls.mute():this.adControls.setVolume(e)}},{key:"setAutoplay",value:function(e){this.isAdPlayable=e}},{key:"getPlayerVolume",value:function(){var e=parseFloat(f.default.get("volume"));return isFinite(e)?e:this.player.volume()}},{key:"setMuteStatus",value:function(e){this.muteStatus=e}},{key:"_isLinearAdPlaying",value:function(){return this.adUnit}},{key:"loadAdAndContent",value:function(){this.adUnit&&this.adUnit.getAdType()===v.AD_TYPES.PREROLL&&d.default.needDirectUserActionToPlay()&&this.videoTag.load(),this._isLinearAdPlaying()||this.adDisplayContainer.initialize()}},{key:"muteAdAndContent",value:function(){this.setMuteStatus(!0);var e=this.getPlayerVolume();this.adjustVolumeControls(e,!0)}},{key:"unmuteAdAndContent",value:function(){if(this.player.muted(!1),this._isLinearAdPlaying()){this.player.muted(!0),this.setMuteStatus(!1);var e=this.getPlayerVolume();this.adjustVolumeControls(e,!1)}}},{key:"isAdStarted",value:function(){return this.currentAdStarted}},{key:"_getAdType",value:function(){return this.adUnit?this.adUnit.getAdType():null}}]),l}();r.default=g},{"./ad-controls":394,"./ad-midroll":395,"./ad-preroll":396,"./ad-utils":399,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"app/events/ad-events":379,"app/events/player-events":381,"app/utils/Constant":441,"app/utils/css-helpers":453,"app/utils/log":464,"app/utils/persist-controls":465,"app/utils/projector-utils":466,"core-js/modules/es.array.join":199,"core-js/modules/es.object.assign":207,"core-js/modules/es.parse-float":214}],465:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("./cookies")),n=new(i(e("app/utils/log")).default)("PersistControls"),s={volume:"com.bloomberg.player.volume.level",muted:"com.bloomberg.player.volume.muted"},l={get:function(e){var t=s[e];return t?a.default.get(t):(n.warn("Attempting to get an unknown type: ".concat(e)),null)},set:function(e,t){var r=s[e];r?a.default.set(r,t):n.warn("Attempting to persist an unknown type: ".concat(e))}};r.default=l},{"./cookies":452,"@babel/runtime/helpers/interopRequireDefault":14,"app/utils/log":464}],396:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),a=i(e("@babel/runtime/helpers/inherits")),d=i(e("app/utils/projector-utils")),n=i(e("./ad-unit")),p=e("app/utils/Constant"),s=function(e){function s(e,t,r,i,a,n){return(0,l.default)(this,s),(0,o.default)(this,(0,u.default)(s).call(this,i,r,{adsLoader:e.adsLoader,adDisplayContainer:e.adDisplayContainer,adHTMLContainer:e.adHTMLContainer,disableCompanionAds:e.prerollDisableCompanionAds,adsPerBlock:e.prerollAdsPerBlock,playbackDelay:e.prerollPlaybackDelay,unit:e.prerollUnit,isGPT:e.prerollIsGPT,networkId:e.prerollNetworkId,sz:e.prerollSz,tile:e.prerollTile,tpVideo:e.prerollTpVideo,suffix:e.prerollSuffix,custParams:e.prerollCustParams,maxRetries:e.prerollMaxRetries,fade:e.prerollFade,imageHeight:e.prerollImageHeight,isMobile:d.default.isMobile(),width:t.width,height:t.height,adContainerId:e.playerId+"AdTagContainer",adType:p.AD_TYPES.PREROLL,isLive:i.options_.original_user_options.live,enableAdFallback:!0,initialVolume:a,autoPlay:n,channelId:"".concat(e.prerollNetworkId,"/").concat(e.prerollUnit),shouldFetchCompanionAd:!1!==e.shouldFetchCompanionAd}))}return(0,a.default)(s,e),s}(n.default);r.default=s},{"./ad-unit":398,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/Constant":441,"app/utils/projector-utils":466,"core-js/modules/es.array.concat":193}],395:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),o=i(e("@babel/runtime/helpers/getPrototypeOf")),a=i(e("@babel/runtime/helpers/inherits")),u=i(e("app/utils/projector-utils")),n=i(e("./ad-unit")),d=e("app/utils/Constant"),p=function(e){function n(e,t,r,i,a){return(0,s.default)(this,n),(0,l.default)(this,(0,o.default)(n).call(this,i,r,{adsLoader:e.adsLoader,adDisplayContainer:e.adDisplayContainer,adHTMLContainer:e.adHTMLContainer,disableCompanionAds:e.midrollDisableCompanionAds,adsPerBlock:e.midrollAdsPerBlock,playbackDelay:e.midrollPlaybackDelay,unit:e.midrollUnit,isGPT:e.midrollIsGPT,networkId:e.midrollNetworkId,sz:e.midrollSz,tile:e.midrollTile,tpVideo:e.midrollTpVideo,suffix:e.midrollSuffix,custParams:e.midrollCustParams,maxRetries:e.midrollMaxRetries,fade:e.midrollFade,imageHeight:e.midrollImageHeight,minDuration:1e3,maxDuration:e.midrollMaxDuration||9e4,isMobile:u.default.isMobile(),width:t.width,height:t.height,adContainerId:e.playerId+"AdTagContainer",adType:d.AD_TYPES.MIDROLL,isLive:i.options_.original_user_options.live,enableAdFallback:!1,initialVolume:a,autoPlay:!0,channelId:"".concat(e.midrollNetworkId,"/").concat(e.midrollUnit),shouldFetchCompanionAd:!1!==e.shouldFetchCompanionAd}))}return(0,a.default)(n,e),n}(n.default);r.default=p},{"./ad-unit":398,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/Constant":441,"app/utils/projector-utils":466,"core-js/modules/es.array.concat":193}],398:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-descriptors"),e("core-js/modules/es.object.keys"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("@babel/runtime/regenerator")),s=a(e("@babel/runtime/helpers/defineProperty"));e("regenerator-runtime/runtime");var l=a(e("@babel/runtime/helpers/asyncToGenerator")),u=a(e("@babel/runtime/helpers/classCallCheck")),d=a(e("@babel/runtime/helpers/createClass")),p=a(e("@babel/runtime/helpers/possibleConstructorReturn")),c=a(e("@babel/runtime/helpers/assertThisInitialized")),h=a(e("@babel/runtime/helpers/get")),f=a(e("@babel/runtime/helpers/getPrototypeOf")),m=a(e("@babel/runtime/helpers/inherits")),b=a(e("./ima3-controller")),v=a(e("./ad-tag-generator")),o=a(e("app/utils/event-target")),y=a(e("app/events/ad-events")),g=a(e("app/utils/log")),_=a(e("uuid/v4")),C=i(e("app/utils/ix/IXUtils")),A=a(e("types/StreamType"));function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach(function(e){(0,s.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var S=new g.default("AdUnit"),T=["onAdLoading","onAdLoaded","onAdStart","onAdResume","onAdPause","onAdPlayError","onAdCompleted","onAllAdsComplete","onContentPauseRequested","onContentResumeRequested","onPlaybackStatusUpdate","onAdsTimedOut","onDurationChange","onAdSkipped","onAdSkipStateChange","generateAdUrl","_addIndexExchangeAdParams"],k=function(e){function o(e,t,r){var i;(0,u.default)(this,o),i=(0,p.default)(this,(0,f.default)(o).call(this));var a=e.options_,n=a.original_user_options.facadePlayer;i.ima3Controller=null,i.config=r,i.additionalCustomParameterService=n.getAdditionalCustomParameterService(),i.useIndexExchange=a.useIndexExchange,i.site=a.site,i.videoTag=t;for(var s=0;s<T.length;s++){var l=T[s];i[l]=i[l].bind((0,c.default)(i))}return i.createAd(e,t),i}var t,r;return(0,m.default)(o,e),(0,d.default)(o,[{key:"createAd",value:function(e,t){S.info("creating ad");var r=e.el().querySelector(".bvp-ad__content");this.ima3Controller=new b.default({videoContent:t,adContainer:r,adDisplayContainer:this.config.adDisplayContainer,adsLoader:this.config.adsLoader,isMobile:this.config.isMobile,adType:this.config.adType,maxDuration:this.config.maxDuration,initialVolume:this.config.initialVolume,maxRetries:this.config.maxRetries,autoPlay:this.config.autoPlay,channelId:this.config.channelId}),this.ima3Controller.on(y.default.AD_LOADING,this.onAdLoading).on(y.default.AD_LOADED,this.onAdLoaded).on(y.default.AD_STARTED,this.onAdStart).on(y.default.AD_RESUMED,this.onAdResume).on(y.default.AD_PAUSED,this.onAdPause).on(y.default.AD_PLAY_ERROR,this.onAdPlayError).on(y.default.AD_COMPLETED,this.onAdCompleted).on(y.default.ALL_ADS_COMPLETED,this.onAllAdsComplete).on(y.default.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested).on(y.default.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested).on(y.default.AD_PLAYBACK_PROGRESS_UPDATE,this.onPlaybackStatusUpdate).on([y.default.MAX_RETRIES_REACHED,y.default.AD_PLAYBACK_TIMED_OUT,y.default.AD_LOAD_TIMED_OUT].join(),this.onAdsTimedOut).on(y.default.DURATION_CHANGE,this.onDurationChange).on(y.default.SKIPPED,this.onAdSkipped).on(y.default.SKIP_STATE_CHANGED,this.onAdSkipStateChange),r=t=null}},{key:"fetchAd",value:function(){var t=this;return this.config.custParams=Object.assign({},this.config.custParams),this.additionalCustomParameterService.fillAdditionalParams(this.getAdType(),this.config.custParams).then(this.generateAdUrl).then(this._addIndexExchangeAdParams).then(function(e){return t.getAdController().requestAds(e)})}},{key:"_addIndexExchangeAdParams",value:(r=(0,l.default)(n.default.mark(function e(t){var r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.useIndexExchange){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",C.addParamsToAdUrl(P({adUrl:t,streamType:this._getStreamType(),adType:this.getAdType(),site:this.site},(null===(r=this.config.custParams)||void 0===r?void 0:r.videocontent)&&{videocontent:this.config.custParams.videocontent})));case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_getStreamType",value:function(){return this.config.isLive?A.default.LIVE:A.default.VOD}},{key:"fromConfig",value:function(e){return this.config[e]}},{key:"getAdController",value:function(){return this.ima3Controller}},{key:"startAd",value:function(){this.ima3Controller.startAd()}},{key:"startOverlayAd",value:function(){this.ima3Controller.startOverlayAd()}},{key:"pause",value:function(){this.ima3Controller.pause()}},{key:"resume",value:function(){this.ima3Controller.resume()}},{key:"resize",value:function(e,t,r){this.ima3Controller.resizeAd(e,t,r)}},{key:"setVolume",value:function(e){this.ima3Controller.setVolume(e)}},{key:"isLinearAd",value:function(){return this.ima3Controller.adLoadedData.linear}},{key:"generateAdUrl",value:(t=(0,l.default)(n.default.mark(function e(){var t,r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config,this.impressionId=(0,_.default)(),t.impressionId=this.impressionId,r=new v.default(t),e.abrupt("return",r.getAdTag());case 5:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"onAdLoading",value:function(){this.trigger(y.default.AD_LOADING)}},{key:"onAdLoaded",value:function(e){this.trigger(y.default.AD_LOADED,this.getEventData(e.detail))}},{key:"onAdStart",value:function(e){this.trigger(y.default.AD_STARTED,this.getEventData(e.detail))}},{key:"onAdResume",value:function(e){this.trigger(y.default.AD_RESUMED,this.getEventData(e.detail))}},{key:"onAdPause",value:function(e){this.trigger(y.default.AD_PAUSED,this.getEventData(e.detail))}},{key:"onAdPlayError",value:function(e){this.trigger(y.default.AD_PLAY_ERROR,e.detail)}},{key:"onAdCompleted",value:function(e){this.trigger(y.default.AD_COMPLETED,this.getEventData(e.detail))}},{key:"onAllAdsComplete",value:function(e){this.trigger(y.default.ALL_ADS_COMPLETED,this.getEventData(e.detail))}},{key:"onContentPauseRequested",value:function(){this.trigger(y.default.CONTENT_PAUSE_REQUESTED)}},{key:"onContentResumeRequested",value:function(){this.trigger(y.default.CONTENT_RESUME_REQUESTED)}},{key:"onPlaybackStatusUpdate",value:function(e){this.trigger(y.default.AD_PLAYBACK_PROGRESS_UPDATE,this.getEventData(e.detail))}},{key:"onAdsTimedOut",value:function(e){this.trigger(e.type,this.getEventData(e.detail))}},{key:"onDurationChange",value:function(e){this.trigger(y.default.DURATION_CHANGE,e.detail)}},{key:"onAdSkipped",value:function(e){this.trigger(y.default.SKIPPED,this.getEventData(e.detail))}},{key:"onAdSkipStateChange",value:function(e){this.trigger(y.default.SKIP_STATE_CHANGED,e.detail)}},{key:"getEventData",value:function(e){var t=e?e.data:{};return{data:Object.assign({},t,{type:"ad-".concat(this.config.adType),adType:this.config.adType,impressionId:this.impressionId})}}},{key:"getAdType",value:function(){return this.config.adType}},{key:"destroy",value:function(){S.info("Destroying Ad Unit"),this.ima3Controller.destroy(),this.ima3Controller=null;for(var e=0;e<T.length;e++){this[T[e]]=null}(0,h.default)((0,f.default)(o.prototype),"dispose",this).call(this)}}]),o}(o.default);r.default=k},{"./ad-tag-generator":397,"./ima3-controller":401,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"@babel/runtime/helpers/possibleConstructorReturn":21,"@babel/runtime/regenerator":28,"app/events/ad-events":379,"app/utils/event-target":458,"app/utils/ix/IXUtils":462,"app/utils/log":464,"core-js/modules/es.array.filter":194,"core-js/modules/es.array.join":199,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.get-own-property-descriptor":210,"core-js/modules/es.object.get-own-property-descriptors":211,"core-js/modules/es.object.keys":212,"core-js/modules/es.symbol":235,"core-js/modules/web.dom-collections.for-each":243,"regenerator-runtime/runtime":271,"types/StreamType":531,"uuid/v4":277}],462:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.entries"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-descriptors"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.addParamsToAdUrl=function(e){return E.apply(this,arguments)};var m=i(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var a=i(e("@babel/runtime/helpers/asyncToGenerator")),u=i(e("@babel/runtime/helpers/defineProperty")),n=i(e("@babel/runtime/helpers/slicedToArray")),s=i(e("../query-string")),b=i(e("app/utils/deadline")),l=i(e("app/utils/log")),v=i(e("./IXConfig")),y=i(e("types/StreamType")),g=i(e("types/SiteType"));function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){(0,u.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var _=new l.default("IXUtils"),p=1500,C=3e3;function c(e){return JSON.parse(JSON.stringify(e))}function h(e){var t=c(s.default.parseQueryString(e));return t.sz&&(t.sz=t.sz.split("x").map(Number)),t.cust_params=function(e){var t=c(s.default.parseQueryString(e));return Object.entries(t).reduce(function(e,t){var r=(0,n.default)(t,2),i=r[0],a=r[1];return d({},e,(0,u.default)({},i,[String(a)]))},{})}(t.cust_params),t}function A(){return f.apply(this,arguments)}function f(){return(f=(0,a.default)(m.default.mark(function e(i,l,o){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(t,r){i.push(function(){try{var e=(i=l,a=o,n=t,s=r,function(e){try{_.info("Received IX video demand for slot: ",a," demandObjs:",e);var t=(0,u.default)({},a,d({description_url:window.location.href},h(i))),r=window.headertag.buildGamMvt(t,e)[a];if(!r)throw new Error("Empty IX Ad Url generated");n(r)}catch(e){s(e)}});_.info("Retrieving IX video demand for slot: ",o),window.headertag.retrieveVideoDemand([{htSlotName:o}],e,{timeout:p})}catch(e){r(e)}var i,a,n,s})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){return(E=(0,a.default)(m.default.mark(function e(t){var r,i,a,n,s,l,o,u,d,p,c,h,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.adUrl,n=t.streamType,s=t.adType,l=t.site,o=t.videocontent,u=window.headertag=window.headertag||{},d=u.cmd=u.cmd||[],p=v.default[l]||v.default[g.default.BUSINESS],c=p.byAdType,h=null===(r=c[s])||void 0===r?void 0:null===(i=r[n])||void 0===i?void 0:i[o]){e.next=7;break}return e.abrupt("return",a);case 7:return e.prev=7,e.next=10,(0,b.default)(C,A(d,a,h));case 10:return f=e.sent,n===y.default.LIVE&&(f=f.replace("/gampad/ads?","/gampad/live/ads?")),_.info("Final Ad Url for slot: ",h,f),e.abrupt("return",f);case 16:return e.prev=16,e.t0=e.catch(7),_.error("Error adding IX params to ad Url",e.t0),e.abrupt("return",a);case 20:case"end":return e.stop()}},e,null,[[7,16]])}))).apply(this,arguments)}},{"../query-string":467,"./IXConfig":460,"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/slicedToArray":23,"@babel/runtime/regenerator":28,"app/utils/deadline":456,"app/utils/log":464,"core-js/modules/es.array.filter":194,"core-js/modules/es.array.map":201,"core-js/modules/es.number.constructor":206,"core-js/modules/es.object.entries":208,"core-js/modules/es.object.get-own-property-descriptor":210,"core-js/modules/es.object.get-own-property-descriptors":211,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219,"core-js/modules/es.string.replace":228,"core-js/modules/es.string.split":230,"core-js/modules/es.symbol":235,"core-js/modules/web.dom-collections.for-each":243,"regenerator-runtime/runtime":271,"types/SiteType":530,"types/StreamType":531}],401:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var A=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),E=i(e("@babel/runtime/helpers/possibleConstructorReturn")),P=i(e("@babel/runtime/helpers/assertThisInitialized")),n=i(e("@babel/runtime/helpers/get")),S=i(e("@babel/runtime/helpers/getPrototypeOf")),s=i(e("@babel/runtime/helpers/inherits")),T=i(e("@babel/runtime/helpers/defineProperty")),l=i(e("app/utils/event-target")),o=i(e("app/events/ad-events")),u=i(e("app/utils/deadline")),d=i(e("app/utils/url-utils")),p=e("app/utils/Constant"),c=i(e("app/utils/log")),h=i(e("app/utils/error-report")),k="ended",f="BVP_ERROR",m="Maximum retries reached",b="Ads failed to load within specified time limit",v="Ads failed to play within specified time limit",y={"video/x-flv":!0,"application/x-shockwave-flash":!0},g={swf:!0,flv:!0},_=new c.default("IMA3Controller"),w=["onAdClicked","onAdError","onAdPlaybackTimeout","onAdsManagerLoaded","onAdSkipped","onAdSkipStateChange","onAllAdsCompleted","onComplete","onContentPauseRequested","onContentResumeRequested","onDurationChange","onLoaded","onPause","onResume","onStart","onVideoEnd"],j={anId:"926191",campId:"1x7"};function R(e){return e.getType=function(){return f},e.getErrorCode=function(){return 0},{getError:function(){return e}}}var C=function(e){function C(e){var t,r=e.adContainer,i=e.adDisplayContainer,a=e.videoContent,n=e.adsLoader,s=e.viewMode,l=e.autoPlay,o=e.loadTimeout,u=void 0===o?1e4:o,d=e.isMobile,p=void 0!==d&&d,c=e.adType,h=void 0===c?null:c,f=e.maxDuration,m=void 0===f?null:f,b=e.initialVolume,v=void 0===b?0:b,y=e.maxRetries,g=void 0===y?3:y,_=e.channelId;return(0,A.default)(this,C),t=(0,E.default)(this,(0,S.default)(C).call(this)),(0,T.default)((0,P.default)(t),"requestAdResolver",null),(0,T.default)((0,P.default)(t),"requestAdRejector",null),(0,T.default)((0,P.default)(t),"adTagUrl",null),(0,T.default)((0,P.default)(t),"pendingRetryTimer",null),(0,T.default)((0,P.default)(t),"playbackTimeoutTimer",null),(0,T.default)((0,P.default)(t),"adContainer",void 0),(0,T.default)((0,P.default)(t),"adDisplayContainer",void 0),(0,T.default)((0,P.default)(t),"adLoaded",void 0),(0,T.default)((0,P.default)(t),"adLoadedData",void 0),(0,T.default)((0,P.default)(t),"adType",void 0),(0,T.default)((0,P.default)(t),"adsLoader",void 0),(0,T.default)((0,P.default)(t),"adsManager",null),(0,T.default)((0,P.default)(t),"adsRenderingSettings",void 0),(0,T.default)((0,P.default)(t),"autoPlay",void 0),(0,T.default)((0,P.default)(t),"channelId",void 0),(0,T.default)((0,P.default)(t),"currentVolume",void 0),(0,T.default)((0,P.default)(t),"googleIma",void 0),(0,T.default)((0,P.default)(t),"isAdStarted",void 0),(0,T.default)((0,P.default)(t),"isFirstAd",void 0),(0,T.default)((0,P.default)(t),"isMobile",void 0),(0,T.default)((0,P.default)(t),"isPauseRequested",void 0),(0,T.default)((0,P.default)(t),"isPaused",void 0),(0,T.default)((0,P.default)(t),"loadTimeout",void 0),(0,T.default)((0,P.default)(t),"maxDuration",void 0),(0,T.default)((0,P.default)(t),"maxRetries",void 0),(0,T.default)((0,P.default)(t),"remainingTime",void 0),(0,T.default)((0,P.default)(t),"retryCount",void 0),(0,T.default)((0,P.default)(t),"videoContent",void 0),(0,T.default)((0,P.default)(t),"viewMode",void 0),(0,T.default)((0,P.default)(t),"statusUpdateTimer",null),(0,T.default)((0,P.default)(t),"width",void 0),(0,T.default)((0,P.default)(t),"height",void 0),(0,T.default)((0,P.default)(t),"startAdTimeOutId",void 0),w.forEach(function(e){t[e]=t[e].bind((0,P.default)(t))}),t.googleIma=window.google.ima,t.retryCount=0,t.loadTimeout=u,t.videoContent=a,t.videoContent.addEventListener(k,t.onVideoEnd),t.viewMode=s||t.googleIma.ViewMode.NORMAL,t.adContainer=r,t.isMobile=p,t.isPaused=!1,t.adLoadedData={},t.currentVolume=v,t.remainingTime=-1,t.adType=h,t.maxDuration=m,t.isFirstAd=!0,t.maxRetries=g,t.isPauseRequested=!1,t.isAdStarted=!1,t.autoPlay=l,t.channelId=_,t.adDisplayContainer=i,t.adsLoader=n,t.adsLoader.addEventListener(t.googleIma.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t.onAdsManagerLoaded),t.adsLoader.addEventListener(t.googleIma.AdErrorEvent.Type.AD_ERROR,t.onAdError),t.requestAdResolver=null,t.requestAdRejector=null,t.adTagUrl=null,t.pendingRetryTimer=null,t.playbackTimeoutTimer=null,t.statusUpdateTimer=null,t.adsRenderingSettings=t._createRenderingSettings({autoAlign:!1,useStyledNonLinearAds:!0,restoreCustomPlaybackStateOnAdBreakComplete:!1,allowCompanionBeforeMaster:!0,loadVideoTimeout:8e3,enablePreloading:!1,uiElements:[]}),t}return(0,s.default)(C,e),(0,a.default)(C,[{key:"initiateAdRequest",value:function(){_.info("Initating Ad request:",this.retryCount);var e=this.createAdsRequest();try{this.adsLoader.requestAds(e)}catch(e){h.default.recordAdError(_,this.adTagUrl,"Error occurred while calling adsLoader.requestAds",e),this.onAdError(R(e))}}},{key:"requestAds",value:function(r){var i=this,e=new Promise(function(e,t){i.trigger(o.default.AD_LOADING),i.requestAdResolver=e,i.requestAdRejector=t,i.adTagUrl=r,i.initiateAdRequest()});return(0,u.default)(this.loadTimeout,e).catch(function(e){return e===m||e===v?(i.clearPendingRetryTimer(),Promise.reject(e)):(_.warn(b),i.clearPendingRetryTimer(),i.adLoaded||i.trigger(o.default.AD_LOAD_TIMED_OUT,{data:{message:"Ad failed to load in ".concat(i.loadTimeout,"ms")}}),Promise.reject(b))})}},{key:"retry",value:function(e){var t=this;if(_.info("retry"),this.isAdStarted=!1,this.clearAdStartTimer(),this.adsManager&&this.cleanupAdsManager(),this.retryCount<this.maxRetries)return this.retryCount++,_.warn("Retry ".concat(this.retryCount," of ").concat(this.maxRetries," executing:"),e),void(this.pendingRetryTimer=window.setTimeout(function(){t.initiateAdRequest()},0));_.warn(m),window.BVP_GTM.trackDevEvent({bvpEventAction:"admaxretry",bvpEventLabel:this.adType,bvpEventValue:this.retryCount,bvpTrackGA:!0}),this.trigger(o.default.MAX_RETRIES_REACHED,{data:e}),this.requestAdRejector(m),this.clearAdPlaybackTimer(),this.clearPendingRetryTimer()}},{key:"startAd",value:function(){_.info("start ad"),this.isPauseRequested=!1,this.adsManager&&this._internalStartAd()}},{key:"_internalStartAd",value:function(){try{if(this.clearAdPlaybackTimer(),this.isPauseRequested||this.isAdStarted)return;this.adsManager.start(),this.isAdStarted=!0,function(e){return e===p.AD_TYPES.PREROLL||e===p.AD_TYPES.MIDROLL}(this.adType)&&this.startAdStartTimer(5e3)}catch(e){h.default.recordAdError(_,this.adTagUrl,"Error occurred while adsManager.start call",e),this.onAdError(R(e))}}},{key:"createAdsManager",value:function(e){var t=e.getAdsManager(this.adDisplayContainer,this.adsRenderingSettings);return t.addEventListener(this.googleIma.AdErrorEvent.Type.AD_ERROR,this.onAdError),t.addEventListener(this.googleIma.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted),t.addEventListener(this.googleIma.AdEvent.Type.CLICK,this.onAdClicked),t.addEventListener(this.googleIma.AdEvent.Type.COMPLETE,this.onComplete),t.addEventListener(this.googleIma.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),t.addEventListener(this.googleIma.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),t.addEventListener(this.googleIma.AdEvent.Type.DURATION_CHANGE,this.onDurationChange),t.addEventListener(this.googleIma.AdEvent.Type.LOADED,this.onLoaded),t.addEventListener(this.googleIma.AdEvent.Type.PAUSED,this.onPause),t.addEventListener(this.googleIma.AdEvent.Type.RESUMED,this.onResume),t.addEventListener(this.googleIma.AdEvent.Type.STARTED,this.onStart),t.addEventListener(this.googleIma.AdEvent.Type.SKIPPED,this.onAdSkipped),t.addEventListener(this.googleIma.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onAdSkipStateChange),t}},{key:"createAdsRequest",value:function(){var e=this.videoContent.getBoundingClientRect(),t=e.width,r=e.height;this.width=t,this.height=r;var i=new this.googleIma.AdsRequest;i.adTagUrl=this.adTagUrl,i.linearAdSlotWidth=t,i.linearAdSlotHeight=r,i.nonLinearAdSlotWidth=t,i.nonLinearAdSlotHeight=r/3,i.setAdWillAutoPlay(this.autoPlay);var a=0===this.currentVolume;return i.setAdWillPlayMuted(a),i}},{key:"destroy",value:function(){var t=this;_.info("destroy"),this.adsLoader&&(this.adsLoader.removeEventListener(this.googleIma.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded),this.adsLoader.removeEventListener(this.googleIma.AdErrorEvent.Type.AD_ERROR,this.onAdError)),this.adsLoader=null,this.adDisplayContainer=null,this.adContainer&&(this.adContainer.style.left="0px",this.adContainer.style.top="0px"),this.clearAdPlaybackTimer(),this.clearPendingRetryTimer(),this.clearStatusUpdateTimer(),this.clearAdStartTimer(),this.videoContent&&this.videoContent.removeEventListener(k,this.onVideoEnd),this.videoContent=null,this.adContainer=null,this.removeAdsManagerEventListeners(),setTimeout(function(){t.destroyAdsManager()},2e3),w.forEach(function(e){t[e]=null}),this.isAdStarted=null,this.isPauseRequested=null,(0,n.default)((0,S.default)(C.prototype),"dispose",this).call(this)}},{key:"cleanupAdsManager",value:function(){this.removeAdsManagerEventListeners(),this.destroyAdsManager()}},{key:"destroyAdsManager",value:function(){this.adsManager&&this.adsManager.destroy&&(this.adsManager.destroy(),this.adsManager=null)}},{key:"removeAdsManagerEventListeners",value:function(){this.adsManager&&(this.adsManager.removeEventListener(this.googleIma.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.CLICK,this.onAdClicked),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.COMPLETE,this.onComplete),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.DURATION_CHANGE,this.onDurationChange),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.LOADED,this.onLoaded),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.PAUSED,this.onPause),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.RESUMED,this.onResume),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.STARTED,this.onStart),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.SKIPPED,this.onAdSkipped),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onAdSkipStateChange))}},{key:"startStatusUpdateTimer",value:function(t){var r=this,i=Date.now();this.statusUpdateTimer=setInterval(function(){if(r.adsManager){var e=r.adsManager.getRemainingTime();e<0&&(e=t-Math.abs(i-Date.now())/1e3),r.remainingTime=e,r.trigger(o.default.AD_PLAYBACK_PROGRESS_UPDATE,{data:{remainingTime:e,elapsedTime:t-e,duration:t}}),e<=0&&r.clearStatusUpdateTimer()}},250)}},{key:"clearPendingRetryTimer",value:function(){this.pendingRetryTimer&&(clearTimeout(this.pendingRetryTimer),this.pendingRetryTimer=null)}},{key:"clearStatusUpdateTimer",value:function(){this.statusUpdateTimer&&(clearInterval(this.statusUpdateTimer),this.statusUpdateTimer=null)}},{key:"clearAdPlaybackTimer",value:function(){this.playbackTimeoutTimer&&(clearTimeout(this.playbackTimeoutTimer),this.playbackTimeoutTimer=null)}},{key:"pause",value:function(){_.info("Ad paused requested"),this.adsManager&&this.adsManager.pause(),this.isPauseRequested=!0}},{key:"resume",value:function(){_.info("Ad resume requested"),this.adsManager.resume(),this.isPauseRequested=!1}},{key:"setVolume",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;this.currentVolume=t,this.adsManager&&this.adsManager.setVolume(t)}},{key:"startAdPlaybackTimer",value:function(e){this.playbackTimeoutTimer=window.setTimeout(this.onAdPlaybackTimeout,e)}},{key:"startAdStartTimer",value:function(e){var t=this;this.startAdTimeOutId=setTimeout(function(){h.default.recordAdError(_,t.adTagUrl,"Ad Loaded but failed to start in given time interval of 5000"),t.trigger(o.default.AD_PLAYBACK_TIMED_OUT,{data:{message:"Ad Loaded but failed to start in given time interval of 5000"}})},e)}},{key:"clearAdStartTimer",value:function(){this.startAdTimeOutId&&(clearTimeout(this.startAdTimeOutId),this.startAdTimeOutId=null)}},{key:"positionNonLinearAd",value:function(e,t,r,i){var a=(r-e)/2;this.adContainer.style.left=a+"px";var n=i-t-50;this.adContainer.style.top=n+"px"}},{key:"resizeAd",value:function(e,t,r){var i=this.adsManager.getCurrentAd();i&&!i.isLinear()&&this.positionNonLinearAd(i.getWidth(),i.getHeight(),e,t),this.adsManager.resize(e,t,r)}},{key:"onAdsManagerLoaded",value:function(e){_.info("Ad manager loaded"),this.adsManager=this.createAdsManager(e),window.youboraPlugin.setAdsAdapter(this._getYouboraImaAdapter()),this._initializeIAS(this.adsManager,this.channelId),this.adsManager.init(this.width,this.height,this.viewMode),this.setVolume(this.currentVolume),this._internalStartAd()}},{key:"_getYouboraImaAdapter",value:function(){return new window.YouboraLib.adapters.Ima(this.adsManager)}},{key:"_initializeIAS",value:function(e,t){var r=Object.assign({},j,{chanId:t});try{window.googleImaVansAdapter.init(window.google,e,this.videoContent,r)}catch(e){_.warn("IAS adapter failed to load",e)}}},{key:"onAdError",value:function(e){this.clearPendingRetryTimer();var t=e.getError(),r=t.getType();switch(h.default.recordAdError(_,this.adTagUrl,"onAdError",t),r){case this.googleIma.AdError.Type.AD_LOAD:case f:this.trigger(o.default.AD_LOAD_ERROR,{error:t}),this.retry(t);break;case this.googleIma.AdError.Type.AD_PLAY:this.trigger(o.default.AD_PLAY_ERROR,{error:t}),this.adType===p.AD_TYPES.PREROLL&&this.retry(t)}}},{key:"onContentPauseRequested",value:function(){this.clearAdPlaybackTimer(),this.videoContent.removeEventListener(k,this.onVideoEnd),this.trigger(o.default.CONTENT_PAUSE_REQUESTED)}},{key:"onContentResumeRequested",value:function(){_.info("Content resume requested"),this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.videoContent.addEventListener(k,this.onVideoEnd),this.trigger(o.default.CONTENT_RESUME_REQUESTED)}},{key:"onDurationChange",value:function(e){var t=e.getAd().getDuration();this.trigger(o.default.DURATION_CHANGE,{duration:t})}},{key:"onAllAdsCompleted",value:function(e){_.info("All Ads completed",e.getAd()),this.isFirstAd=!0,this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.trigger(o.default.ALL_ADS_COMPLETED,{data:this._getEventData(e.getAd(),this.adLoadedData)}),this.isPaused&&_.warn("Ads completed despite being paused!")}},{key:"onLoaded",value:function(e){var t=e.getAd();this.adLoadedData=e.getAdData();var r=t.getContentType();if(_.info("onLoaded is triggered",e,e.getAd(),e.getAdData()),this.adLoadedData)if(this.isMobile&&function(e){if(e)return y[e];return!1}(r))this.onAdError(R(new Error("Disallowed mobile content")));else if(this.isMobile&&""===r&&function(e){var t=d.default.getURLExtension(e.mediaUrl);if(t)return g[t];return!1}(this.adLoadedData))this.onAdError(R(new Error("Disallowed mobile url")));else{if(t&&!t.isLinear()){var i=e.getAdData();i&&this.positionNonLinearAd(i.width,i.height,this.width,this.height)}this.adLoaded=!0,this.clearPendingRetryTimer(),_.info("trigger AdEvents.AD_LOADED"),this.trigger(o.default.AD_LOADED,{data:this._getEventData(t,this.adLoadedData)}),this.requestAdResolver()}else this.onAdError(R(new Error("No ad data found")))}},{key:"onStart",value:function(e){var t=e.getAd();_.info("Ad started",t),window.BVP_GTM&&0<this.retryCount&&window.BVP_GTM.trackDevEvent({bvpEventAction:"adretry",bvpEventLabel:this.adType,bvpEventValue:this.retryCount,bvpTrackGA:!0}),this.clearAdStartTimer(),this.setVolume(this.currentVolume),this.retryCount=0;var r=t.getDuration();if(0<r){this.startStatusUpdateTimer(r);var i=t.getAdPodInfo();if(this.isFirstAd){var a=this.maxDuration/1e3;0===a&&void 0!==i&&void 0!==i.getMaxDuration()?a=i.getMaxDuration():0===a&&(a=r),this.isFirstAd=!1,this.startAdPlaybackTimer(this._getAdPlaybackTimerThreshold(a))}}this.resizeAd(this.width,this.height,this.googleIma.ViewMode.NORMAL),this.trigger(o.default.AD_STARTED,{data:this._getEventData(t,this.adLoadedData)})}},{key:"onComplete",value:function(e){_.info("Ad completed"),this.remainingTime=-1;var t=e.getAd();this.clearStatusUpdateTimer(),this.trigger(o.default.AD_COMPLETED,{data:this._getEventData(t,this.adLoadedData)})}},{key:"onPause",value:function(e){var t=e.getAd();this.isPaused=!0,this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.trigger(o.default.AD_PAUSED,{data:this._getEventData(t,this.adLoadedData)})}},{key:"onResume",value:function(e){var t=e.getAd();this.isPaused=!1;var r=t.getDuration();r<=0&&(r=t.getAdPodInfo().getMaxDuration());this.startStatusUpdateTimer(r),this.trigger(o.default.AD_RESUMED,{data:this._getEventData(t,this.adLoadedData)})}},{key:"onAdClicked",value:function(e){var t=e.getAd();_.info("Ad clicked",t),this.pause(),this.trigger(o.default.AD_CLICKED,{data:this._getEventData(t,this.adLoadedData)})}},{key:"onVideoEnd",value:function(){_.info("onVideoEnd"),this.adsLoader.contentComplete()}},{key:"onAdSkipped",value:function(e){var t=e.getAd();this.trigger(o.default.SKIPPED,{data:this._getEventData(t,this.adLoadedData)})}},{key:"onAdSkipStateChange",value:function(){var e=this.adsManager&&this.adsManager.getAdSkippableState();this.trigger(o.default.SKIP_STATE_CHANGED,{data:{adSkipState:e}})}},{key:"onAdPlaybackTimeout",value:function(){h.default.recordAdError(_,this.adTagUrl,v),this.trigger(o.default.AD_PLAYBACK_TIMED_OUT),this.requestAdRejector(v)}},{key:"_getAdPlaybackTimerThreshold",value:function(e){var t=1e3*(this._getRemainingTime(e)+20*e/100);return Math.max(t,5e3)}},{key:"_getRemainingTime",value:function(e){return this.remainingTime&&0<=this.remainingTime?this.remainingTime:e}},{key:"_createRenderingSettings",value:function(e){var t=new this.googleIma.AdsRenderingSettings;return Object.assign(t,e),t}},{key:"_getEventData",value:function(e,t){return e?{clip:{contentId:e.getAdId()},duration:e.getDuration(),url:t.mediaUrl,metadata:{},title:e.getTitle(),mediaUrl:e.getMediaUrl()}:{}}}]),C}(l.default);r.default=C},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/ad-events":379,"app/utils/Constant":441,"app/utils/deadline":456,"app/utils/error-report":457,"app/utils/event-target":458,"app/utils/log":464,"app/utils/url-utils":471,"core-js/modules/es.array.concat":193,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.to-string":213,"core-js/modules/es.promise":219}],471:[function(e,t,r){"use strict";e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=/^\w+:\/\/\w+/i,a={getURLExtension:function(e){if(!e)return"";var t=(e=e.split("?")[0].split("#")[0]).substr(1+e.lastIndexOf("/")),r=t.split(".").pop();return r==t?"":r},getDomain:function(e){return e?URL&&e.match(i)?new URL(e).hostname:-1==e.indexOf("//")?"":e.split("/")[2].split(":")[0]:""},getProtocol:function(e){return e?URL&&e.match(i)?new URL(e).protocol:e.indexOf("//")<1?null:e.split("/")[0]:null}};r.default=a},{"core-js/modules/es.array.index-of":197,"core-js/modules/es.array.iterator":198,"core-js/modules/es.array.last-index-of":200,"core-js/modules/es.object.to-string":213,"core-js/modules/es.string.iterator":225,"core-js/modules/es.string.match":226,"core-js/modules/es.string.split":230,"core-js/modules/web.dom-collections.iterator":244,"core-js/modules/web.url":246}],397:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireWildcard"),a=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=a(e("@babel/runtime/regenerator"));e("regenerator-runtime/runtime");var n=a(e("@babel/runtime/helpers/asyncToGenerator")),s=a(e("@babel/runtime/helpers/classCallCheck")),l=a(e("@babel/runtime/helpers/createClass")),o=a(e("app/utils/log")),d=e("app/utils/Constant"),p=a(e("app/utils/error-report")),c=a(e("app/utils/PPID")),h=i(e("app/services/ConsentService")),f=new o.default("AdTagGenerator"),m="{server_id}",b="{unit}",v="{sz}",y="{tp_video}",g="{url}",_="{ord}",C="//pubads.g.doubleclick.net/gampad",A=/[\"\"=!\+*~^\(\)<>\[\]]/g,E=/[?&#].*/,P="impl=s&gdfp_req=1&env=vp&unviewed_position_start=1",S="//ad.doubleclick.net".concat(m,"/pfadx/").concat(b,";sz=").concat(v,";tile=").concat("{tile}",";tp_video=").concat(y,";dcmt=text/xml;url=").concat(g,";ord=").concat(_),T="sz=".concat(v,"&iu=").concat(m+b,"&output=vast&").concat(P,"&correlator=").concat(_),k="".concat(C,"/ads?sz=").concat(v,"&iu=").concat(m,"/").concat(b,"&output=vast&url=").concat(g,"&").concat(P,"&correlator=").concat(_,"&vad_type=nonlinear"),w=1,j=1,R={"business/midroll":!0,"bloomberg/video/midroll/live":!0,"bloomberg/video/midroll/vod":!0},D=function(){function t(e){(0,s.default)(this,t),this.unit=e.unit,this.isGPT=e.isGPT,this.isBanner=e.isBanner,this.networkId=e.networkId,this.sz=e.sz,this.tile=e.tile,this.tpVideo=e.tpVideo,this.suffix=e.suffix,this.custParams=e.custParams,this.isMobile=e.isMobile,this.isLive=e.isLive,this.minDuration=e.minDuration,this.maxDuration=e.maxDuration,this.adType=e.adType,this.enableAdFallback=e.enableAdFallback,this.shouldFetchCompanionAd=e.shouldFetchCompanionAd,this.trigr=e.trigr,this.srnd=e.srnd,this.lotame=e.lotame,this.subscriberStatus=e.subscriberStatus,this.width=e.width,this.height=e.height,this.isMuted=(e.initialVolume||0)<=0,this.impressionId=e.impressionId,this.randIncrementer=Math.round(1e3*Math.random())}var e;return(0,l.default)(t,[{key:"getAdTag",value:(e=(0,n.default)(u.default.mark(function e(){var t,r,i,a,n,s,l,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getServerId(),r=this.randIncrementer+++String((new Date).getTime()),i=this._getPageUrl(),a=this._getAdTagTemplate(),this.unit&&(n=this.unit.toLowerCase(),R[n]&&p.default.recordGenericError(f,"Mystery Ad Unit: ".concat(n))),s=a.replace(b,this.unit).replace(v,this.sz?this.sz:"1x1").replace("{tile}",this.tile?this.tile:"1").replace(y,this.tpVideo?this.tpVideo:"null").replace(m,t).replace(_,r).replace(g,i||""),this.isGPT&&this.pageUrl&&(s=s.replace(g,i)),this.isGPT&&(l=this._getCustParams(i),o=Object.keys(l).map(function(e){return"".concat(e,"=").concat(l[e])}),s="".concat(s,"&cust_params=").concat(encodeURIComponent(o.join("&"))),this.isLive&&(s+="&pod="+w++),s+="&vpos="+this.adType,this.adType===d.AD_TYPES.MIDROLL&&(s+="&pp=xvpaid&mridx=".concat(j++))),this.suffix&&0<this.suffix.length&&(s=s+(this.isGPT?"&":";")+this.suffix),0<this.minDuration&&0<this.maxDuration&&(s=s+"&pmnd="+this.minDuration+"&pmxd="+this.maxDuration),this.enableAdFallback||(s+="&nofb=1"),e.next=13,h.fetchParams();case 13:if(!e.sent.isPersonalizedAdAllowed){e.next=15;break}s+="&ppid=".concat(c.default.get());case 15:return f.debug("Generated ad tag: "+s),e.abrupt("return",s);case 17:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"_getServerId",value:function(){var e=this.networkId?String(this.networkId):"";return 0<e.length&&(e="/"+e,this.isGPT&&(e+="/")),e}},{key:"_getAdTagTemplate",value:function(){if(this.isBanner)return k;if(!this.isGPT)return S;var e=T+(this.shouldFetchCompanionAd?"&ciu_szs=300x250,728x90":"");return this._getGPTDomain()+e}},{key:"_getGPTDomain",value:function(){return C+(this.isLive?"/live":"")+"/ads?"}},{key:"_getCustParams",value:function(e){var t=Object.assign({},this.custParams,{url:e,adsound:this.isMuted?"off":"on",iid:this.impressionId});return this.width&&this.height&&(t.playerWidth=Math.ceil(this.width),t.playerHeight=Math.ceil(this.height)),t}},{key:"_getPageUrl",value:function(){if(this.custParams&&this.custParams.frameurl){var e=this.custParams.frameurl;return delete this.custParams.frameurl,e}var t=window.location.pathname.toString();if(t)return t=t.replace(E,""),t=decodeURIComponent(t).replace(A,"")}}],[{key:"__resetPodCounters",value:function(){j=w=1}}]),t}();r.default=D},{"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/interopRequireWildcard":15,"@babel/runtime/regenerator":28,"app/services/ConsentService":430,"app/utils/Constant":441,"app/utils/PPID":445,"app/utils/error-report":457,"app/utils/log":464,"core-js/modules/es.array.concat":193,"core-js/modules/es.array.join":199,"core-js/modules/es.array.map":201,"core-js/modules/es.object.assign":207,"core-js/modules/es.object.keys":212,"core-js/modules/es.object.to-string":213,"core-js/modules/es.regexp.to-string":223,"core-js/modules/es.string.replace":228,"regenerator-runtime/runtime":271}],445:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.string.replace"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("uuid/v4")),l=i(e("./LocalStorage")),o=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"get",value:function(){var e=l.default.get("bbg_ppid");return e||(e=(0,s.default)().replace(/-/g,""),l.default.set("bbg_ppid",e)),e}}]),e}();r.default=o},{"./LocalStorage":443,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"core-js/modules/es.string.replace":228,"uuid/v4":277}],443:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i="localStorage";function a(e){var t=function(){try{return i in window&&window[i]}catch(e){return null}}();return t?e(t):null}var n={get:function(t){return a(function(e){return e.getItem(t)})},set:function(t,r){a(function(e){return e.setItem(t,r)})},del:function(t){a(function(e){return e.removeItem(t)})}};r.default=n},{}],394:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),o=i(e("@babel/runtime/helpers/assertThisInitialized")),u=i(e("@babel/runtime/helpers/inherits")),d=i(e("app/utils/event-target")),p=i(e("app/utils/css-helpers")),c=i(e("app/utils/datetime-utils")),h=i(e("./ad-volume-control")),f=i(e("app/utils/projector-utils")),m=i(e("app/events/player-events")),b=i(e("app/utils/log")),v=i(e("app/utils/error-report")),y=i(e("app/utils/fullscreen")),g=new b.default("AdControls"),_="click",C="bvp-ad-big-play-button__visible",A="bvp-ad-big-play-button__mobile",E="bvp-ad-buffering__visible",P="bvp-ad-control-bar__initial",S="bvp-ad-control-bar__hidden",T="vjs-fullscreen",k=["onPlayPauseTouch","onFullscreenControlClick","onFullscreenChange"],w=function(e){function i(e,t){var r;return(0,a.default)(this,i),r=(0,s.default)(this,(0,l.default)(i).call(this)),k.forEach(function(e){r[e]=r[e].bind((0,o.default)(r))}),r.controlsComponent=t.getChild("AdControlsComponent"),r.adControlBarComponent=r.controlsComponent.getChild("AdControlBar"),r.container=null,r.adDimensions=null,r.controlBar=null,r.playPauseButton=null,r.bigPlayButton=null,r.fullscreenButton=null,r.bufferingAnimation=null,r.volume=e.volume,r.volumeControl=null,r.muted=e.muted,r.poster=e.poster,r.width=e.playerWidth,r.playStatus=i.playStatus.SETUP,r.player=t,r.fullscreen=y.default.isInFullScreen(),r.adDimensions=e.adDimensions,t.on(m.default.FULL_SCREEN_CHANGE,r.onFullscreenChange),r}return(0,u.default)(i,e),(0,n.default)(i,[{key:"initialize",value:function(){var e=this.controlsComponent.el();this.bigPlayButton=e.querySelector(".bvp-ad-big-play-button"),this.playPauseButton=e.querySelector(".bvp-ad-play-button"),this.bufferingAnimation=e.querySelector(".bvp-ad-buffering"),this.controlBar=e.querySelector(".bvp-ad-control-bar"),this.fullscreenButton=e.querySelector(".bvp-ad-fullscreen"),this.fullscreen&&this.adControlBarComponent.setEnterFullscreenState();var t=(this.container=e).querySelector(".bvp-ad-sound-menu__mute-control");this.player.tech_.featuresVolumeControl?this.initializeVolumeControl(e,t):p.default.addClass(t,"vjs-hidden"),f.default.isMobile()&&this.adControlBarComponent.hideFullscreenButton(),function(e,t){j()?R(e,t):e.addEventListener(_,t)}(this.bigPlayButton,this.onPlayPauseTouch),function(e,t){j()?R(e,t):e.addEventListener(_,t)}(this.playPauseButton,this.onPlayPauseTouch),function(e,t){if(j())return;e.addEventListener(_,t)}(this.fullscreenButton,this.onFullscreenControlClick),e=t=null,this.setPlayStatus(i.playStatus.SETUP),this._hideOriginalPlayerButton()}},{key:"initializeVolumeControl",value:function(e,t){var r=e.querySelector(".bvp-ad-volume-bar__scrubber"),i=e.querySelector(".bvp-ad-volume-bar"),a=e.querySelector(".bvp-ad-volume-bar__container"),n=e.querySelector(".bvp-ad-sound-menu");this.volumeControl=new h.default({volumeBar:i,volumeScrubber:r,volumePath:a,muteControl:t,volume:this.volume,muted:this.muted,volumeParent:n}),this.volumeControl.setEventParent(this),i=r=a=n=null}},{key:"destroy",value:function(){var t=this;this.removeAllEventListeners(),this.adDimensions=null,this.bufferingAnimation=null,this.controlBar=null,this.volumeControl&&(this.volumeControl.destroy(),this.volumeControl=null),this.playPauseButton.removeEventListener(_,this.onPlayPauseTouch),this.playPauseButton=null,this.bigPlayButton.removeEventListener(_,this.onPlayPauseTouch),this.bigPlayButton=null,this.fullscreenButton.removeEventListener(_,this.onFullscreenControlClick),this.fullscreenButton=null,this.container=null,this.controlsComponent.hide(),this.player=null,k.forEach(function(e){t[e]=null})}},{key:"hide",value:function(){this.controlsComponent.hide(),this._restoreOriginalPlayerButton()}},{key:"show",value:function(){this.controlsComponent.show(),this._hideOriginalPlayerButton()}},{key:"mute",value:function(){this.volumeControl&&this.volumeControl.mute()}},{key:"setVolume",value:function(e){this.volume=e,this.volumeControl&&this.volumeControl.setVolume(e)}},{key:"getAvailableAdHeight",value:function(){return this.adDimensions.height}},{key:"getPlayStatus",value:function(){return this.playStatus}},{key:"onPlayPauseTouch",value:function(){if(this.playStatus!==i.playStatus.SETUP&&this.playStatus!==i.playStatus.IDLE||this.trigger(i.events.AD_REQUEST),this.playStatus===i.playStatus.PAUSED)return this.trigger(i.events.PLAY_REQUEST),void this.setPlay();this.playStatus===i.playStatus.PLAYING&&(this.trigger(i.events.PAUSE_REQUEST),this.setPause())}},{key:"onFullscreenControlClick",value:function(){if(this.fullscreen)return this.player.exitFullscreen(),void this.player.removeClass(T);this.player.addClass(T),this.player.requestFullscreen()}},{key:"onFullscreenChange",value:function(){if(this.fullscreen)return this.fullscreen=!1,this.trigger(i.events.EXIT_FULLSCREEN),void this.adControlBarComponent.setExitFullscreenState();this.fullscreen=!0,this.trigger(i.events.REQUEST_FULLSCREEN),this.adControlBarComponent.setEnterFullscreenState()}},{key:"setPlayStatus",value:function(e){switch(e){case i.playStatus.PAUSED:this.setPause();break;case i.playStatus.PLAYING:this.setPlay();break;case i.playStatus.BUFFERING:this.setBuffering();break;case i.playStatus.SETUP:this.setSetup();break;case i.playStatus.IDLE:this.setIdle();break;default:v.default.recordGenericError(g,"Received unsupported play status: ".concat(e))}}},{key:"showUI",value:function(){this.controlsComponent.showUI()}},{key:"hideUI",value:function(){this.controlsComponent.hideUI()}},{key:"setAdCountdownTime",value:function(e,t,r){var i=0<arguments.length&&void 0!==e?e:0,a=1<arguments.length&&void 0!==t?t:0,n=2<arguments.length&&void 0!==r?r:0,s=c.default.formatSeconds(i),l=c.default.formatSeconds(a),o=c.default.formatSeconds(n);this.controlsComponent.setCountdownTime(s,l,o)}},{key:"setPlay",value:function(){var e=this;this.playStatus=i.playStatus.PLAYING,this.adControlBarComponent.setPlayState(),this.hidePlayButton(),p.default.removeClass(this.bufferingAnimation,E),p.default.removeClass(this.controlBar,S),p.default.addClass(this.controlBar,P),setTimeout(function(){p.default.removeClass(e.controlBar,P)},3e3)}},{key:"setPause",value:function(){this.playStatus=i.playStatus.PAUSED,this.adControlBarComponent.setPauseState()}},{key:"setBuffering",value:function(){g.info("Buffering..."),this.hidePlayButton(),this.playStatus=i.playStatus.BUFFERING,p.default.addClass(this.bufferingAnimation,E)}},{key:"setIdle",value:function(){g.info("Idle..."),this.playStatus=i.playStatus.IDLE,p.default.removeClass(this.bufferingAnimation,E)}},{key:"setSetup",value:function(){this.playStatus=i.playStatus.SETUP,p.default.addClass(this.controlBar,S),f.default.isFoundationOverlayEnabled(this.player.options_)||this.showPlayButton(),p.default.removeClass(this.bufferingAnimation,E)}},{key:"showBufferingAnimation",value:function(){this.controlsComponent.show(),this.setPlayStatus(i.playStatus.BUFFERING)}},{key:"hideBufferingAnimation",value:function(){this.setPlayStatus(i.playStatus.SETUP)}},{key:"setPlaying",value:function(){this.setPlayStatus(i.playStatus.PLAYING)}},{key:"showPlayButton",value:function(){f.default.isMobile()?p.default.addClass(this.bigPlayButton,A):p.default.addClass(this.bigPlayButton,C)}},{key:"hidePlayButton",value:function(){f.default.isMobile()?p.default.removeClass(this.bigPlayButton,A):p.default.removeClass(this.bigPlayButton,C)}},{key:"_hideOriginalPlayerButton",value:function(){this.player.bigPlayButton.hide()}},{key:"_restoreOriginalPlayerButton",value:function(){this.player.bigPlayButton.show()}}]),i}(d.default);function j(){return!!window.videojs.browser.IS_IOS&&("ontouchend"in window&&f.default.isChromeIos())}function R(e,t){e.addEventListener("touchend",t)}Object.defineProperty(w,"playStatus",{value:{PAUSED:"PAUSED",PLAYING:"PLAYING",SETUP:"SETUP",BUFFERING:"BUFFERING",IDLE:"IDLE"}}),Object.defineProperty(w,"events",{value:{AD_REQUEST:"AD_REQUEST",PLAY_REQUEST:"PLAY_REQUEST",PAUSE_REQUEST:"PAUSE_REQUEST",VOLUME_CHANGE:"VOLUME_CHANGE",REQUEST_FULLSCREEN:"REQUEST_FULLSCREEN",EXIT_FULLSCREEN:"EXIT_FULLSCREEN"}});var D=w;r.default=D},{"./ad-volume-control":400,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/events/player-events":381,"app/utils/css-helpers":453,"app/utils/datetime-utils":455,"app/utils/error-report":457,"app/utils/event-target":458,"app/utils/fullscreen":459,"app/utils/log":464,"app/utils/projector-utils":466}],455:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.array.concat"),e("core-js/modules/es.parse-float"),e("core-js/modules/es.parse-int"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/createClass")),s=["January","February","March","April","May","June","July","August","September","October","November","December"],l=function(){function e(){(0,a.default)(this,e)}return(0,n.default)(e,null,[{key:"convertToSeconds",value:function(e){if(!e)return null;var t=e.split(":");return t.length<3?null:3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseFloat(t[2])}},{key:"formatSeconds",value:function(e){if(!e||0===e)return"";var t=Math.round(e),r=0;60<=t&&(r=Math.floor(t/60),t%=60);var i="".concat(r||"0"),a="".concat(t<10?"0"+t:t);return"".concat(i,":").concat(a)}},{key:"formatForReporting",value:function(e){if(!e)return"";var t=e.getUTCDate(),r=e.getUTCMonth(),i=e.getUTCFullYear();return"".concat(s[r]," ").concat(t,", ").concat(i)}}]),e}();r.default=l},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"core-js/modules/es.array.concat":193,"core-js/modules/es.parse-float":214,"core-js/modules/es.parse-int":215,"core-js/modules/es.string.split":230}],400:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.parse-float"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),p=i(e("@babel/runtime/helpers/possibleConstructorReturn")),c=i(e("@babel/runtime/helpers/getPrototypeOf")),h=i(e("@babel/runtime/helpers/assertThisInitialized")),n=i(e("@babel/runtime/helpers/inherits")),s=i(e("app/utils/event-target")),l=i(e("app/utils/css-helpers")),o=e("app/utils/KeyCodes"),f="click",m=["onMouseDown","onDragStop","onMouseMove","onPathClick","toggleMute","_toggleMuteKeyBoard","_onArrowKeyPressed"],b="mouseleave",u="volume-down",v="volume-up",y=function(e){function u(e){var t,r=e.volumeBar,i=e.volumeScrubber,a=e.volumePath,n=e.muteControl,s=e.volume,l=e.muted,o=e.volumeParent;return(0,d.default)(this,u),t=(0,p.default)(this,(0,c.default)(u).call(this)),m.forEach(function(e){t[e]=t[e].bind((0,h.default)(t))}),t.dragStarted=!1,t.volumeBar=r,t.volumePath=a,t.volumeScrubber=i,t.volumeBarDimensions=null,t.volumeBarWidth=null,t.volumeBarXOffset=null,t.scrubOffset=null,t.scrubberCenter=null,t.volume=s,t.muted=l,t.muteControl=n,t.volumeParent=o,t.volumeScrubber.addEventListener("mousedown",t.onMouseDown),t.volumeScrubber.addEventListener("mouseup",t.onDragStop),t.volumeBar.addEventListener(b,t.onDragStop),t.volumeBar.addEventListener("mousemove",t.onMouseMove),t.volumeBar.addEventListener("keydown",t._onArrowKeyPressed),t.volumePath.addEventListener(f,t.onPathClick),t.muteControl.addEventListener(f,t.toggleMute),t.volumeParent.addEventListener("keydown",t._toggleMuteKeyBoard),t.setInitialVolume(t.volume),t}return(0,n.default)(u,e),(0,a.default)(u,[{key:"_toggleMuteKeyBoard",value:function(e){(0,o.isSpace)(e)&&(e.preventDefault(),this.toggleMute())}},{key:"onMouseDown",value:function(e){this.dragStarted=!0,this.scrubberCenter=this.scrubberCenter||e.target.clientWidth/2}},{key:"onDragStop",value:function(){this.dragStarted=!1}},{key:"onVolumeChange",value:function(e){this.muted=0==e,this.setVolume(e)}},{key:"onPathClick",value:function(e){this.dragStarted=!0,this.onMouseMove(e),this.dragStarted=!1}},{key:"onMouseMove",value:function(e){if(this.dragStarted){this.volumeBarDimensions=this.volumeBarDimensions||this.volumeBar.getBoundingClientRect(),this.volumeBarWidth=this.volumeBarWidth||this.volumeBarDimensions.width,this.volumeBarXOffset=this.volumeBarDimensions.left,this.scrubOffset=this.scrubOffset||this.volumeBarWidth-70-this.scrubberCenter;var t=Math.max(0,Math.abs(this.volumeBarXOffset-e.clientX)-this.scrubOffset),r=Math.max(0,Math.min(70,t));_(this.volumeScrubber,r);var i=r/70;this.onVolumeChange(i)}}},{key:"_onArrowKeyPressed",value:function(e){if((0,o.isArrowRight)(e)||(0,o.isArrowLeft)(e)){e.preventDefault();var t=(0,o.isArrowRight)(e)?1:-1,r=this.volume+.1*t;r=Math.max(0,r),r=Math.min(r,1),this.setVolume(r)}}},{key:"dispatchVolumeChange",value:function(){this.trigger(u.events.VOLUME_CHANGE,{volume:this.volume,muted:this.muted}),C(this.muteControl,this.volume,this.muted)}},{key:"setInitialVolume",value:function(e){this.muted?this.showMuteControls():this.setVolume(e)}},{key:"setVolume",value:function(e){e=parseFloat(e),0===(this.volume=e)?this.showMuteControls():this.hideMuteControls();var t=Math.floor(100*e);this.volumePath.setAttribute("aria-valuenow",t),this.volumePath.setAttribute("aria-valuetext","".concat(t,"%"));var r=g(e);_(this.volumeScrubber,r),this.dispatchVolumeChange()}},{key:"showMuteControls",value:function(){this.muted=!0,this.volumePath.setAttribute("aria-valuenow","0"),_(this.volumeScrubber,0),C(this.muteControl,0,this.muted)}},{key:"hideMuteControls",value:function(){this.muted=!1;var e=g(this.volume);_(this.volumeScrubber,e),C(this.muteControl,this.volume,this.muted)}},{key:"toggleMute",value:function(){this.muted?this.unmute():this.mute()}},{key:"mute",value:function(){this.showMuteControls(),this.dispatchVolumeChange()}},{key:"unmute",value:function(){0==this.volume&&(this.volume=1),this.muted=!1,this.setVolume(this.volume)}},{key:"destroy",value:function(){this.removeAllEventListeners(),this.volumeScrubber.removeEventListener("mousedown",this.onMouseDown),this.volumeScrubber.removeEventListener("mouseup",this.onDragStop),this.volumeBar.removeEventListener(b,this.onDragStop),this.volumeBar.removeEventListener("mousemove",this.onMouseMove),this.volumePath.removeEventListener(f,this.onPathClick),this.muteControl.removeEventListener(f,this.toggleMute),this.volumeBarDimensions=null,this.volumeScrubber=null,this.volumeBar=null,this.volumePath=null,this.muteControl=null}}]),u}(s.default);function g(e){var t=70*e;return Math.max(0,Math.min(70,t))}function _(e,t){l.default.transform(e,"translateX(".concat(t,"px)"))}function C(e,t,r){var i=!t||r,a=i?"Unmute":"Mute";return e.setAttribute("title",a),e.setAttribute("aria-label",a),i?(l.default.addClass(e,"mute"),l.default.removeClass(e,u),void l.default.removeClass(e,v)):t<=.25?(l.default.addClass(e,u),l.default.removeClass(e,"mute"),void l.default.removeClass(e,v)):(l.default.addClass(e,v),l.default.removeClass(e,"mute"),void l.default.removeClass(e,u))}Object.defineProperty(y,"events",{value:{VOLUME_CHANGE:"VOLUME_CHANGE"}});var A=y;r.default=A},{"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21,"app/utils/KeyCodes":442,"app/utils/css-helpers":453,"app/utils/event-target":458,"core-js/modules/es.parse-float":214}],442:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTab=r.isSpace=r.isArrowLeft=r.isArrowRight=r.isKey=r.KeyCodes=void 0;var a={ArrowRight:39,ArrowLeft:37,Tab:9," ":32};r.KeyCodes=a;function i(i){return function(e){var t=e.key,r=e.keyCode;return t===i||r===a[i]}}var n=(r.isKey=i)("ArrowRight");r.isArrowRight=n;var s=i("ArrowLeft");r.isArrowLeft=s;var l=i(" ");r.isSpace=l;var o=i("Tab");r.isTab=o},{}],387:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.object.to-string");function n(e,t,r){return void 0===r?[e,t]:[e,t,r]}function s(){}var l=i(e("@babel/runtime/helpers/toConsumableArray")),o=i(e("@babel/runtime/helpers/typeof")),u=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),d=i(e("app/events/ad-events")),p=i(e("app/lib/google-ads/ad-utils")),c=i(e("app/utils/projector-utils")),h=i(e("app/events/player-events")),f=i(e("app/utils/log")),m=i(e("app/utils/error-report")),b=new f.default("BloombergVideoPlayer"),v="AdController",y=[h.default.ADS_TIMEOUT_ERROR,d.default.ALL_ADS_COMPLETED],g=Symbol("eventHandlers"),_=Symbol("readyHandlers"),C=Symbol("triggerHandlers"),A=Symbol("strategyPromise"),E="GoogleAdsPlugin",P=function(){function r(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length?arguments[1]:void 0,t=2<arguments.length?arguments[2]:void 0;(0,u.default)(this,r),this.disposed=!1,this._hasContentStarted=!1,this.player=null,this.userOptions=e,this[g]=[],this[_]=[],this[C]=[],a=a||{onReady:s,onError:s},this._onVolumeChange=this._onVolumeChange.bind(this),this[A]=t.run().then(function(e){if(!i.disposed){var t;for(e.options_.plugins.hasOwnProperty(E)&&p.default.hasPreroll(e.options_.plugins[E])&&i.setIsAdPlaying(!0),i.player=e,"function"===(0,o.default)(a.onReady)&&a.onReady.call(i.player,i.player);t=i[_].pop();)i.player.ready(t.handler,t.sync);for(;t=i[g].pop();){var r;(r=i.player).on.apply(r,(0,l.default)(n(t.first,t.second,t.third)))}for(;t=i[C].pop();)i.player.trigger(t.type,t.eventDetails);return t=null,i.player.on(d.default.AD_STARTED,function(){return i.setIsAdPlaying(!0)}),i.player.on(y,function(){return i.setIsAdPlaying(!1)}),i.player.on(h.default.REQUEST_SHARE,function(){return i.setIsShareShowing(!0)}),i.player.on(h.default.DISMISS_SHARE,function(){return i.setIsShareShowing(!1)}),i.player.on(h.default.FOUNDATION_OVERLAY_CLICKED,function(){var e=i.player.AdController;e&&e.hasPlayableAd?e.adControls.onPlayPauseTouch():i.player.play()}),i.player.on(h.default.PLAY,function(){i.player.trigger(h.default.WILL_PLAY),i._hasContentStarted=!0}),i.userOptions.autoplay&&setTimeout(function(){return i.player.trigger(h.default.WILL_PLAY)},0),i.player.on(h.default.VOLUME_CHANGE,i._onVolumeChange),i.player.on(h.default.PAY_WALL_PLAY,i.play.bind(i)),i.player.on(h.default.PAY_WALL_PAUSE,i.pause.bind(i)),i.player.on(h.default.REG_UI_POP_UP_SHOWN,i.pause.bind(i)),i.player.on(h.default.REG_UI_POP_UP_CLOSED,i.play.bind(i)),e}},function(e){"function"===(0,o.default)(a.onError)&&a.onError(e),m.default.recordGenericError(b,e)}),this.dispose=this.dispose.bind(this),window.addEventListener("unload",this.dispose)}return(0,a.default)(r,[{key:"isAdPlaying",value:function(){return this.adStatus}},{key:"setIsAdPlaying",value:function(e){this.adStatus=e}},{key:"isShareShowing",value:function(){return this.shareStatus}},{key:"setIsShareShowing",value:function(e){this.shareStatus=e}},{key:"getId",value:function(){return this.userOptions.id}},{key:"getPlaylistIndex",value:function(){return this.userOptions.playlistIndex}},{key:"getHtmlChildId",value:function(){return this.userOptions.htmlChildId}},{key:"setAutoplay",value:function(e){this.player&&this.player.hasOwnProperty(v)&&this.player[v].setAutoplay(e),this.userOptions.autoplay=e}},{key:"isAutoplay",value:function(){return Boolean(this.userOptions.autoplay)}},{key:"play",value:function(){this.trigger(h.default.WILL_PLAY);var e=this.player;if(this.isAdPlaying()){var t=e[v];if(!t)return;return c.default.isAutoplayDisabledBrowser()&&!t.isAdStarted()&&(t.muteAdAndContent(),this._showMutedOverlay()),t.setAutoplay(!0),void e.trigger({type:d.default.REQUEST_AD_PLAY})}e&&!this.isShareShowing()&&(!this._hasContentStarted&&c.default.isAutoplayDisabledBrowser()&&(e.muted(!0),this._showMutedOverlay()),e.play())}},{key:"_showMutedOverlay",value:function(){this.player.MutedOverlayComponent&&this.player.MutedOverlayComponent.show()}},{key:"_hideMutedOverlay",value:function(){this.player.MutedOverlayComponent&&this.player.MutedOverlayComponent.destroy()}},{key:"pause",value:function(){this.isAdPlaying()?this.player.trigger({type:d.default.REQUEST_AD_PAUSE}):this.player&&this.player.pause()}},{key:"mute",value:function(){if(this.isAdPlaying()){var e=this.player[v];if(!e)return;e.muteAdAndContent()}else this.player&&this.player.muted(!0)}},{key:"unmute",value:function(){if(this.isAdPlaying()){var e=this.player[v];if(!e)return;return e.unmuteAdAndContent(),void this._hideMutedOverlay()}this.player&&(this.player.muted(!1),this._hideMutedOverlay())}},{key:"ready",value:function(e,t){if(e){if(this.player)return this.player.ready(e,t),this[A];this[_].push({handler:e,sync:t})}return this[A]}},{key:"dispose",value:function(){this.disposed=!0,this.player&&this.player.dispose(),this.player=this.userOptions=null,this[g]=null,this[_]=null,this[C]=null,window.removeEventListener("unload",this.dispose)}},{key:"on",value:function(e,t,r){var i;this.player?(i=this.player).on.apply(i,(0,l.default)(n(e,t,r))):this[g].push({first:e,second:t,third:r});return this}},{key:"off",value:function(e,t,r){var i;this.player&&(i=this.player).off.apply(i,(0,l.default)(n(e,t,r)));return this}},{key:"trigger",value:function(e,t){return this.player?this.player.trigger(e,t):(this[C].push({type:e,eventDetails:t}),this)}},{key:"trackInfo",value:function(e){this.trigger("track-info",e)}},{key:"isPlaying",value:function(){return c.default.isAdOrContentPlaying(this.player)}},{key:"showClosedCaptions",value:function(){this.player.trigger(h.default.SHOW_CLOSED_CAPTIONS)}},{key:"hideClosedCaptions",value:function(){this.player.trigger(h.default.HIDE_CLOSED_CAPTIONS)}},{key:"isMuted",value:function(){var e=this.player,t=e.player_&&e.player_.tech_&&e.player_.tech_.el_;return t?t.muted:e.volume()}},{key:"_onVolumeChange",value:function(){var e=this.player;e.trigger({type:h.default.BVP_VOLUME_CHANGE,data:{volume:e.volume(),muted:this.isMuted()}})}},{key:"transcriptOn",value:function(){this.player&&this.player.trigger(h.default.INTERNAL_TRANSCRIPT_ON)}},{key:"transcriptOff",value:function(){this.player&&this.player.trigger(h.default.INTERNAL_TRANSCRIPT_OFF)}},{key:"transcript",value:function(){return this.player?this.player._bbTranscript:null}},{key:"currentTime",value:function(){if(this.player)return this.player.currentTime()}}]),r}();t.exports=P},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/toConsumableArray":25,"@babel/runtime/helpers/typeof":26,"app/events/ad-events":379,"app/events/player-events":381,"app/lib/google-ads/ad-utils":399,"app/utils/error-report":457,"app/utils/log":464,"app/utils/projector-utils":466,"core-js/modules/es.object.to-string":213,"core-js/modules/es.symbol":235,"core-js/modules/es.symbol.description":233}],399:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),a=function(){function a(){(0,n.default)(this,a)}return(0,s.default)(a,null,[{key:"canDisplayAds",value:function(e){var t=a.hasPreroll(e),r=a.hasMidroll(e),i="enabled"===e.enabled||!0===e.jsAdsEnabled;return(t||r)&&i}},{key:"hasPreroll",value:function(e){return!!(e.prerollUnit&&0<e.prerollUnit.length)}},{key:"hasMidroll",value:function(e){return!!(e.midrollUnit&&0<e.midrollUnit.length)}},{key:"isAdMuted",value:function(e){return!(!e||!e.AdController||!e.AdController.muteStatus&&0!==e.AdController.volume)}},{key:"isAdPlaying",value:function(e){return!!(e&&e.AdController&&e.AdController.currentAdStarted)}}]),a}();r.default=a},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":14}],371:[function(e,t,r){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),n=i(e("@babel/runtime/helpers/possibleConstructorReturn")),s=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),o=videojs.getComponent("LiveDisplay"),u=function(e){function i(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,i),t=(0,n.default)(this,(0,s.default)(i).call(this,e,r)),e.options_.hideLiveDisplay&&t.addClass("vjs-live-control--hidden"),t}return(0,l.default)(i,e),i}(o);videojs.registerComponent("BloombergLiveDisplay",u);var d=u;r.default=d},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":21}],362:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i={RADIO:{id:"TRITON_RADIO",title:"TRITON_RADIO",live:1,form_type:"Triton Radio",poster:"https://assets.bwbx.io/images/i6A3iNeav9zc/v1/-1x-1.jpg",player_type:"radio",streamProvider:"TRITON",streamProviderConfig:{apiVersion:"1.8",station:"WBBRAM",mount:"WBBRAMAAC48",stationId:"69443"}},RADIO_NY:{id:"RADIO_NY",title:"RADIO_NY",live:1,form_type:"Triton Radio",poster:"https://assets.bwbx.io/images/i6A3iNeav9zc/v1/-1x-1.jpg",player_type:"radio",streamProvider:"TRITON",streamProviderConfig:{apiVersion:"1.8",station:"WBBRNY",mount:"WBBRNYAAC",stationId:"270763"}},RADIO_BOS:{id:"RADIO_BOS",title:"RADIO_BOS",live:1,form_type:"Triton Radio",poster:"https://assets.bwbx.io/images/i6A3iNeav9zc/v1/-1x-1.jpg",player_type:"radio",streamProvider:"TRITON",streamProviderConfig:{apiVersion:"1.8",station:"WBBRBOS",mount:"WBBRBOSAAC",stationId:"270803"}},RADIO_DC:{id:"RADIO_DC",title:"RADIO_DC",live:1,form_type:"Triton Radio",poster:"https://assets.bwbx.io/images/i6A3iNeav9zc/v1/-1x-1.jpg",player_type:"radio",streamProvider:"TRITON",streamProviderConfig:{apiVersion:"1.8",station:"WBBRDC",mount:"WBBRDCAAC",stationId:"270793"}},RADIO_SF:{id:"RADIO_SF",title:"RADIO_SF",live:1,form_type:"Triton Radio",poster:"https://assets.bwbx.io/images/i6A3iNeav9zc/v1/-1x-1.jpg",player_type:"radio",streamProvider:"m3u8",streamProviderConfig:{apiVersion:"1.8",station:"WBBRSF",mount:"WBBRSFAAC",stationId:"270783"},"DEVELOPER-TODO":"RADIO_SF has a geofence with Triton, for the Oakland A's contract. To remove, re-instance 'streamProvider' as 'TRITON' and remove the cdns object",cdns:[{weight:1,name:"bvp_phoenix_us_manifest",cdn:"manifest",streams:[{url:"https://playerservices.streamtheworld.com/api/livestream-redirect/WBBRSFOAAC.m3u8",type:"application/x-mpegURL"}]}]},PHOENIX_US:{id:"LIVE_PHOENIX_US",title:"LIVE_PHOENIX_US",live:1,form_type:"Live Phoenix U.S.",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",daiAssetKey:"BVlOmFGaTi6NpchccR14yA",cdns:[{weight:1,name:"bvp_phoenix_us_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/phoenix-us.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/phoenix-us.m3u8?group=backup",type:"application/x-mpegURL"}]}]},QT:{id:"LIVE_QT",title:"LIVE_QT",live:1,form_type:"Live QT",poster:"https://assets.bwbx.io/images/iNc9rqqoTDRQ/v1/640x384.jpg",player_type:"standard",daiAssetKey:"cFDvmqo4TGW7EfHwscU_Ew",cdns:[{weight:1,name:"bvp_qt_us_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/qt.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/qt.m3u8?group=backup",type:"application/x-mpegURL"}]}]},US:{id:"LIVE_US",title:"LIVE_US",live:1,form_type:"Live U.S.",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"79",daiAssetKey:"PwTJe4aZRvSBjbWY7_VSzA",cdns:[{weight:1,name:"bvp_us_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/us.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/us.m3u8?group=backup",type:"application/x-mpegURL"}]}]},TOWNHALL:{id:"LIVE_TOWNHALL",title:"LIVE_TOWNHALL",live:1,form_type:"Townhall",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cdns:[{weight:.5,name:"bvp_townhall_manifest_fastly",cdn:"fastly",streams:[{url:"https://bblive-townhall.global.ssl.fastly.net/kwynxqiwdq/index.m3u8",type:"application/x-mpegURL"}]},{weight:.5,name:"bvp_townhall_manifest_akamai",cdn:"akamai",streams:[{url:"https://bblive-townhall.akamaized.net/kwynxqiwdq/index.m3u8",type:"application/x-mpegURL"}]}]},ASIA:{id:"LIVE_ASIA",title:"LIVE_ASIA",live:1,form_type:"Live Asia",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"81",daiAssetKey:"crO2xItzS0K0Mznc1p0yPA",cdns:[{weight:1,name:"bvp_asia_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/asia.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/asia.m3u8?group=backup",type:"application/x-mpegURL"}]}]},AUS:{id:"LIVE_AUS",title:"LIVE_AUS",live:1,form_type:"Live Australia",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"89",daiAssetKey:"-0JiXPvoQCCx1Nbwgx9Xmw",cdns:[{weight:1,name:"bvp_aus_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/aus.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/aus.m3u8?group=backup",type:"application/x-mpegURL"}]}]},EU:{id:"LIVE_EU",title:"LIVE_EU",live:1,form_type:"Live Europe",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"80",daiAssetKey:"TPKhqf0BQn2_ijC-0rOJcA",cdns:[{weight:1,name:"bvp_eu_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/eu.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/eu.m3u8?group=backup",type:"application/x-mpegURL"}]}]},EVENT:{id:"LIVE_EVENT",title:"LIVE_EVENT",live:1,form_type:"Live Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"82",cdns:[{weight:1,name:"bvp_us_event_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/us-event.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/us-event.m3u8?group=backup",type:"application/x-mpegURL"}]}]},EVENT_LINEUP:{id:"LIVE_EVENT_LINEUP_MINI",title:"LIVE_EVENT_LINEUP_MINI",live:1,form_type:"Live Event Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_event_lineup_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/us-event.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/us-event.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},EMEA_EVENT:{id:"LIVE_EMEA_EVENT",title:"LIVE_EMEA_EVENT",live:1,form_type:"Live EMEA Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"83",cdns:[{weight:1,name:"bvp_eu_event_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/eu-event.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/eu-event.m3u8?group=backup",type:"application/x-mpegURL"}]}]},EMEA_EVENT_LINEUP:{id:"LIVE_EMEA_EVENT_LINEUP_MINI",title:"LIVE_EMEA_EVENT_LINEUP_MINI",live:1,form_type:"Live EMEA Event Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_eu_event_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/eu-event.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/eu-event.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},ASIA_EVENT:{id:"LIVE_ASIA_EVENT",title:"LIVE_ASIA_EVENT",live:1,form_type:"Live Asia Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"84",cdns:[{weight:1,name:"bvp_asia_event_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/asia-event.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/asia-event.m3u8?group=backup",type:"application/x-mpegURL"}]}]},ASIA_EVENT_LINEUP:{id:"LIVE_ASIA_EVENT_LINEUP_MINI",title:"LIVE_ASIA_EVENT_LINEUP_MINI",live:1,form_type:"Live Asia Event Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_asia_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/asia-event.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/asia-event.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},US_MINI:{id:"LIVE_US_MINI",title:"LIVE_US_MINI",live:1,form_type:"Live US Mini",player_type:"mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",cdns:[{weight:1,name:"bvp_us_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/us.m3u8?profile=mini",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/us.m3u8?group=backup&profile=mini",type:"application/x-mpegURL"}]}]},ASIA_MINI:{id:"LIVE_ASIA_MINI",title:"LIVE_ASIA_MINI",live:1,form_type:"Live Asia Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_asia_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/asia.m3u8?profile=mini",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/asia.m3u8?group=backup&profile=mini",type:"application/x-mpegURL"}]}]},EU_MINI:{id:"LIVE_EU_MINI",title:"LIVE_EU_MINI",live:1,form_type:"Live Europe Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_eu_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/eu.m3u8?profile=mini",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/eu.m3u8?group=backup&profile=mini",type:"application/x-mpegURL"}]}]},AUS_MINI:{id:"LIVE_AUS_MINI",title:"LIVE_AUS_MINI",live:1,form_type:"Live Australia Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/aus.m3u8?profile=mini",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/aus.m3u8?group=backup&profile=mini",type:"application/x-mpegURL"}]}]},POLITICS:{id:"LIVE_POLITICS",title:"LIVE_POLITICS",live:1,form_type:"Live Politics",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cdns:[{weight:1,name:"bvp_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/politics.m3u8",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/politics.m3u8?group=backup",type:"application/x-mpegURL"}]}]},POLITICS_LINEUP:{id:"LIVE_POLITICS_LINEUP_MINI",title:"LIVE_POLITICS_LINEUP_MINI",live:1,form_type:"Live Politics Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/politics.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/politics.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},US_LINEUP:{id:"LIVE_US_LINEUP_MINI",title:"LIVE_US_LINEUP_MINI",live:1,form_type:"Live US Lineup Mini",player_type:"mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",cdns:[{weight:1,name:"bvp_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/us.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/us.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},ASIA_LINEUP:{id:"LIVE_ASIA_LINEUP_MINI",title:"LIVE_ASIA_LINEUP_MINI",live:1,form_type:"Live Asia Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/asia.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/asia.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},EU_LINEUP:{id:"LIVE_EU_LINEUP_MINI",title:"LIVE_EU_LINEUP_MINI",live:1,form_type:"Live Europe Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/eu.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/eu.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},AUS_LINEUP:{id:"LIVE_AUS_LINEUP_MINI",title:"LIVE_AUS_LINEUP_MINI",live:1,form_type:"Live Australia Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/aus.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/aus.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},QT_LINEUP:{id:"LIVE_QT_LINEUP",title:"LIVE_QT_LINEUP",live:1,form_type:"Live QT Lineup Mini",poster:"https://assets.bwbx.io/images/iNc9rqqoTDRQ/v1/640x384.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_qt_us_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/qt.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/qt.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]},QT_MINI:{id:"LIVE_QT_MINI",title:"LIVE_QT_MINI",live:1,form_type:"Live QT Lineup Mini",poster:"https://assets.bwbx.io/images/iNc9rqqoTDRQ/v1/640x384.jpg",player_type:"mini",cdns:[{weight:1,name:"bvp_qt_us_manifest",cdn:"manifest",streams:[{url:"https://www.bloomberg.com/media-manifest/streams/qt.m3u8?profile=lineup",type:"application/x-mpegURL"},{url:"https://www.bloomberg.com/media-manifest/streams/qt.m3u8?group=backup&profile=lineup",type:"application/x-mpegURL"}]}]}};r.default=i},{}],361:[function(e,t,r){t.exports={bigPlayButton:!1,controlBar:{children:[]},start_muted:!0,use_title_bar:!1,use_playback_outro:!1,use_share_overlay:!1,useMutedOverlayPlugin:!1}},{}],360:[function(e,t,r){t.exports={Play:"Play",Pause:"Pause","Current Time":"Current Time","Duration Time":"Duration Time","Remaining Time":"Remaining Time","Stream Type":"Stream Type",LIVE:"LIVE",Loaded:"Loaded",Progress:"Progress",Fullscreen:"Fullscreen","Non-Fullscreen":"Non-Fullscreen",Mute:"Mute",Unmute:"Unmute","Playback Rate":"Playback Rate",Subtitles:"Subtitles","subtitles off":"subtitles off",Captions:"Captions","captions off":"captions off",Chapters:"Chapters","Close Modal Dialog":"Close Modal Dialog",Descriptions:"Descriptions","descriptions off":"descriptions off","You aborted the media playback":"An error has occurred.  Reload the web page or use another browser.\n\nError 1","A network error caused the media download to fail part-way.":"An error has occurred.  Reload the web page or use another browser.\n\nError 2","The media could not be loaded, either because the server or network failed or because the format is not supported.":"An error has occurred.  Reload the web page or use another browser.\n\nError 3","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"An error has occurred.  Reload the web page or use another browser.\n\nError 4","No compatible source was found for this media.":"Flash is no longer supported on bloomberg.com. Please update your browser and operating system to continue to watch.","Play Video":"Play Video",Close:"Close","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected"}},{}],277:[function(e,t,r){var s=e("./lib/rng"),l=e("./lib/bytesToUuid");t.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||s)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var n=0;n<16;++n)t[i+n]=a[n];return t||l(a)}},{"./lib/bytesToUuid":275,"./lib/rng":276}],276:[function(e,t,r){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var a=new Uint8Array(16);t.exports=function(){return i(a),a}}else{var n=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},{}],275:[function(e,t,r){for(var a=[],i=0;i<256;++i)a[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,i=a;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},{}],262:[function(e,S,t){(function(e){var t=9007199254740991,r="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",n="[object Symbol]",s="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,o=s||l||Function("return this")();function u(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}var d=Object.prototype,p=d.hasOwnProperty,c=d.toString,h=o.Symbol,f=d.propertyIsEnumerable,m=h?h.isConcatSpreadable:void 0,b=Math.max;function v(r,e){return function(e,t,r){var i=-1,a=t.length,n={};for(;++i<a;){var s=t[i],l=e[s];r(l,s)&&(n[s]=l)}return n}(r=Object(r),e,function(e,t){return t in r})}function y(e){return _(e)||function(e){return function(e){return C(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=t}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?c.call(e):"";return t==i||t==a}(e)}(e)}(e)&&p.call(e,"callee")&&(!f.call(e,"callee")||c.call(e)==r)}(e)||!!(m&&e&&e[m])}function g(e){if("string"==typeof e||function(e){return"symbol"==typeof e||C(e)&&c.call(e)==n}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var _=Array.isArray;function C(e){return!!e&&"object"==typeof e}var A,E,P=(A=function(e,t){return null==e?{}:v(e,function(e,t){for(var r=-1,i=e?e.length:0,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}(function e(t,r,i,a,n){var s=-1,l=t.length;for(i=i||y,n=n||[];++s<l;){var o=t[s];0<r&&i(o)?1<r?e(o,r-1,i,a,n):u(n,o):a||(n[n.length]=o)}return n}(t,1),g))},E=b(void 0===E?A.length-1:E,0),function(){for(var e=arguments,t=-1,r=b(e.length-E,0),i=Array(r);++t<r;)i[t]=e[E+t];t=-1;for(var a=Array(E+1);++t<E;)a[t]=e[t];return a[E]=i,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(A,this,a)});S.exports=P}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],261:[function(e,h,t){(function(e){function y(){return d.Date.now()}var i=NaN,t="[object Symbol]",a=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,r="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,d=r||u||Function("return this")(),p=Object.prototype.toString,g=Math.max,_=Math.min;function C(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==t}function A(e){if("number"==typeof e)return e;if(c(e))return i;if(C(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=C(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=s.test(e);return r||l.test(e)?o(e.slice(2),r?2:8):n.test(e)?i:+e}h.exports=function(i,r,e){var a,n,s,l,o,u,d=0,p=!1,c=!1,t=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function h(e){var t=a,r=n;return a=n=void 0,d=e,l=i.apply(r,t)}function f(e){var t=e-u;return void 0===u||r<=t||t<0||c&&s<=e-d}function m(){var e=y();if(f(e))return b(e);o=setTimeout(m,function(e){var t=r-(e-u);return c?_(t,s-(e-d)):t}(e))}function b(e){return o=void 0,t&&a?h(e):(a=n=void 0,l)}function v(){var e=y(),t=f(e);if(a=arguments,n=this,u=e,t){if(void 0===o)return function(e){return d=e,o=setTimeout(m,r),p?h(e):l}(u);if(c)return o=setTimeout(m,r),h(u)}return void 0===o&&(o=setTimeout(m,r)),l}return r=A(r)||0,C(e)&&(p=!!e.leading,s=(c="maxWait"in e)?g(A(e.maxWait)||0,r):s,t="trailing"in e?!!e.trailing:t),v.cancel=function(){void 0!==o&&clearTimeout(o),a=u=n=o=void(d=0)},v.flush=function(){return void 0===o?l:b(y())},v}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],259:[function(e,Ke,Xe){(function(e){var i="__lodash_hash_undefined__",r=9007199254740991,h="[object Arguments]",f="[object Boolean]",m="[object Date]",b="[object Function]",v="[object GeneratorFunction]",y="[object Map]",g="[object Number]",_="[object Object]",a="[object Promise]",C="[object RegExp]",A="[object Set]",E="[object String]",P="[object Symbol]",n="[object WeakMap]",S="[object ArrayBuffer]",T="[object DataView]",k="[object Float32Array]",w="[object Float64Array]",j="[object Int8Array]",R="[object Int16Array]",D="[object Int32Array]",I="[object Uint8Array]",O="[object Uint8ClampedArray]",L="[object Uint16Array]",M="[object Uint32Array]",U=/\w*$/,t=/^\[object .+?Constructor\]$/,s=/^(?:0|[1-9]\d*)$/,x={};x[h]=x["[object Array]"]=x[S]=x[T]=x[f]=x[m]=x[k]=x[w]=x[j]=x[R]=x[D]=x[y]=x[g]=x[_]=x[C]=x[A]=x[E]=x[P]=x[I]=x[O]=x[L]=x[M]=!0,x["[object Error]"]=x[b]=x[n]=!1;var l="object"==typeof e&&e&&e.Object===Object&&e,o="object"==typeof self&&self&&self.Object===Object&&self,u=l||o||Function("return this")(),d="object"==typeof Xe&&Xe&&!Xe.nodeType&&Xe,p=d&&"object"==typeof Ke&&Ke&&!Ke.nodeType&&Ke,c=p&&p.exports===d;function N(e,t){return e.set(t[0],t[1]),e}function B(e,t){return e.add(t),e}function V(e,t,r,i){var a=-1,n=e?e.length:0;for(i&&n&&(r=e[++a]);++a<n;)r=t(r,e[a],a,e);return r}function q(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function F(e){var r=-1,i=Array(e.size);return e.forEach(function(e,t){i[++r]=[t,e]}),i}function H(t,r){return function(e){return t(r(e))}}function z(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var G,W=Array.prototype,Y=Function.prototype,Q=Object.prototype,K=u["__core-js_shared__"],X=(G=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",$=Y.toString,J=Q.hasOwnProperty,Z=Q.toString,ee=RegExp("^"+$.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=c?u.Buffer:void 0,re=u.Symbol,ie=u.Uint8Array,ae=H(Object.getPrototypeOf,Object),ne=Object.create,se=Q.propertyIsEnumerable,le=W.splice,oe=Object.getOwnPropertySymbols,ue=te?te.isBuffer:void 0,de=H(Object.keys,Object),pe=Ue(u,"DataView"),ce=Ue(u,"Map"),he=Ue(u,"Promise"),fe=Ue(u,"Set"),me=Ue(u,"WeakMap"),be=Ue(Object,"create"),ve=qe(pe),ye=qe(ce),ge=qe(he),_e=qe(fe),Ce=qe(me),Ae=re?re.prototype:void 0,Ee=Ae?Ae.valueOf:void 0;function Pe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Se(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Te(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function ke(e){this.__data__=new Se(e)}function we(e,t){var r=He(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&ze(e)}(e)&&J.call(e,"callee")&&(!se.call(e,"callee")||Z.call(e)==h)}(e)?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],i=r.length,a=!!i;for(var n in e)!t&&!J.call(e,n)||a&&("length"==n||Be(n,i))||r.push(n);return r}function je(e,t,r){var i=e[t];J.call(e,t)&&Fe(i,r)&&(void 0!==r||t in e)||(e[t]=r)}function Re(e,t){for(var r=e.length;r--;)if(Fe(e[r][0],t))return r;return-1}function De(r,i,a,n,e,t,s){var l;if(n&&(l=t?n(r,e,t,s):n(r)),void 0!==l)return l;if(!Ye(r))return r;var o=He(r);if(o){if(l=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&J.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(r),!i)return function(e,t){var r=-1,i=e.length;t=t||Array(i);for(;++r<i;)t[r]=e[r];return t}(r,l)}else{var u=Ne(r),d=u==b||u==v;if(Ge(r))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(r,i);if(u==_||u==h||d&&!t){if(q(r))return t?r:{};if(l=function(e){return"function"!=typeof e.constructor||Ve(e)?{}:function(e){return Ye(e)?ne(e):{}}(ae(e))}(d?{}:r),!i)return function(e,t){return Le(e,xe(e),t)}(r,function(e,t){return e&&Le(t,Qe(t),e)}(l,r))}else{if(!x[u])return t?r:{};l=function(e,t,r,i){var a=e.constructor;switch(t){case S:return Oe(e);case f:case m:return new a(+e);case T:return function(e,t){var r=t?Oe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,i);case k:case w:case j:case R:case D:case I:case O:case L:case M:return function(e,t){var r=t?Oe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,i);case y:return function(e,t,r){return V(t?r(F(e),!0):F(e),N,new e.constructor)}(e,i,r);case g:case E:return new a(e);case C:return function(e){var t=new e.constructor(e.source,U.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return function(e,t,r){return V(t?r(z(e),!0):z(e),B,new e.constructor)}(e,i,r);case P:return function(e){return Ee?Object(Ee.call(e)):{}}(e)}}(r,u,De,i)}}var p=(s=s||new ke).get(r);if(p)return p;if(s.set(r,l),!o)var c=a?function(e){return function(e,t,r){var i=t(e);return He(e)?i:function(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}(i,r(e))}(e,Qe,xe)}(r):Qe(r);return function(e,t){for(var r=-1,i=e?e.length:0;++r<i&&!1!==t(e[r],r,e););}(c||r,function(e,t){c&&(e=r[t=e]),je(l,t,De(e,i,a,n,t,r,s))}),l}function Ie(e){return!(!Ye(e)||function(e){return!!X&&X in e}(e))&&(We(e)||q(e)?ee:t).test(qe(e))}function Oe(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Le(e,t,r,i){r=r||{};for(var a=-1,n=t.length;++a<n;){var s=t[a],l=i?i(r[s],e[s],s,r,e):void 0;je(r,s,void 0===l?e[s]:l)}return r}function Me(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ie(r)?r:void 0}Pe.prototype.clear=function(){this.__data__=be?be(null):{}},Pe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Pe.prototype.get=function(e){var t=this.__data__;if(be){var r=t[e];return r===i?void 0:r}return J.call(t,e)?t[e]:void 0},Pe.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:J.call(t,e)},Pe.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?i:t,this},Se.prototype.clear=function(){this.__data__=[]},Se.prototype.delete=function(e){var t=this.__data__,r=Re(t,e);return!(r<0)&&(r==t.length-1?t.pop():le.call(t,r,1),!0)},Se.prototype.get=function(e){var t=this.__data__,r=Re(t,e);return r<0?void 0:t[r][1]},Se.prototype.has=function(e){return-1<Re(this.__data__,e)},Se.prototype.set=function(e,t){var r=this.__data__,i=Re(r,e);return i<0?r.push([e,t]):r[i][1]=t,this},Te.prototype.clear=function(){this.__data__={hash:new Pe,map:new(ce||Se),string:new Pe}},Te.prototype.delete=function(e){return Me(this,e).delete(e)},Te.prototype.get=function(e){return Me(this,e).get(e)},Te.prototype.has=function(e){return Me(this,e).has(e)},Te.prototype.set=function(e,t){return Me(this,e).set(e,t),this},ke.prototype.clear=function(){this.__data__=new Se},ke.prototype.delete=function(e){return this.__data__.delete(e)},ke.prototype.get=function(e){return this.__data__.get(e)},ke.prototype.has=function(e){return this.__data__.has(e)},ke.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Se){var i=r.__data__;if(!ce||i.length<199)return i.push([e,t]),this;r=this.__data__=new Te(i)}return r.set(e,t),this};var xe=oe?H(oe,Object):function(){return[]},Ne=function(e){return Z.call(e)};function Be(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||s.test(e))&&-1<e&&e%1==0&&e<t}function Ve(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Q)}function qe(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fe(e,t){return e===t||e!=e&&t!=t}(pe&&Ne(new pe(new ArrayBuffer(1)))!=T||ce&&Ne(new ce)!=y||he&&Ne(he.resolve())!=a||fe&&Ne(new fe)!=A||me&&Ne(new me)!=n)&&(Ne=function(e){var t=Z.call(e),r=t==_?e.constructor:void 0,i=r?qe(r):void 0;if(i)switch(i){case ve:return T;case ye:return y;case ge:return a;case _e:return A;case Ce:return n}return t});var He=Array.isArray;function ze(e){return null!=e&&function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=r}(e.length)&&!We(e)}var Ge=ue||function(){return!1};function We(e){var t=Ye(e)?Z.call(e):"";return t==b||t==v}function Ye(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Qe(e){return ze(e)?we(e):function(e){if(!Ve(e))return de(e);var t=[];for(var r in Object(e))J.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}Ke.exports=function(e){return De(e,!1,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],255:[function(e,t,r){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var m=window.document,t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,r){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==r[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(window,"resize",this._checkForIntersections,!0),r(m,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(m,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(window,"resize",this._checkForIntersections,!0),i(m,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var l=this._rootIsInDom(),o=l?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,r=b(t),i=this._rootContainsTarget(t),a=e.entry,n=l&&i&&this._computeTargetAndRootIntersection(t,o),s=e.entry=new u({time:window.performance&&performance.now&&performance.now(),target:t,boundingClientRect:r,rootBounds:o,intersectionRect:n});a?l&&i?this._hasCrossedThreshold(a,s)&&this._queuedEntries.push(s):a&&a.isIntersecting&&this._queuedEntries.push(s):this._queuedEntries.push(s)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=window.getComputedStyle(e).display){for(var r,i,a,n,s,l,o,u,d=b(e),p=v(e),c=!1;!c;){var h=null,f=1==p.nodeType?window.getComputedStyle(p):{};if("none"==f.display)return;if(p==this.root||p==m?(c=!0,h=t):p!=m.body&&p!=m.documentElement&&"visible"!=f.overflow&&(h=b(p)),h&&(r=h,i=d,void 0,a=Math.max(r.top,i.top),n=Math.min(r.bottom,i.bottom),s=Math.max(r.left,i.left),l=Math.min(r.right,i.right),u=n-a,!(d=0<=(o=l-s)&&0<=u&&{top:a,bottom:n,left:s,right:l,width:o,height:u})))break;p=v(p)}return d}},e.prototype._getRootRect=function(){var e;if(this.root)e=b(this.root);else{var t=m.documentElement,r=m.body;e={top:0,left:0,right:t.clientWidth||r.clientWidth,width:t.clientWidth||r.clientWidth,bottom:t.clientHeight||r.clientHeight,height:t.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(r){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?r.width:r.height)/100}),t={top:r.top-e[0],right:r.right+e[1],bottom:r.bottom+e[2],left:r.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var r=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(r!==i)for(var a=0;a<this.thresholds.length;a++){var n=this.thresholds[a];if(n==r||n==i||n<r!=n<i)return!0}},e.prototype._rootIsInDom=function(){return!this.root||a(m,this.root)},e.prototype._rootContainsTarget=function(e){return a(this.root||m,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=e,window.IntersectionObserverEntry=u}function u(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,r=t.width*t.height,i=this.intersectionRect,a=i.width*i.height;this.intersectionRatio=r?Number((a/r).toFixed(4)):this.isIntersecting?1:0}function e(e,t){var r=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(e,t){var r=null;return function(){r=r||setTimeout(function(){e(),r=null},t)}}(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(e,t,r,i){"function"==typeof e.addEventListener?e.addEventListener(t,r,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,r)}function i(e,t,r,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,r,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,r)}function b(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(e,t){for(var r=t;r;){if(r==e)return!0;r=v(r)}return!1}function v(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}}()},{}],247:[function(e,t,r){"use strict";e("../internals/export")({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},{"../internals/export":90}],242:[function(e,t,r){"use strict";var i=e("../internals/export"),a=e("../internals/is-pure"),n=e("../internals/collection-delete-all");i({target:"WeakMap",proto:!0,real:!0,forced:a},{deleteAll:function(){return n.apply(this,arguments)}})},{"../internals/collection-delete-all":63,"../internals/export":90,"../internals/is-pure":118}],237:[function(e,t,r){"use strict";function i(t){return function(e){return t(this,arguments.length?e:void 0)}}var a,n=e("../internals/global"),s=e("../internals/redefine-all"),l=e("../internals/internal-metadata"),o=e("../internals/collection"),u=e("../internals/collection-weak"),d=e("../internals/is-object"),p=e("../internals/internal-state").enforce,c=e("../internals/native-weak-map"),h=!n.ActiveXObject&&"ActiveXObject"in n,f=Object.isExtensible,m=t.exports=o("WeakMap",i,u);if(c&&h){a=u.getConstructor(i,"WeakMap",!0),l.enable();var b=m.prototype,v=b.delete,y=b.has,g=b.get,_=b.set;s(b,{delete:function(e){if(!d(e)||f(e))return v.call(this,e);var t=p(this);return t.frozen||(t.frozen=new a),v.call(this,e)||t.frozen.delete(e)},has:function(e){if(!d(e)||f(e))return y.call(this,e);var t=p(this);return t.frozen||(t.frozen=new a),y.call(this,e)||t.frozen.has(e)},get:function(e){if(!d(e)||f(e))return g.call(this,e);var t=p(this);return t.frozen||(t.frozen=new a),y.call(this,e)?g.call(this,e):t.frozen.get(e)},set:function(e,t){if(d(e)&&!f(e)){var r=p(this);r.frozen||(r.frozen=new a),y.call(this,e)?_.call(this,e,t):r.frozen.set(e,t)}else _.call(this,e,t);return this}})}},{"../internals/collection":65,"../internals/collection-weak":64,"../internals/global":101,"../internals/internal-metadata":110,"../internals/internal-state":111,"../internals/is-object":117,"../internals/native-weak-map":129,"../internals/redefine-all":154}],236:[function(e,t,r){e("../internals/define-well-known-symbol")("replace")},{"../internals/define-well-known-symbol":74}],234:[function(e,t,r){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":74}],224:[function(e,t,r){"use strict";var i=e("../internals/export"),a=e("../internals/not-a-regexp"),n=e("../internals/require-object-coercible"),s=e("../internals/to-string");i({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e,t){return!!~s(n(this)).indexOf(s(a(e)),1<arguments.length?t:void 0)}})},{"../internals/correct-is-regexp-logic":67,"../internals/export":90,"../internals/not-a-regexp":131,"../internals/require-object-coercible":162,"../internals/to-string":185}],222:[function(e,t,r){var i=e("../internals/descriptors"),a=e("../internals/object-define-property"),n=e("../internals/regexp-flags"),s=e("../internals/fails");i&&s(function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})})&&a.f(RegExp.prototype,"flags",{configurable:!0,get:n})},{"../internals/descriptors":75,"../internals/fails":91,"../internals/object-define-property":137,"../internals/regexp-flags":158}],220:[function(e,t,r){var i=e("../internals/descriptors"),a=e("../internals/global"),n=e("../internals/is-forced"),h=e("../internals/inherit-if-required"),f=e("../internals/create-non-enumerable-property"),s=e("../internals/object-define-property").f,l=e("../internals/object-get-own-property-names").f,m=e("../internals/is-regexp"),b=e("../internals/to-string"),v=e("../internals/regexp-flags"),o=e("../internals/regexp-sticky-helpers"),u=e("../internals/redefine"),d=e("../internals/fails"),y=e("../internals/has"),g=e("../internals/internal-state").enforce,p=e("../internals/set-species"),c=e("../internals/well-known-symbol"),_=e("../internals/regexp-unsupported-dot-all"),C=e("../internals/regexp-unsupported-ncg"),A=c("match"),E=a.RegExp,P=E.prototype,S=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,T=/a/g,k=/a/g,w=new E(T)!==T,j=o.UNSUPPORTED_Y,R=i&&(!w||j||_||C||d(function(){return k[A]=!1,E(T)!=T||E(k)==k||"/a/i"!=E(T,"i")}));if(n("RegExp",R)){function D(t){t in I||s(I,t,{configurable:!0,get:function(){return E[t]},set:function(e){E[t]=e}})}for(var I=function(e,t){var r,i,a,n,s,l,o=this instanceof I,u=m(e),d=void 0===t,p=[],c=e;if(!o&&u&&d&&e.constructor===I)return e;if((u||e instanceof I)&&(e=e.source,d&&(t="flags"in c?c.flags:v.call(c))),e=void 0===e?"":b(e),t=void 0===t?"":b(t),c=e,_&&"dotAll"in T&&(i=!!t&&-1<t.indexOf("s"))&&(t=t.replace(/s/g,"")),r=t,j&&"sticky"in T&&(a=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),C&&(e=(n=function(e){for(var t,r=e.length,i=0,a="",n=[],s={},l=!1,o=!1,u=0,d="";i<=r;i++){if("\\"===(t=e.charAt(i)))t+=e.charAt(++i);else if("]"===t)l=!1;else if(!l)switch(!0){case"["===t:l=!0;break;case"("===t:S.test(e.slice(i+1))&&(i+=2,o=!0),a+=t,u++;continue;case">"===t&&o:if(""===d||y(s,d))throw new SyntaxError("Invalid capture group name");s[d]=!0,n.push([d,u]),o=!1,d="";continue}o?d+=t:a+=t}return[a,n]}(e))[0],p=n[1]),s=h(E(e,t),o?this:P,I),(i||a||p.length)&&(l=g(s),i&&(l.dotAll=!0,l.raw=I(function(e){for(var t,r=e.length,i=0,a="",n=!1;i<=r;i++)"\\"!==(t=e.charAt(i))?n||"."!==t?("["===t?n=!0:"]"===t&&(n=!1),a+=t):a+="[\\s\\S]":a+=t+e.charAt(++i);return a}(e),r)),a&&(l.sticky=!0),p.length&&(l.groups=p)),e!==c)try{f(s,"source",""===c?"(?:)":c)}catch(e){}return s},O=l(E),L=0;O.length>L;)D(O[L++]);(P.constructor=I).prototype=P,u(a,"RegExp",I)}p("RegExp")},{"../internals/create-non-enumerable-property":70,"../internals/descriptors":75,"../internals/fails":91,"../internals/global":101,"../internals/has":102,"../internals/inherit-if-required":108,"../internals/internal-state":111,"../internals/is-forced":116,"../internals/is-regexp":119,"../internals/object-define-property":137,"../internals/object-get-own-property-names":140,"../internals/redefine":155,"../internals/regexp-flags":158,"../internals/regexp-sticky-helpers":159,"../internals/regexp-unsupported-dot-all":160,"../internals/regexp-unsupported-ncg":161,"../internals/set-species":165,"../internals/to-string":185,"../internals/well-known-symbol":190}],208:[function(e,t,r){var i=e("../internals/export"),a=e("../internals/object-to-array").entries;i({target:"Object",stat:!0},{entries:function(e){return a(e)}})},{"../internals/export":90,"../internals/object-to-array":147}],206:[function(e,t,r){"use strict";function i(e){if(p(e))throw TypeError("Cannot convert a Symbol value to a number");var t,r,i,a,n,s,l,o,u=c(e,"number");if("string"==typeof u&&2<u.length)if(43===(t=(u=y(u)).charCodeAt(0))||45===t){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+u}for(s=(n=u.slice(2)).length,l=0;l<s;l++)if((o=n.charCodeAt(l))<48||a<o)return NaN;return parseInt(n,i)}return+u}var a=e("../internals/descriptors"),n=e("../internals/global"),s=e("../internals/is-forced"),l=e("../internals/redefine"),o=e("../internals/has"),u=e("../internals/classof-raw"),d=e("../internals/inherit-if-required"),p=e("../internals/is-symbol"),c=e("../internals/to-primitive"),h=e("../internals/fails"),f=e("../internals/object-create"),m=e("../internals/object-get-own-property-names").f,b=e("../internals/object-get-own-property-descriptor").f,v=e("../internals/object-define-property").f,y=e("../internals/string-trim").trim,g="Number",_=n[g],C=_.prototype,A=u(f(C))==g;if(s(g,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var E,P=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof P&&(A?h(function(){C.valueOf.call(r)}):u(r)!=g)?d(new _(i(t)),r,P):i(t)},S=a?m(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;S.length>T;T++)o(_,E=S[T])&&!o(P,E)&&v(P,E,b(_,E));(P.prototype=C).constructor=P,l(n,g,P)}},{"../internals/classof-raw":61,"../internals/descriptors":75,"../internals/fails":91,"../internals/global":101,"../internals/has":102,"../internals/inherit-if-required":108,"../internals/is-forced":116,"../internals/is-symbol":120,"../internals/object-create":135,"../internals/object-define-property":137,"../internals/object-get-own-property-descriptor":138,"../internals/object-get-own-property-names":140,"../internals/redefine":155,"../internals/string-trim":175,"../internals/to-primitive":182}],205:[function(e,t,r){var i=e("../internals/descriptors"),a=e("../internals/function-name").EXISTS,n=e("../internals/object-define-property").f,s=Function.prototype,l=s.toString,o=/^\s*function ([^ (]*)/;i&&!a&&n(s,"name",{configurable:!0,get:function(){try{return l.call(this).match(o)[1]}catch(e){return""}}})},{"../internals/descriptors":75,"../internals/function-name":95,"../internals/object-define-property":137}],200:[function(e,t,r){var i=e("../internals/export"),a=e("../internals/array-last-index-of");i({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},{"../internals/array-last-index-of":53,"../internals/export":90}],196:[function(e,t,r){"use strict";var i=e("../internals/export"),a=e("../internals/array-includes").includes,n=e("../internals/add-to-unscopables");i({target:"Array",proto:!0},{includes:function(e,t){return a(this,e,1<arguments.length?t:void 0)}}),n("includes")},{"../internals/add-to-unscopables":45,"../internals/array-includes":51,"../internals/export":90}],147:[function(e,t,r){function i(l){return function(e){for(var t,r=d(e),i=u(r),a=i.length,n=0,s=[];n<a;)t=i[n++],o&&!p.call(r,t)||s.push(l?[t,r[t]]:r[t]);return s}}var o=e("../internals/descriptors"),u=e("../internals/object-keys"),d=e("../internals/to-indexed-object"),p=e("../internals/object-property-is-enumerable").f;t.exports={entries:i(!0),values:i(!1)}},{"../internals/descriptors":75,"../internals/object-keys":144,"../internals/object-property-is-enumerable":145,"../internals/to-indexed-object":178}],65:[function(e,t,r){"use strict";var b=e("../internals/export"),v=e("../internals/global"),y=e("../internals/is-forced"),g=e("../internals/redefine"),_=e("../internals/internal-metadata"),C=e("../internals/iterate"),A=e("../internals/an-instance"),E=e("../internals/is-callable"),P=e("../internals/is-object"),S=e("../internals/fails"),T=e("../internals/check-correctness-of-iteration"),k=e("../internals/set-to-string-tag"),w=e("../internals/inherit-if-required");t.exports=function(i,e,t){function r(e){var r=o[e];g(o,e,"add"==e?function(e){return r.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(n&&!P(e))&&r.call(this,0===e?0:e)}:"get"==e?function(e){return n&&!P(e)?void 0:r.call(this,0===e?0:e)}:"has"==e?function(e){return!(n&&!P(e))&&r.call(this,0===e?0:e)}:function(e,t){return r.call(this,0===e?0:e,t),this})}var a=-1!==i.indexOf("Map"),n=-1!==i.indexOf("Weak"),s=a?"set":"add",l=v[i],o=l&&l.prototype,u=l,d={};if(y(i,!E(l)||!(n||o.forEach&&!S(function(){(new l).entries().next()}))))u=t.getConstructor(e,i,a,s),_.enable();else if(y(i,!0)){var p=new u,c=p[s](n?{}:-0,1)!=p,h=S(function(){p.has(1)}),f=T(function(e){new l(e)}),m=!n&&S(function(){for(var e=new l,t=5;t--;)e[s](t,t);return!e.has(-0)});f||(((u=e(function(e,t){A(e,u,i);var r=w(new l,e,u);return null!=t&&C(t,r[s],{that:r,AS_ENTRIES:a}),r})).prototype=o).constructor=u),(h||m)&&(r("delete"),r("has"),a&&r("get")),(m||c)&&r(s),n&&o.clear&&delete o.clear}return d[i]=u,b({global:!0,forced:u!=l},d),k(u,i),n||t.setStrong(u,i,a),u}},{"../internals/an-instance":47,"../internals/check-correctness-of-iteration":60,"../internals/export":90,"../internals/fails":91,"../internals/global":101,"../internals/inherit-if-required":108,"../internals/internal-metadata":110,"../internals/is-callable":114,"../internals/is-forced":116,"../internals/is-object":117,"../internals/iterate":121,"../internals/redefine":155,"../internals/set-to-string-tag":166}],108:[function(e,t,r){var n=e("../internals/is-callable"),s=e("../internals/is-object"),l=e("../internals/object-set-prototype-of");t.exports=function(e,t,r){var i,a;return l&&n(i=t.constructor)&&i!==r&&s(a=i.prototype)&&a!==r.prototype&&l(e,a),e}},{"../internals/is-callable":114,"../internals/is-object":117,"../internals/object-set-prototype-of":146}],64:[function(e,t,r){"use strict";function o(e){return e.frozen||(e.frozen=new g)}function i(e,t){return s(e.entries,function(e){return e[0]===t})}var u=e("../internals/redefine-all"),d=e("../internals/internal-metadata").getWeakData,p=e("../internals/an-object"),c=e("../internals/is-object"),h=e("../internals/an-instance"),f=e("../internals/iterate"),a=e("../internals/array-iteration"),m=e("../internals/has"),n=e("../internals/internal-state"),b=n.set,v=n.getterFor,s=a.find,l=a.findIndex,y=0,g=function(){this.entries=[]};g.prototype={get:function(e){var t=i(this,e);if(t)return t[1]},has:function(e){return!!i(this,e)},set:function(e,t){var r=i(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(t){var e=l(this.entries,function(e){return e[0]===t});return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(e,r,i,a){function n(e,t,r){var i=l(e),a=d(p(t),!0);return!0===a?o(i).set(t,r):a[i.id]=r,e}var s=e(function(e,t){h(e,s,r),b(e,{type:r,id:y++,frozen:void 0}),null!=t&&f(t,e[a],{that:e,AS_ENTRIES:i})}),l=v(r);return u(s.prototype,{delete:function(e){var t=l(this);if(!c(e))return!1;var r=d(e);return!0===r?o(t).delete(e):r&&m(r,t.id)&&delete r[t.id]},has:function(e){var t=l(this);if(!c(e))return!1;var r=d(e);return!0===r?o(t).has(e):r&&m(r,t.id)}}),u(s.prototype,i?{get:function(e){var t=l(this);if(c(e)){var r=d(e);return!0===r?o(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return n(this,e,t)}}:{add:function(e){return n(this,e,!0)}}),s}}},{"../internals/an-instance":47,"../internals/an-object":48,"../internals/array-iteration":52,"../internals/has":102,"../internals/internal-metadata":110,"../internals/internal-state":111,"../internals/is-object":117,"../internals/iterate":121,"../internals/redefine-all":154}],63:[function(e,t,r){"use strict";var s=e("../internals/a-callable"),l=e("../internals/an-object");t.exports=function(){for(var e,t=l(this),r=s(t.delete),i=!0,a=0,n=arguments.length;a<n;a++)e=r.call(t,arguments[a]),i=i&&e;return!!i}},{"../internals/a-callable":42,"../internals/an-object":48}],53:[function(e,t,r){"use strict";var n=e("../internals/to-indexed-object"),s=e("../internals/to-integer"),l=e("../internals/to-length"),i=e("../internals/array-method-is-strict"),o=Math.min,u=[].lastIndexOf,d=!!u&&1/[1].lastIndexOf(1,-0)<0,a=i("lastIndexOf"),p=d||!a;t.exports=p?function(e,t){if(d)return u.apply(this,arguments)||0;var r=n(this),i=l(r.length),a=i-1;for(1<arguments.length&&(a=o(a,s(t))),a<0&&(a=i+a);0<=a;a--)if(a in r&&r[a]===e)return a||0;return-1}:u},{"../internals/array-method-is-strict":55,"../internals/to-indexed-object":178,"../internals/to-integer":179,"../internals/to-length":180}],27:[function(e,t,r){var i=e("./getPrototypeOf"),a=e("./setPrototypeOf"),n=e("./isNativeFunction"),s=e("./construct");function l(e){var r="function"==typeof Map?new Map:void 0;return t.exports=l=function(e){if(null===e||!n(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},l(e)}t.exports=l},{"./construct":8,"./getPrototypeOf":12,"./isNativeFunction":16,"./setPrototypeOf":22}],25:[function(e,t,r){var i=e("./arrayWithoutHoles"),a=e("./iterableToArray"),n=e("./nonIterableSpread");t.exports=function(e){return i(e)||a(e)||n()}},{"./arrayWithoutHoles":4,"./iterableToArray":17,"./nonIterableSpread":20}],20:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},{}],17:[function(e,t,r){t.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},{}],16:[function(e,t,r){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},{}],8:[function(e,i,t){var n=e("./setPrototypeOf");function a(e,t,r){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?i.exports=a=function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&n(a,r.prototype),a}:i.exports=a=Reflect.construct,a.apply(null,arguments)}i.exports=a},{"./setPrototypeOf":22}],4:[function(e,t,r){t.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},{}]},{},[364]);