var e={d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{t:function(){return l}});var r=/^http(.*)$/;function o(e){var t=e;r.test(t)||(t=location.protocol+t);var o=new URL(t),n=o.pathname.split("/").slice(-1)[0];return"".concat(o.host,":").concat(n)}function n(e){return new Promise(((t,r)=>setTimeout(r,e)))}function i(e,t){return e[Element.prototype.matches?"matches":"msMatchesSelector"](t)}function s(e){var t={childList:!0},r=new MutationObserver(c.bind(null,e));r.observe(document.head,t),r.observe(document.body,t)}function c(e,t){t.forEach((t=>{Array.from(t.addedNodes).forEach((t=>{if(1===t.nodeType&&i(t,"script[src]")){var r=o(t.src);e.add(r)}})),Array.from(t.removedNodes).forEach((t=>{if(1===t.nodeType&&i(t,"script[src]")){var r=o(t.src);e.delete(r)}}))}))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof e||Array.isArray(e))return null;var t=Object.getPrototypeOf(e);return Object.getOwnPropertyNames(t).sort().join(":")}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{constructor(e){if(u(this,"requestQueue",new Map),u(this,"loadedScripts",new Set),u(this,"version","1.1.0"),u(this,"cmd",[]),a(e)===a(this))return e;Array.from(document.scripts).forEach((e=>{if(i(e,"script[src]")){var t=o(e.src);this.loadedScripts.add(t)}})),s(this.loadedScripts),this.cmd=e&&e.cmd||[],this.cmd.push=e=>{"function"==typeof e&&e()}}isLoaded(e){var t=o(e);return this.loadedScripts.has(t)&&!this.requestQueue.has(t)}isRequested(e){var t=o(e);return this.requestQueue.has(t)}inject(e){var{timeout:t,ordered:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o(e);return this.isRequested(e)?this.requestQueue.get(i):this.isLoaded(e)?Promise.resolve(e):(this.requestQueue.set(i,d.injectScript(e,document.head,r).then((e=>(this.requestQueue.delete(i),e)))),t?Promise.race([n(t),this.requestQueue.get(i)]).catch((()=>{throw this.requestQueue.delete(i),this.loadedScripts.delete(i),new Error('ScriptInjector: Timed out loading "'.concat(e,'" after ').concat(t," ms"))})):this.requestQueue.get(i))}_flushQueue(){if(Array.isArray(this.cmd))for(;this.cmd.length;){var e=this.cmd.pop();"function"==typeof e&&e()}}static injectScript(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.createElement("script");return o.src=e,o.async=!r,new Promise(((r,n)=>{void 0!==o.onreadystatechange?o.onreadystatechange=function(){"loaded"===this.readyState&&(o.onreadystatechange=null,o=null,r(e))}:o.onload=o.onerror=function(i){if("error"===i.type)return n('ScriptInjector: Error loading script "'.concat(e,'"')),t.removeChild(o),o.onload=null,o.onerror=null,void(o=null);o.onload=null,o.onerror=null,o=null,r(e)},t.appendChild(o)}))}}var l=new d(window.Spritz);window.Spritz=l,window.Spritz._flushQueue();var h=t.t;export{h as Spritz};